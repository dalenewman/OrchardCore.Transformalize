(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.registerHelper("fold","markdown",function(t,i){function o(i){var r=t.getTokenTypeAt(n.Pos(i,0));return r&&/\bheader\b/.test(r)}function s(n,t,i){var r=t&&t.match(/^#+/);return r&&o(n)?r[0].length:(r=i&&i.match(/^[=\-]+\s*$/),r&&o(n+1))?i[0]=="="?1:2:e}var e=100,h=t.getLine(i.line),u=t.getLine(i.line+1),c=s(i.line,h,u);if(c===e)return undefined;for(var l=t.lastLine(),r=i.line,f=t.getLine(r+2);r<l;){if(s(r+1,u,f)<=c)break;++r;u=f;f=t.getLine(r+2)}return{from:n.Pos(i.line,h.length),to:n.Pos(r,t.getLine(r).length)}})});