(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.registerGlobalHelper("fold","comment",function(n){return n.blockCommentStart&&n.blockCommentEnd},function(t,i){var d=t.getModeAt(i),c=d.blockCommentStart,l=d.blockCommentEnd,u,a,v,s,y,r,b,g,p,k,e,o,f,h,w;if(c&&l){for(u=i.line,a=t.getLine(u),s=i.ch,y=0;;){if(r=s<=0?-1:a.lastIndexOf(c,s-1),r==-1){if(y==1)return;y=1;s=a.length;continue}if(y==1&&r<i.ch)return;if(/comment/.test(t.getTokenTypeAt(n.Pos(u,r+1)))&&(r==0||a.slice(r-l.length,r)==l||!/comment/.test(t.getTokenTypeAt(n.Pos(u,r))))){v=r+c.length;break}s=r-1}b=1;g=t.lastLine();n:for(e=u;e<=g;++e)for(o=t.getLine(e),f=e==u?v:0;;){if(h=o.indexOf(c,f),w=o.indexOf(l,f),h<0&&(h=o.length),w<0&&(w=o.length),f=Math.min(h,w),f==o.length)break;if(f==h)++b;else if(!--b){p=e;k=f;break n}++f}if(p!=null&&(u!=p||k!=v))return{from:n.Pos(u,v),to:n.Pos(p,k)}}})});