(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){function t(t,i,r){var f=t.getWrapperElement(),u;return u=f.appendChild(document.createElement("div")),u.className=r?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top",typeof i=="string"?u.innerHTML=i:u.appendChild(i),n.addClass(f,"dialog-opened"),u}function i(n,t){n.state.currentNotificationClose&&n.state.currentNotificationClose();n.state.currentNotificationClose=t}n.defineExtension("openDialog",function(r,u,f){function o(t){if(typeof t=="string")e.value=t;else{if(c)return;if(c=!0,n.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),l.focus(),f.onClose)f.onClose(s)}}var e,h;f||(f={});i(this,null);var s=t(this,r,f.bottom),c=!1,l=this;if(e=s.getElementsByTagName("input")[0],e){if(e.focus(),f.value&&(e.value=f.value,f.selectValueOnOpen!==!1&&e.select()),f.onInput)n.on(e,"input",function(n){f.onInput(n,e.value,o)});if(f.onKeyUp)n.on(e,"keyup",function(n){f.onKeyUp(n,e.value,o)});n.on(e,"keydown",function(t){f&&f.onKeyDown&&f.onKeyDown(t,e.value,o)||((t.keyCode==27||f.closeOnEnter!==!1&&t.keyCode==13)&&(e.blur(),n.e_stop(t),o()),t.keyCode==13&&u(e.value,t))});if(f.closeOnBlur!==!1)n.on(e,"blur",o)}else if(h=s.getElementsByTagName("button")[0]){n.on(h,"click",function(){o();l.focus()});if(f.closeOnBlur!==!1)n.on(h,"blur",o);h.focus()}return o});n.defineExtension("openConfirm",function(r,u,f){function v(){l||(l=!0,n.rmClass(o.parentNode,"dialog-opened"),o.parentNode.removeChild(o),a.focus())}var e,s;i(this,null);var o=t(this,r,f&&f.bottom),h=o.getElementsByTagName("button"),l=!1,a=this,c=1;for(h[0].focus(),e=0;e<h.length;++e){s=h[e],function(t){n.on(s,"click",function(i){n.e_preventDefault(i);v();t&&t(a)})}(u[e]);n.on(s,"blur",function(){--c;setTimeout(function(){c<=0&&v()},200)});n.on(s,"focus",function(){++c})}});n.defineExtension("openNotification",function(r,u){function e(){o||(o=!0,clearTimeout(s),n.rmClass(f.parentNode,"dialog-opened"),f.parentNode.removeChild(f))}i(this,e);var f=t(this,r,u&&u.bottom),o=!1,s,h=u&&typeof u.duration!="undefined"?u.duration:5e3;n.on(f,"click",function(t){n.e_preventDefault(t);e()});return h&&(s=setTimeout(e,h)),e})});