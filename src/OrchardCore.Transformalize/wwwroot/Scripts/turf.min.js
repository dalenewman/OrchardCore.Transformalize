!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).turf={})}(this,function(n){"use strict";function yu(n,t,i){void 0===i&&(i={});var r={type:"Feature"};return(0===i.id||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=t||{},r.geometry=n,r}function oet(n,t){switch(n){case"Point":return ft(t).geometry;case"LineString":return gi(t).geometry;case"Polygon":return ot(t).geometry;case"MultiPoint":return pw(t).geometry;case"MultiLineString":return ra(t).geometry;case"MultiPolygon":return eo(t).geometry;default:throw new Error(n+" is invalid");}}function ft(n,t,i){if(void 0===i&&(i={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!tf(n[0])||!tf(n[1]))throw new Error("coordinates must contain numbers");return yu({type:"Point",coordinates:n},t,i)}function set(n,t,i){return void 0===i&&(i={}),b(n.map(function(n){return ft(n,t)}),i)}function ot(n,t,i){var f,e,r,u;for(void 0===i&&(i={}),f=0,e=n;f<e.length;f++){if(r=e[f],r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(u=0;u<r[r.length-1].length;u++)if(r[r.length-1][u]!==r[0][u])throw new Error("First and last Position are not equivalent.");}return yu({type:"Polygon",coordinates:n},t,i)}function het(n,t,i){return void 0===i&&(i={}),b(n.map(function(n){return ot(n,t)}),i)}function gi(n,t,i){if(void 0===i&&(i={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return yu({type:"LineString",coordinates:n},t,i)}function cet(n,t,i){return void 0===i&&(i={}),b(n.map(function(n){return gi(n,t)}),i)}function b(n,t){void 0===t&&(t={});var i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=n,i}function ra(n,t,i){return void 0===i&&(i={}),yu({type:"MultiLineString",coordinates:n},t,i)}function pw(n,t,i){return void 0===i&&(i={}),yu({type:"MultiPoint",coordinates:n},t,i)}function eo(n,t,i){return void 0===i&&(i={}),yu({type:"MultiPolygon",coordinates:n},t,i)}function dn(n,t,i){return void 0===i&&(i={}),yu({type:"GeometryCollection",geometries:n},t,i)}function aet(n,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,t||0);return Math.round(n*i)/i}function vy(n,t){void 0===t&&(t="kilometers");var i=gk[t];if(!i)throw new Error(t+" units is invalid");return n*i}function sv(n,t){void 0===t&&(t="kilometers");var i=gk[t];if(!i)throw new Error(t+" units is invalid");return n/i}function td(n,t){return ua(sv(n,t))}function hv(n){var t=n%360;return t<0&&(t+=360),t}function ua(n){return 180*(n%(2*Math.PI))/Math.PI}function nf(n){return n%360*Math.PI/180}function cv(n,t,i){if(void 0===t&&(t="kilometers"),void 0===i&&(i="kilometers"),!(n>=0))throw new Error("length must be a positive number");return vy(sv(n,t),i)}function vet(n,t,i){var r,u;if(void 0===t&&(t="meters"),void 0===i&&(i="kilometers"),!(n>=0))throw new Error("area must be a positive number");if(r=nd[t],!r)throw new Error("invalid original units");if(u=nd[i],!u)throw new Error("invalid final units");return n/r*u}function tf(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}function tr(n){return!!n&&n.constructor===Object}function yet(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(4!==n.length&&6!==n.length)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(n){if(!tf(n))throw new Error("bbox must only contain numbers");})}function pet(n){if(!n)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");}function ru(n,t,i){var y,f,h,o;if(null!==n)for(var r,e,v,l,w,u,a,b,p=0,s=0,k=n.type,d="FeatureCollection"===k,g="Feature"===k,nt=d?n.features.length:1,c=0;c<nt;c++)for(w=(b=!!(a=d?n.features[c].geometry:g?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1,y=0;y<w;y++)if(f=0,h=0,null!==(l=b?a.geometries[y]:a)){u=l.coordinates;o=l.type;switch(p=!i||"Polygon"!==o&&"MultiPolygon"!==o?0:1,o){case null:break;case"Point":if(!1===t(u,s,c,f,h))return!1;s++;f++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===t(u[r],s,c,f,h))return!1;s++;"MultiPoint"===o&&f++}"LineString"===o&&f++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(e=0;e<u[r].length-p;e++){if(!1===t(u[r][e],s,c,f,h))return!1;s++}"MultiLineString"===o&&f++;"Polygon"===o&&h++}"Polygon"===o&&f++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(h=0,e=0;e<u[r].length;e++){for(v=0;v<u[r][e].length-p;v++){if(!1===t(u[r][e][v],s,c,f,h))return!1;s++}h++}f++}break;case"GeometryCollection":for(r=0;r<l.geometries.length;r++)if(!1===ru(l.geometries[r],t,i))return!1;break;default:throw new Error("Unknown Geometry Type");}}}function gn(n,t,i,r){var u=i;return ru(n,function(n,r,f,e,o){u=0===r&&void 0===i?n:t(u,n,r,f,e,o)},r),u}function ntt(n,t){var i;switch(n.type){case"FeatureCollection":for(i=0;i<n.features.length&&!1!==t(n.features[i].properties,i);i++);break;case"Feature":t(n.properties,0)}}function wet(n,t,i){var r=i;return ntt(n,function(n,u){r=0===u&&void 0===i?n:t(r,n,u)}),r}function ki(n,t){if("Feature"===n.type)t(n,0);else if("FeatureCollection"===n.type)for(var i=0;i<n.features.length&&!1!==t(n.features[i],i);i++);}function ttt(n,t,i){var r=i;return ki(n,function(n,u){r=0===u&&void 0===i?n:t(r,n,u)}),r}function yy(n){var t=[];return ru(n,function(n){t.push(n)}),t}function oo(n,t){for(var e,o,u,v,r,y,s,h,c,l=0,f="FeatureCollection"===n.type,a="Feature"===n.type,p=f?n.features.length:1,i=0;i<p;i++){for(r=f?n.features[i].geometry:a?n.geometry:n,s=f?n.features[i].properties:a?n.properties:{},h=f?n.features[i].bbox:a?n.bbox:void 0,c=f?n.features[i].id:a?n.id:void 0,v=(y=!!r&&"GeometryCollection"===r.type)?r.geometries.length:1,o=0;o<v;o++)if(null!==(u=y?r.geometries[o]:r))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(u,l,s,h,c))return!1;break;case"GeometryCollection":for(e=0;e<u.geometries.length;e++)if(!1===t(u.geometries[e],l,s,h,c))return!1;break;default:throw new Error("Unknown Geometry Type");}else if(!1===t(null,l,s,h,c))return!1;l++}}function itt(n,t,i){var r=i;return oo(n,function(n,u,f,e,o){r=0===u&&void 0===i?n:t(r,n,u,f,e,o)}),r}function sf(n,t){oo(n,function(n,i,r,u,f){var o,s=null===n?null:n.type,e,h;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(yu(n,r,{bbox:u,id:f}),i,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(e=0;e<n.coordinates.length;e++)if(h=n.coordinates[e],!1===t(yu({type:o,coordinates:h},r),i,e))return!1})}function bet(n,t,i){var r=i;return sf(n,function(n,u,f){r=0===u&&0===f&&void 0===i?n:t(r,n,u,f)}),r}function fl(n,t){sf(n,function(n,i,r){var f=0,e;if(n.geometry&&(e=n.geometry.type,"Point"!==e&&"MultiPoint"!==e)){var u,o=0,s=0,h=0;return!1!==ru(n,function(e,c,l,a,v){if(void 0===u||i>o||a>s||v>h)return u=e,o=i,s=a,h=v,void(f=0);var y=gi([u,e],n.properties);if(!1===t(y,i,r,v,f))return!1;f++;u=e})&&void 0}})}function rtt(n,t,i){var r=i,u=!1;return fl(n,function(n,f,e,o,s){r=!1===u&&void 0===i?n:t(r,n,f,e,o,s);u=!0}),r}function utt(n,t){if(!n)throw new Error("geojson is required");sf(n,function(n,i,r){var e,f,u;if(null!==n.geometry){e=n.geometry.type;f=n.geometry.coordinates;switch(e){case"LineString":if(!1===t(n,i,r,0,0))return!1;break;case"Polygon":for(u=0;u<f.length;u++)if(!1===t(gi(f[u],n.properties),i,r,u))return!1}}})}function ftt(n,t,i){var r=i;return utt(n,function(n,u,f,e){r=0===u&&void 0===i?n:t(r,n,u,f,e)}),r}function ket(n,t){var r;if(!tr(t=t||{}))throw new Error("options is invalid");var o,s=t.featureIndex||0,u=t.multiFeatureIndex||0,f=t.geometryIndex||0,i=t.segmentIndex||0,e=t.properties;switch(n.type){case"FeatureCollection":s<0&&(s=n.features.length+s);e=e||n.features[s].properties;o=n.features[s].geometry;break;case"Feature":e=e||n.properties;o=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=n;break;default:throw new Error("geojson is invalid");}if(null===o)return null;r=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return i<0&&(i=r.length+i-1),gi([r[i],r[i+1]],e,t);case"Polygon":return f<0&&(f=r.length+f),i<0&&(i=r[f].length+i-1),gi([r[f][i],r[f][i+1]],e,t);case"MultiLineString":return u<0&&(u=r.length+u),i<0&&(i=r[u].length+i-1),gi([r[u][i],r[u][i+1]],e,t);case"MultiPolygon":return u<0&&(u=r.length+u),f<0&&(f=r[u].length+f),i<0&&(i=r[u][f].length-i-1),gi([r[u][f][i],r[u][f][i+1]],e,t)}throw new Error("geojson is invalid");}function det(n,t){var r;if(!tr(t=t||{}))throw new Error("options is invalid");var o,s=t.featureIndex||0,u=t.multiFeatureIndex||0,f=t.geometryIndex||0,i=t.coordIndex||0,e=t.properties;switch(n.type){case"FeatureCollection":s<0&&(s=n.features.length+s);e=e||n.features[s].properties;o=n.features[s].geometry;break;case"Feature":e=e||n.properties;o=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=n;break;default:throw new Error("geojson is invalid");}if(null===o)return null;r=o.coordinates;switch(o.type){case"Point":return ft(r,e,t);case"MultiPoint":return u<0&&(u=r.length+u),ft(r[u],e,t);case"LineString":return i<0&&(i=r.length+i),ft(r[i],e,t);case"Polygon":return f<0&&(f=r.length+f),i<0&&(i=r[f].length+i),ft(r[f][i],e,t);case"MultiLineString":return u<0&&(u=r.length+u),i<0&&(i=r[u].length+i),ft(r[u][i],e,t);case"MultiPolygon":return u<0&&(u=r.length+u),f<0&&(f=r[u].length+f),i<0&&(i=r[u][f].length-i),ft(r[u][f][i],e,t)}throw new Error("geojson is invalid");}function ou(n){var t=[1/0,1/0,-1/0,-1/0];return ru(n,function(n){t[0]>n[0]&&(t[0]=n[0]);t[1]>n[1]&&(t[1]=n[1]);t[2]<n[0]&&(t[2]=n[0]);t[3]<n[1]&&(t[3]=n[1])}),t}function er(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if("Feature"===n.type&&null!==n.geometry&&"Point"===n.geometry.type)return n.geometry.coordinates;if("Point"===n.type)return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers");}function d(n){if(Array.isArray(n))return n;if("Feature"===n.type){if(null!==n.geometry)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array");}function ett(n){if(n.length>1&&tf(n[0])&&tf(n[1]))return!0;if(Array.isArray(n[0])&&n[0].length)return ett(n[0]);throw new Error("coordinates must only contain numbers");}function get(n,t,i){if(!t||!i)throw new Error("type and name required");if(!n||n.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+n.type);}function ww(n,t,i){if(!n)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!n.geometry||n.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+n.geometry.type);}function el(n,t,i){var u,f,r;if(!n)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!n||"FeatureCollection"!==n.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(u=0,f=n.features;u<f.length;u++){if(r=f[u],!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!r.geometry||r.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+r.geometry.type);}}function hr(n){return"Feature"===n.type?n.geometry:n}function de(n){return"FeatureCollection"===n.type?"FeatureCollection":"GeometryCollection"===n.type?"GeometryCollection":"Feature"===n.type&&null!==n.geometry?n.geometry.type:n.type}function vwt(n){if(null==n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function ywt(n,t,i){var e,u,f,r,o;for(i=i||{},e=Object.keys(tot),u=0;u<e.length;u++)f=e[u],r=i[f],r=null!=r?r:tot[f],id[f]=r;return id.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+t),o=function(n){var t=[],i=0,r=1e-7;return n.cells.forEach(function(u,f){u.forEach(function(u,e){var o,c,h,l;if(void 0!==u&&5!==(l=u).cval&&10!==l.cval&&!iot(u)){if(o=function(n,t,i){var e,o,w=n.length,c=[],v=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],y=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],p=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],f=n[t][i],r=f.cval,u=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][r],s=stt(f,u);c.push([i+s[0],t+s[1]]);u=p[r];s=stt(f,u);c.push([i+s[0],t+s[1]]);rot(f);for(var l=i+v[r],h=t+y[r],a=r;l>=0&&h>=0&&h<w&&(l!=i||h!=t)&&void 0!==(f=n[h][l]);){if(0===(r=f.cval)||15===r)return{path:c,info:"mergeable"};u=p[r];e=v[r];o=y[r];5!==r&&10!==r||(5===r?f.flipped?-1===y[a]?(u="left",e=-1,o=0):(u="right",e=1,o=0):-1===v[a]&&(u="bottom",e=0,o=-1):10===r&&(f.flipped?-1===v[a]?(u="top",e=0,o=1):(u="bottom",e=0,o=-1):1===y[a]&&(u="left",e=-1,o=0)));s=stt(f,u);c.push([l+s[0],h+s[1]]);rot(f);l+=e;h+=o;a=r}return{path:c,info:"closed"}}(n.cells,f,e),c=!1,"mergeable"===o.info)for(var a=o.path[o.path.length-1][0],v=o.path[o.path.length-1][1],s=i-1;s>=0;s--)if(Math.abs(t[s][0][0]-a)<=r&&Math.abs(t[s][0][1]-v)<=r){for(h=o.path.length-2;h>=0;--h)t[s].unshift(o.path[h]);c=!0;break}c||(t[i++]=o.path)}})}),t}(function(n,t){for(var a,o,s,h,c,v,p,w=n.length-1,b=n[0].length-1,y={rows:w,cols:b,cells:[]},l=0;l<w;++l)for(y.cells[l]=[],a=0;a<b;++a){var i=0,r=n[l+1][a],u=n[l+1][a+1],f=n[l][a+1],e=n[l][a];isNaN(r)||isNaN(u)||isNaN(f)||isNaN(e)||(i|=r>=t?8:0,i|=u>=t?4:0,i|=f>=t?2:0,v=!1,(5==(i|=e>=t?1:0)||10===i)&&(p=(r+u+f+e)/4,5===i&&p<t?(i=10,v=!0):10===i&&p<t&&(i=5,v=!0)),0!==i&&15!==i&&(o=s=h=c=.5,1===i?(h=1-rr(t,r,e),s=1-rr(t,f,e)):2===i?(s=rr(t,e,f),c=1-rr(t,u,f)):3===i?(h=1-rr(t,r,e),c=1-rr(t,u,f)):4===i?(o=rr(t,r,u),c=rr(t,f,u)):5===i?(o=rr(t,r,u),c=rr(t,f,u),s=1-rr(t,f,e),h=1-rr(t,r,e)):6===i?(s=rr(t,e,f),o=rr(t,r,u)):7===i?(h=1-rr(t,r,e),o=rr(t,r,u)):8===i?(h=rr(t,e,r),o=1-rr(t,u,r)):9===i?(s=1-rr(t,f,e),o=1-rr(t,u,r)):10===i?(o=1-rr(t,u,r),c=1-rr(t,u,f),s=rr(t,e,f),h=rr(t,e,r)):11===i?(o=1-rr(t,u,r),c=1-rr(t,u,f)):12===i?(h=rr(t,e,r),c=rr(t,f,u)):13===i?(s=1-rr(t,f,e),c=rr(t,f,u)):14===i?(h=rr(t,e,r),s=rr(t,e,f)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+i),y.cells[l][a]={cval:i,flipped:v,top:o,right:c,bottom:s,left:h}))}return y}(n,t)),"function"==typeof id.successCallback&&id.successCallback(o),o}function rr(n,t,i){return(n-t)/(i-t)}function iot(n){return 0===n.cval||15===n.cval}function rot(n){iot(n)||5===n.cval||10===n.cval||(n.cval=15)}function stt(n,t){return"top"===t?[n.top,1]:"bottom"===t?[n.bottom,0]:"right"===t?[1,n.right]:"left"===t?[0,n.left]:void 0}function pwt(n,t){var u;if(!tr(t=t||{}))throw new Error("options is invalid");var e=t.zProperty||"elevation",c=t.flip,l=t.flags;el(n,"Point","input must contain Points");for(var o=function(n,t){var i={};return ki(n,function(n){var t=d(n)[1];i[t]||(i[t]=[]);i[t].push(n)}),Object.keys(i).map(function(n){return i[n].sort(function(n,t){return d(n)[0]-d(t)[0]})}).sort(function(n,i){return t?d(n[0])[1]-d(i[0])[1]:d(i[0])[1]-d(n[0])[1]})}(n,c),s=[],i=0;i<o.length;i++){for(var h=o[i],f=[],r=0;r<h.length;r++)u=h[r],u.properties[e]?f.push(u.properties[e]):f.push(0),!0===l&&(u.properties.matrixPosition=[i,r]);s.push(f)}return s}function fot(n,t,i,r,u){eot(n,t,i||0,r||n.length-1,u||wwt)}function eot(n,t,i,r,u){for(;r>i;){if(r-i>600){var e=r-i+1,c=t-i+1,l=Math.log(e),s=.5*Math.exp(2*l/3),a=.5*Math.sqrt(l*s*(e-s)/e)*(c-e/2<0?-1:1);eot(n,t,Math.max(i,Math.floor(t-c*s/e+a)),Math.min(r,Math.floor(t+(e-c)*s/e+a)),u)}var h=n[t],o=i,f=r;for(bw(n,i,t),u(n[r],h)>0&&bw(n,i,r);o<f;){for(bw(n,o,f),o++,f--;u(n[o],h)<0;)o++;for(;u(n[f],h)>0;)f--}0===u(n[i],h)?bw(n,i,f):bw(n,++f,r);f<=t&&(i=f+1);t<=f&&(r=f-1)}}function bw(n,t,i){var r=n[t];n[t]=n[i];n[i]=r}function wwt(n,t){return n<t?-1:n>t?1:0}function kw(n,t){if(!(this instanceof kw))return new kw(n,t);this._maxEntries=Math.max(4,n||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));t&&this._initFormat(t);this.clear()}function bwt(n,t,i){if(!i)return t.indexOf(n);for(var r=0;r<t.length;r++)if(i(n,t[r]))return r;return-1}function py(n,t){dw(n,0,n.children.length,t,n)}function dw(n,t,i,r,u){u||(u=wy(null));u.minX=1/0;u.minY=1/0;u.maxX=-1/0;u.maxY=-1/0;for(var f,e=t;e<i;e++)f=n.children[e],gw(u,n.leaf?r(f):f);return u}function gw(n,t){return n.minX=Math.min(n.minX,t.minX),n.minY=Math.min(n.minY,t.minY),n.maxX=Math.max(n.maxX,t.maxX),n.maxY=Math.max(n.maxY,t.maxY),n}function sot(n,t){return n.minX-t.minX}function hot(n,t){return n.minY-t.minY}function ctt(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function rd(n){return n.maxX-n.minX+(n.maxY-n.minY)}function ltt(n,t){return n.minX<=t.minX&&n.minY<=t.minY&&t.maxX<=n.maxX&&t.maxY<=n.maxY}function ud(n,t){return t.minX<=n.maxX&&t.minY<=n.maxY&&t.maxX>=n.minX&&t.maxY>=n.minY}function wy(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cot(n,t,i,r,u){for(var f,e=[t,i];e.length;)(i=e.pop())-(t=e.pop())<=r||(f=t+Math.ceil((i-t)/r/2)*r,htt(n,f,t,i,u),e.push(t,f,f,i))}function fc(n){var t={exports:{}};return n(t,t.exports),t.exports}function nb(n,t){if(!(this instanceof nb))return new nb(n,t);if(this.data=n||[],this.length=this.data.length,this.compare=t||rbt,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function rbt(n,t){return n<t?-1:n>t?1:0}function wot(n,t,i){var u,o,p,w,v,h;t=Math.max(0,void 0===t?2:t);i=i||0;for(var s,y=function(n){for(var i,s,r,h,c,u=n[0],f=n[0],e=n[0],o=n[0],t=0;t<n.length;t++)i=n[t],i[0]<u[0]&&(u=i),i[0]>e[0]&&(e=i),i[1]<f[1]&&(f=i),i[1]>o[1]&&(o=i);for(s=[u,f,e,o],r=s.slice(),t=0;t<n.length;t++)ubt(n[t],s)||r.push(n[t]);for(h=tbt(r),c=[],t=0;t<h.length;t++)c.push(r[h[t]]);return c}(n),c=ue(16,["[0]","[1]","[0]","[1]"]).load(n),f=[],e=0;e<y.length;e++)u=y[e],c.remove(u),s=dot(u,s),f.push(s);for(o=ue(16),e=0;e<f.length;e++)o.insert(att(f[e]));for(p=t*t,w=i*i;f.length;){var r=f.shift(),l=r.p,a=r.next.p,b=vtt(l,a);b<w||(v=b/p,(u=ebt(c,r.prev.p,l,a,r.next.next.p,v,o))&&Math.min(vtt(u,l),vtt(u,a))<=v&&(f.push(r),f.push(dot(u,r)),c.remove(u),o.remove(r),o.insert(att(r)),o.insert(att(r.next))))}r=s;h=[];do h.push(r.p),r=r.next;while(r!==s);return h.push(r.p),h}function ebt(n,t,i,r,u,f,e){for(var c,l,a,s=new yot(null,obt),o=n.data;o;){for(c=0;c<o.children.length;c++)l=o.children[c],a=o.leaf?ytt(l,i,r):sbt(i,r,l),a>f||s.push({node:l,dist:a});for(;s.length&&!s.peek().node.children;){var v=s.pop(),h=v.node,y=ytt(h,t,i),p=ytt(h,r,u);if(v.dist<y&&v.dist<p&&kot(i,h,e)&&kot(r,h,e))return h}(o=s.pop())&&(o=o.node)}return null}function obt(n,t){return n.dist-t.dist}function sbt(n,t,i){var r,u,f,e;return bot(n,i)||bot(t,i)?0:(r=od(n[0],n[1],t[0],t[1],i.minX,i.minY,i.maxX,i.minY),0===r)?0:(u=od(n[0],n[1],t[0],t[1],i.minX,i.minY,i.minX,i.maxY),0===u)?0:(f=od(n[0],n[1],t[0],t[1],i.maxX,i.minY,i.maxX,i.maxY),0===f)?0:(e=od(n[0],n[1],t[0],t[1],i.minX,i.maxY,i.maxX,i.maxY),0===e?0:Math.min(r,u,f,e))}function bot(n,t){return n[0]>=t.minX&&n[0]<=t.maxX&&n[1]>=t.minY&&n[1]<=t.maxY}function kot(n,t,i){for(var r,u,f,e,h=Math.min(n[0],t[0]),c=Math.min(n[1],t[1]),l=Math.max(n[0],t[0]),a=Math.max(n[1],t[1]),s=i.search({minX:h,minY:c,maxX:l,maxY:a}),o=0;o<s.length;o++)if(r=s[o].p,u=s[o].next.p,f=n,r!==(e=t)&&u!==f&&ed(r,u,f)>0!=ed(r,u,e)>0&&ed(f,e,r)>0!=ed(f,e,u)>0)return!1;return!0}function att(n){var t=n.p,i=n.next.p;return n.minX=Math.min(t[0],i[0]),n.minY=Math.min(t[1],i[1]),n.maxX=Math.max(t[0],i[0]),n.maxY=Math.max(t[1],i[1]),n}function dot(n,t){var i={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(i.next=t.next,i.prev=t,t.next.prev=i,t.next=i):(i.prev=i,i.next=i),i}function vtt(n,t){var i=n[0]-t[0],r=n[1]-t[1];return i*i+r*r}function ytt(n,t,i){var f=t[0],e=t[1],r=i[0]-f,u=i[1]-e,o;return(0!==r||0!==u)&&(o=((n[0]-f)*r+(n[1]-e)*u)/(r*r+u*u),o>1?(f=i[0],e=i[1]):o>0&&(f+=r*o,e+=u*o)),(r=n[0]-f)*r+(u=n[1]-e)*u}function od(n,t,i,r,u,f,e,o){var b,s,k,h,d=i-n,g=r-t,nt=e-u,tt=o-f,ft=n-u,et=t-f,v=d*d+g*g,c=d*nt+g*tt,p=nt*nt+tt*tt,l=d*ft+g*et,w=nt*ft+tt*et,it=v*p-c*c,a=it,y=it,rt,ut;return 0===it?(s=0,a=1,h=w,y=p):(h=v*w-c*l,(s=c*w-p*l)<0?(s=0,h=w,y=p):s>a&&(s=a,h=w+c,y=p)),h<0?(h=0,-l<0?s=0:-l>v?s=a:(s=-l,a=v)):h>y&&(h=y,-l+c<0?s=0:-l+c>v?s=a:(s=-l+c,a=v)),rt=(1-(k=0===h?0:h/y))*u+k*e-((1-(b=0===s?0:s/a))*n+b*i),ut=(1-k)*f+k*o-((1-b)*t+b*r),rt*rt+ut*ut}function got(n,t){var i,r;return(void 0===t&&(t={}),t.concavity=t.concavity||1/0,i=[],ru(n,function(n){i.push([n[0],n[1]])}),!i.length)?null:(r=pot(i,t.concavity),r.length>3?ot([r]):null)}function cr(n,t,i){var f,u,e,o;if(void 0===i&&(i={}),!n)throw new Error("point is required");if(!t)throw new Error("polygon is required");var s=er(n),h=hr(t),l=h.type,c=t.bbox,r=h.coordinates;if(c&&!1===function(n,t){return t[0]<=n[0]&&t[1]<=n[1]&&t[2]>=n[0]&&t[3]>=n[1]}(s,c))return!1;for("Polygon"===l&&(r=[r]),f=!1,u=0;u<r.length&&!f;u++)if(nst(s,r[u][0],i.ignoreBoundary)){for(e=!1,o=1;o<r[u].length&&!e;)nst(s,r[u][o],!i.ignoreBoundary)&&(e=!0),o++;e||(f=!0)}return f}function nst(n,t,i){var h=!1,r,e;for(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1)),r=0,e=t.length-1;r<t.length;e=r++){var u=t[r][0],f=t[r][1],o=t[e][0],s=t[e][1];if(n[1]*(u-o)+f*(o-n[0])+s*(n[0]-u)==0&&(u-n[0])*(o-n[0])<=0&&(f-n[1])*(s-n[1])<=0)return!i;f>n[1]!=s>n[1]&&n[0]<(o-u)*(n[1]-f)/(s-f)+u&&(h=!h)}return h}function ptt(n,t){var i=[];return ki(n,function(n){var r=!1,u;if("Point"===n.geometry.type)oo(t,function(t){cr(n,t)&&(r=!0)}),r&&i.push(n);else{if("MultiPoint"!==n.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");u=[];oo(t,function(t){ru(n,function(n){cr(n,t)&&(r=!0,u.push(n))})});r&&i.push(pw(u))}}),b(i)}function ir(n,t,i){void 0===i&&(i={});var r=er(n),u=er(t),e=nf(u[1]-r[1]),o=nf(u[0]-r[0]),s=nf(r[1]),h=nf(u[1]),f=Math.pow(Math.sin(e/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(s)*Math.cos(h);return vy(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),i.units)}function tst(n,t){var i=!1;return b(function(n){if(n.length<3)return[];n.sort(hbt);for(var c,e,l,w,b,k,i=n.length-1,d=n[i].x,g=n[0].x,s=n[i].y,a=s;i--;)n[i].y<s&&(s=n[i].y),n[i].y>a&&(a=n[i].y);var t,f=g-d,v=a-s,h=f>v?f:v,y=.5*(g+d),p=.5*(a+s),r=[new wtt({__sentinel:!0,x:y-20*h,y:p-h},{__sentinel:!0,x:y,y:p+20*h},{__sentinel:!0,x:y+20*h,y:p-h})],u=[],o=[];for(i=n.length;i--;){for(o.length=0,t=r.length;t--;)(f=n[i].x-r[t].x)>0&&f*f>r[t].r?(u.push(r[t]),r.splice(t,1)):f*f+(v=n[i].y-r[t].y)*v>r[t].r||(o.push(r[t].a,r[t].b,r[t].b,r[t].c,r[t].c,r[t].a),r.splice(t,1));for(cbt(o),t=o.length;t;)e=o[--t],c=o[--t],l=n[i],w=e.x-c.x,b=e.y-c.y,k=2*(w*(l.y-e.y)-b*(l.x-e.x)),Math.abs(k)>1e-12&&r.push(new wtt(c,e,l))}for(Array.prototype.push.apply(u,r),i=u.length;i--;)(u[i].a.__sentinel||u[i].b.__sentinel||u[i].c.__sentinel)&&u.splice(i,1);return u}(n.features.map(function(n){var r={x:n.geometry.coordinates[0],y:n.geometry.coordinates[1]};return t?r.z=n.properties[t]:3===n.geometry.coordinates.length&&(i=!0,r.z=n.geometry.coordinates[2]),r})).map(function(n){var t=[n.a.x,n.a.y],r=[n.b.x,n.b.y],u=[n.c.x,n.c.y],f={};return i?(t.push(n.a.z),r.push(n.b.z),u.push(n.c.z)):f={a:n.a.z,b:n.b.z,c:n.c.z},ot([[t,r,u,t]],f)}))}function hbt(n,t){return t.x-n.x}function cbt(n){var r,u,i,e,f,t=n.length;n:for(;t;)for(u=n[--t],r=n[--t],i=t;i;)if(f=n[--i],r===(e=n[--i])&&u===f||r===f&&u===e){n.splice(t,2);n.splice(i,2);t-=2;continue n}}function kf(n){if(!n)throw new Error("geojson is required");switch(n.type){case"Feature":return ist(n);case"FeatureCollection":return function(n){var t={type:"FeatureCollection"};return Object.keys(n).forEach(function(i){switch(i){case"type":case"features":return;default:t[i]=n[i]}}),t.features=n.features.map(function(n){return ist(n)}),t}(n);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return btt(n);default:throw new Error("unknown GeoJSON type");}}function ist(n){var t={type:"Feature"};return Object.keys(n).forEach(function(i){switch(i){case"type":case"properties":case"geometry":return;default:t[i]=n[i]}}),t.properties=rst(n.properties),t.geometry=btt(n.geometry),t}function rst(n){var t={};return n?(Object.keys(n).forEach(function(i){var r=n[i];t[i]="object"==typeof r?null===r?null:Array.isArray(r)?r.map(function(n){return n}):rst(r):r}),t):t}function btt(n){var t={type:n.type};return n.bbox&&(t.bbox=n.bbox),"GeometryCollection"===n.type?(t.geometries=n.geometries.map(function(n){return btt(n)}),t):(t.coordinates=ust(n.coordinates),t)}function ust(n){var t=n;return"object"!=typeof t[0]?t.slice():t.map(function(n){return ust(n)})}function lbt(n,t){var r,i,u;if(void 0===t&&(t={}),!tr(t=t||{}))throw new Error("options is invalid");if(r=t.mutate,"FeatureCollection"!==de(n))throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");return!1!==r&&void 0!==r||(n=kf(n)),i=[],u=ftt(n,function(n,t){var r=function(n,t){var u,i=n.geometry.coordinates,r=t.geometry.coordinates,f=sd(i[0]),e=sd(i[i.length-1]),o=sd(r[0]),s=sd(r[r.length-1]);if(f===s)u=r.concat(i.slice(1));else if(o===e)u=i.concat(r.slice(1));else if(f===o)u=i.slice(1).reverse().concat(r);else{if(e!==s)return null;u=i.concat(r.reverse().slice(1))}return gi(u)}(n,t);return r||(i.push(n),t)}),u&&i.push(u),i.length?1===i.length?i[0]:ra(i.map(function(n){return n.coordinates})):null}function sd(n){return n[0].toString()+","+n[1].toString()}function abt(n){return n}function fst(n,t){function o(n,t){t.length&&t.pop();for(var u=e[n<0?~n:n],i=0,f=u.length;i<f;++i)t.push(r(u[i],i));n<0&&function(n,t){for(var u,i=n.length,r=i-t;r<--i;)u=n[r],n[r++]=n[i],n[i]=u}(t,f)}function u(n){return r(n)}function i(n){for(var t=[],i=0,r=n.length;i<r;++i)o(n[i],t);return t.length<2&&t.push(t[0]),t}function s(n){for(var t=i(n);t.length<4;)t.push(t[0]);return t}function f(n){return n.map(s)}var r=function(n){if(null==n)return abt;var t,i,r=n.scale[0],u=n.scale[1],f=n.translate[0],e=n.translate[1];return function(n,o){o||(t=i=0);var s=2,c=n.length,h=new Array(c);for(h[0]=(t+=n[0])*r+f,h[1]=(i+=n[1])*u+e;s<c;)h[s]=n[s],++s;return h}}(n.transform),e=n.arcs;return function n(t){var r,e=t.type;switch(e){case"GeometryCollection":return{type:e,geometries:t.geometries.map(n)};case"Point":r=u(t.coordinates);break;case"MultiPoint":r=t.coordinates.map(u);break;case"LineString":r=i(t.arcs);break;case"MultiLineString":r=t.arcs.map(i);break;case"Polygon":r=f(t.arcs);break;case"MultiPolygon":r=t.arcs.map(f);break;default:return null}return{type:e,coordinates:r}}(t)}function vbt(n,t){function o(n,t){var r,i;for(r in n)i=n[r],delete t[i.start],delete i.start,delete i.end,i.forEach(function(n){f[n<0?~n:n]=1}),u.push(i)}var f={},i={},r={},u=[],e=-1;return t.forEach(function(i,r){var f,u=n.arcs[i<0?~i:i];u.length<3&&!u[1][0]&&!u[1][1]&&(f=t[++e],t[e]=i,t[r]=f)}),t.forEach(function(t){var u,f,c=function(t){var i,r=n.arcs[t<0?~t:t],u=r[0];return n.transform?(i=[0,0],r.forEach(function(n){i[0]+=n[0];i[1]+=n[1]})):i=r[r.length-1],t<0?[i,u]:[u,i]}(t),e=c[0],o=c[1],s,h;(u=r[e])?(delete r[u.end],u.push(t),u.end=o,f=i[o])?(delete i[f.start],s=f===u?u:u.concat(f),i[s.start=u.start]=r[s.end=f.end]=s):i[u.start]=r[u.end]=u:(u=i[o])?(delete i[u.start],u.unshift(t),u.start=e,f=r[e])?(delete r[f.end],h=f===u?u:f.concat(u),i[h.start=f.start]=r[h.end=u.end]=h):i[u.start]=r[u.end]=u:i[(u=[t]).start=e]=r[u.end=o]=u}),o(r,i),o(i,r),t.forEach(function(n){f[n<0?~n:n]||u.push([n])}),u}function ybt(n,t){function f(n){n.forEach(function(t){t.forEach(function(t){(i[t=t<0?~t:t]||(i[t]=[])).push(n)})});r.push(n)}function e(t){return function(n){for(var i,r=-1,u=n.length,t=n[u-1],f=0;++r<u;)i=t,t=n[r],f+=i[0]*t[1]-i[1]*t[0];return Math.abs(f)}(fst(n,{type:"Polygon",arcs:[t]}).coordinates[0])}var i={},r=[],u=[];return t.forEach(function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":f(t.arcs);break;case"MultiPolygon":t.arcs.forEach(f)}}),r.forEach(function(n){if(!n._){var t=[],r=[n];for(n._=1,u.push(t);n=r.pop();)t.push(n),n.forEach(function(n){n.forEach(function(n){i[n<0?~n:n].forEach(function(n){n._||(n._=1,r.push(n))})})})}}),r.forEach(function(n){delete n._}),{type:"MultiPolygon",arcs:u.map(function(t){var o,r=[],s,h,u,f;if(t.forEach(function(n){n.forEach(function(n){n.forEach(function(n){i[n<0?~n:n].length<2&&r.push(n)})})}),(o=(r=vbt(n,r)).length)>1)for(u=1,f=e(r[0]);u<o;++u)(s=e(r[u]))>f&&(h=r[0],r[0]=r[u],r[u]=h,f=s);return r}).filter(function(n){return n.length>0})}}function ktt(n,t,i,r,u,f){function c(r,f){for(var h=t(r)&o,c=e[h],l=0;c!=u;){if(i(c,r))return s[h]=f;if(++l>=n)throw new Error("full hashmap");c=e[h=h+1&o]}return e[h]=r,s[h]=f,f}function l(r,f){for(var h=t(r)&o,c=e[h],l=0;c!=u;){if(i(c,r))return s[h];if(++l>=n)throw new Error("full hashmap");c=e[h=h+1&o]}return e[h]=r,s[h]=f,f}function a(r,f){for(var h=t(r)&o,c=e[h],l=0;c!=u;){if(i(c,r))return s[h];if(++l>=n)break;c=e[h=h+1&o]}return f}function v(){for(var t,i=[],n=0,r=e.length;n<r;++n)t=e[n],t!=u&&i.push(t);return i}3===arguments.length&&(r=f=Array,u=null);for(var e=new r(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),s=new f(n),o=n-1,h=0;h<n;++h)e[h]=u;return{set:c,maybeSet:l,get:a,keys:v}}function lv(n,t){return n[0]===t[0]&&n[1]===t[1]}function dtt(n){ost[0]=n[0];ost[1]=n[1];var t=hd[0]^hd[1];return 2147483647&(t=t<<5^t>>7^hd[2]^hd[3])}function pbt(n){function y(n,t,i,r){var u,f;o[i]!==n&&(o[i]=n,u=s[i],u>=0?(f=h[i],u===t&&f===r||u===r&&f===t||(++l,c[i]=1)):(s[i]=t,h[i]=r))}function it(n){return dtt(i[n])}function rt(n,t){return lv(i[n],i[t])}for(var f,e,i=n.coordinates,w=n.lines,b=n.rings,u=function(){for(var r=ktt(1.4*i.length,it,rt,Int32Array,-1,Int32Array),t=new Int32Array(i.length),n=0,u=i.length;n<u;++n)t[n]=r.maybeSet(n,n);return t}(),o=new Int32Array(i.length),s=new Int32Array(i.length),h=new Int32Array(i.length),c=new Int8Array(i.length),l=0,nt,p,t=0,r=i.length;t<r;++t)o[t]=s[t]=h[t]=-1;for(t=0,r=w.length;t<r;++t){var k=w[t],a=k[0],tt=k[1];for(f=u[a],e=u[++a],++l,c[f]=1;++a<=tt;)y(t,f,f=e,e=u[a]);++l;c[e]=1}for(t=0,r=i.length;t<r;++t)o[t]=-1;for(t=0,r=b.length;t<r;++t){var d=b[t],v=d[0]+1,g=d[1];for(y(t,u[g-1],f=u[v-1],e=u[v]);++v<=g;)y(t,f,f=e,e=u[v])}for(o=s=h=null,p=function(n,t,i,r,u){function s(r){for(var o=t(r)&e,s=f[o],h=0;s!=u;){if(i(s,r))return!0;if(++h>=n)throw new Error("full hashset");s=f[o=o+1&e]}return f[o]=r,!0}function h(r){for(var o=t(r)&e,s=f[o],h=0;s!=u;){if(i(s,r))return!0;if(++h>=n)break;s=f[o=o+1&e]}return!1}function c(){for(var t,i=[],n=0,r=f.length;n<r;++n)t=f[n],t!=u&&i.push(t);return i}3===arguments.length&&(r=Array,u=null);for(var f=new r(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),e=n-1,o=0;o<n;++o)f[o]=u;return{add:s,has:h,values:c}}(1.4*l,dtt,lv),t=0,r=i.length;t<r;++t)c[nt=u[t]]&&p.add(i[nt]);return p}function wbt(n,t,i,r){gtt(n,t,i);gtt(n,t,t+r);gtt(n,t+r,i)}function gtt(n,t,i){for(var r,u=t+(i---t>>1);t<u;++t,--i)r=n[t],n[t]=n[i],n[i]=r}function bbt(n){var i,t,r={};for(i in n)r[i]=null==(t=n[i])?{type:null}:("FeatureCollection"===t.type?kbt:"Feature"===t.type?sst:nit)(t);return r}function kbt(n){var t={type:"GeometryCollection",geometries:n.features.map(sst)};return null!=n.bbox&&(t.bbox=n.bbox),t}function sst(n){var i,t=nit(n.geometry);for(i in null!=n.id&&(t.id=n.id),null!=n.bbox&&(t.bbox=n.bbox),n.properties){t.properties=n.properties;break}return t}function nit(n){if(null==n)return{type:null};var t="GeometryCollection"===n.type?{type:"GeometryCollection",geometries:n.geometries.map(nit)}:"Point"===n.type||"MultiPoint"===n.type?{type:n.type,coordinates:n.coordinates}:{type:n.type,arcs:n.coordinates};return null!=n.bbox&&(t.bbox=n.bbox),t}function dbt(n,t){function h(n){n&&tb.call(f,n.type)&&f[n.type](n)}function r(n){var i=[],t;do t=s.get(n),i.push(n[0]<n[1]?t:~t);while(n=n.next);return i}function l(n){return n.map(r)}var u=function(n){function o(n){null!=n&&tb.call(s,n.type)&&s[n.type](n)}function e(n){var f=n[0],e=n[1];f<t&&(t=f);f>r&&(r=f);e<i&&(i=e);e>u&&(u=e)}function f(n){n.forEach(e)}function h(n){n.forEach(f)}var t=1/0,i=1/0,r=-1/0,u=-1/0,s={GeometryCollection:function(n){n.geometries.forEach(o)},Point:function(n){e(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(e)},LineString:function(n){f(n.arcs)},MultiLineString:function(n){n.arcs.forEach(f)},Polygon:function(n){n.arcs.forEach(f)},MultiPolygon:function(n){n.arcs.forEach(h)}};for(var c in n)o(n[c]);if(r>=t&&u>=i)return[t,i,r,u]}(n=bbt(n)),e=t>0&&u&&function(n,t,i){function h(n){return[Math.round((n[0]-r)*f),Math.round((n[1]-u)*e)]}function c(n,t){for(var s,l,a,h,c,v=-1,o=0,y=n.length,i=new Array(y);++v<y;)s=n[v],h=Math.round((s[0]-r)*f),c=Math.round((s[1]-u)*e),h===l&&c===a||(i[o++]=[l=h,a=c]);for(i.length=o;o<t;)o=i.push([i[0][0],i[0][1]]);return i}function l(n){return c(n,2)}function p(n){return c(n,4)}function a(n){return n.map(p)}function v(n){null!=n&&tb.call(y,n.type)&&y[n.type](n)}var r=t[0],u=t[1],o=t[2],s=t[3],f=o-r?(i-1)/(o-r):1,e=s-u?(i-1)/(s-u):1,y={GeometryCollection:function(n){n.geometries.forEach(v)},Point:function(n){n.coordinates=h(n.coordinates)},MultiPoint:function(n){n.coordinates=n.coordinates.map(h)},LineString:function(n){n.arcs=l(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(l)},Polygon:function(n){n.arcs=a(n.arcs)},MultiPolygon:function(n){n.arcs=n.arcs.map(a)}};for(var w in n)v(n[w]);return{scale:[1/f,1/e],translate:[r,u]}}(n,u,t),i=function(n){function a(n){var h,c,r,o,u,s,t,e;if(r=f.get(h=i[n[0]]))for(t=0,e=r.length;t<e;++t)if(w(o=r[t],n))return n[0]=o[0],void(n[1]=o[1]);if(u=f.get(c=i[n[1]]))for(t=0,e=u.length;t<e;++t)if(b(s=u[t],n))return n[1]=s[0],void(n[0]=s[1]);r?r.push(n):f.set(h,[n]);u?u.push(n):f.set(c,[n]);l.push(n)}function p(n){var o,r,t,u,e;if(r=f.get(i[n[0]]))for(u=0,e=r.length;u<e;++u){if(v(t=r[u],n))return n[0]=t[0],void(n[1]=t[1]);if(y(t,n))return n[0]=t[1],void(n[1]=t[0])}if(r=f.get(o=i[n[0]+h(n)]))for(u=0,e=r.length;u<e;++u){if(v(t=r[u],n))return n[0]=t[0],void(n[1]=t[1]);if(y(t,n))return n[0]=t[1],void(n[1]=t[0])}r?r.push(n):f.set(o,[n]);l.push(n)}function w(n,t){var r=n[0],u=t[0],f=n[1];if(r-f!=u-t[1])return!1;for(;r<=f;++r,++u)if(!lv(i[r],i[u]))return!1;return!0}function b(n,t){var r=n[0],e=t[0],f=n[1],u=t[1];if(r-f!=e-u)return!1;for(;r<=f;++r,--u)if(!lv(i[r],i[u]))return!1;return!0}function v(n,t){var f=n[0],e=t[0],r=n[1]-f;if(r!==t[1]-e)return!1;for(var o=h(n),s=h(t),u=0;u<r;++u)if(!lv(i[f+(u+o)%r],i[e+(u+s)%r]))return!1;return!0}function y(n,t){var f=n[0],o=t[0],s=n[1],e=t[1],r=s-f;if(r!==e-o)return!1;for(var c=h(n),l=r-h(t),u=0;u<r;++u)if(!lv(i[f+(u+c)%r],i[e-(u+l)%r]))return!1;return!0}function h(n){for(var r,f=n[0],o=n[1],t=f,e=t,u=i[t];++t<o;)r=i[t],(r[0]<u[0]||r[0]===u[0]&&r[1]<u[1])&&(e=t,u=r);return e-f}var e,r,t,u,i=n.coordinates,o=n.lines,s=n.rings,c=o.length+s.length,f,l;for(delete n.lines,delete n.rings,t=0,u=o.length;t<u;++t)for(e=o[t];e=e.next;)++c;for(t=0,u=s.length;t<u;++t)for(r=s[t];r=r.next;)++c;for(f=ktt(2*c*1.4,dtt,lv),l=n.arcs=[],t=0,u=o.length;t<u;++t){e=o[t];do a(e);while(e=e.next)}for(t=0,u=s.length;t<u;++t)if((r=s[t]).next){do a(r);while(r=r.next)}else p(r);return n}(function(n){for(var o,l=pbt(n),i=n.coordinates,a=n.lines,v=n.rings,t=0,s=a.length;t<s;++t)for(var r=a[t],h=r[0],p=r[1];++h<p;)l.has(i[h])&&(o={0:h,1:r[1]},r[1]=h,r=r.next=o);for(t=0,s=v.length;t<s;++t)for(var u=v[t],e=u[0],f=e,c=u[1],y=l.has(i[e]);++f<c;)l.has(i[f])&&(y?(o={0:f,1:u[1]},u[1]=f,u=u.next=o):(wbt(i,e,c,c-f),i[c]=i[e],y=!0,f=e));return n}(function(n){function f(n){n&&tb.call(e,n.type)&&e[n.type](n)}function o(n){for(var e,u=0,f=n.length;u<f;++u)i[++t]=n[u];return e={0:t-f+1,1:t},r.push(e),e}function s(n){for(var e,r=0,f=n.length;r<f;++r)i[++t]=n[r];return e={0:t-f+1,1:t},u.push(e),e}function h(n){return n.map(s)}var t=-1,r=[],u=[],i=[],e={GeometryCollection:function(n){n.geometries.forEach(f)},LineString:function(n){n.arcs=o(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(o)},Polygon:function(n){n.arcs=n.arcs.map(s)},MultiPolygon:function(n){n.arcs=n.arcs.map(h)}};for(var c in n)f(n[c]);return{type:"Topology",coordinates:i,lines:r,rings:u,objects:n}}(n))),o=i.coordinates,s=ktt(1.4*i.arcs.length,gbt,nkt),f,c;n=i.objects;i.bbox=u;i.arcs=i.arcs.map(function(n,t){return s.set(n,t),o.slice(n[0],n[1]+1)});delete i.coordinates;o=null;f={GeometryCollection:function(n){n.geometries.forEach(h)},LineString:function(n){n.arcs=r(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(r)},Polygon:function(n){n.arcs=n.arcs.map(r)},MultiPolygon:function(n){n.arcs=n.arcs.map(l)}};for(c in n)h(n[c]);return e&&(i.transform=e,i.arcs=function(n){for(var e=-1,h=n.length;++e<h;){for(var i,r,t=n[e],c=0,u=1,l=t.length,f=t[0],o=f[0],s=f[1];++c<l;)i=(f=t[c])[0],r=f[1],i===o&&r===s||(t[u++]=[i-o,r-s],o=i,s=r);1===u&&(t[u++]=[0,0]);t.length=u}return n}(i.arcs)),i}function gbt(n){var r,t=n[0],i=n[1];return i<t&&(r=t,t=i,i=r),t+31*i}function nkt(n,t){var i,r=n[0],u=n[1],f=t[0],e=t[1];return u<r&&(i=r,r=u,u=i),e<f&&(i=f,f=e,e=i),r===f&&u===e}function tkt(n,t){var i,r;if(void 0===t&&(t={}),"FeatureCollection"!==de(n))throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");return!1!==t.mutate&&void 0!==t.mutate||(n=kf(n)),i=[],sf(n,function(n){i.push(n.geometry)}),r=dbt({geoms:dn(i).geometry}),function(n){return fst(n,ybt.apply(this,arguments))}(r,r.objects.geoms.geometries)}function ikt(n,t){var r,i,u;if(void 0===t&&(t={}),!tr(t=t||{}))throw new Error("options is invalid");if(r=t.mutate,"FeatureCollection"!==de(n))throw new Error("geojson must be a FeatureCollection");if(!n.features.length)throw new Error("geojson is empty");if(!1!==r&&void 0!==r||(n=kf(n)),i=function(n){var i={},t;return(sf(n,function(n){i[n.geometry.type]=!0}),t=Object.keys(i),1===t.length)?t[0]:null}(n),!i)throw new Error("geojson must be homogenous");u=n;switch(i){case"LineString":return lbt(u,t);case"Polygon":return tkt(u,t);default:throw new Error(i+" is not supported");}}function av(n,t){var u,r,i,f;if(void 0===t&&(t={}),u="object"==typeof t?t.mutate:t,!n)throw new Error("geojson is required");r=de(n);i=[];switch(r){case"LineString":i=tit(n);break;case"MultiLineString":case"Polygon":d(n).forEach(function(n){i.push(tit(n))});break;case"MultiPolygon":d(n).forEach(function(n){var t=[];n.forEach(function(n){t.push(tit(n))});i.push(t)});break;case"Point":return n;case"MultiPoint":f={};d(n).forEach(function(n){var t=n.join("-");Object.prototype.hasOwnProperty.call(f,t)||(i.push(n),f[t]=!0)});break;default:throw new Error(r+" geometry not supported");}return n.coordinates?!0===u?(n.coordinates=i,n):{type:r,coordinates:i}:!0===u?(n.geometry.coordinates=i,n):yu({type:r,coordinates:i},n.properties,{bbox:n.bbox,id:n.id})}function tit(n){var i=d(n),u,f;if(2===i.length&&!hst(i[0],i[1]))return i;var t=[],e=i.length-1,r=t.length;for(t.push(i[0]),u=1;u<e;u++)f=t[t.length-1],i[u][0]===f[0]&&i[u][1]===f[1]||(t.push(i[u]),(r=t.length)>2&&cst(t[r-3],t[r-1],t[r-2])&&t.splice(t.length-2,1));if(t.push(i[i.length-1]),r=t.length,hst(i[0],i[i.length-1])&&r<4)throw new Error("invalid polygon");return cst(t[r-3],t[r-1],t[r-2])&&t.splice(t.length-2,1),t}function hst(n,t){return n[0]===t[0]&&n[1]===t[1]}function cst(n,t,i){var r=i[0],u=i[1],f=n[0],e=n[1],o=t[0],s=t[1],h=o-f,c=s-e;return 0==(r-f)*c-(u-e)*h&&(Math.abs(h)>=Math.abs(c)?h>0?f<=r&&r<=o:o<=r&&r<=f:c>0?e<=u&&u<=s:s<=u&&u<=e)}function rkt(n,t,i){var f=t.x,e=t.y,r=i.x-f,u=i.y-e,o;return(0!==r||0!==u)&&(o=((n.x-f)*r+(n.y-e)*u)/(r*r+u*u),o>1?(f=i.x,e=i.y):o>0&&(f+=r*o,e+=u*o)),(r=n.x-f)*r+(u=n.y-e)*u}function iit(n,t,i,r,u){for(var f,s,o=r,e=t+1;e<i;e++)s=rkt(n[e],n[t],n[i]),s>o&&(f=e,o=s);o>r&&(f-t>1&&iit(n,t,f,r,u),u.push(n[f]),i-f>1&&iit(n,f,i,r,u))}function ukt(n,t){var r=n.length-1,i=[n[0]];return iit(n,0,r,t,i),i.push(n[r]),i}function rit(n,t,i){if(n.length<=2)return n;var r=void 0!==t?t*t:1;return ukt(n=i?n:function(n,t){for(var i,h,e,r,u,f=n[0],o=[f],s=1,c=n.length;s<c;s++)i=n[s],e=f,r=void 0,u=void 0,r=(h=i).x-e.x,u=h.y-e.y,r*r+u*u>t&&(o.push(i),f=i);return f!==i&&o.push(i),o}(n,r),r)}function lst(n,t,i){return rit(n.map(function(n){return{x:n[0],y:n[1],z:n[2]}}),t,i).map(function(n){return n.z?[n.x,n.y,n.z]:[n.x,n.y]})}function ast(n,t,i){return n.map(function(n){var u=n.map(function(n){return{x:n[0],y:n[1]}}),r;if(u.length<4)throw new Error("invalid polygon");for(r=rit(u,t,i).map(function(n){return[n.x,n.y]});!fkt(r);)r=rit(u,t-=.01*t,i).map(function(n){return[n.x,n.y]});return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r})}function fkt(n){return!(n.length<3)&&!(3===n.length&&n[2][0]===n[0][0]&&n[2][1]===n[0][1])}function yst(n,t){void 0===t&&(t={});for(var e=t.resolution||1e4,o=t.sharpness||.85,u=[],s=hr(n).coordinates.map(function(n){return{x:n[0],y:n[1]}}),i=new vst({duration:e,points:s,sharpness:o}),f=function(n){var t=i.pos(n);Math.floor(n/100)%2==0&&u.push([t.x,t.y])},r=0;r<i.duration;r+=10)f(r);return f(i.duration),gi(u,t.properties)}function uit(n,t){var i;void 0===t&&(t={});var r=Number(n[0]),u=Number(n[1]),f=Number(n[2]),e=Number(n[3]);if(6===n.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");return i=[r,u],ot([[i,[f,u],[f,e],[r,e],i]],t.properties,{bbox:n,id:t.id})}function pst(n){return uit(ou(n))}function wst(n){var t=n[0],i=n[1],r=n[2],u=n[3],f,e;return ir(n.slice(0,2),[r,i])>=ir(n.slice(0,2),[t,u])?(f=(i+u)/2,[t,f-(r-t)/2,r,f+(r-t)/2]):(e=(t+r)/2,[e-(u-i)/2,i,e+(u-i)/2,u])}function ec(n,t,i,r){void 0===r&&(r={});var e=er(n),h=nf(e[0]),u=nf(e[1]),o=nf(i),f=sv(t,r.units),s=Math.asin(Math.sin(u)*Math.cos(f)+Math.cos(u)*Math.sin(f)*Math.cos(o));return ft([ua(h+Math.atan2(Math.sin(o)*Math.sin(f)*Math.cos(u),Math.cos(f)-Math.sin(u)*Math.sin(s))),ua(s)],r.properties)}function fit(n,t,i){void 0===i&&(i={});for(var f=i.steps||64,e=i.properties?i.properties:!Array.isArray(n)&&"Feature"===n.type&&n.properties?n.properties:{},r=[],u=0;u<f;u++)r.push(ec(n,t,-360*u/f,i).geometry.coordinates);return r.push(r[0]),ot([r],e)}function ol(n,t,i){if(void 0===i&&(i={}),!0===i.final)return function(n,t){var i=ol(t,n);return(i+180)%360}(n,t);var u=er(n),f=er(t),e=nf(u[0]),o=nf(f[0]),s=nf(u[1]),r=nf(f[1]),h=Math.sin(o-e)*Math.cos(r),c=Math.cos(s)*Math.sin(r)-Math.sin(s)*Math.cos(r)*Math.cos(o-e);return ua(Math.atan2(h,c))}function cd(n,t){void 0===t&&(t={});var i=ou(n);return ft([(i[0]+i[2])/2,(i[1]+i[3])/2],t.properties,t)}function fa(n,t){void 0===t&&(t={});var r=0,u=0,i=0;return ru(n,function(n){r+=n[0];u+=n[1];i++},!0),ft([r/i,u/i],t.properties)}function ld(n){var t=[];return"FeatureCollection"===n.type?ki(n,function(n){ru(n,function(i){t.push(ft(i,n.properties))})}):ru(n,function(i){t.push(ft(i,n.properties))}),b(t)}function ad(n,t,i){var f;i=i||2;var r,u,e,o,s,h,c,v=t&&t.length,y=v?t[0]*i:n.length,l=kst(n,0,y,i,!0),a=[];if(!l)return a;if(v&&(l=function(n,t,i,r){for(var f,e=[],u=0,o=t.length;u<o;u++)(f=kst(n,t[u]*r,u<o-1?t[u+1]*r:n.length,r,!1))===f.next&&(f.steiner=!0),e.push(akt(f));for(e.sort(ckt),u=0;u<e.length;u++)lkt(e[u],i),i=ib(i,i.next);return i}(n,t,l,i)),n.length>80*i){for(r=e=n[0],u=o=n[1],f=i;f<y;f+=i)(s=n[f])<r&&(r=s),(h=n[f+1])<u&&(u=h),s>e&&(e=s),h>o&&(o=h);c=0!==(c=Math.max(e-r,o-u))?1/c:0}return rb(l,a,i,r,u,c),a}function kst(n,t,i,r,u){var f,e;if(u===hit(n,t,i,r)>0)for(f=t;f<i;f+=r)e=nht(f,n[f],n[f+1],e);else for(f=i-r;f>=t;f-=r)e=nht(f,n[f],n[f+1],e);return e&&vv(e,e.next)&&(fb(e),e=e.next),e}function ib(n,t){if(!n)return n;t||(t=n);var r,i=n;do if(r=!1,i.steiner||!vv(i,i.next)&&0!==fe(i.prev,i,i.next))i=i.next;else{if(fb(i),(i=t=i.prev)===i.next)break;r=!0}while(r||i!==t);return t}function rb(n,t,i,r,u,f,e){if(n){!e&&f&&function(n,t,i,r){var u=n;do null===u.z&&(u.z=oit(u.x,u.y,t,i,r)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next;while(u!==n);u.prevZ.nextZ=null;u.prevZ=null,function(n){var o,i,t,r,u,s,f,e,h=1;do{for(i=n,n=null,u=null,s=0;i;){for(s++,t=i,f=0,o=0;o<h&&(f++,t=t.nextZ);o++);for(e=h;f>0||e>0&&t;)0!==f&&(0===e||!t||i.z<=t.z)?(r=i,i=i.nextZ,f--):(r=t,t=t.nextZ,e--),u?u.nextZ=r:n=r,r.prevZ=u,u=r;i=t}u.nextZ=null;h*=2}while(s>1)}(u)}(n,r,u,f);for(var s,o,h=n;n.prev!==n.next;)if(s=n.prev,o=n.next,f?okt(n,r,u,f):ekt(n))t.push(s.i/i),t.push(n.i/i),t.push(o.i/i),fb(n),n=o.next,h=o.next;else if((n=o)===h){e?1===e?rb(n=skt(n,t,i),t,i,r,u,f,2):2===e&&hkt(n,t,i,r,u,f):rb(ib(n),t,i,r,u,f,1);break}}}function ekt(n){var i=n.prev,r=n,u=n.next,t;if(fe(i,r,u)>=0)return!1;for(t=n.next.next;t!==n.prev;){if(by(i.x,i.y,r.x,r.y,u.x,u.y,t.x,t.y)&&fe(t.prev,t,t.next)>=0)return!1;t=t.next}return!0}function okt(n,t,i,r){var o=n.prev,s=n,u=n.next;if(fe(o,s,u)>=0)return!1;for(var l=o.x<s.x?o.x<u.x?o.x:u.x:s.x<u.x?s.x:u.x,a=o.y<s.y?o.y<u.y?o.y:u.y:s.y<u.y?s.y:u.y,v=o.x>s.x?o.x>u.x?o.x:u.x:s.x>u.x?s.x:u.x,y=o.y>s.y?o.y>u.y?o.y:u.y:s.y>u.y?s.y:u.y,h=oit(l,a,t,i,r),c=oit(v,y,t,i,r),f=n.prevZ,e=n.nextZ;f&&f.z>=h&&e&&e.z<=c;){if(f!==n.prev&&f!==n.next&&by(o.x,o.y,s.x,s.y,u.x,u.y,f.x,f.y)&&fe(f.prev,f,f.next)>=0||(f=f.prevZ,e!==n.prev&&e!==n.next&&by(o.x,o.y,s.x,s.y,u.x,u.y,e.x,e.y)&&fe(e.prev,e,e.next)>=0))return!1;e=e.nextZ}for(;f&&f.z>=h;){if(f!==n.prev&&f!==n.next&&by(o.x,o.y,s.x,s.y,u.x,u.y,f.x,f.y)&&fe(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;e&&e.z<=c;){if(e!==n.prev&&e!==n.next&&by(o.x,o.y,s.x,s.y,u.x,u.y,e.x,e.y)&&fe(e.prev,e,e.next)>=0)return!1;e=e.nextZ}return!0}function skt(n,t,i){var r=n,f,u;do f=r.prev,u=r.next.next,!vv(f,u)&&dst(f,r,r.next,u)&&ub(f,u)&&ub(u,f)&&(t.push(f.i/i),t.push(r.i/i),t.push(u.i/i),fb(r),fb(r.next),r=n=u),r=r.next;while(r!==n);return r}function hkt(n,t,i,r,u,f){var e=n,o,s;do{for(o=e.next.next;o!==e.prev;){if(e.i!==o.i&&vkt(e,o))return s=gst(e,o),e=ib(e,e.next),s=ib(s,s.next),rb(e,t,i,r,u,f),void rb(s,t,i,r,u,f);o=o.next}e=e.next}while(e!==n)}function ckt(n,t){return n.x-t.x}function lkt(n,t){if(t=function(n,t){var r,i=t,f=n.x,u=n.y,e=-1/0,o;do{if(u<=i.y&&u>=i.next.y&&i.next.y!==i.y&&(o=i.x+(u-i.y)*(i.next.x-i.x)/(i.next.y-i.y),o<=f&&o>e)){if(e=o,o===f){if(u===i.y)return i;if(u===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}i=i.next}while(i!==t);if(!r)return null;if(f===e)return r.prev;var s,a=r,l=r.x,h=r.y,c=1/0;for(i=r.next;i!==a;)f>=i.x&&i.x>=l&&f!==i.x&&by(u<h?f:e,u,l,h,u<h?e:f,u,i.x,i.y)&&((s=Math.abs(u-i.y)/(f-i.x))<c||s===c&&i.x>r.x)&&ub(i,n)&&(r=i,c=s),i=i.next;return r}(n,t)){var i=gst(t,n);ib(i,i.next)}}function oit(n,t,i,r,u){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-i)*u)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*u)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function akt(n){var t=n,i=n;do t.x<i.x&&(i=t),t=t.next;while(t!==n);return i}function by(n,t,i,r,u,f,e,o){return(u-e)*(t-o)-(n-e)*(f-o)>=0&&(n-e)*(r-o)-(i-e)*(t-o)>=0&&(i-e)*(f-o)-(u-e)*(r-o)>=0}function vkt(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(n,t){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==t.i&&i.next.i!==t.i&&dst(i,i.next,n,t))return!0;i=i.next}while(i!==n);return!1}(n,t)&&ub(n,t)&&ub(t,n)&&function(n,t){var i=n,r=!1,f=(n.x+t.x)/2,u=(n.y+t.y)/2;do i.y>u!=i.next.y>u&&i.next.y!==i.y&&f<(i.next.x-i.x)*(u-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==n);return r}(n,t)}function fe(n,t,i){return(t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y)}function vv(n,t){return n.x===t.x&&n.y===t.y}function dst(n,t,i,r){return!!(vv(n,t)&&vv(i,r)||vv(n,r)&&vv(i,t))||fe(n,t,i)>0!=fe(n,t,r)>0&&fe(i,r,n)>0!=fe(i,r,t)>0}function ub(n,t){return fe(n.prev,n,n.next)<0?fe(n,t,n.next)>=0&&fe(n,n.prev,t)>=0:fe(n,t,n.prev)<0||fe(n,n.next,t)<0}function gst(n,t){var r=new sit(n.i,n.x,n.y),i=new sit(t.i,t.x,t.y),u=n.next,f=t.prev;return n.next=t,t.prev=n,r.next=u,u.prev=r,i.next=r,r.prev=i,f.next=i,i.prev=f,i}function nht(n,t,i,r){var u=new sit(n,t,i);return r?(u.next=r.next,u.prev=r,r.next.prev=u,r.next=u):(u.prev=u,u.next=u),u}function fb(n){n.next.prev=n.prev;n.prev.next=n.next;n.prevZ&&(n.prevZ.nextZ=n.nextZ);n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function sit(n,t,i){this.i=n;this.x=t;this.y=i;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=!1}function hit(n,t,i,r){for(var e=0,u=t,f=i-r;u<i;u+=r)e+=(n[f]-n[u])*(n[u+1]+n[f+1]),f=u;return e}function tht(n){var i=function(n){for(var i,r,f=n[0][0].length,u={vertices:[],holes:[],dimensions:f},e=0,t=0;t<n.length;t++){for(i=0;i<n[t].length;i++)for(r=0;r<f;r++)u.vertices.push(n[t][i][r]);t>0&&(e+=n[t-1].length,u.holes.push(e))}return u}(n),f=eit(i.vertices,i.holes,2),e=[],r=[],t,u;for(f.forEach(function(n,t){var u=f[t];r.push([i.vertices[2*u],i.vertices[2*u+1]])}),t=0;t<r.length;t+=3)u=r.slice(t,t+3),u.push(r[t]),e.push(ot([u]));return e}function vd(n,t){if(!n)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var i,r=1/0,u=0;return ki(t,function(t,i){var f=ir(n,t);f<r&&(u=i,r=f)}),(i=kf(t.features[u])).properties.featureIndex=u,i.properties.distanceToPoint=r,i}function yv(n){if(!n)throw new Error("geojson is required");var t=[];return sf(n,function(n){!function(n,t){var r=[],i=n.geometry;if(null!==i){switch(i.type){case"Polygon":r=d(i);break;case"LineString":r=[d(i)]}r.forEach(function(i){(function(n,t){var i=[];return n.reduce(function(n,r){var u=gi([n,r],t);return u.bbox=function(n,t){var i=n[0],r=n[1],u=t[0],f=t[1];return[i<u?i:u,r<f?r:f,i>u?i:u,r>f?r:f]}(n,r),i.push(u),r}),i})(i,n.properties).forEach(function(n){n.id=t.length;t.push(n)})})}}(n,t)}),b(t)}function eb(n,t,i){var y,f,h,o;if(null!==n)for(var r,e,v,l,w,u,a,b,p=0,s=0,k=n.type,d="FeatureCollection"===k,g="Feature"===k,nt=d?n.features.length:1,c=0;c<nt;c++)for(w=(b=!!(a=d?n.features[c].geometry:g?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1,y=0;y<w;y++)if(f=0,h=0,null!==(l=b?a.geometries[y]:a)){u=l.coordinates;o=l.type;switch(p=!i||"Polygon"!==o&&"MultiPolygon"!==o?0:1,o){case null:break;case"Point":if(!1===t(u,s,c,f,h))return!1;s++;f++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===t(u[r],s,c,f,h))return!1;s++;"MultiPoint"===o&&f++}"LineString"===o&&f++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(e=0;e<u[r].length-p;e++){if(!1===t(u[r][e],s,c,f,h))return!1;s++}"MultiLineString"===o&&f++;"Polygon"===o&&h++}"Polygon"===o&&f++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(h=0,e=0;e<u[r].length;e++){for(v=0;v<u[r][e].length-p;v++){if(!1===t(u[r][e][v],s,c,f,h))return!1;s++}h++}f++}break;case"GeometryCollection":for(r=0;r<l.geometries.length;r++)if(!1===eb(l.geometries[r],t,i))return!1;break;default:throw new Error("Unknown Geometry Type");}}}function iht(n,t){var i;switch(n.type){case"FeatureCollection":for(i=0;i<n.features.length&&!1!==t(n.features[i].properties,i);i++);break;case"Feature":t(n.properties,0)}}function rht(n,t){if("Feature"===n.type)t(n,0);else if("FeatureCollection"===n.type)for(var i=0;i<n.features.length&&!1!==t(n.features[i],i);i++);}function cit(n,t){for(var e,o,u,v,r,y,s,h,c,l=0,f="FeatureCollection"===n.type,a="Feature"===n.type,p=f?n.features.length:1,i=0;i<p;i++){for(r=f?n.features[i].geometry:a?n.geometry:n,s=f?n.features[i].properties:a?n.properties:{},h=f?n.features[i].bbox:a?n.bbox:void 0,c=f?n.features[i].id:a?n.id:void 0,v=(y=!!r&&"GeometryCollection"===r.type)?r.geometries.length:1,o=0;o<v;o++)if(null!==(u=y?r.geometries[o]:r))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(u,l,s,h,c))return!1;break;case"GeometryCollection":for(e=0;e<u.geometries.length;e++)if(!1===t(u.geometries[e],l,s,h,c))return!1;break;default:throw new Error("Unknown Geometry Type");}else if(!1===t(null,l,s,h,c))return!1;l++}}function yd(n,t){cit(n,function(n,i,r,u,f){var o,s=null===n?null:n.type,e,h;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(hf.feature(n,r,{bbox:u,id:f}),i,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(e=0;e<n.coordinates.length;e++)if(h={type:o,coordinates:n.coordinates[e]},!1===t(hf.feature(h,r),i,e))return!1})}function uht(n,t){yd(n,function(n,i,r){var f=0,e;if(n.geometry&&(e=n.geometry.type,"Point"!==e&&"MultiPoint"!==e)){var u,o=0,s=0,h=0;return!1!==eb(n,function(e,c,l,a,v){if(void 0===u||i>o||a>s||v>h)return u=e,o=i,s=a,h=v,void(f=0);var y=hf.lineString([u,e],n.properties);if(!1===t(y,i,r,v,f))return!1;f++;u=e})&&void 0}})}function fht(n,t){if(!n)throw new Error("geojson is required");yd(n,function(n,i,r){var e,f,u;if(null!==n.geometry){e=n.geometry.type;f=n.geometry.coordinates;switch(e){case"LineString":if(!1===t(n,i,r,0,0))return!1;break;case"Polygon":for(u=0;u<f.length;u++)if(!1===t(hf.lineString(f[u],n.properties),i,r,u))return!1}}})}function ait(n){var t=[1/0,1/0,-1/0,-1/0];return lit.coordEach(n,function(n){t[0]>n[0]&&(t[0]=n[0]);t[1]>n[1]&&(t[1]=n[1]);t[2]<n[0]&&(t[2]=n[0]);t[3]<n[1]&&(t[3]=n[1])}),t}function oht(n){var t=ue(n);return t.insert=function(n){if("Feature"!==n.type)throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:ky(n),ue.prototype.insert.call(this,n)},t.load=function(n){var t=[];return Array.isArray(n)?n.forEach(function(n){if("Feature"!==n.type)throw new Error("invalid features");n.bbox=n.bbox?n.bbox:ky(n);t.push(n)}):ldt(n,function(n){if("Feature"!==n.type)throw new Error("invalid features");n.bbox=n.bbox?n.bbox:ky(n);t.push(n)}),ue.prototype.load.call(this,t)},t.remove=function(n,t){if("Feature"!==n.type)throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:ky(n),ue.prototype.remove.call(this,n,t)},t.clear=function(){return ue.prototype.clear.call(this)},t.search=function(n){var t=ue.prototype.search.call(this,this.toBBox(n));return eht(t)},t.collides=function(n){return ue.prototype.collides.call(this,this.toBBox(n))},t.all=function(){var n=ue.prototype.all.call(this);return eht(n)},t.toJSON=function(){return ue.prototype.toJSON.call(this)},t.fromJSON=function(n){return ue.prototype.fromJSON.call(this,n)},t.toBBox=function(n){var t;if(n.bbox)t=n.bbox;else if(Array.isArray(n)&&4===n.length)t=n;else if(Array.isArray(n)&&6===n.length)t=[n[0],n[1],n[3],n[4]];else if("Feature"===n.type)t=ky(n);else{if("FeatureCollection"!==n.type)throw new Error("invalid geojson");t=ky(n)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}function sl(n,t){var f={},i=[],r,u;return("LineString"===n.type&&(n=yu(n)),"LineString"===t.type&&(t=yu(t)),"Feature"===n.type&&"Feature"===t.type&&null!==n.geometry&&null!==t.geometry&&"LineString"===n.geometry.type&&"LineString"===t.geometry.type&&2===n.geometry.coordinates.length&&2===t.geometry.coordinates.length)?(r=hht(n,t),r&&i.push(r),b(i)):(u=dy(),u.load(yv(t)),ki(yv(n),function(n){ki(u.search(n),function(t){var r=hht(n,t),u;r&&(u=d(r).join(","),f[u]||(f[u]=!0,i.push(r)))})}),b(i))}function hht(n,t){var u=d(n),f=d(t),e,a;if(2!==u.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==f.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=u[0][0],r=u[0][1],h=u[1][0],c=u[1][1],o=f[0][0],s=f[0][1],v=f[1][0],y=f[1][1],l=(y-s)*(h-i)-(v-o)*(c-r),p=(v-o)*(r-s)-(y-s)*(i-o),w=(h-i)*(r-s)-(c-r)*(i-o);return 0===l?null:(e=p/l,a=w/l,e>=0&&e<=1&&a>=0&&a<=1?ft([i+e*(h-i),r+e*(c-r)]):null)}function hl(n,t,i){void 0===i&&(i={});var r=ft([1/0,1/0],{dist:1/0}),u=0;return sf(n,function(n){for(var f,e,h=d(n),o=0;o<h.length-1;o++){f=ft(h[o]);f.properties.dist=ir(t,f,i);e=ft(h[o+1]);e.properties.dist=ir(t,e,i);var c=ir(f,e,i),l=Math.max(f.properties.dist,e.properties.dist),a=ol(f,e),y=ec(t,l,a+90,i),p=ec(t,l,a-90,i),v=sl(gi([y.geometry.coordinates,p.geometry.coordinates]),gi([f.geometry.coordinates,e.geometry.coordinates])),s=null;v.features.length>0&&((s=v.features[0]).properties.dist=ir(t,s,i),s.properties.location=u+ir(f,s,i));f.properties.dist<r.properties.dist&&((r=f).properties.index=o,r.properties.location=u);e.properties.dist<r.properties.dist&&((r=e).properties.index=o+1,r.properties.location=u+c);s&&s.properties.dist<r.properties.dist&&((r=s).properties.index=o);u+=c}}),r}function pd(n,t,i){void 0===i&&(i={});var u=er(n),r=er(t);return r[0]+=r[0]-u[0]>180?-360:u[0]-r[0]>180?360:0,cv(function(n,t,i){var h=i=void 0===i?uc:Number(i),u=n[1]*Math.PI/180,s=t[1]*Math.PI/180,f=s-u,r=Math.abs(t[0]-n[0])*Math.PI/180,e,o;return r>Math.PI&&(r-=2*Math.PI),e=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(u/2+Math.PI/4)),o=Math.abs(e)>1e-11?f/e:Math.cos(u),Math.sqrt(f*f+o*o*r*r)*h}(u,r),"meters",i.units)}function cht(n,t,i){if(void 0===i&&(i={}),i.method||(i.method="geodesic"),i.units||(i.units="kilometers"),!n)throw new Error("pt is required");if(Array.isArray(n)?n=ft(n):"Point"===n.type?n=yu(n):ww(n,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=gi(t):"LineString"===t.type?t=yu(t):ww(t,"LineString","line");var r=1/0,u=n.geometry.coordinates;return fl(t,function(n){var f=n.geometry.coordinates[0],e=n.geometry.coordinates[1],t=function(n,t,i,r){var u=[i[0]-t[0],i[1]-t[1]],f=lht([n[0]-t[0],n[1]-t[1]],u),e,o,s;return f<=0?vit(n,t,{method:r.method,units:"degrees"}):(e=lht(u,u),e<=f)?vit(n,i,{method:r.method,units:"degrees"}):(o=f/e,s=[t[0]+o*u[0],t[1]+o*u[1]],vit(n,s,{method:r.method,units:"degrees"}))}(u,f,e,i);t<r&&(r=t)}),cv(r,"degrees",i.units)}function lht(n,t){return n[0]*t[0]+n[1]*t[1]}function vit(n,t,i){return"planar"===i.method?pd(n,t,i):ir(n,t,i)}function adt(n,t,i,r,u,f,e,o){var l,h,c,a,s={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(o-f)*(i-n)-(e-u)*(r-t))?null!==s.x&&null!==s.y&&s:(a=(i-n)*(h=t-f)-(r-t)*(c=n-u),h=((e-u)*h-(o-f)*c)/l,c=a/l,s.x=n+h*(i-n),s.y=t+h*(r-t),h>=0&&h<=1&&(s.onLine1=!0),c>=0&&c<=1&&(s.onLine2=!0),!(!s.onLine1||!s.onLine2)&&[s.x,s.y])}function aht(n){for(var i,t,e,l,h,o,c,s=function(n){return"FeatureCollection"!==n.type?"Feature"!==n.type?b([yu(n)]):b([n]):n}(n),r=cd(s),u=!1,f=0;!u&&f<s.features.length;){if(t=s.features[f].geometry,e=!1,"Point"===t.type)r.geometry.coordinates[0]===t.coordinates[0]&&r.geometry.coordinates[1]===t.coordinates[1]&&(u=!0);else if("MultiPoint"===t.type)for(l=!1,i=0;!l&&i<t.coordinates.length;)r.geometry.coordinates[0]===t.coordinates[i][0]&&r.geometry.coordinates[1]===t.coordinates[i][1]&&(u=!0,l=!0),i++;else if("LineString"===t.type)for(i=0;!e&&i<t.coordinates.length-1;)vht(r.geometry.coordinates[0],r.geometry.coordinates[1],t.coordinates[i][0],t.coordinates[i][1],t.coordinates[i+1][0],t.coordinates[i+1][1])&&(e=!0,u=!0),i++;else if("MultiLineString"===t.type)for(h=0;h<t.coordinates.length;){for(e=!1,i=0,o=t.coordinates[h];!e&&i<o.length-1;)vht(r.geometry.coordinates[0],r.geometry.coordinates[1],o[i][0],o[i][1],o[i+1][0],o[i+1][1])&&(e=!0,u=!0),i++;h++}else"Polygon"!==t.type&&"MultiPolygon"!==t.type||cr(r,t)&&(u=!0);f++}if(u)return r;for(c=b([]),f=0;f<s.features.length;f++)c.features=c.features.concat(ld(s.features[f]).features);return ft(vd(r,c).geometry.coordinates)}function vht(n,t,i,r,u,f){return Math.sqrt((u-i)*(u-i)+(f-r)*(f-r))===Math.sqrt((n-i)*(n-i)+(t-r)*(t-r))+Math.sqrt((u-n)*(u-n)+(f-t)*(f-t))}function pit(n){return itt(n,function(n,t){return n+function(n){var t,i=0;switch(n.type){case"Polygon":return yht(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)i+=yht(n.coordinates[t]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}function yht(n){var i=0,t;if(n&&n.length>0)for(i+=Math.abs(pht(n[0])),t=1;t<n.length;t++)i-=Math.abs(pht(n[t]));return i}function pht(n){var o,s,r,u,f,t,e=0,i=n.length;if(i>2){for(t=0;t<i;t++)t===i-2?(r=i-2,u=i-1,f=0):t===i-1?(r=i-1,u=0,f=1):(r=t,u=t+1,f=t+2),o=n[r],s=n[u],e+=(wit(n[f][0])-wit(o[0]))*Math.sin(wit(s[1]));e=e*yit*yit/2}return e}function wit(n){return n*Math.PI/180}function bit(n,t){return void 0===t&&(t={}),rtt(n,function(n,i){var r=i.geometry.coordinates;return n+ir(r[0],r[1],t)},0)}function wht(n,t,i,r){var u,e,l;if(!tr(r=r||{}))throw new Error("options is invalid");if(e=[],"Feature"===n.type)u=n.geometry.coordinates;else{if("LineString"!==n.type)throw new Error("input must be a LineString Feature or Geometry");u=n.coordinates}for(var s,h,c,a=u.length,o=0,f=0;f<u.length&&!(t>=o&&f===u.length-1);f++){if(o>t&&0===e.length){if(!(s=t-o))return e.push(u[f]),gi(e);h=ol(u[f],u[f-1])-180;c=ec(u[f],s,h,r);e.push(c.geometry.coordinates)}if(o>=i)return(s=i-o)?(h=ol(u[f],u[f-1])-180,c=ec(u[f],s,h,r),e.push(c.geometry.coordinates),gi(e)):(e.push(u[f]),gi(e));if(o>=t&&e.push(u[f]),f===u.length-1)return gi(e);o+=ir(u[f],u[f+1],r)}if(o<t&&u.length===a)throw new Error("Start position is beyond line");return l=u[u.length-1],gi([l,l])}function so(n,t,i){var f;void 0===i&&(i={});for(var e=er(n),u=d(t),r=0;r<u.length-1;r++)if(f=!1,i.ignoreEndVertices&&(0===r&&(f="start"),r===u.length-2&&(f="end"),0===r&&r+1===u.length-1&&(f="both")),vdt(u[r],u[r+1],e,f,void 0===i.epsilon?null:i.epsilon))return!0;return!1}function vdt(n,t,i,r,u){var f=i[0],e=i[1],o=n[0],s=n[1],h=t[0],c=t[1],l=h-o,a=c-s,v=(i[0]-o)*a-(i[1]-s)*l;if(null!==u){if(Math.abs(v)>u)return!1}else if(0!==v)return!1;return r?"start"===r?Math.abs(l)>=Math.abs(a)?l>0?o<f&&f<=h:h<=f&&f<o:a>0?s<e&&e<=c:c<=e&&e<s:"end"===r?Math.abs(l)>=Math.abs(a)?l>0?o<=f&&f<h:h<f&&f<=o:a>0?s<=e&&e<c:c<e&&e<=s:"both"===r&&(Math.abs(l)>=Math.abs(a)?l>0?o<f&&f<h:h<f&&f<o:a>0?s<e&&e<c:c<e&&e<s):Math.abs(l)>=Math.abs(a)?l>0?o<=f&&f<=h:h<=f&&f<=o:a>0?s<=e&&e<=c:c<=e&&e<=s}function bht(n,t){var i=hr(n),r=hr(t),f=i.type,u=r.type;switch(f){case"Point":switch(u){case"MultiPoint":return function(n,t){for(var r=!1,i=0;i<t.coordinates.length;i++)if(dht(t.coordinates[i],n.coordinates)){r=!0;break}return r}(i,r);case"LineString":return so(i,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return cr(i,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+u+" geometry not supported");}case"MultiPoint":switch(u){case"MultiPoint":return function(n,t){for(var u,r,i=0;i<n.coordinates.length;i++){for(u=!1,r=0;r<t.coordinates.length;r++)dht(n.coordinates[i],t.coordinates[r])&&(u=!0);if(!u)return!1}return!0}(i,r);case"LineString":return function(n,t){for(var r=!1,i=0;i<n.coordinates.length;i++){if(!so(n.coordinates[i],t))return!1;r||(r=so(n.coordinates[i],t,{ignoreEndVertices:!0}))}return r}(i,r);case"Polygon":case"MultiPolygon":return function(n,t){for(var r=!0,i=!1,u=0;u<n.coordinates.length;u++){if(!(i=cr(n.coordinates[1],t))){r=!1;break}i=cr(n.coordinates[1],t,{ignoreBoundary:!0})}return r&&i}(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"LineString":switch(u){case"LineString":return function(n,t){for(var i=0;i<n.coordinates.length;i++)if(!so(n.coordinates[i],t))return!1;return!0}(i,r);case"Polygon":case"MultiPolygon":return function(n,t){var u=ou(t),f=ou(n),r,i;if(!kht(u,f))return!1;for(r=!1,i=0;i<n.coordinates.length-1;i++){if(!cr(n.coordinates[i],t))return!1;(r||(r=cr(n.coordinates[i],t,{ignoreBoundary:!0})),r)||(r=cr(ydt(n.coordinates[i],n.coordinates[i+1]),t,{ignoreBoundary:!0}))}return r}(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"Polygon":switch(u){case"Polygon":case"MultiPolygon":return function(n,t){var r=ou(n),i;if(!kht(ou(t),r))return!1;for(i=0;i<n.coordinates[0].length;i++)if(!cr(n.coordinates[0][i],t))return!1;return!0}(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}default:throw new Error("feature1 "+f+" geometry not supported");}}function kht(n,t){return!(n[0]>t[0])&&!(n[2]<t[2])&&!(n[1]>t[1])&&!(n[3]<t[3])}function dht(n,t){return n[0]===t[0]&&n[1]===t[1]}function ydt(n,t){return[(n[0]+t[0])/2,(n[1]+t[1])/2]}function ght(n,t,i){var o,s;void 0===i&&(i={});i.mask&&!i.units&&(i.units="kilometers");for(var h=[],r=n[0],u=n[1],f=n[2],e=n[3],c=t/ir([r,u],[f,u],i)*(f-r),l=t/ir([r,u],[r,e],i)*(e-u),v=f-r,y=e-u,p=Math.floor(v/c),w=(y-Math.floor(y/l)*l)/2,a=r+(v-p*c)/2;a<=f;){for(o=u+w;o<=e;)s=ft([a,o],i.properties),i.mask?bht(s,i.mask)&&h.push(s):h.push(s),o+=l;a+=c}return b(h)}function nct(n,t){var f;void 0===t&&(t={});var i=t.precision,r=t.coordinates,u=t.mutate;if(i=null==i||isNaN(i)?6:i,r=null==r||isNaN(r)?3:r,!n)throw new Error("<geojson> is required");if("number"!=typeof i)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");return!1!==u&&void 0!==u||(n=JSON.parse(JSON.stringify(n))),f=Math.pow(10,i),ru(n,function(n){!function(n,t,i){n.length>i&&n.splice(i,n.length);for(var r=0;r<n.length;r++)n[r]=Math.round(n[r]*t)/t}(n,f,r)}),n}function kit(n){if(!n)throw new Error("geojson is required");var t=[];return sf(n,function(n){t.push(n)}),b(t)}function pdt(n,t,i){function y(n,i,u,f){var a,y,s=r[n][i],c=r[n][i+1],h=r[u][f],l=r[u][f+1],o=function(n,t,i,r){if(ob(n,i)||ob(n,r)||ob(t,i)||ob(r,i))return null;var u=n[0],f=n[1],e=t[0],o=t[1],s=i[0],h=i[1],c=r[0],l=r[1],a=(u-e)*(h-l)-(f-o)*(s-c);return 0===a?null:[((u*o-f*e)*(s-c)-(u-e)*(s*l-h*c))/a,((u*o-f*e)*(h-l)-(f-o)*(s*l-h*c))/a]}(s,c,h,l),p,w;null===o||(a=c[0]!==s[0]?(o[0]-s[0])/(c[0]-s[0]):(o[1]-s[1])/(c[1]-s[1]),y=l[0]!==h[0]?(o[0]-h[0])/(l[0]-h[0]):(o[1]-h[1])/(l[1]-h[1]),a>=1||a<=0||y>=1||y<=0)||(p=o,w=!v[p],w&&(v[p]=!0),t?e.push(t(o,n,i,s,c,a,u,f,h,l,y,w)):e.push(o))}function p(n,t){var f,e,o,s,i=r[n][t],u=r[n][t+1];return i[0]<u[0]?(f=i[0],e=u[0]):(f=u[0],e=i[0]),i[1]<u[1]?(o=i[1],s=u[1]):(o=u[1],s=i[1]),{minX:f,minY:o,maxX:e,maxY:s,ring:n,edge:t}}var l,o,h,a,u,f,s,c;if("Polygon"!==n.geometry.type)throw new Error("The input feature must be a Polygon");void 0===i&&(i=1);var r=n.geometry.coordinates,e=[],v={};if(i){for(l=[],o=0;o<r.length;o++)for(h=0;h<r[o].length-1;h++)l.push(p(o,h));a=ue();a.load(l)}for(u=0;u<r.length;u++)for(f=0;f<r[u].length-1;f++)if(i)a.search(p(u,f)).forEach(function(n){var t=n.ring,i=n.edge;y(u,f,t,i)});else for(s=0;s<r.length;s++)for(c=0;c<r[s].length-1;c++)y(u,f,s,c);return t||(e={type:"Feature",geometry:{type:"MultiPoint",coordinates:e}}),e}function ob(n,t){if(!n||!t||n.length!==t.length)return!1;for(var i=0,r=n.length;i<r;i++)if(n[i]instanceof Array&&t[i]instanceof Array){if(!ob(n[i],t[i]))return!1}else if(n[i]!==t[i])return!1;return!0}function wdt(n){function wt(){for(var r,i,t=[],n=0;n<o.features.length;n++)-1==o.features[n].properties.parent&&t.push(n);if(t.length>1)for(n=0;n<t.length;n++){for(r=-1,i=0;i<o.features.length;i++)t[n]!=i&&cr(o.features[t[n]].geometry.coordinates[0][0],o.features[i],{ignoreBoundary:!0})&&pit(o.features[i])<Infinity&&(r=i);o.features[t[n]].properties.parent=r}}function bt(){for(var t,n=0;n<o.features.length;n++)-1==o.features[n].properties.parent&&(t=o.features[n].properties.winding,o.features[n].properties.netWinding=t,kt(n,t))}function kt(n,t){for(var r,i=0;i<o.features.length;i++)o.features[i].properties.parent==n&&(r=t+o.features[i].properties.winding,o.features[i].properties.netWinding=r,kt(i,r))}var a,p,o,e,i,r,at,ut,tt,f,ft,c,k,l,v,vt,yt,pt,d,u,rt,h;if("Feature"!=n.type)throw new Error("The input must a geojson object of type Feature");if(void 0===n.geometry||null==n.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=n.geometry.type)throw new Error("The input must be a geojson Polygon");for(var g=n.geometry.coordinates.length,nt=[],t=0;t<g;t++)a=n.geometry.coordinates[t],sb(a[0],a[a.length-1])||a.push(a[0]),nt.push.apply(nt,a.slice(0,a.length-1));if(!function(n){for(var i={},r=1,t=0,u=n.length;t<u;++t){if(Object.prototype.hasOwnProperty.call(i,n[t])){r=0;break}i[n[t]]=1}return r}(nt))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var dt=nt.length,s=pdt(n,function(n,t,i,r,u,f,e,o,s,h,c,l){return[n,t,i,r,u,f,e,o,s,h,c,l]}),lt=s.length;if(0==lt){for(p=[],t=0;t<g;t++)p.push(ot([n.geometry.coordinates[t]],{parent:-1,winding:bdt(n.geometry.coordinates[t])}));return o=b(p),wt(),bt(),o}for(e=[],i=[],t=0;t<g;t++)for(e.push([]),r=0;r<n.geometry.coordinates[t].length-1;r++)e[t].push([new dit(n.geometry.coordinates[t][gy(r+1,n.geometry.coordinates[t].length-1)],1,[t,r],[t,gy(r+1,n.geometry.coordinates[t].length-1)],void 0)]),i.push(new git(n.geometry.coordinates[t][r],[t,gy(r-1,n.geometry.coordinates[t].length-1)],[t,r],void 0,void 0,!1,!0));for(t=0;t<lt;t++)e[s[t][1]][s[t][2]].push(new dit(s[t][0],s[t][5],[s[t][1],s[t][2]],[s[t][6],s[t][7]],void 0)),s[t][11]&&i.push(new git(s[t][0],[s[t][1],s[t][2]],[s[t][6],s[t][7]],void 0,void 0,!0,!0));for(at=i.length,t=0;t<e.length;t++)for(r=0;r<e[t].length;r++)e[t][r].sort(function(n,t){return n.param<t.param?-1:1});for(ut=[],t=0;t<at;t++)ut.push({minX:i[t].coord[0],minY:i[t].coord[1],maxX:i[t].coord[0],maxY:i[t].coord[1],index:t});for(tt=ue(),tt.load(ut),t=0;t<e.length;t++)for(r=0;r<e[t].length;r++)for(f=0;f<e[t][r].length;f++)c=f==e[t][r].length-1?e[t][gy(r+1,n.geometry.coordinates[t].length-1)][0].coord:e[t][r][f+1].coord,ft=tt.search({minX:c[0],minY:c[1],maxX:c[0],maxY:c[1]})[0],e[t][r][f].nxtIsectAlongEdgeIn=ft.index;for(t=0;t<e.length;t++)for(r=0;r<e[t].length;r++)for(f=0;f<e[t][r].length;f++)c=e[t][r][f].coord,k=(ft=tt.search({minX:c[0],minY:c[1],maxX:c[0],maxY:c[1]})[0]).index,k<dt?i[k].nxtIsectAlongRingAndEdge2=e[t][r][f].nxtIsectAlongEdgeIn:sb(i[k].ringAndEdge1,e[t][r][f].ringAndEdgeIn)?i[k].nxtIsectAlongRingAndEdge1=e[t][r][f].nxtIsectAlongEdgeIn:i[k].nxtIsectAlongRingAndEdge2=e[t][r][f].nxtIsectAlongEdgeIn;for(l=[],t=0,r=0;r<g;r++){for(v=t,f=0;f<n.geometry.coordinates[r].length-1;f++)i[t].coord[0]<i[v].coord[0]&&(v=t),t++;for(vt=i[v].nxtIsectAlongRingAndEdge2,f=0;f<i.length;f++)if(i[f].nxtIsectAlongRingAndEdge1==v||i[f].nxtIsectAlongRingAndEdge2==v){yt=f;break}pt=wd([i[yt].coord,i[v].coord,i[vt].coord],!0)?1:-1;l.push({isect:v,parent:-1,winding:pt})}for(l.sort(function(n,t){return i[n.isect].coord>i[t.isect].coord?-1:1}),p=[];l.length>0;){var et=l.pop(),y=et.isect,st=et.parent,w=et.winding,ht=p.length,ct=[i[y].coord],it=y;for(i[y].ringAndEdge1Walkable?(d=i[y].ringAndEdge1,u=i[y].nxtIsectAlongRingAndEdge1):(d=i[y].ringAndEdge2,u=i[y].nxtIsectAlongRingAndEdge2);!sb(i[y].coord,i[u].coord);){for(ct.push(i[u].coord),rt=void 0,t=0;t<l.length;t++)if(l[t].isect==u){rt=t;break}(null!=rt&&l.splice(rt,1),sb(d,i[u].ringAndEdge1))?((d=i[u].ringAndEdge2,i[u].ringAndEdge2Walkable=!1,i[u].ringAndEdge1Walkable)&&(h={isect:u},wd([i[it].coord,i[u].coord,i[i[u].nxtIsectAlongRingAndEdge2].coord],1==w)?(h.parent=st,h.winding=-w):(h.parent=ht,h.winding=w),l.push(h)),it=u,u=i[u].nxtIsectAlongRingAndEdge2):((d=i[u].ringAndEdge1,i[u].ringAndEdge1Walkable=!1,i[u].ringAndEdge2Walkable)&&(h={isect:u},wd([i[it].coord,i[u].coord,i[i[u].nxtIsectAlongRingAndEdge1].coord],1==w)?(h.parent=st,h.winding=-w):(h.parent=ht,h.winding=w),l.push(h)),it=u,u=i[u].nxtIsectAlongRingAndEdge1)}ct.push(i[u].coord);p.push(ot([ct],{index:ht,parent:st,winding:w,netWinding:void 0}))}return o=b(p),wt(),bt(),o}function wd(n,t){if(void 0===t&&(t=!0),3!=n.length)throw new Error("This function requires an array of three points [x,y]");return(n[1][0]-n[0][0])*(n[2][1]-n[0][1])-(n[1][1]-n[0][1])*(n[2][0]-n[0][0])>=0==t}function bdt(n){for(var t=0,i=0;i<n.length-1;i++)n[i][0]<n[t][0]&&(t=i);return wd([n[gy(t-1,n.length-1)],n[t],n[gy(t+1,n.length-1)]],!0)?1:-1}function sb(n,t){if(!n||!t||n.length!=t.length)return!1;for(var i=0,r=n.length;i<r;i++)if(n[i]instanceof Array&&t[i]instanceof Array){if(!sb(n[i],t[i]))return!1}else if(n[i]!=t[i])return!1;return!0}function gy(n,t){return(n%t+t)%t}function rct(n,t){var i=[],r=dy();return sf(t,function(t){var f,u;(i.forEach(function(n,t){n.id=t}),i.length)?(f=r.search(t),f.features.length&&(u=uct(t,f),i=i.filter(function(n){return n.id!==u.id}),r.remove(u),ki(trt(u,t),function(n){i.push(n);r.insert(n)}))):((i=trt(n,t).features).forEach(function(n){n.bbox||(n.bbox=wst(ou(n)))}),r.load(b(i)))}),b(i)}function trt(n,t){var i=[],o=d(n)[0],h=d(n)[n.geometry.coordinates.length-1],r,u,f,s,e;return irt(o,er(t))||irt(h,er(t))?b([n]):(r=dy(),u=yv(n),r.load(u),f=r.search(t),!f.features.length)?b([n]):(s=uct(t,f),e=ttt(u,function(n,r,u){var e=d(r)[1],f=er(t);return u===s.id?(n.push(f),i.push(gi(n)),irt(f,e)?[f]:[f,e]):(n.push(e),n)},[o]),e.length>1&&i.push(gi(e)),b(i))}function uct(n,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var i,r=1/0;return ki(t,function(t){var u=hl(t,n).properties.dist;u<r&&(i=t,r=u)}),i}function irt(n,t){return n[0]===t[0]&&n[1]===t[1]}function fct(n,t,i,r,u){void 0===u&&(u={});var a=u.steps||64,o=ect(i),f=ect(r),c=Array.isArray(n)||"Feature"!==n.type?{}:n.properties;if(o===f)return gi(fit(n,t,u).geometry.coordinates[0],c);for(var l=o,s=o<f?f:f+360,e=l,h=[],v=0;e<s;)h.push(ec(n,t,e,u).geometry.coordinates),e=l+360*++v/a;return e>s&&h.push(ec(n,t,s,u).geometry.coordinates),gi(h,c)}function ect(n){var t=n%360;return t<0&&(t+=360),t}function cb(n,t){void 0===t&&(t={});var i=hr(n);switch(t.properties||"Feature"!==n.type||(t.properties=n.properties),i.type){case"Polygon":return oct(i,t);case"MultiPolygon":return function(n,t){void 0===t&&(t={});var r=hr(n).coordinates,u=t.properties?t.properties:"Feature"===n.type?n.properties:{},i=[];return r.forEach(function(n){i.push(sct(n,u))}),b(i)}(i,t);default:throw new Error("invalid poly");}}function oct(n,t){return void 0===t&&(t={}),sct(hr(n).coordinates,t.properties?t.properties:"Feature"===n.type?n.properties:{})}function sct(n,t){return n.length>1?ra(n,t):gi(n[0],t)}function hct(n,t){var i,r,u,f;void 0===t&&(t={});var e=t.properties,o=null===(i=t.autoComplete)||void 0===i||i,s=null===(r=t.orderCoords)||void 0===r||r;switch(null!==(u=t.mutate)&&void 0!==u&&u||(n=kf(n)),n.type){case"FeatureCollection":return f=[],n.features.forEach(function(n){f.push(d(cct(n,{},o,s)))}),eo(f,e);default:return cct(n,e,o,s)}}function cct(n,t,i,r){var f,e;t=t||("Feature"===n.type?n.properties:{});var o=hr(n),u=o.coordinates,s=o.type;if(!u.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return i&&(u=lct(u)),ot([u],t);case"MultiLineString":return f=[],e=0,u.forEach(function(n){if(i&&(n=lct(n)),r){var t=function(n){var t=n[0],i=n[1],r=n[2],u=n[3];return Math.abs(t-r)*Math.abs(i-u)}(ou(gi(n)));t>e?(f.unshift(n),e=t):f.push(n)}else f.push(n)}),ot(f,t);default:throw new Error("geometry type "+s+" is not supported");}}function lct(n){var t=n[0],r=t[0],u=t[1],i=n[n.length-1],f=i[0],e=i[1];return r===f&&u===e||n.push(t),n}function kdt(n,t){for(var r,e,o,u,f,s,i=1;i<=8;i*=2){for(r=[],o=!(np(e=n[n.length-1],t)&i),u=0;u<n.length;u++)(s=!(np(f=n[u],t)&i))!==o&&r.push(rrt(e,f,i,t)),s&&r.push(f),e=f,o=s;if(!(n=r).length)break}return r}function rrt(n,t,i,r){return 8&i?[n[0]+(t[0]-n[0])*(r[3]-n[1])/(t[1]-n[1]),r[3]]:4&i?[n[0]+(t[0]-n[0])*(r[1]-n[1])/(t[1]-n[1]),r[1]]:2&i?[r[2],n[1]+(t[1]-n[1])*(r[2]-n[0])/(t[0]-n[0])]:1&i?[r[0],n[1]+(t[1]-n[1])*(r[0]-n[0])/(t[0]-n[0])]:null}function np(n,t){var i=0;return n[0]<t[0]?i|=1:n[0]>t[2]&&(i|=2),n[1]<t[1]?i|=4:n[1]>t[3]&&(i|=8),i}function act(n,t){for(var i,u=[],r=0,f=n;r<f.length;r++)i=kdt(f[r],t),i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&u.push(i));return u}function pct(n,t,i){if(void 0===i&&(i={}),!tr(i=i||{}))throw new Error("options is invalid");var r,u=i.tolerance||0,f=[],e=dy(),o=yv(n);return e.load(o),fl(t,function(n){var t=!1;n&&(ki(e.search(n),function(i){if(!1===t){var f=d(n).sort(),e=d(i).sort();tp(f,e)||(0===u?so(f[0],i)&&so(f[1],i):hl(i,f[0]).properties.dist<=u&&hl(i,f[1]).properties.dist<=u)?(t=!0,r=r?wct(r,n):n):(0===u?so(e[0],n)&&so(e[1],n):hl(n,e[0]).properties.dist<=u&&hl(n,e[1]).properties.dist<=u)&&(r=r?wct(r,i):i)}}),!1===t&&r&&(f.push(r),r=void 0))}),r&&f.push(r),b(f)}function wct(n,t){var i=d(t),u=d(n),f=u[0],e=u[u.length-1],r=n.geometry.coordinates;return tp(i[0],f)?r.unshift(i[1]):tp(i[0],e)?r.push(i[1]):tp(i[1],f)?r.unshift(i[0]):tp(i[1],e)&&r.push(i[0]),n}function bct(n){var t=n%360;return t<0&&(t+=360),t}function pv(n,t,i){var r;return void 0===i&&(i={}),(r=i.final?kct(er(t),er(n)):kct(er(n),er(t)))>180?-(360-r):r}function kct(n,t){var u=nf(n[1]),f=nf(t[1]),i=nf(t[0]-n[0]),r;return i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI),r=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(u/2+Math.PI/4)),(ua(Math.atan2(i,r))+360)%360}function ip(n,t,i,r){var o,f,e,u;return void 0===r&&(r={}),o=t<0,f=cv(Math.abs(t),r.units,"meters"),o&&(f=-Math.abs(f)),e=er(n),u=function(n,t,i,r){r=void 0===r?uc:Number(r);var e=t/r,c=n[0]*Math.PI/180,f=nf(n[1]),o=nf(i),s=e*Math.cos(o),u=f+s;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var h=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),l=Math.abs(h)>1e-11?s/h:Math.cos(f),a=e*Math.sin(o)/l;return[(180*(c+a)/Math.PI+540)%360-180,180*u/Math.PI]}(e,f,i),u[0]+=u[0]-e[0]>180?-360:e[0]-u[0]>180?360:0,ft(u,r.properties)}function dct(n,t,i,r,u,f){for(var o,s,e=0;e<n.length;e++)o=n[e],s=n[e+1],e===n.length-1&&(s=n[0]),r=lb(o,s,t),i<=0&&r>0?lb(t,o,u)<0||(u=o):i>0&&r<=0&&(ddt(t,o,f)||(f=o)),i=r;return[u,f]}function ddt(n,t,i){return lb(n,t,i)>0}function lb(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(t[1]-n[1])}function dd(n){for(var t,i,r=d(n),f=0,u=1;u<r.length;)t=i||r[0],f+=((i=r[u])[0]-t[0])*(i[1]+t[1]),u++;return f>0}function gd(n,t){switch("Feature"===n.type?n.geometry.type:n.type){case"GeometryCollection":return oo(n,function(n){gd(n,t)}),n;case"LineString":return gct(d(n),t),n;case"Polygon":return nlt(d(n),t),n;case"MultiLineString":return d(n).forEach(function(n){gct(n,t)}),n;case"MultiPolygon":return d(n).forEach(function(n){nlt(n,t)}),n;case"Point":case"MultiPoint":return n}}function gct(n,t){dd(n)===t&&n.reverse()}function nlt(n,t){dd(n[0])!==t&&n[0].reverse();for(var i=1;i<n.length;i++)dd(n[i])===t&&n[i].reverse()}function gdt(n,t){var u;if(!tr(t=t||{}))throw new Error("options is invalid");var e=t.zProperty||"elevation",c=t.flip,l=t.flags;el(n,"Point","input must contain Points");for(var o=function(n,t){var i={};return ki(n,function(n){var t=d(n)[1];i[t]||(i[t]=[]);i[t].push(n)}),Object.keys(i).map(function(n){return i[n].sort(function(n,t){return d(n)[0]-d(t)[0]})}).sort(function(n,i){return t?d(n[0])[1]-d(i[0])[1]:d(i[0])[1]-d(n[0])[1]})}(n,c),s=[],i=0;i<o.length;i++){for(var h=o[i],f=[],r=0;r<h.length;r++)u=h[r],u.properties[e]?f.push(u.properties[e]):f.push(0),!0===l&&(u.properties.matrixPosition=[i,r]);s.push(f)}return s}function ngt(n,i,r,u){var a,e,o,f,l,p;for(u=u||{},a=Object.keys(urt),e=0;e<a.length;e++)o=a[e],f=u[o],f=null!=f?f:urt[o],ea[o]=f;return ea.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+i+":"+(i+r)+"]"),p=function(n,i,r){for(var et,st,ut,ht,p,w,it,b,d,rt,nt,tt,a,ct=n.length-1,lt=n[0].length-1,ot={rows:ct,cols:lt,cells:[]},f=i+Math.abs(r),ft=0;ft<ct;++ft)for(ot.cells[ft]=[],et=0;et<lt;++et){var u=0,e=n[ft+1][et],o=n[ft+1][et+1],s=n[ft][et+1],l=n[ft][et];isNaN(e)||isNaN(o)||isNaN(s)||isNaN(l)||(u|=e<i?0:e>f?128:64,u|=o<i?0:o>f?32:16,u|=s<i?0:s>f?8:4,st=+(u|=l<i?0:l>f?2:1),ut=0,(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u)&&(ht=(e+o+s+l)/4,ut=ht>f?2:ht<i?0:1,34===u?1===ut?u=35:0===ut&&(u=136):136===u?1===ut?(u=35,ut=4):0===ut&&(u=34):17===u?1===ut?(u=155,ut=4):0===ut&&(u=153):68===u?1===ut?(u=103,ut=4):0===ut&&(u=102):153===u?1===ut&&(u=155):102===u?1===ut&&(u=103):152===u?ut<2&&(u=156,ut=1):137===u?ut<2&&(u=139,ut=1):98===u?ut<2&&(u=99,ut=1):38===u?ut<2&&(u=39,ut=1):18===u?ut>0?(u=156,ut=4):u=152:33===u?ut>0?(u=139,ut=4):u=137:72===u?ut>0?(u=99,ut=4):u=98:132===u&&(ut>0?(u=39,ut=4):u=38)),0!=u&&170!=u&&(p=w=it=b=d=rt=nt=tt=.5,a=[],1===u?(it=1-t(i,s,l),tt=1-t(i,e,l),a.push(v[u])):169===u?(it=t(f,l,s),tt=t(f,l,e),a.push(v[u])):4===u?(rt=1-t(i,o,s),b=t(i,l,s),a.push(h[u])):166===u?(rt=t(f,s,o),b=1-t(f,s,l),a.push(h[u])):16===u?(d=t(i,s,o),w=t(i,e,o),a.push(c[u])):154===u?(d=1-t(f,o,s),w=1-t(f,o,e),a.push(c[u])):64===u?(nt=t(i,l,e),p=1-t(i,o,e),a.push(k[u])):106===u?(nt=1-t(f,e,l),p=t(f,e,o),a.push(k[u])):168===u?(b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),a.push(y[u]),a.push(v[u])):2===u?(b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),a.push(y[u]),a.push(v[u])):162===u?(d=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),a.push(y[u]),a.push(v[u])):8===u?(d=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),a.push(c[u]),a.push(h[u])):138===u?(d=1-t(i,o,s),rt=1-t(f,o,s),p=1-t(f,o,e),w=1-t(i,o,e),a.push(c[u]),a.push(h[u])):32===u?(d=t(f,s,o),rt=t(i,s,o),p=t(i,e,o),w=t(f,e,o),a.push(c[u]),a.push(h[u])):42===u?(tt=1-t(f,e,l),nt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o),a.push(g[u]),a.push(k[u])):128===u&&(tt=t(i,l,e),nt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e),a.push(g[u]),a.push(k[u])),5===u?(rt=1-t(i,o,s),tt=1-t(i,e,l),a.push(h[u])):165===u?(rt=t(f,s,o),tt=t(f,l,e),a.push(h[u])):20===u?(b=t(i,l,s),w=t(i,e,o),a.push(y[u])):150===u?(b=1-t(f,s,l),w=1-t(f,o,e),a.push(y[u])):80===u?(d=t(i,s,o),nt=t(i,l,e),a.push(c[u])):90===u?(d=1-t(f,o,s),nt=1-t(f,e,l),a.push(c[u])):65===u?(it=1-t(i,s,l),p=1-t(i,o,e),a.push(v[u])):105===u?(it=t(f,l,s),p=t(f,e,o),a.push(v[u])):160===u?(d=t(f,s,o),rt=t(i,s,o),tt=t(i,l,e),nt=t(f,l,e),a.push(c[u]),a.push(h[u])):10===u?(d=1-t(i,o,s),rt=1-t(f,o,s),tt=1-t(f,e,l),nt=1-t(i,e,l),a.push(c[u]),a.push(h[u])):130===u?(b=1-t(i,s,l),it=1-t(f,s,l),p=1-t(f,o,e),w=1-t(i,o,e),a.push(y[u]),a.push(v[u])):40===u?(b=t(f,l,s),it=t(i,l,s),p=t(i,e,o),w=t(f,e,o),a.push(y[u]),a.push(v[u])):101===u?(rt=t(f,s,o),p=t(f,e,o),a.push(h[u])):69===u?(rt=1-t(i,o,s),p=1-t(i,o,e),a.push(h[u])):149===u?(tt=t(f,l,e),w=1-t(f,o,e),a.push(g[u])):21===u?(tt=1-t(i,e,l),w=t(i,e,o),a.push(g[u])):86===u?(b=1-t(f,s,l),nt=1-t(f,e,l),a.push(y[u])):84===u?(b=t(i,l,s),nt=t(i,l,e),a.push(y[u])):89===u?(d=1-t(f,o,s),it=t(f,l,s),a.push(v[u])):81===u?(d=t(i,s,o),it=1-t(i,s,l),a.push(v[u])):96===u?(d=t(f,s,o),rt=t(i,s,o),nt=t(i,l,e),p=t(f,e,o),a.push(c[u]),a.push(h[u])):74===u?(d=1-t(i,o,s),rt=1-t(f,o,s),nt=1-t(f,e,l),p=1-t(i,o,e),a.push(c[u]),a.push(h[u])):24===u?(d=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),w=t(i,e,o),a.push(c[u]),a.push(v[u])):146===u?(d=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),w=1-t(f,o,e),a.push(c[u]),a.push(v[u])):6===u?(rt=1-t(i,o,s),b=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),a.push(h[u]),a.push(y[u])):164===u?(rt=t(f,s,o),b=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),a.push(h[u]),a.push(y[u])):129===u?(it=1-t(i,s,l),tt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e),a.push(v[u]),a.push(g[u])):41===u?(it=t(f,l,s),tt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o),a.push(v[u]),a.push(g[u])):66===u?(b=1-t(i,s,l),it=1-t(f,s,l),nt=1-t(f,e,l),p=1-t(i,o,e),a.push(y[u]),a.push(v[u])):104===u?(b=t(f,l,s),it=t(i,l,s),nt=t(i,l,e),p=t(f,e,o),a.push(v[u]),a.push(ai[u])):144===u?(d=t(i,s,o),tt=t(i,l,e),nt=t(f,l,e),w=1-t(f,o,e),a.push(c[u]),a.push(k[u])):26===u?(d=1-t(f,o,s),tt=1-t(f,e,l),nt=1-t(i,e,l),w=t(i,e,o),a.push(c[u]),a.push(k[u])):36===u?(rt=t(f,s,o),b=t(i,l,s),p=t(i,e,o),w=t(f,e,o),a.push(h[u]),a.push(y[u])):134===u?(rt=1-t(i,o,s),b=1-t(f,s,l),p=1-t(f,o,e),w=1-t(i,o,e),a.push(h[u]),a.push(y[u])):9===u?(d=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),tt=1-t(i,e,l),a.push(c[u]),a.push(h[u])):161===u?(d=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),tt=t(f,l,e),a.push(c[u]),a.push(h[u])):37===u?(rt=t(f,s,o),tt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o),a.push(h[u]),a.push(g[u])):133===u?(rt=1-t(i,o,s),tt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e),a.push(h[u]),a.push(g[u])):148===u?(b=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),w=1-t(f,o,e),a.push(y[u]),a.push(k[u])):22===u?(b=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),w=t(i,e,o),a.push(y[u]),a.push(k[u])):82===u?(d=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),nt=1-t(f,e,l),a.push(c[u]),a.push(v[u])):88===u?(d=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),nt=t(i,l,e),a.push(c[u]),a.push(v[u])):73===u?(d=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),p=1-t(i,o,e),a.push(c[u]),a.push(h[u])):97===u?(d=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),p=t(f,e,o),a.push(c[u]),a.push(h[u])):145===u?(d=t(i,s,o),it=1-t(i,s,l),tt=t(f,l,e),w=1-t(f,o,e),a.push(c[u]),a.push(g[u])):25===u?(d=1-t(f,o,s),it=t(f,l,s),tt=1-t(i,e,l),w=t(i,e,o),a.push(c[u]),a.push(g[u])):70===u?(rt=1-t(i,o,s),b=1-t(f,s,l),nt=1-t(f,e,l),p=1-t(i,o,e),a.push(h[u]),a.push(y[u])):100===u?(rt=t(f,s,o),b=t(i,l,s),nt=t(i,l,e),p=t(f,e,o),a.push(h[u]),a.push(y[u])):34===u?(0===ut?(d=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e)):(d=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(g[u]),a.push(k[u])):35===u?(4===ut?(d=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e)):(d=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(v[u]),a.push(k[u])):136===u?(0===ut?(d=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o)):(d=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e)),a.push(c[u]),a.push(h[u]),a.push(g[u]),a.push(k[u])):153===u?(0===ut?(d=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),w=t(i,e,o)):(d=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),w=1-t(f,o,e)),a.push(c[u]),a.push(v[u])):102===u?(0===ut?(rt=1-t(i,o,s),b=t(i,l,s),nt=t(i,l,e),p=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),nt=1-t(f,e,l),p=t(f,e,o)),a.push(h[u]),a.push(k[u])):155===u?(4===ut?(d=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),w=t(i,e,o)):(d=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),w=1-t(f,o,e)),a.push(c[u]),a.push(g[u])):103===u?(4===ut?(rt=1-t(i,o,s),b=t(i,l,s),nt=t(i,l,e),p=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),nt=1-t(f,e,l),p=t(f,e,o)),a.push(h[u]),a.push(y[u])):152===u?(0===ut?(d=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),w=t(i,e,o)):(d=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),w=1-t(f,o,e)),a.push(c[u]),a.push(y[u]),a.push(v[u])):156===u?(4===ut?(d=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),w=t(i,e,o)):(d=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),w=1-t(f,o,e)),a.push(c[u]),a.push(v[u]),a.push(k[u])):137===u?(0===ut?(d=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o)):(d=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e)),a.push(c[u]),a.push(h[u]),a.push(v[u])):139===u?(4===ut?(d=t(f,s,o),rt=t(i,s,o),it=1-t(i,s,l),tt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o)):(d=1-t(i,o,s),rt=1-t(f,o,s),it=t(f,l,s),tt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e)),a.push(c[u]),a.push(h[u]),a.push(g[u])):98===u?(0===ut?(d=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),nt=t(i,l,e),p=1-t(i,o,e)):(d=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),nt=1-t(f,e,l),p=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(k[u])):99===u?(4===ut?(d=1-t(i,o,s),rt=1-t(f,o,s),b=t(f,l,s),it=t(i,l,s),nt=t(i,l,e),p=1-t(i,o,e)):(d=t(f,s,o),rt=t(i,s,o),b=1-t(i,s,l),it=1-t(f,s,l),nt=1-t(f,e,l),p=t(f,e,o)),a.push(c[u]),a.push(h[u]),a.push(v[u])):38===u?(0===ut?(rt=1-t(i,o,s),b=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o)),a.push(h[u]),a.push(g[u]),a.push(k[u])):39===u?(4===ut?(rt=1-t(i,o,s),b=t(i,l,s),tt=t(i,l,e),nt=t(f,l,e),p=1-t(f,o,e),w=1-t(i,o,e)):(rt=t(f,s,o),b=1-t(f,s,l),tt=1-t(f,e,l),nt=1-t(i,e,l),p=t(i,e,o),w=t(f,e,o)),a.push(h[u]),a.push(y[u]),a.push(k[u])):85===u&&(d=1,rt=0,b=1,it=0,tt=0,nt=1,p=0,w=1),(p<0||p>1||w<0||w>1||d<0||d>1||b<0||b>1||tt<0||tt>1||nt<0||nt>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+st+" "+e+","+o+","+s+","+l+" "+ut+" "+p+" "+w+" "+d+" "+rt+" "+b+" "+it+" "+tt+" "+nt),ot.cells[ft][et]={cval:u,cval_real:st,flipped:ut,topleft:p,topright:w,righttop:d,rightbottom:rt,bottomright:b,bottomleft:it,leftbottom:tt,lefttop:nt,edges:a}))}return ot}(n,i,r),ea.polygons?(ea.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(n){var t=[],i=0;return n.cells.forEach(function(n,r){n.forEach(function(n,u){if(void 0!==n){var f=s[n.cval](n);"object"==typeof f&&vrt(f)?"object"==typeof f[0]&&vrt(f[0])?"object"==typeof f[0][0]&&vrt(f[0][0])?f.forEach(function(n){n.forEach(function(n){n[0]+=u;n[1]+=r});t[i++]=n}):(f.forEach(function(n){n[0]+=u;n[1]+=r}),t[i++]=f):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),t}(p)):(ea.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(n){for(var u,o,h=[],c=n.rows,l=n.cols,s=[],e=0;e<c;e++)for(u=0;u<l;u++)if(void 0!==n.cells[e][u]&&n.cells[e][u].edges.length>0){var f=igt(n.cells[e][u]),t=null,i=u,r=e;null!==f&&s.push([f.p[0]+i,f.p[1]+r]);do{if(null===(t=rgt(n.cells[r][i],f.x,f.y,f.o)))break;if(s.push([t.p[0]+i,t.p[1]+r]),i+=t.x,f=t,(r+=t.y)<0||r>=c||i<0||i>=l||void 0===n.cells[r][i]){if(o=tgt(n,i-=t.x,r-=t.y,t.x,t.y,t.o),null===o)break;o.path.forEach(function(n){s.push(n)});i=o.i;r=o.j;f=o}}while(void 0!==n.cells[r][i]&&n.cells[r][i].edges.length>0);h.push(s);s=[];n.cells[e][u].edges.length>0&&u--}return h}(p)),"function"==typeof ea.successCallback&&ea.successCallback(l),l}function t(n,t,i){return(n-t)/(i-t)}function vrt(n){return n.constructor.toString().indexOf("Array")>-1}function tgt(n,t,i,r,u,f){for(var c=n.cells[i][t],h=c.cval_real,o=t+r,e=i+u,s=[],l=!1;!l;){if(void 0===n.cells[e]||void 0===n.cells[e][o])if(e-=u,o-=r,h=(c=n.cells[e][o]).cval_real,-1===u)if(0===f)if(1&h)s.push([o,e]),r=-1,u=0,f=0;else{if(!(4&h)){s.push([o+c.bottomright,e]);r=0;u=1;f=1;l=!0;break}s.push([o+1,e]);r=1;u=0;f=0}else{if(!(1&h)){if(4&h){s.push([o+c.bottomright,e]);r=0;u=1;f=1;l=!0;break}s.push([o+c.bottomleft,e]);r=0;u=1;f=0;l=!0;break}s.push([o,e]);r=-1;u=0;f=0}else if(1===u)if(0===f){if(!(h&ah)){if(h&ee){s.push([o+c.topleft,e+1]);r=0;u=-1;f=0;l=!0;break}s.push([o+c.topright,e+1]);r=0;u=-1;f=1;l=!0;break}s.push([o+1,e+1]);r=1;u=0;f=1}else s.push([o+1,e+1]),r=1,u=0,f=1;else if(-1===r)if(0===f){if(!(h&ee)){if(1&h){s.push([o,e+c.leftbottom]);r=1;u=0;f=0;l=!0;break}s.push([o,e+c.lefttop]);r=1;u=0;f=1;l=!0;break}s.push([o,e+1]);r=0;u=1;f=0}else{if(!(h&ee)){console.log("MarchingSquaresJS-isoBands: wtf");break}s.push([o,e+1]);r=0;u=1;f=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===f){if(!(4&h)){s.push([o+1,e+c.rightbottom]);r=-1;u=0;f=0;l=!0;break}s.push([o+1,e]);r=0;u=-1;f=1}else{if(!(4&h)){if(h&ah){s.push([o+1,e+c.righttop]);r=-1;u=0;f=1;break}s.push([o+1,e+c.rightbottom]);r=-1;u=0;f=0;l=!0;break}s.push([o+1,e]);r=0;u=-1;f=1}}else if(h=(c=n.cells[e][o]).cval_real,-1===r)if(0===f)if(void 0!==n.cells[e-1]&&void 0!==n.cells[e-1][o])r=0,u=-1,f=1;else{if(!(1&h)){s.push([o+c.bottomright,e]);r=0;u=1;f=1;l=!0;break}s.push([o,e])}else{if(!(h&ee)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+o+","+e);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===f){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==n.cells[e+1]&&void 0!==n.cells[e+1][o])r=0,u=1,f=0;else{if(!(h&ah)){s.push([o+c.topleft,e+1]);r=0;u=-1;f=0;l=!0;break}s.push([o+1,e+1]);r=1;u=0;f=1}}else if(-1===u){if(1!==f){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==n.cells[e][o+1])r=1,u=0,f=1;else{if(!(4&h)){s.push([o+1,e+c.righttop]);r=-1;u=0;f=1;l=!0;break}s.push([o+1,e]);r=0;u=-1;f=1}}else{if(1!==u){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==f){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==n.cells[e][o-1])r=-1,u=0,f=0;else{if(!(h&ee)){s.push([o,e+c.leftbottom]);r=1;u=0;f=0;l=!0;break}s.push([o,e+1]);r=0;u=1;f=0}}if(e+=u,(o+=r)===t&&e===i)break}return{path:s,i:o,j:e,x:r,y:u,o:f}}function igt(n){if(n.edges.length>0){var i=n.edges[n.edges.length-1],t=n.cval_real;switch(i){case 0:return t&ah?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[n.topleft,1],x:0,y:-1,o:0};case 1:return 4&t?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 2:return 4&t?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[n.topleft,1],x:0,y:-1,o:0};case 3:return 1&t?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 4:return t&ah?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[n.topright,1],x:0,y:-1,o:1};case 5:return 4&t?{p:[n.topright,1],x:0,y:-1,o:1}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 6:return 4&t?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[n.topright,1],x:0,y:-1,o:1};case 7:return 1&t?{p:[n.topright,1],x:0,y:-1,o:1}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 8:return 4&t?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[1,n.righttop],x:-1,y:0,o:1};case 9:return 1&t?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 10:return 1&t?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[1,n.righttop],x:-1,y:0,o:1};case 11:return t&ee?{p:[1,n.righttop],x:-1,y:0,o:1}:{p:[0,n.lefttop],x:1,y:0,o:1};case 12:return 4&t?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 13:return 1&t?{p:[1,n.rightbottom],x:-1,y:0,o:0}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 14:return 1&t?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[1,n.rightbottom],x:-1,y:0,o:0};case 15:return t&ee?{p:[1,n.rightbottom],x:-1,y:0,o:0}:{p:[0,n.lefttop],x:1,y:0,o:1};case 16:return 4&t?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[0,n.leftbottom],x:1,y:0,o:0};case 17:return t&ee?{p:[n.bottomright,0],x:0,y:1,o:1}:{p:[0,n.lefttop],x:1,y:0,o:1};case 18:return 1&t?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[n.bottomleft,0],x:0,y:1,o:0};case 19:return t&ee?{p:[n.bottomleft,0],x:0,y:1,o:0}:{p:[0,n.lefttop],x:1,y:0,o:1};case 20:return t&ee?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[0,n.leftbottom],x:1,y:0,o:0};case 21:return t&ah?{p:[0,n.leftbottom],x:1,y:0,o:0}:{p:[n.topright,1],x:0,y:-1,o:1};case 22:return t&ee?{p:[n.topleft,1],x:0,y:-1,o:0}:{p:[0,n.lefttop],x:1,y:0,o:1};case 23:return t&ah?{p:[0,n.lefttop],x:1,y:0,o:1}:{p:[n.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!");console.log(n)}}return null}function rgt(n,t,i,r){var s,l,f,e,o,u=n.cval;switch(t){case-1:switch(r){case 0:s=h[u];f=kt[u];e=dt[u];o=gt[u];break;default:s=c[u];f=pt[u];e=wt[u];o=bt[u]}break;case 1:switch(r){case 0:s=g[u];f=hi[u];e=ci[u];o=li[u];break;default:s=k[u];f=ei[u];e=oi[u];o=si[u]}break;default:switch(i){case-1:switch(r){case 0:s=ai[u];f=ht[u];e=ct[u];o=lt[u];break;default:s=vi[u];f=at[u];e=vt[u];o=yt[u]}break;case 1:switch(r){case 0:s=v[u];f=ni[u];e=ti[u];o=ii[u];break;default:s=y[u];f=ri[u];e=ui[u];o=fi[u]}}}if(l=n.edges.indexOf(s),void 0===n.edges[l])return null;switch(function(n,t){delete n.edges[t];for(var i=t+1;i<n.edges.length;i++)n.edges[i-1]=n.edges[i];n.edges.pop()}(n,l),u=n.cval_real,s){case 0:u&ah?(t=n.topleft,i=1):(t=1,i=n.righttop);break;case 1:4&u?(t=1,i=n.rightbottom):(t=n.topleft,i=1);break;case 2:4&u?(t=n.topleft,i=1):(t=n.bottomright,i=0);break;case 3:1&u?(t=n.bottomleft,i=0):(t=n.topleft,i=1);break;case 4:u&ah?(t=n.topright,i=1):(t=1,i=n.righttop);break;case 5:4&u?(t=1,i=n.rightbottom):(t=n.topright,i=1);break;case 6:4&u?(t=n.topright,i=1):(t=n.bottomright,i=0);break;case 7:1&u?(t=n.bottomleft,i=0):(t=n.topright,i=1);break;case 8:4&u?(t=1,i=n.righttop):(t=n.bottomright,i=0);break;case 9:1&u?(t=n.bottomleft,i=0):(t=1,i=n.righttop);break;case 10:1&u?(t=1,i=n.righttop):(t=0,i=n.leftbottom);break;case 11:u&ee?(t=0,i=n.lefttop):(t=1,i=n.righttop);break;case 12:4&u?(t=1,i=n.rightbottom):(t=n.bottomright,i=0);break;case 13:1&u?(t=n.bottomleft,i=0):(t=1,i=n.rightbottom);break;case 14:1&u?(t=1,i=n.rightbottom):(t=0,i=n.leftbottom);break;case 15:u&ee?(t=0,i=n.lefttop):(t=1,i=n.rightbottom);break;case 16:4&u?(t=0,i=n.leftbottom):(t=n.bottomright,i=0);break;case 17:u&ee?(t=0,i=n.lefttop):(t=n.bottomright,i=0);break;case 18:1&u?(t=n.bottomleft,i=0):(t=0,i=n.leftbottom);break;case 19:u&ee?(t=0,i=n.lefttop):(t=n.bottomleft,i=0);break;case 20:u&ee?(t=0,i=n.leftbottom):(t=n.topleft,i=1);break;case 21:u&ah?(t=n.topright,i=1):(t=0,i=n.leftbottom);break;case 22:u&ee?(t=0,i=n.lefttop):(t=n.topleft,i=1);break;case 23:u&ah?(t=n.topright,i=1):(t=0,i=n.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(n),null}return void 0!==t&&void 0!==i&&void 0!==f&&void 0!==e&&void 0!==o||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(n),console.log(t+" "+i+" "+f+" "+e+" "+o)),{p:[t,i],x:f,y:e,o:o}}function ugt(n){var t=[],i=[],r;return n.forEach(function(n){var r=pit(ot([n]));i.push(r);t.push({ring:n,area:r})}),i.sort(function(n,t){return t-n}),r=[],i.forEach(function(n){for(var i=0;i<t.length;i++)if(t[i].area===n){r.push(t[i].ring);t.splice(i,1);break}}),r}function fgt(n){for(var i,u,e,r,t=n.map(function(n){return{lrCoordinates:n,grouped:!1}}),f=[];!ogt(t);)for(i=0;i<t.length;i++)if(!t[i].grouped){for(u=[],u.push(t[i].lrCoordinates),t[i].grouped=!0,e=ot([t[i].lrCoordinates]),r=i+1;r<t.length;r++)t[r].grouped||egt(ot([t[r].lrCoordinates]),e)&&(u.push(t[r].lrCoordinates),t[r].grouped=!0);f.push(u)}return f}function egt(n,t){for(var r=ld(n),i=0;i<r.features.length;i++)if(!cr(r.features[i],t))return!1;return!0}function ogt(n){for(var t=0;t<n.length;t++)if(!1===n[t].grouped)return!1;return!0}function tlt(n,t,i){if(!tr(i=i||{}))throw new Error("options is invalid");var r=i.pivot,u=i.mutate;if(!n)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("angle is required");return 0===t||(r||(r=fa(n)),!1!==u&&void 0!==u||(n=kf(n)),ru(n,function(n){var u=pv(r,n)+t,f=pd(r,n),i=d(ip(r,f,u));n[0]=i[0];n[1]=i[1]})),n}function ilt(n,t,i){var r,u,f;if(!tr(i=i||{}))throw new Error("options is invalid");if(r=i.origin,u=i.mutate,!n)throw new Error("geojson required");if("number"!=typeof t||0===t)throw new Error("invalid factor");return f=Array.isArray(r)||"object"==typeof r,!0!==u&&(n=kf(n)),"FeatureCollection"!==n.type||f?rlt(n,t,r):(ki(n,function(i,u){n.features[u]=rlt(i,t,r)}),n)}function rlt(n,t,i){var r="Point"===de(n);return i=function(n,t){if(null==t&&(t="centroid"),Array.isArray(t)||"object"==typeof t)return er(t);var i=n.bbox?n.bbox:ou(n),r=i[0],u=i[1],f=i[2],e=i[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return ft([r,u]);case"se":case"southeast":case"eastsouth":case"bottomright":return ft([f,u]);case"nw":case"northwest":case"westnorth":case"topleft":return ft([r,e]);case"ne":case"northeast":case"eastnorth":case"topright":return ft([f,e]);case"center":return cd(n);case void 0:case null:case"centroid":return fa(n);default:throw new Error("invalid origin");}}(n,i),1===t||r||ru(n,function(n){var u=pd(i,n),f=pv(i,n),r=d(ip(i,u*t,f));n[0]=r[0];n[1]=r[1];3===n.length&&(n[2]*=t)}),n}function ng(n){var t=n[0],i=n[1];return[i[0]-t[0],i[1]-t[1]]}function yrt(n,t){return n[0]*t[1]-t[0]*n[1]}function sgt(n,t){return!function(n,t){return 0===yrt(ng(n),ng(t))}(n,t)&&function(n,t){var r,i,u=n[0],f=ng(n),o=t[0],e=ng(t),s=yrt(f,e);return function(n,t){return[n[0]+t[0],n[1]+t[1]]}(u,function(n,t){return[n*t[0],n*t[1]]}(yrt((i=u,[(r=o)[0]-i[0],r[1]-i[1]]),e)/s,f))}(n,t)}function ult(n,t,i){var f=[],e=td(t,i),u=d(n),r=[];return u.forEach(function(n,t){var s,l,a,i,o,h,c,v,y,p,w;t!==u.length-1&&(s=(i=n,o=u[t+1],h=e,c=Math.sqrt((i[0]-o[0])*(i[0]-o[0])+(i[1]-o[1])*(i[1]-o[1])),v=i[0]+h*(o[1]-i[1])/c,y=o[0]+h*(o[1]-i[1])/c,p=i[1]+h*(i[0]-o[0])/c,w=o[1]+h*(i[0]-o[0])/c,[[v,p],[y,w]]),(f.push(s),t>0)&&(l=f[t-1],a=sgt(s,l),!1!==a&&(l[1]=a,s[0]=a),r.push(l[0]),t===u.length-2&&(r.push(s[0]),r.push(s[1]))),2===u.length&&(r.push(s[0]),r.push(s[1])))}),gi(r,n.properties)}function prt(n,t,i){var r=t[0]-n[0],u=t[1]-n[1],f=i[0]-t[0];return function(n){return(n>0)-(n<0)||+n}(r*(i[1]-t[1])-f*u)}function flt(n,t){return t.geometry.coordinates[0].every(function(t){return cr(ft(t),n)})}function slt(n,t){var i=!0;return sf(n,function(n){sf(t,function(t){if(!1===i)return!1;i=function(n,t){switch(n.type){case"Point":switch(t.type){case"Point":return i=n.coordinates,r=t.coordinates,!(i[0]===r[0]&&i[1]===r[1]);case"LineString":return!hlt(t,n);case"Polygon":return!cr(n,t)}break;case"LineString":switch(t.type){case"Point":return!hlt(n,t);case"LineString":return!function(n,t){return sl(n,t).features.length>0?!0:!1}(n,t);case"Polygon":return!clt(t,n)}break;case"Polygon":switch(t.type){case"Point":return!cr(t,n);case"LineString":return!clt(n,t);case"Polygon":return!function(n,t){for(var r,f,i=0,u=n.coordinates[0];i<u.length;i++)if(cr(u[i],t))return!0;for(r=0,f=t.coordinates[0];r<f.length;r++)if(cr(f[r],n))return!0;return sl(cb(n),cb(t)).features.length>0?!0:!1}(t,n)}}var i,r;return!1}(n.geometry,t.geometry)})}),i}function hlt(n,t){for(var i=0;i<n.coordinates.length-1;i++)if(lgt(n.coordinates[i],n.coordinates[i+1],t.coordinates))return!0;return!1}function clt(n,t){for(var i=0,r=t.coordinates;i<r.length;i++)if(cr(r[i],n))return!0;return sl(t,cb(n)).features.length>0}function lgt(n,t,i){var f=i[0]-n[0],e=i[1]-n[1],r=t[0]-n[0],u=t[1]-n[1];return 0==f*u-e*r&&(Math.abs(r)>=Math.abs(u)?r>0?n[0]<=i[0]&&i[0]<=t[0]:t[0]<=i[0]&&i[0]<=n[0]:u>0?n[1]<=i[1]&&i[1]<=t[1]:t[1]<=i[1]&&i[1]<=n[1])}function llt(n,t){return!(n[0]>t[0])&&!(n[2]<t[2])&&!(n[1]>t[1])&&!(n[3]<t[3])}function wrt(n,t){return n[0]===t[0]&&n[1]===t[1]}function agt(n,t){return[(n[0]+t[0])/2,(n[1]+t[1])/2]}function alt(n,t){for(var i,e,r=!1,u=!1,o=n.coordinates.length,f=0;f<o&&!r&&!u;){for(i=0;i<t.coordinates.length-1;i++)e=!0,0!==i&&i!==t.coordinates.length-2||(e=!1),plt(t.coordinates[i],t.coordinates[i+1],n.coordinates[f],e)?r=!0:u=!0;f++}return r&&u}function vlt(n,t){return sl(n,oct(t)).features.length>0}function ylt(n,t){for(var i=!1,r=!1,f=n.coordinates.length,u=0;u<f&&(!i||!r);u++)cr(ft(n.coordinates[u]),t)?i=!0:r=!0;return r&&i}function plt(n,t,i,r){var e=i[0]-n[0],o=i[1]-n[1],u=t[0]-n[0],f=t[1]-n[1];return 0==e*f-o*u&&(r?Math.abs(u)>=Math.abs(f)?u>0?n[0]<=i[0]&&i[0]<=t[0]:t[0]<=i[0]&&i[0]<=n[0]:f>0?n[1]<=i[1]&&i[1]<=t[1]:t[1]<=i[1]&&i[1]<=n[1]:Math.abs(u)>=Math.abs(f)?u>0?n[0]<i[0]&&i[0]<t[0]:t[0]<i[0]&&i[0]<n[0]:f>0?n[1]<i[1]&&i[1]<t[1]:t[1]<i[1]&&i[1]<n[1])}function wlt(n){return n.coordinates.map(function(t){return{type:n.type.replace("Multi",""),coordinates:t}})}function blt(n,t){return n.hasOwnProperty("coordinates")?n.coordinates.length===t.coordinates.length:n.length===t.length}function vgt(n,t){return tp(n,t,{strict:!0})}function klt(n,t){var i=!1;return sf(n,function(n){sf(t,function(t){if(!0===i)return!0;i=!slt(n.geometry,t.geometry)})}),i}function nat(n,t,i){i=i||[];for(var r=0;r<n;r++)i[r]=t;return i}function int(n,t){return hv(pv(n[0],n[1]))===hv(pv(t[0],t[1]))}function iat(n,t){if(n.geometry&&n.geometry.type)return n.geometry.type;if(n.type)return n.type;throw new Error("Invalid GeoJSON object for "+t);}function rat(n){for(var t=n,i=[];t.parent;)i.unshift(t),t=t.parent;return i}function rp(n,t){var i,r,u,f;for(t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[],i=0;i<n.length;i++)for(this.grid[i]=[],r=0,u=n[i];r<u.length;r++)f=new tg(i,r,u[r]),this.grid[i][r]=f,this.nodes.push(f);this.init()}function tg(n,t,i){this.x=n;this.y=t;this.weight=i}function uat(n){this.content=[];this.scoreFunction=n}function rnt(n,t){for(var i=0;i<t.features.length;i++)if(cr(n,t.features[i]))return!0;return!1}function fat(n){return function(){return n}}function unt(n){return n[0]}function fnt(n){return n[1]}function ig(){this._=null}function rg(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function vb(n,t){var i=t,r=t.R,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.R=r.L;i.R&&(i.R.U=i);r.L=i}function yb(n,t){var i=t,r=t.L,u=i.U;u?u.L===i?u.L=r:u.R=r:n._=r;r.U=u;i.U=r;i.L=r.R;i.L&&(i.L.U=i);r.R=i}function eat(n){for(;n.L;)n=n.L;return n}function pb(n,t,i,r){var u=[null,null],f=ve.push(u)-1;return u.left=n,u.right=t,i&&ug(u,n,t,i),r&&ug(u,t,n,r),rs[n.index].halfedges.push(f),rs[t.index].halfedges.push(f),u}function wb(n,t,i){var r=[t,i];return r.left=n,r}function ug(n,t,i,r){n[0]||n[1]?n.left===i?n[1]=r:n[0]=r:(n[0]=r,n.left=t,n.right=i)}function ent(n,t,i,r,u){var f,a=n[0],v=n[1],c=a[0],l=a[1],e=0,o=1,s=v[0]-c,h=v[1]-l;if(f=t-c,s||!(f>0)){if(f/=s,s<0){if(f<e)return;f<o&&(o=f)}else if(s>0){if(f>o)return;f>e&&(e=f)}if(f=r-c,s||!(f<0)){if(f/=s,s<0){if(f>o)return;f>e&&(e=f)}else if(s>0){if(f<e)return;f<o&&(o=f)}if(f=i-l,h||!(f>0)){if(f/=h,h<0){if(f<e)return;f<o&&(o=f)}else if(h>0){if(f>o)return;f>e&&(e=f)}if(f=u-l,h||!(f<0)){if(f/=h,h<0){if(f>o)return;f>e&&(e=f)}else if(h>0){if(f<e)return;f<o&&(o=f)}return!(e>0||o<1)||(e>0&&(n[0]=[c+e*s,l+e*h]),o<1&&(n[1]=[c+o*s,l+o*h]),!0)}}}}}function ont(n,t,i,r,u){var s=n[1];if(s)return!0;var e,o,f=n[0],y=n.left,p=n.right,c=y[0],l=y[1],a=p[0],v=p[1],h=(c+a)/2,w=(l+v)/2;if(v===l){if(h<t||h>=r)return;if(c>a){if(f){if(f[1]>=u)return}else f=[h,i];s=[h,u]}else{if(f){if(f[1]<i)return}else f=[h,u];s=[h,i]}}else if(o=w-(e=(c-a)/(v-l))*h,e<-1||e>1)if(c>a){if(f){if(f[1]>=u)return}else f=[(i-o)/e,i];s=[(u-o)/e,u]}else{if(f){if(f[1]<i)return}else f=[(u-o)/e,u];s=[(i-o)/e,i]}else if(l<v){if(f){if(f[0]>=r)return}else f=[t,e*t+o];s=[r,e*r+o]}else{if(f){if(f[0]<t)return}else f=[r,e*r+o];s=[t,e*t+o]}return n[0]=f,n[1]=s,!0}function snt(n,t){var u=n.site,i=t.left,r=t.right;return u===r&&(r=i,i=u),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(u===i?(i=t[1],r=t[0]):(i=t[0],r=t[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function oat(n,t){return t[+(t.left!==n.site)]}function hnt(n,t){return t[+(t.left===n.site)]}function cnt(){rg(this);this.x=this.y=this.arc=this.site=this.cy=null}function up(n){var w=n.P,b=n.N,r,t;if(w&&b){var s=w.site,h=n.site,c=b.site;if(s!==c){var l=h[0],a=h[1],u=s[0]-l,f=s[1]-a,e=c[0]-l,o=c[1]-a,v=2*(u*o-f*e);if(!(v>=-cat)){var k=u*u+f*f,d=e*e+o*o,y=(o*k-f*d)/v,p=(u*d-e*k)/v,i=drt.pop()||new cnt;for(i.arc=n,i.site=h,i.x=y+l,i.y=(i.cy=p+a)+Math.sqrt(y*y+p*p),n.circle=i,r=null,t=bb._;t;)if(i.y<t.y||i.y===t.y&&i.x<=t.x){if(!t.L){r=t.P;break}t=t.L}else{if(!t.R){r=t;break}t=t.R}bb.insert(r,i);r||(krt=i)}}}}function fp(n){var t=n.circle;t&&(t.P||(krt=t.N),bb.remove(t),drt.push(t),rg(t),n.circle=null)}function lnt(){rg(this);this.edge=this.site=this.circle=null}function sat(n){var t=grt.pop()||new lnt;return t.site=n,t}function nut(n){fp(n);ep.remove(n);grt.push(n);rg(n)}function ant(n){var c=n.circle,f=c.x,e=c.cy,l=[f,e],o=n.P,s=n.N,r=[n],i,t,u,h;for(nut(n),i=o;i.circle&&Math.abs(f-i.circle.x)<lr&&Math.abs(e-i.circle.cy)<lr;)o=i.P,r.unshift(i),nut(i),i=o;for(r.unshift(i),fp(i),t=s;t.circle&&Math.abs(f-t.circle.x)<lr&&Math.abs(e-t.circle.cy)<lr;)s=t.N,r.push(t),nut(t),t=s;for(r.push(t),fp(t),h=r.length,u=1;u<h;++u)t=r[u],i=r[u-1],ug(t.edge,i.site,t.site,l);i=r[0];(t=r[h-1]).edge=pb(i.site,t.site,null,l);up(i);up(t)}function vnt(n){for(var u,t,i,y,p,w=n[0],b=n[1],r=ep._;r;)if((y=hat(r,b)-w)>lr)r=r.L;else{if(!((p=w-ynt(r,b))>lr)){y>-lr?(t=r.P,i=r):p>-lr?(t=r,i=r.N):t=i=r;break}if(!r.R){t=r;break}r=r.R}if(!function(n){rs[n.index]={site:n,halfedges:[]}}(n),u=sat(n),ep.insert(t,u),t||i){if(t===i)return fp(t),i=sat(t.site),ep.insert(u,i),u.edge=i.edge=pb(t.site,u.site),up(t),void up(i);if(i){fp(t);fp(i);var f=t.site,l=f[0],a=f[1],e=n[0]-l,o=n[1]-a,s=i.site,h=s[0]-l,c=s[1]-a,k=2*(e*c-o*h),d=e*e+o*o,g=h*h+c*c,v=[(c*d-o*g)/k+l,(e*g-h*d)/k+a];ug(i.edge,f,s,v);u.edge=pb(f,n,null,v);i.edge=pb(n,s,null,v);up(t);up(i)}else u.edge=pb(t.site,u.site)}}function hat(n,t){var r=n.site,u=r[0],l=r[1],f=l-t,e;if(!f)return u;if(e=n.P,!e)return-1/0;var o=(r=e.site)[0],a=r[1],i=a-t;if(!i)return o;var s=o-u,h=1/f-1/i,c=s/i;return h?(-c+Math.sqrt(c*c-2*h*(s*s/(-2*i)-a+i/2+l-f/2)))/h+u:(u+o)/2}function ynt(n,t){var r=n.N,i;return r?hat(r,t):(i=n.site,i[1]===t?i[0]:1/0)}function pnt(n,t){return t[1]-n[1]||t[0]-n[0]}function tut(n,t){var u,f,r,i=n.sort(pnt).pop();for(ve=[],rs=new Array(n.length),ep=new ig,bb=new ig;;)if(r=krt,i&&(!r||i[1]<r.y||i[1]===r.y&&i[0]<r.x))i[0]===u&&i[1]===f||(vnt(i),u=i[0],f=i[1]),i=n.pop();else{if(!r)break;ant(r.arc)}if(function(){for(var e,r,n,t,f,i,u=0,o=rs.length;u<o;++u)if((e=rs[u])&&(t=(r=e.halfedges).length)){for(f=new Array(t),i=new Array(t),n=0;n<t;++n)f[n]=n,i[n]=snt(e,ve[r[n]]);for(f.sort(function(n,t){return i[t]-i[n]}),n=0;n<t;++n)i[n]=r[f[n]];for(n=0;n<t;++n)r[n]=i[n]}}(),t){var e=+t[0][0],o=+t[0][1],s=+t[1][0],h=+t[1][1];!function(n,t,i,r){for(var u,f=ve.length;f--;)ont(u=ve[f],n,t,i,r)&&ent(u,n,t,i,r)&&(Math.abs(u[0][0]-u[1][0])>lr||Math.abs(u[0][1]-u[1][1])>lr)||delete ve[f]}(e,o,s,h),function(n,t,i,r){for(var f,o,e,s,y,k,c,l,p,a,v,w=rs.length,h=!0,d,g,nt,b,u=0;u<w;++u)if(f=rs[u]){for(o=f.site,e=(s=f.halfedges).length;e--;)ve[s[e]]||s.splice(e,1);for(e=0,y=s.length;e<y;)a=(p=hnt(f,ve[s[e]]))[0],v=p[1],c=(k=oat(f,ve[s[++e%y]]))[0],l=k[1],(Math.abs(a-c)>lr||Math.abs(v-l)>lr)&&(s.splice(e,0,ve.push(wb(o,p,Math.abs(a-n)<lr&&r-v>lr?[n,Math.abs(c-n)<lr?l:r]:Math.abs(v-r)<lr&&i-a>lr?[Math.abs(l-r)<lr?c:i,r]:Math.abs(a-i)<lr&&v-t>lr?[i,Math.abs(c-i)<lr?l:t]:Math.abs(v-t)<lr&&a-n>lr?[Math.abs(l-t)<lr?c:n,t]:null))-1),++y);y&&(h=!1)}if(h){for(b=1/0,u=0,h=null;u<w;++u)(f=rs[u])&&(nt=(d=(o=f.site)[0]-n)*d+(g=o[1]-t)*g)<b&&(b=nt,h=f);if(h){var tt=[n,t],it=[n,r],rt=[i,r],ut=[i,t];h.halfedges.push(ve.push(wb(o=h.site,tt,it))-1,ve.push(wb(o,it,rt))-1,ve.push(wb(o,rt,ut))-1,ve.push(wb(o,ut,tt))-1)}}for(u=0;u<w;++u)(f=rs[u])&&(f.halfedges.length||delete rs[u])}(e,o,s,h)}this.edges=ve;this.cells=rs;ep=bb=ve=rs=null}function wnt(n){return(n=n.slice()).push(n[0]),ot([n])}function lat(n,t,i,r){var a=(r=r||{}).steps||64,s=r.units||"kilometers",v=r.angle||0,b=r.pivot||n,y=r.properties||n.properties||{},h,c,u,l,p,w;if(!n)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!i)throw new Error("ySemiAxis is required");if(!tr(r))throw new Error("options must be an object");if(!tf(a))throw new Error("steps must be a number");if(!tf(v))throw new Error("angle must be a number");for(h=er(n),"degrees"===s?c=nf(v):(t=ip(n,t,90,{units:s}),i=ip(n,i,0,{units:s}),t=er(t)[0]-h[0],i=er(i)[1]-h[1]),u=[],l=0;l<a;l+=1){var f=-360*l/a,e=t*i/Math.sqrt(Math.pow(i,2)+Math.pow(t,2)*Math.pow(aat(f),2)),o=t*i/Math.sqrt(Math.pow(t,2)+Math.pow(i,2)/Math.pow(aat(f),2));(f<-90&&f>=-270&&(e=-e),f<-180&&f>=-360&&(o=-o),"degrees"===s)&&(p=e*Math.cos(c)+o*Math.sin(c),w=o*Math.cos(c)-e*Math.sin(c),e=p,o=w);u.push([e+h[0],o+h[1]])}return u.push(u[0]),"degrees"===s?ot([u],y):tlt(ot([u],y),v,{pivot:b})}function aat(n){var t=n*Math.PI/180;return Math.tan(t)}function iut(n,t){void 0===t&&(t={});var r=0,u=0,i=0;return oo(n,function(n,f,e){var o=t.weight?null==e?void 0:e[t.weight]:void 0;if(!tf(o=null==o?1:o))throw new Error("weight value must be a number for feature index "+f);(o=Number(o))>0&&ru(n,function(n){r+=n[0]*o;u+=n[1]*o;i+=o})}),ft([r/i,u/i],t.properties,t)}function vat(n,t,i,r,u){var h=r.tolerance||.001,c=0,l=0,o=0,s=0,f,e;if(ki(i,function(t){var f,e=null===(f=t.properties)||void 0===f?void 0:f.weight,i=null==e?1:e,r,u;if(!tf(i=Number(i)))throw new Error("weight value must be a number");i>0&&(s+=1,r=i*ir(t,n),0===r&&(r=1),u=i/r,c+=t.geometry.coordinates[0]*u,l+=t.geometry.coordinates[1]*u,o+=u)}),s<1)throw new Error("no features to measure");return f=c/o,e=l/o,1===s||0===u||Math.abs(f-t[0])<h&&Math.abs(e-t[1])<h?ft([f,e],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([f,e]),vat([f,e],n,i,r,u-1))}function yat(n,t){return{x:n[0]-t[0],y:n[1]-t[1]}}function bnt(n,t){var i=0,r=0;ru(n,function(u,f,e,o,s){s>i&&(i=s,r=f,t.push([]));var y=f-r,h=n.coordinates[s][y+1],c=u[0],l=u[1],a=h[0],v=h[1];t[s].push([.75*c+.25*a,.75*l+.25*v]);t[s].push([.25*c+.75*a,.25*l+.75*v])},!0);t.forEach(function(n){n.push(n[0])})}function knt(n,t){var r=0,i=0,u=0;ru(n,function(f,e,o,s,h){s>u&&(u=s,i=e,t.push([[]]));h>r&&(r=h,i=e,t[s].push([]));var p=e-i,c=n.coordinates[s][h][p+1],l=f[0],a=f[1],v=c[0],y=c[1];t[s][h].push([.75*l+.25*v,.75*a+.25*y]);t[s][h].push([.25*l+.75*v,.25*a+.75*y])},!0);t.forEach(function(n){n.forEach(function(n){n.push(n[0])})})}function dnt(n,t,i){void 0===i&&(i=2);var r=er(n),u=er(t),f=r[0]-u[0],e=r[1]-u[1];return 1===i?Math.abs(f)+Math.abs(e):Math.pow(Math.pow(f,i)+Math.pow(e,i),1/i)}function pat(n,t){var o=(t=t||{}).threshold||1e4,h=t.p||2,c=t.binary||!1,l=t.alpha||-1,a=t.standardization||!1,f=[],u,i,r,e,s;for(ki(n,function(n){f.push(fa(n))}),u=[],i=0;i<f.length;i++)u[i]=[];for(i=0;i<f.length;i++)for(r=i;r<f.length;r++)i===r&&(u[i][r]=0),e=dnt(f[i],f[r],h),u[i][r]=e,u[r][i]=e;for(i=0;i<f.length;i++)for(r=0;r<f.length;r++)0!==(e=u[i][r])&&(u[i][r]=c?e<=o?1:0:e<=o?Math.pow(e,l):0);if(a)for(i=0;i<f.length;i++)for(s=u[i].reduce(function(n,t){return n+t},0),r=0;r<f.length;r++)u[i][r]=u[i][r]/s;return u}function wat(n){for(var i=0,t=0,r=n;t<r.length;t++)i+=r[t];return i/n.length}function bat(n,t){return void 0===t&&(t={}),dat(n,"mercator",t)}function kat(n,t){return void 0===t&&(t={}),dat(n,"wgs84",t)}function dat(n,t,i){void 0===i&&(i={});var r=(i=i||{}).mutate;if(!n)throw new Error("geojson is required");return Array.isArray(n)&&tf(n[0])?n="mercator"===t?gat(n):nvt(n):(!0!==r&&(n=kf(n)),ru(n,function(n){var i="mercator"===t?gat(n):nvt(n);n[0]=i[0];n[1]=i[1]})),n}function gat(n){var r=Math.PI/180,u=6378137,i=20037508.342789244,t=[u*(Math.abs(n[0])<=180?n[0]:n[0]-360*function(n){return n<0?-1:n>0?1:0}(n[0]))*r,u*Math.log(Math.tan(.25*Math.PI+.5*n[1]*r))];return t[0]>i&&(t[0]=i),t[0]<-i&&(t[0]=-i),t[1]>i&&(t[1]=i),t[1]<-i&&(t[1]=-i),t}function nvt(n){var t=180/Math.PI,i=6378137;return[n[0]*t/i,(.5*Math.PI-2*Math.atan(Math.exp(-n[1]/i)))*t]}function kb(n){return Array.isArray(n)?ovt(n):n&&n.bbox?ovt(n.bbox):[360*evt(),180*evt()]}function rvt(n,t){void 0===t&&(t={});null==n&&(n=1);for(var i=[],r=0;r<n;r++)i.push(ft(kb(t.bbox)));return b(i)}function uvt(n,t){void 0===t&&(t={});null==n&&(n=1);tf(t.num_vertices)&&void 0!==t.num_vertices||(t.num_vertices=10);tf(t.max_radial_length)&&void 0!==t.max_radial_length||(t.max_radial_length=10);for(var i=[],u=function(){var u,n=[],r=ivt(Array(t.num_vertices+1)).map(Math.random);r.forEach(function(n,t,i){i[t]=t>0?n+i[t-1]:n});r.forEach(function(i){i=2*i*Math.PI/r[r.length-1];var u=Math.random();n.push([u*(t.max_radial_length||10)*Math.sin(i),u*(t.max_radial_length||10)*Math.cos(i)])});n[n.length-1]=n[0];n=n.map((u=kb(t.bbox),function(n){return[n[0]+u[0],n[1]+u[1]]}));i.push(ot([n]))},r=0;r<n;r++)u();return b(i)}function fvt(n,t){var o,s,r,i,h,c;if(void 0===t&&(t={}),!tr(t=t||{}))throw new Error("options is invalid");var l=t.bbox,u=t.num_vertices,f=t.max_length,e=t.max_rotation;for(null==n&&(n=1),(!tf(u)||void 0===u||u<2)&&(u=10),tf(f)&&void 0!==f||(f=.0001),tf(e)&&void 0!==e||(e=Math.PI/8),o=[],s=0;s<n;s++){for(r=[kb(l)],i=0;i<u-1;i++)h=(0===i?2*Math.random()*Math.PI:Math.tan((r[i][1]-r[i-1][1])/(r[i][0]-r[i-1][0])))+(Math.random()-.5)*e*2,c=Math.random()*f,r.push([r[i][0]+c*Math.cos(h),r[i][1]+c*Math.sin(h)]);o.push(gi(r))}return b(o)}function evt(){return Math.random()-.5}function ovt(n){return[Math.random()*(n[2]-n[0])+n[0],Math.random()*(n[3]-n[1])+n[1]]}function hvt(n,t){if(!n)throw new Error("geojson is required");if("FeatureCollection"!==n.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("filter is required");var i=[];return ki(n,function(n){fg(n.properties,t)&&i.push(n)}),b(i)}function rut(n,t,i){if(!n)throw new Error("geojson is required");if("FeatureCollection"!==n.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("property is required");for(var f=uut(n,t),e=Object.keys(f),r=0;r<e.length;r++){for(var o=e[r],s=f[o],h=[],u=0;u<s.length;u++)h.push(n.features[s[u]]);i(b(h),o,r)}}function cvt(n,t,i,r){var u=r;return rut(n,t,function(n,t,f){u=0===f&&void 0===r?n:i(u,n,t,f)}),u}function uut(n,t){var i={};return ki(n,function(n,r){var f=n.properties||{},u;Object.prototype.hasOwnProperty.call(f,String(t))&&(u=f[t],Object.prototype.hasOwnProperty.call(i,u)?i[u].push(r):i[u]=[r])}),i}function fg(n,t){var r,i;if(void 0===n)return!1;if(r=typeof t,"number"===r||"string"===r)return Object.prototype.hasOwnProperty.call(n,t);if(Array.isArray(t)){for(i=0;i<t.length;i++)if(!fg(n,t[i]))return!1;return!0}return fut(n,t)}function fut(n,t){for(var u,r=Object.keys(t),i=0;i<r.length;i++)if(u=r[i],n[u]!==t[u])return!1;return!0}function lvt(n,t){var u,i,r;if(!t)return{};if(!t.length)return{};for(u={},i=0;i<t.length;i++)r=t[i],Object.prototype.hasOwnProperty.call(n,r)&&(u[r]=n[r]);return u}function gnt(n,t){return n>t?1:n<t?-1:0}function oa(n,t,i){for(var o,r,u=new cl(null,null),f=u,e=u;;)if(o=i(n,t.key),o<0){if(null===t.left)break;if(i(n,t.left.key)<0&&(r=t.left,t.left=r.right,r.right=t,null===(t=r).left))break;e.left=t;e=t;t=t.left}else{if(!(o>0))break;if(null===t.right)break;if(i(n,t.right.key)>0&&(r=t.right,t.right=r.left,r.left=t,null===(t=r).right))break;f.right=t;f=t;t=t.right}return f.right=t.left,e.left=t.right,t.left=u.right,t.right=u.left,t}function eut(n,t,i,r){var u=new cl(n,t),f;return null===i?(u.left=u.right=null,u):(f=r(n,(i=oa(n,i,r)).key),f<0?(u.left=i.left,u.right=i,i.left=null):f>=0&&(u.right=i.right,u.left=i,i.right=null),u)}function vvt(n,t,i){var r=null,u=null,f;return t&&(f=i((t=oa(n,t,i)).key,n),0===f?(r=t.left,u=t.right):f<0?(u=t.right,t.right=null,r=t):(r=t.left,t.left=null,u=t)),{left:r,right:u}}function out(n,t,i,r,u){if(n){r(t+(i?" ":" ")+u(n)+"\n");var f=t+(i?"    ":"   ");n.left&&out(n.left,f,!1,r,u);n.right&&out(n.right,f,!0,r,u)}}function sut(n,t,i,r){var e=r-i;if(e>0){var u=i+Math.floor(e/2),o=n[u],s=t[u],f=new cl(o,s);return f.left=sut(n,t,i,u),f.right=sut(n,t,u+1,r),f}return null}function hut(n,t,i){var u=i-t;if(u>0){var f=t+Math.floor(u/2),e=hut(n,t,f),r=n.head;return r.left=e,n.head=n.head.next,r.right=hut(n,f+1,i),r}return null}function cut(n,t,i,r,u){var o;if(!(i>=r)){for(var s=n[i+r>>1],e=i-1,f=r+1;;){do e++;while(u(n[e],s)<0);do f--;while(u(n[f],s)>0);if(e>=f)break;o=n[e];n[e]=n[f];n[f]=o;o=t[e];t[e]=t[f];t[f]=o}cut(n,t,i,f,u);cut(n,t,f+1,r,u)}}function ds(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function yvt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ge(n,t,i){return t&&yvt(n.prototype,t),i&&yvt(n,i),n}function co(){}function put(n){this.message=n||""}function vp(n){this.message=n||""}function rk(n){this.message=n||""}function vg(){}function syt(n){return null===n?0:n.color}function or(n){return null===n?null:n.parent}function lc(n,t){null!==n&&(n.color=t)}function wut(n){return null===n?null:n.left}function hyt(n){return null===n?null:n.right}function cf(){this.root_=null;this.size_=0}function cyt(){}function th(){this.array_=[];arguments[0]instanceof uu&&this.addAll(arguments[0])}function cti(){}function lti(){}function ati(){}function vti(){}function yti(){}function dg(n){this.message=n||""}function uh(){this.array_=[]}function ev(){return new sn}function sn(){this.reset()}function gyt(n,t,i){var r=n.s=t+i,u=r-t,f=r-u;n.t=t-f+(i-u)}function tpt(n){return n>1?0:n<-1?fr:Math.acos(n)}function lw(n){return n>1?rl:n<-1?-rl:Math.asin(n)}function wk(){}function hn(n,t){n&&bft.hasOwnProperty(n.type)&&bft[n.type](n,t)}function kft(n,t,i){var r,u=-1,f=n.length-i;for(t.lineStart();++u<f;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function ipt(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)kft(n[i],t,1);t.polygonEnd()}function dft(n){return[cw(n[1],n[0]),lw(n[2])]}function aw(n){var t=n[0],i=n[1],r=hu(i);return[r*hu(t),r*cu(t),cu(i)]}function cn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function ln(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function gft(n,t){n[0]+=t[0];n[1]+=t[1];n[2]+=t[2]}function an(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function net(n){var t=pk(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t;n[1]/=t;n[2]/=t}function rpt(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return(i=t.invert(i,r))&&n.invert(i[0],i[1])}),i}function tet(n,t){return[n>fr?n-ul:n<-fr?n+ul:n,t]}function upt(n){return function(t,i){return[(t+=n)>fr?t-ul:t<-fr?t+ul:t,i]}}function fpt(n){var t=upt(n);return t.invert=upt(-n),t}function ept(n,t){function e(n,t){var e=hu(t),o=hu(n)*e,s=cu(n)*e,h=cu(t),c=h*i+o*r;return[cw(s*u-c*f,o*i-h*r),lw(c*u+s*f)]}var i=hu(n),r=cu(n),u=hu(t),f=cu(t);return e.invert=function(n,t){var e=hu(t),o=hu(n)*e,s=cu(n)*e,h=cu(t),c=h*u-s*f;return[cw(s*u+h*f,o*i+c*r),lw(c*i-o*r)]},e}function opt(n,t){(t=aw(t))[0]-=n;net(t);var i=tpt(-t[1]);return((-t[2]<0?-i:i)+ul-eu)%ul}function spt(){var t,n=[];return{point:function(n,i){t.push([n,i])},lineStart:function(){n.push(t=[])},lineEnd:wk,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function vn(n,t){return re(n[0]-t[0])<eu&&re(n[1]-t[1])<eu}function yn(n,t,i,r){this.x=n;this.z=t;this.o=i;this.e=r;this.v=!1;this.n=this.p=null}function hpt(n,t,i,r,u){var e,l,h=[],s=[],o,a,v,f,c;if(n.forEach(function(n){if(!((r=n.length-1)<=0)){var r,t,i=n[0],f=n[r];if(vn(i,f)){for(u.lineStart(),e=0;e<r;++e)u.point((i=n[e])[0],i[1]);u.lineEnd()}else h.push(t=new yn(i,n,null,!0)),s.push(t.o=new yn(i,null,t,!1)),h.push(t=new yn(f,n,null,!1)),s.push(t.o=new yn(f,null,t,!0))}}),h.length){for(s.sort(t),cpt(h),cpt(s),e=0,l=s.length;e<l;++e)s[e].e=i=!i;for(v=h[0];;){for(f=v,c=!0;f.v;)if((f=f.n)===v)return;o=f.z;u.lineStart();do{if(f.v=f.o.v=!0,f.e){if(c)for(e=0,l=o.length;e<l;++e)u.point((a=o[e])[0],a[1]);else r(f.x,f.n.x,1,u);f=f.n}else{if(c)for(o=f.p.z,e=o.length-1;e>=0;--e)u.point((a=o[e])[0],a[1]);else r(f.x,f.p.x,-1,u);f=f.p}o=(f=f.o).z;c=!c}while(!f.v);u.lineEnd()}}}function cpt(n){if(r=n.length){for(var r,t,u=0,i=n[0];++u<r;)i.n=t=n[u],t.p=i,i=t;i.n=t=n[0];t.p=i}}function lpt(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function vpt(n){for(var t,i,f,r=n.length,e=-1,u=0;++e<r;)u+=n[e].length;for(i=new Array(u);--r>=0;)for(t=(f=n[r]).length;--t>=0;)i[--u]=f[t];return i}function tii(n,t,i,r){function f(u,f){return n<=u&&u<=i&&t<=f&&f<=r}function e(f,e,s,h){var c=0,l=0;if(null==f||(c=u(f,s))!==(l=u(e,s))||o(f,e)<0^s>0){do h.point(0===c||3===c?n:i,c>1?r:t);while((c=(c+s+4)%4)!==l)}else h.point(e[0],e[1])}function u(r,u){return re(r[0]-n)<eu?u>0?0:3:re(r[0]-i)<eu?u>0?2:1:re(r[1]-t)<eu?u>0?1:0:u>0?3:2}function s(n,t){return o(n.x,t.x)}function o(n,t){var i=u(n,1),r=u(t,1);return i!==r?i-r:0===i?t[1]-n[1]:1===i?n[0]-t[0]:2===i?n[1]-t[1]:t[0]-n[0]}return function(u){function tt(n,t){f(n,t)&&o.point(n,t)}function it(u,e){var s=f(u,e),h,b;(c&&p.push([u,e]),w)?(d=u,g=e,nt=s,w=!1,s&&(o.lineStart(),o.point(u,e))):s&&l?o.point(u,e):(h=[a=Math.max(bk,Math.min(vw,a)),v=Math.max(bk,Math.min(vw,v))],b=[u=Math.max(bk,Math.min(vw,u)),e=Math.max(bk,Math.min(vw,e))],function(n,t,i,r,u,f){var e,l=n[0],a=n[1],o=0,s=1,h=t[0]-l,c=t[1]-a;if(e=i-l,h||!(e>0)){if(e/=h,h<0){if(e<o)return;e<s&&(s=e)}else if(h>0){if(e>s)return;e>o&&(o=e)}if(e=u-l,h||!(e<0)){if(e/=h,h<0){if(e>s)return;e>o&&(o=e)}else if(h>0){if(e<o)return;e<s&&(s=e)}if(e=r-a,c||!(e>0)){if(e/=c,c<0){if(e<o)return;e<s&&(s=e)}else if(c>0){if(e>s)return;e>o&&(o=e)}if(e=f-a,c||!(e<0)){if(e/=c,c<0){if(e>s)return;e>o&&(o=e)}else if(c>0){if(e<o)return;e<s&&(s=e)}return o>0&&(n[0]=l+o*h,n[1]=a+o*c),s<1&&(t[0]=l+s*h,t[1]=a+s*c),!0}}}}}(h,b,n,t,i,r)?(l||(o.lineStart(),o.point(h[0],h[1])),o.point(b[0],b[1]),s||o.lineEnd(),y=!1):s&&(o.lineStart(),o.point(u,e),y=!1));a=u;v=e;l=s}var h,c,p,d,g,nt,a,v,l,w,y,o=u,b=spt(),k={point:tt,lineStart:function(){k.point=it;c&&c.push(p=[]);w=!0;l=!1;a=v=NaN},lineEnd:function(){h&&(it(d,g),nt&&l&&b.rejoin(),h.push(b.result()));k.point=tt;l&&o.lineEnd()},polygonStart:function(){o=b;h=[];c=[];y=!0},polygonEnd:function(){var t=function(){for(var o=0,s=0,a=c.length;s<a;++s)for(var u,t,h=c[s],l=1,v=h.length,f=h[0],e=f[0],i=f[1];l<v;++l)u=e,t=i,e=(f=h[l])[0],i=f[1],t<=r?i>r&&(e-u)*(r-t)>(i-t)*(n-u)&&++o:i<=r&&(e-u)*(r-t)<(i-t)*(n-u)&&--o;return o}(),i=y&&t,f=(h=vpt(h)).length;(i||f)&&(u.polygonStart(),i&&(u.lineStart(),e(null,null,1,u),u.lineEnd()),f&&hpt(h,s,t,e,u),u.polygonEnd());o=u;h=c=p=null}};return k}}function ypt(n){return n}function wpt(n,t,i,r){return function(u,f){function v(t,i){var r=u(t,i);n(t=r[0],i=r[1])&&f.point(t,i)}function d(n,t){var i=u(n,t);a.point(i[0],i[1])}function p(){e.point=d;a.lineStart()}function w(){e.point=v;a.lineEnd()}function b(n,t){h.push([n,t]);var i=u(n,t);l.point(i[0],i[1])}function g(){l.lineStart();h=[]}function nt(){b(h[0][0],h[0][1]);l.lineEnd();var t,i,r,u,e=l.clean(),n=y.result(),a=n.length;if(h.pop(),c.push(h),h=null,a)if(1&e){if((i=(r=n[0]).length-1)>0){for(o||(f.polygonStart(),o=!0),f.lineStart(),t=0;t<i;++t)f.point((u=r[t])[0],u[1]);f.lineEnd()}}else a>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(iii))}var c,s,h,a=t(f),k=u.invert(r[0],r[1]),y=spt(),l=t(y),o=!1,e={point:v,lineStart:p,lineEnd:w,polygonStart:function(){e.point=b;e.lineStart=g;e.lineEnd=nt;s=[];c=[]},polygonEnd:function(){e.point=v;e.lineStart=p;e.lineEnd=w;s=vpt(s);var n=function(n,t){var u=t[0],d=t[1],st=[cu(u),-hu(u),0],h=0,g=0,f,nt,r,b,k;for(pn.reset(),f=0,nt=n.length;f<nt;++f)if(l=(c=n[f]).length)for(var c,l,e=c[l-1],a=e[0],tt=e[1]/2+npt,it=cu(tt),rt=hu(tt),v=0;v<l;++v,a=y,it=ft,rt=et,e=o){var o=c[v],y=o[0],ut=o[1]/2+npt,ft=cu(ut),et=hu(ut),i=y-a,p=i>=0?1:-1,w=p*i,s=w>fr,ot=it*ft;(pn.add(cw(ot*p*cu(w),rt*et+ot*hu(w))),h+=s?i+p*ul:i,s^a>=u^y>=u)&&(r=ln(aw(e),aw(o)),net(r),b=ln(st,r),net(b),k=(s^i>=0?-1:1)*lw(b[2]),(d>k||d===k&&(r[0]||r[1]))&&(g+=s^i>=0?1:-1))}return(h<-1e-6||h<eu&&pn<-1e-6)^1&g}(c,k);s.length?(o||(f.polygonStart(),o=!0),hpt(s,rii,n,i,f)):n&&(o||(f.polygonStart(),o=!0),f.lineStart(),i(null,null,1,f),f.lineEnd());o&&(f.polygonEnd(),o=!1);s=c=null},sphere:function(){f.polygonStart();f.lineStart();i(null,null,1,f);f.lineEnd();f.polygonEnd()}};return e}}function iii(n){return n.length>1}function rii(n,t){return((n=n.x)[0]<0?n[1]-rl-eu:rl-n[1])-((t=t.x)[0]<0?t[1]-rl-eu:rl-t[1])}function uii(n,t){function f(n,t){return hu(n)*hu(t)>i}function u(n,t,r){var nt=[1,0,0],h=ln(aw(n),aw(t)),tt=cn(h,h),w=h[0],b=tt-w*w,d,u,y,p,g;if(!b)return!r&&n;var rt=i*tt/b,ut=-i*w/b,ft=ln(nt,h),f=an(nt,rt);gft(f,an(h,ut));var c=ft,a=cn(f,c),k=cn(c,c),it=a*a-k*(cn(f,f)-1);if(!(it<0)){if(d=pk(it),u=an(c,(-a-d)/k),gft(u,f),u=dft(u),!r)return u;var v,e=n[0],l=t[0],o=n[1],s=t[1];if(l<e&&(v=e,e=l,l=v),y=l-e,p=re(y-fr)<eu,!p&&s<o&&(v=o,o=s,s=v),p||y<eu?p?o+s>0^u[1]<(re(u[0]-e)<eu?o:s):o<=u[1]&&u[1]<=s:y>fr^(e<=u[0]&&u[0]<=l))return g=an(c,(-a+d)/k),gft(g,f),[u,dft(g)]}}function e(t,i){var f=r?n:fr-n,u=0;return t<-f?u|=1:t>f&&(u|=2),i<-f?u|=4:i>f&&(u|=8),u}var i=hu(n),r=i>0,o=re(i)>eu;return wpt(f,function(n){var t,c,i,h,s;return{lineStart:function(){h=i=!1;s=1},point:function(l,a){var y,v=[l,a],p=f(l,a),b=r?p?0:e(l,a):p?e(l+(l<0?fr:-fr),a):0,w;(!t&&(h=i=p)&&n.lineStart(),p!==i&&(!(y=u(t,v))||vn(t,y)||vn(v,y))&&(v[0]+=eu,v[1]+=eu,p=f(v[0],v[1])),p!==i)?(s=0,p?(n.lineStart(),y=u(v,t),n.point(y[0],y[1])):(y=u(t,v),n.point(y[0],y[1]),n.lineEnd()),t=y):o&&t&&r^p&&(b&c||!(w=u(v,t,!0))||(s=0,r?(n.lineStart(),n.point(w[0][0],w[0][1]),n.point(w[1][0],w[1][1]),n.lineEnd()):(n.point(w[1][0],w[1][1]),n.lineEnd(),n.lineStart(),n.point(w[0][0],w[0][1]))));!p||t&&vn(t,v)||n.point(v[0],v[1]);t=v;i=p;c=b},lineEnd:function(){i&&n.lineEnd();t=null},clean:function(){return s|(h&&i)<<1}}},function(i,r,u,f){!function(n,t,i,r,u,f){var s,e;if(i){var o=hu(t),h=cu(t),c=r*i;for(null==u?(u=t+r*ul,f=t-c/2):(u=opt(o,u),f=opt(o,f),(r>0?u<f:u>f)&&(u+=r*ul)),e=u;r>0?e>f:e<f;e-=c)s=dft([o,-h*hu(e),-h*cu(e)]),n.point(s[0],s[1])}}(f,n,t,u,i,r)},r?[0,-n]:[-fr,n-fr])}function bpt(n){return function(t){var i=new uet;for(var r in n)i[r]=n[r];return i.stream=t,i}}function uet(){}function kpt(n,t,i){var e=t[1][0]-t[0][0],o=t[1][1]-t[0][1],u=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]);null!=u&&n.clipExtent(null),function(n,t){n&&wft.hasOwnProperty(n.type)?wft[n.type](n,t):hn(n,t)}(i,n.stream(ppt));var r=ppt.result(),f=Math.min(e/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(e-f*(r[1][0]+r[0][0]))/2,h=+t[0][1]+(o-f*(r[1][1]+r[0][1]))/2;return null!=u&&n.clipExtent(u),n.scale(150*f).translate([s,h])}function gpt(n,t){return+t?function(n,t){function i(r,u,f,e,o,s,h,c,l,a,v,y,p,w){var g=h-r,nt=c-u,rt=g*g+nt*nt;if(rt>4*t&&p--){var k=e+a,d=o+v,b=s+y,ut=pk(k*k+d*d+b*b),ct=lw(b/=ut),ft=re(re(b)-1)<eu||re(f-l)<eu?(f+l)/2:cw(d,k),et=n(ft,ct),tt=et[0],it=et[1],ot=tt-r,st=it-u,ht=nt*ot-g*st;(ht*ht/rt>t||re((g*ot+nt*st)/rt-.5)>.3||e*a+o*v+s*y<dpt)&&(i(r,u,f,e,o,s,tt,it,ft,k/=ut,d/=ut,b,p,w),w.point(tt,it),i(tt,it,ft,k,d,b,h,c,l,a,v,y,p,w))}}return function(t){function d(i,r){i=n(i,r);t.point(i[0],i[1])}function c(){u=NaN;r.point=l;t.lineStart()}function l(r,c){var l=aw([r,c]),a=n(r,c);i(u,f,h,e,o,s,u=a[0],f=a[1],h=r,e=l[0],o=l[1],s=l[2],16,t);t.point(u,f)}function a(){r.point=d;t.lineEnd()}function g(){c();r.point=nt;r.lineEnd=tt}function nt(n,t){l(v=n,t);y=u;p=f;w=e;b=o;k=s;r.point=l}function tt(){i(u,f,h,e,o,s,y,p,v,w,b,k,16,t);r.lineEnd=a;a()}var v,y,p,w,b,k,h,u,f,e,o,s,r={point:d,lineStart:c,lineEnd:a,polygonStart:function(){t.polygonStart();r.lineStart=g},polygonEnd:function(){t.polygonEnd();r.lineStart=c}};return r}}(n,t):function(n){return bpt({point:function(t,i){t=n(t,i);this.stream.point(t[0],t[1])}})}(n)}function fii(n){return function(n){function t(n){return[(n=c(n[0]*lh,n[1]*lh))[0]*i+f,e-n[1]*i]}function st(n){return(n=c.invert((n[0]-f)/i,(e-n[1])/i))&&[n[0]*ov,n[1]*ov]}function ot(n,t){return[(n=r(n,t))[0]*i+f,e-n[1]*i]}function u(){c=rpt(rt=function(n,t,i){return(n%=ul)?t||i?rpt(fpt(n),ept(t,i)):fpt(n):t||i?ept(t,i):tet}(d,g,nt),r);var n=r(b,k);return f=p-n[0]*i,e=w+n[1]*i,h()}function h(){return o=y=null,t}var r,f,e,rt,c,l,a,v,o,y,i=150,p=480,w=250,b=0,k=0,d=0,g=0,nt=0,tt=null,ut=ret,s=null,ft=ypt,it=.5,et=gpt(ot,it);return t.stream=function(n){return o&&y===n?o:o=nwt(ut(rt,et(ft(y=n))))},t.clipAngle=function(n){return arguments.length?(ut=+n?uii(tt=n*lh,6*lh):(tt=null,ret),h()):tt*ov},t.clipExtent=function(n){return arguments.length?(ft=null==n?(s=l=a=v=null,ypt):tii(s=+n[0][0],l=+n[0][1],a=+n[1][0],v=+n[1][1]),h()):null==s?null:[[s,l],[a,v]]},t.scale=function(n){return arguments.length?(i=+n,u()):i},t.translate=function(n){return arguments.length?(p=+n[0],w=+n[1],u()):[p,w]},t.center=function(n){return arguments.length?(b=n[0]%360*lh,k=n[1]%360*lh,u()):[b*ov,k*ov]},t.rotate=function(n){return arguments.length?(d=n[0]%360*lh,g=n[1]%360*lh,nt=n.length>2?n[2]%360*lh:0,u()):[d*ov,g*ov,nt*ov]},t.precision=function(n){return arguments.length?(et=gpt(ot,it=n*n),h()):pk(it)},t.fitExtent=function(n,i){return kpt(t,n,i)},t.fitSize=function(n,i){return function(n,t,i){return kpt(n,[[0,0],t],i)}(t,n,i)},function(){return r=n.apply(this,arguments),t.invert=r.invert&&st,u()}}(function(){return n})()}function eii(){return fii(fet).scale(79.4188).clipAngle(179.999)}function kn(n,t,i,r){var s=n.properties||{},u="Feature"===n.type?n.geometry:n,e;if("GeometryCollection"===u.type)return e=[],oo(n,function(n){var u=kn(n,t,i,r);u&&e.push(u)}),b(e);var o=function(n){var t=cd(n).geometry.coordinates,i=[-t[0],-t[1]];return eii().rotate(i).scale(uc)}(u),h={type:u.type,coordinates:iwt(u.coordinates,o)},c=(new gut).read(h),l=vy(sv(t,i),"meters"),f=wu.bufferOp(c,l,r);if(!twt((f=(new nft).write(f)).coordinates))return yu({type:f.type,coordinates:rwt(f.coordinates,o)},s)}function twt(n){return Array.isArray(n[0])?twt(n[0]):isNaN(n[0])}function iwt(n,t){return"object"!=typeof n[0]?t(n):n.map(function(n){return iwt(n,t)})}function rwt(n,t){return"object"!=typeof n[0]?t.invert(n):n.map(function(n){return rwt(n,t)})}function dk(n,t,i){void 0===i&&(i={});var u=hr(n),f=hr(t),r=ll.intersection(u.coordinates,f.coordinates);return 0===r.length?null:1===r.length?ot(r[0],i.properties):eo(r,i.properties)}function uwt(n,t,i){var rt,u,s,f,ut,ft,a,v;void 0===i&&(i={});var et=JSON.stringify(i.properties||{}),e=n[0],o=n[1],h=n[2],c=n[3],ot=(o+c)/2,st=(e+h)/2,y=2*t/ir([e,ot],[h,ot],i)*(h-e),p=2*t/ir([st,o],[st,c],i)*(c-o),l=y/2,w=2*l,r=Math.sqrt(3)/2*p,ht=h-e,k=c-o,d=3/4*w,vt=r,yt=(ht-w)/(w-l/2),ct=Math.floor(yt),pt=(ct*d-l/2-ht)/2-l/2+d/2,g=Math.floor((k-r)/r),lt=(k-g*r)/2,at=g*r-k>r/2;at&&(lt-=r/4);for(var nt=[],tt=[],it=0;it<6;it++)rt=Math.PI/3*it,nt.push(Math.cos(rt)),tt.push(Math.sin(rt));for(u=[],s=0;s<=ct;s++)for(f=0;f<=g;f++)ut=s%2==1,0===f&&ut||0===f&&at||(ft=s*d+e-pt,a=f*vt+o+lt,(ut&&(a-=r/2),!0===i.triangles)?sii([ft,a],y/2,p/2,JSON.parse(et),nt,tt).forEach(function(n){i.mask?dk(i.mask,n)&&u.push(n):u.push(n)}):(v=oii([ft,a],y/2,p/2,JSON.parse(et),nt,tt),i.mask?dk(i.mask,v)&&u.push(v):u.push(v)));return b(u)}function oii(n,t,i,r,u,f){for(var s,h,e=[],o=0;o<6;o++)s=n[0]+t*u[o],h=n[1]+i*f[o],e.push([s,h]);return e.push(e[0].slice()),ot([e],r)}function sii(n,t,i,r,u,f){for(var o,s=[],e=0;e<6;e++)o=[],o.push(n),o.push([n[0]+t*u[e],n[1]+i*f[e]]),o.push([n[0]+t*u[(e+1)%6],n[1]+i*f[(e+1)%6]]),o.push(n),s.push(ot([o],r));return s}function fwt(n){return eo(n)}function hii(n){return ot(n&&n.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function ewt(n,t,i){return void 0===i&&(i={}),function(n,t,i,r){var u,y,c;void 0===r&&(r={});for(var l=[],f=n[0],e=n[1],a=n[2],v=n[3],s=t/ir([f,e],[a,e],r)*(a-f),h=i/ir([f,e],[f,v],r)*(v-e),p=a-f,w=v-e,k=Math.floor(p/s),d=Math.floor(w/h),nt=(w-d*h)/2,o=f+(p-k*s)/2,g=0;g<k;g++){for(u=e+nt,y=0;y<d;y++)c=ot([[[o,u],[o,u+h],[o+s,u+h],[o+s,u],[o,u]]],r.properties),r.mask?klt(r.mask,c)&&l.push(c):l.push(c),u+=h;o+=s}return b(l)}(n,t,t,i)}function owt(n,t,i){var h,r,o,s;void 0===i&&(i={});for(var c=[],e=t/ir([n[0],n[1]],[n[2],n[1]],i)*(n[2]-n[0]),f=t/ir([n[0],n[1]],[n[0],n[3]],i)*(n[3]-n[1]),l=0,u=n[0];u<=n[2];){for(h=0,r=n[1];r<=n[3];)o=null,s=null,l%2==0&&h%2==0?(o=ot([[[u,r],[u,r+f],[u+e,r],[u,r]]],i.properties),s=ot([[[u,r+f],[u+e,r+f],[u+e,r],[u,r+f]]],i.properties)):l%2==0&&h%2==1?(o=ot([[[u,r],[u+e,r+f],[u+e,r],[u,r]]],i.properties),s=ot([[[u,r],[u,r+f],[u+e,r+f],[u,r]]],i.properties)):h%2==0&&l%2==1?(o=ot([[[u,r],[u,r+f],[u+e,r+f],[u,r]]],i.properties),s=ot([[[u,r],[u+e,r+f],[u+e,r],[u,r]]],i.properties)):h%2==1&&l%2==1&&(o=ot([[[u,r],[u,r+f],[u+e,r],[u,r]]],i.properties),s=ot([[[u,r+f],[u+e,r+f],[u+e,r],[u,r+f]]],i.properties)),i.mask?(dk(i.mask,o)&&c.push(o),dk(i.mask,s)&&c.push(s)):(c.push(o),c.push(s)),r+=f,h++;l++;u+=e}return b(c)}var uc=6371008.8,gk={centimeters:637100880,centimetres:637100880,degrees:57.228913541432739,feet:20902260.511392,inches:39.37*uc,kilometers:6371.0088,kilometres:6371.0088,meters:uc,metres:uc,miles:3958.7613338105461,millimeters:6371008800,millimetres:6371008800,nauticalmiles:uc/1852,radians:1,yards:6967335.2236799989},eet={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/uc,yards:1.0936133},nd={acres:.000247105,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:.0001,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},swt=Object.freeze({__proto__:null,earthRadius:uc,factors:gk,unitsFactors:eet,areaFactors:nd,feature:yu,geometry:oet,point:ft,points:set,polygon:ot,polygons:het,lineString:gi,lineStrings:cet,featureCollection:b,multiLineString:ra,multiPoint:pw,multiPolygon:eo,geometryCollection:dn,round:aet,radiansToLength:vy,lengthToRadians:sv,lengthToDegrees:td,bearingToAzimuth:hv,radiansToDegrees:ua,degreesToRadians:nf,convertLength:cv,convertArea:vet,isNumber:tf,isObject:tr,validateBBox:yet,validateId:pet}),hwt=Object.freeze({__proto__:null,coordAll:yy,coordEach:ru,coordReduce:gn,featureEach:ki,featureReduce:ttt,findPoint:det,findSegment:ket,flattenEach:sf,flattenReduce:bet,geomEach:oo,geomReduce:itt,lineEach:utt,lineReduce:ftt,propEach:ntt,propReduce:wet,segmentEach:fl,segmentReduce:rtt}),htt,uot,ue,oot,wtt,tb,vst,eit,bst,hf,dy,sht,yit,dit,git,nrt,bd,kd,urt,ea,s,vh,brt,tat,ab,krt,drt,grt,ep,rs,bb,ve,lr,cat,tvt,ivt,svt,avt,cl,eg,ha,i,ca,sc,wv,r,sp,us,fs,hp,u,lo,df,vut,st,cp,ao,l,yut,es,tk,vr,la,al,aa,ss,o,va,ph,p,gs,lg,nh,to,wh,bv,kv,dv,gv,uu,ny,vo,yp,ty,ya,eyt,yg,oyt,pp,uk,vl,yi,yo,hs,po,fk,lyt,io,pg,br,pr,wp,oe,ac,kp,dp,gp,kr,but,ih,bg,cs,kg,rt,dut,vyt,ek,nft,f,ok,ls,dh,sk,lf,ur,di,nu,hk,as,nr,nw,uf,gg,iy,yr,se,ry,ko,gh,yc,wa,fu,tft,go,tu,lu,ck,yyt,uy,pc,af,ba,fh,tw,dr,a,ift,iw,ce,vs,yl,rw,wr,uw,ye,uft,et,ka,sr,fw,ne,da,fft,pl,pi,uo,fy,eh,pe,ff,ns,bl,we,ys,oh,kl,nc,pu,eft,lk,vf,bc,ps,oft,te,sft,ew,ey,hft,cft,ga,sh,wu,oy,yf,hh,dl,nn,nv,kc,tc,bu,ts,pf,lft,dc,tv,ku,ef,ws,fo,tn,iv,gc,le,rn,du,un,bs,au,is,gl,rv,ks,uv,ie,ch,gr,aft,vft,wf,nl,fn,fv,tl,vu,bf,ow,ae,en,ak,gu,sw,sy,hy,on,cy,na,hw,ly,ta,tt,il,ay,ia,be,yft,ke,iu,pft,vk,yk,wft,bft,iet,apt,vw,bk,pn,ret,dpt,nwt,fet;ou.default=ou;var cwt=Object.freeze({__proto__:null,getCoord:er,getCoords:d,containsNumber:ett,geojsonType:get,featureOf:ww,collectionOf:el,getGeom:hr,getType:de}),not=Object.getOwnPropertySymbols,lwt=Object.prototype.hasOwnProperty,awt=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
var ott=function(){var i,t,n,r;try{if(!Object.assign||(i=new String("abc"),i[5]="de","5"===Object.getOwnPropertyNames(i)[0]))return!1;for(t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;return"0123456789"!==Object.getOwnPropertyNames(t).map(function(n){return t[n]}).join("")?!1:(r={},"abcdefghijklmnopqrst".split("").forEach(function(n){r[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join(""))}catch(i){return!1}}()?Object.assign:function(n){for(var t,r,e,i,u=vwt(n),f=1;f<arguments.length;f++){for(e in t=Object(arguments[f]))lwt.call(t,e)&&(u[e]=t[e]);if(not)for(r=not(t),i=0;i<r.length;i++)awt.call(t,r[i])&&(u[r[i]]=t[r[i]])}return u},tot={successCallback:null,verbose:!1},id={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */
htt=fot;uot=fot;htt.default=uot;ue=kw;oot=kw;kw.prototype={all:function(){return this._all(this.data,[])},search:function(n){var t=this.data,r=[],s=this.toBBox,u,e,i,o,f;if(!ud(n,t))return r;for(f=[];t;){for(u=0,e=t.children.length;u<e;u++)i=t.children[u],ud(n,o=t.leaf?s(i):i)&&(t.leaf?r.push(i):ltt(n,o)?this._all(i,r):f.push(i));t=f.pop()}return r},collides:function(n){var t=this.data,o=this.toBBox,i,f,r,e,u;if(!ud(n,t))return!1;for(u=[];t;){for(i=0,f=t.children.length;i<f;i++)if(r=t.children[i],ud(n,e=t.leaf?o(r):r)){if(t.leaf||ltt(n,e))return!0;u.push(r)}t=u.pop()}return!1},load:function(n){var i,r,t,u;if(!n||!n.length)return this;if(n.length<this._minEntries){for(i=0,r=n.length;i<r;i++)this.insert(n[i]);return this}return t=this._build(n.slice(),0,n.length-1,0),this.data.children.length?this.data.height===t.height?this._splitRoot(this.data,t):(this.data.height<t.height&&(u=this.data,this.data=t,t=u),this._insert(t,this.data.height-t.height-1,!0)):this.data=t,this},insert:function(n){return n&&this._insert(n,this.data.height-1),this},clear:function(){return this.data=wy([]),this},remove:function(n,t){if(!n)return this;for(var u,f,o,e,i=this.data,h=this.toBBox(n),r=[],s=[];i||r.length;){if(i||(i=r.pop(),f=r[r.length-1],u=s.pop(),e=!0),i.leaf&&-1!==(o=bwt(n,i.children,t)))return i.children.splice(o,1),r.push(i),this._condense(r),this;e||i.leaf||!ltt(i,h)?f?(u++,i=f.children[u],e=!1):i=null:(r.push(i),s.push(u),u=0,f=i,i=i.children[0])}return this},toBBox:function(n){return n},compareMinX:sot,compareMinY:hot,toJSON:function(){return this.data},fromJSON:function(n){return this.data=n,this},_all:function(n,t){for(var i=[];n;)n.leaf?t.push.apply(t,n.children):i.push.apply(i,n.children),n=i.pop();return t},_build:function(n,t,i,r){var u,h=i-t+1,f=this._maxEntries,e,o,l,a,s,c;if(h<=f)return py(u=wy(n.slice(t,i+1)),this.toBBox),u;for(r||(r=Math.ceil(Math.log(h)/Math.log(f)),f=Math.ceil(h/Math.pow(f,r-1))),(u=wy([])).leaf=!1,u.height=r,s=Math.ceil(h/f),c=s*Math.ceil(Math.sqrt(f)),cot(n,t,i,c,this.compareMinX),e=t;e<=i;e+=c)for(cot(n,e,l=Math.min(e+c-1,i),s,this.compareMinY),o=e;o<=l;o+=s)a=Math.min(o+s-1,l),u.children.push(this._build(n,o,a,r-1));return py(u,this.toBBox),u},_chooseSubtree:function(n,t,i,r){for(var s,v,h,l,u,a,f,c,e,o;r.push(t),!t.leaf&&r.length-1!==i;){for(f=c=1/0,s=0,v=t.children.length;s<v;s++)u=ctt(h=t.children[s]),e=n,o=h,(a=(Math.max(o.maxX,e.maxX)-Math.min(o.minX,e.minX))*(Math.max(o.maxY,e.maxY)-Math.min(o.minY,e.minY))-u)<c?(c=a,f=u<f?u:f,l=h):a===c&&u<f&&(f=u,l=h);t=l||t.children[0]}return t},_insert:function(n,t,i){var e=this.toBBox,u=i?n:e(n),r=[],f=this._chooseSubtree(u,this.data,t,r);for(f.children.push(n),gw(f,u);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(u,r,t)},_split:function(n,t){var i=n[t],f=i.children.length,e=this._minEntries,u,r;this._chooseSplitAxis(i,e,f);u=this._chooseSplitIndex(i,e,f);r=wy(i.children.splice(u,i.children.length-u));r.height=i.height;r.leaf=i.leaf;py(i,this.toBBox);py(r,this.toBBox);t?n[t-1].children.push(r):this._splitRoot(i,r)},_splitRoot:function(n,t){this.data=wy([n,t]);this.data.height=n.height+1;this.data.leaf=!1;py(this.data,this.toBBox)},_chooseSplitIndex:function(n,t,i){for(var c,l,s,f,u,a,e,o,v,y,p,w,h=u=1/0,r=t;r<=i-t;r++)c=dw(n,0,r,this.toBBox),l=dw(n,r,i,this.toBBox),e=c,o=l,v=void 0,y=void 0,p=void 0,w=void 0,v=Math.max(e.minX,o.minX),y=Math.max(e.minY,o.minY),p=Math.min(e.maxX,o.maxX),w=Math.min(e.maxY,o.maxY),s=Math.max(0,p-v)*Math.max(0,w-y),f=ctt(c)+ctt(l),s<h?(h=s,a=r,u=f<u?f:u):s===h&&f<u&&(u=f,a=r);return a},_chooseSplitAxis:function(n,t,i){var r=n.leaf?this.compareMinX:sot,u=n.leaf?this.compareMinY:hot;this._allDistMargin(n,t,i,r)<this._allDistMargin(n,t,i,u)&&n.children.sort(r)},_allDistMargin:function(n,t,i,r){n.children.sort(r);for(var f,e=this.toBBox,o=dw(n,0,t,e),s=dw(n,i-t,i,e),h=rd(o)+rd(s),u=t;u<i-t;u++)f=n.children[u],gw(o,n.leaf?e(f):f),h+=rd(o);for(u=i-t-1;u>=t;u--)f=n.children[u],gw(s,n.leaf?e(f):f),h+=rd(s);return h},_adjustParentBBoxes:function(n,t,i){for(var r=i;r>=0;r--)gw(t[r],n)},_condense:function(n){for(var i,t=n.length-1;t>=0;t--)0===n[t].children.length?t>0?(i=n[t-1].children).splice(i.indexOf(n[t]),1):this.clear():py(n[t],this.toBBox)},_initFormat:function(n){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(n[0]));this.compareMinY=new Function("a","b",t.join(n[1]));this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};ue.default=oot;var fd=function(n,t,i){var r=n*t,e=lot*n,u=e-(e-n),o=n-u,s=lot*t,f=s-(s-t),h=t-f,c=o*h-(r-u*f-o*f-u*h);return i?(i[0]=c,i[1]=r,i):[c,r]},lot=+(Math.pow(2,27)+1),kwt=function(n,t){var c=0|n.length,l=0|t.length;if(1===c&&1===l)return function(n,t){var i=n+t,r=i-n,u=n-(i-r)+(t-r);return u?[u,i]:[i]}(n[0],t[0]);var r,h,v=new Array(c+l),y=0,u=0,f=0,p=Math.abs,e=n[u],k=p(e),o=t[f],d=p(o);k<d?(h=e,(u+=1)<c&&(e=n[u],k=p(e))):(h=o,(f+=1)<l&&(o=t[f],d=p(o)));u<c&&k<d||f>=l?(r=e,(u+=1)<c&&(e=n[u],k=p(e))):(r=o,(f+=1)<l&&(o=t[f],d=p(o)));for(var a,g,s=r+h,nt=s-r,b=h-nt,w=b,i=s;u<c&&f<l;)k<d?(r=e,(u+=1)<c&&(e=n[u],k=p(e))):(r=o,(f+=1)<l&&(o=t[f],d=p(o))),(b=(h=w)-(nt=(s=r+h)-r))&&(v[y++]=b),w=i-((a=i+s)-(g=a-i))+(s-g),i=a;for(;u<c;)(b=(h=w)-(nt=(s=(r=e)+h)-r))&&(v[y++]=b),w=i-((a=i+s)-(g=a-i))+(s-g),i=a,(u+=1)<c&&(e=n[u]);for(;f<l;)(b=(h=w)-(nt=(s=(r=o)+h)-r))&&(v[y++]=b),w=i-((a=i+s)-(g=a-i))+(s-g),i=a,(f+=1)<l&&(o=t[f]);return w&&(v[y++]=w),i&&(v[y++]=i),y||(v[y++]=0),v.length=y,v},dwt=function(n,t,i){var r=n+t,u=r-n,f=t-u,e=n-(r-u);return i?(i[0]=e+f,i[1]=r,i):[e+f,r]},gwt=function(n,t){var o=n.length,f,e,h;if(1===o)return f=fd(n[0],t),f[0]?f:[f[1]];var r=new Array(2*o),i=[.1,.1],s=[.1,.1],u=0;for(fd(n[0],t,i),i[0]&&(r[u++]=i[0]),e=1;e<o;++e){fd(n[e],t,s);h=i[1];dwt(h,s[0],i);i[0]&&(r[u++]=i[0]);var c=s[1],l=i[1],a=c+l,v=l-(a-c);i[1]=a;v&&(r[u++]=v)}return i[1]&&(r[u++]=i[1]),0===u&&(r[u++]=0),r.length=u,r},nbt=function(n,t){var c=0|n.length,l=0|t.length;if(1===c&&1===l)return function(n,t){var i=n+t,r=i-n,u=n-(i-r)+(t-r);return u?[u,i]:[i]}(n[0],-t[0]);var r,h,v=new Array(c+l),y=0,u=0,f=0,p=Math.abs,e=n[u],k=p(e),o=-t[f],d=p(o);k<d?(h=e,(u+=1)<c&&(e=n[u],k=p(e))):(h=o,(f+=1)<l&&(o=-t[f],d=p(o)));u<c&&k<d||f>=l?(r=e,(u+=1)<c&&(e=n[u],k=p(e))):(r=o,(f+=1)<l&&(o=-t[f],d=p(o)));for(var a,g,s=r+h,nt=s-r,b=h-nt,w=b,i=s;u<c&&f<l;)k<d?(r=e,(u+=1)<c&&(e=n[u],k=p(e))):(r=o,(f+=1)<l&&(o=-t[f],d=p(o))),(b=(h=w)-(nt=(s=r+h)-r))&&(v[y++]=b),w=i-((a=i+s)-(g=a-i))+(s-g),i=a;for(;u<c;)(b=(h=w)-(nt=(s=(r=e)+h)-r))&&(v[y++]=b),w=i-((a=i+s)-(g=a-i))+(s-g),i=a,(u+=1)<c&&(e=n[u]);for(;f<l;)(b=(h=w)-(nt=(s=(r=o)+h)-r))&&(v[y++]=b),w=i-((a=i+s)-(g=a-i))+(s-g),i=a,(f+=1)<l&&(o=-t[f]);return w&&(v[y++]=w),i&&(v[y++]=i),y||(v[y++]=0),v.length=y,v},aot=fc(function(n){function u(n,t){for(var u=new Array(n.length-1),i=1;i<n.length;++i)for(var f=u[i-1]=new Array(n.length-1),r=0,e=0;r<n.length;++r)r!==t&&(f[e++]=n[i][r]);return u}function i(n){if(1===n.length)return n[0];if(2===n.length)return["sum(",n[0],",",n[1],")"].join("");var t=n.length>>1;return["sum(",i(n.slice(0,t)),",",i(n.slice(t)),")"].join("")}function f(n){var r,t,e;if(2===n.length)return[["sum(prod(",n[0][0],",",n[1][1],"),prod(-",n[0][1],",",n[1][0],"))"].join("")];for(r=[],t=0;t<n.length;++t)r.push(["scale(",i(f(u(n,t))),",",(e=t,1&e?"-":""),n[0][t],")"].join(""));return r}function r(n){for(var r=[],e=[],o=function(n){for(var i,r=new Array(n),t=0;t<n;++t)for(r[t]=new Array(n),i=0;i<n;++i)r[t][i]=["m",i,"[",n-t-1,"]"].join("");return r}(n),s=[],t=0;t<n;++t)0==(1&t)?r.push.apply(r,f(u(o,t))):e.push.apply(e,f(u(o,t))),s.push("m"+t);var c=i(r),l=i(e),h="orientation"+n+"Exact",a=["function ",h,"(",s.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",a)(kwt,fd,gwt,nbt)}function s(n){var i=t[n.length];return i||(i=t[n.length]=r(n.length)),i.apply(void 0,n)}var e=r(3),o=r(4),t=[function(){return 0},function(){return 0},function(n,t){return t[0]-n[0]},function(n,t,i){var o,r=(n[1]-i[1])*(t[0]-i[0]),u=(n[0]-i[0])*(t[1]-i[1]),f=r-u,s;if(r>0){if(u<=0)return f;o=r+u}else{if(!(r<0)||u>=0)return f;o=-(r+u)}return s=33306690738754716e-32*o,f>=s||f<=-s?f:e(n,t,i)},function(n,t,i,r){var f=n[0]-r[0],e=t[0]-r[0],s=i[0]-r[0],h=n[1]-r[1],c=t[1]-r[1],l=i[1]-r[1],a=n[2]-r[2],v=t[2]-r[2],y=i[2]-r[2],p=e*l,w=s*c,b=s*h,k=f*l,d=f*c,g=e*h,u=a*(p-w)+v*(b-k)+y*(d-g),nt=77715611723761027e-32*((Math.abs(p)+Math.abs(w))*Math.abs(a)+(Math.abs(b)+Math.abs(k))*Math.abs(v)+(Math.abs(d)+Math.abs(g))*Math.abs(y));return u>nt||-u>nt?u:o(n,t,i,r)}];!function(){for(var u,o;t.length<=5;)t.push(r(t.length));for(var f=[],e=["slow"],i=0;i<=5;++i)f.push("a"+i),e.push("o"+i);for(u=["function getOrientation(",f.join(),"){switch(arguments.length){case 0:case 1:return 0;"],i=2;i<=5;++i)u.push("case ",i,":return o",i,"(",f.slice(0,i).join(),");");for(u.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(u.join("")),o=Function.apply(void 0,e),n.exports=o.apply(void 0,[s].concat(t)),i=0;i<=5;++i)n.exports[i]=t[i]}()}),tbt=function(n){var e=n.length,o,t,f,i,r,c,a,s;if(e<3){for(o=new Array(e),t=0;t<e;++t)o[t]=t;return 2===e&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:o}for(f=new Array(e),t=0;t<e;++t)f[t]=t;for(f.sort(function(t,i){var r=n[t][0]-n[i][0];return r||n[t][1]-n[i][1]}),i=[f[0],f[1]],r=[f[0],f[1]],t=2;t<e;++t){for(var h=f[t],l=n[h],u=i.length;u>1&&vot(n[i[u-2]],n[i[u-1]],l)<=0;)u-=1,i.pop();for(i.push(h),u=r.length;u>1&&vot(n[r[u-2]],n[r[u-1]],l)>=0;)u-=1,r.pop();r.push(h)}for(o=new Array(r.length+i.length-2),c=0,a=(t=0,i.length);t<a;++t)o[c++]=i[t];for(s=r.length-2;s>0;--s)o[c++]=r[s];return o},vot=aot[3],yot=nb,ibt=nb;nb.prototype={push:function(n){this.data.push(n);this.length++;this._up(this.length-1)},pop:function(){if(0!==this.length){var n=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),n}},peek:function(){return this.data[0]},_up:function(n){for(var i,r,t=this.data,f=this.compare,u=t[n];n>0;){if(i=n-1>>1,r=t[i],f(u,r)>=0)break;t[n]=r;n=i}t[n]=u},_down:function(n){for(var t=this.data,f=this.compare,o=this.length>>1,e=t[n];n<o;){var i=1+(n<<1),r=i+1,u=t[i];if(r<this.length&&f(t[r],u)<0&&(i=r,u=t[r]),f(u,e)>=0)break;t[n]=u;n=i}t[n]=e}};yot.default=ibt;var ubt=function(n,t){for(var h=n[0],r=n[1],u=!1,i=0,f=t.length-1;i<t.length;f=i++){var o=t[i][0],e=t[i][1],c=t[f][0],s=t[f][1];e>r!=s>r&&h<(c-o)*(r-e)/(s-e)+o&&(u=!u)}return u},ed=aot[3],pot=wot,fbt=wot;pot.default=fbt;wtt=function(n,t,i){this.a=n;this.b=t;this.c=i;var r,u,f=t.x-n.x,e=t.y-n.y,o=i.x-n.x,s=i.y-n.y,h=f*(n.x+t.x)+e*(n.y+t.y),c=o*(n.x+i.x)+s*(n.y+i.y),l=2*(f*(i.y-t.y)-e*(i.x-t.x));this.x=(s*h-e*c)/l;this.y=(f*c-o*h)/l;r=this.x-n.x;u=this.y-n.y;this.r=r*r+u*u};tb=Object.prototype.hasOwnProperty;var est=new ArrayBuffer(16),ost=new Float64Array(est),hd=new Uint32Array(est);vst=function(){function n(n){var t,i,r;for(this.points=n.points||[],this.duration=n.duration||1e4,this.sharpness=n.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=n.stepLength||60,this.length=this.points.length,this.delay=0,t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++)i=this.points[t],r=this.points[t+1],this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2});for(this.controls.push([this.points[0],this.points[0]]),t=0;t<this.centers.length-1;t++){var u=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,f=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,e=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+u),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+f),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+e)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+u),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+f),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+e)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return n.prototype.cacheSteps=function(n){var u=[],i=this.pos(0),r,t;for(u.push(0),r=0;r<this.duration;r+=10)t=this.pos(r),Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)+(t.z-i.z)*(t.z-i.z))>n&&(u.push(r),i=t);return u},n.prototype.vector=function(n){var t=this.pos(n+10),i=this.pos(n-10);return{angle:180*Math.atan2(t.y-i.y,t.x-i.x)/3.14,speed:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)+(i.z-t.z)*(i.z-t.z))}},n.prototype.pos=function(n){var i=n-this.delay,r,t;return(i<0&&(i=0),i>this.duration&&(i=this.duration-1),r=i/this.duration,r>=1)?this.points[this.length-1]:(t=Math.floor((this.points.length-1)*r),function(n,t,i,r,u){var f=function(n){var t=n*n;return[t*n,3*t*(1-n),3*n*(1-n)*(1-n),(1-n)*(1-n)*(1-n)]}(n);return{x:u.x*f[0]+r.x*f[1]+i.x*f[2]+t.x*f[3],y:u.y*f[0]+r.y*f[1]+i.y*f[2]+t.y*f[3],z:u.z*f[0]+r.z*f[1]+i.z*f[2]+t.z*f[3]}}((this.length-1)*r-t,this.points[t],this.controls[t][1],this.controls[t+1][0],this.points[t+1]))},n}();eit=ad;bst=ad;ad.deviation=function(n,t,i,r){var h=t&&t.length,y=h?t[0]*i:n.length,f=Math.abs(hit(n,0,y,i)),u,s,c,l,e;if(h)for(u=0,s=t.length;u<s;u++)c=t[u]*i,l=u<s-1?t[u+1]*i:n.length,f-=Math.abs(hit(n,c,l,i));for(e=0,u=0;u<r.length;u+=3){var o=r[u]*i,a=r[u+1]*i,v=r[u+2]*i;e+=Math.abs((n[o]-n[v])*(n[a+1]-n[o+1])-(n[o]-n[a])*(n[v+1]-n[o+1]))}return 0===f&&0===e?0:Math.abs((e-f)/f)};ad.flatten=function(n){for(var i,r,f=n[0][0].length,u={vertices:[],holes:[],dimensions:f},e=0,t=0;t<n.length;t++){for(i=0;i<n[t].length;i++)for(r=0;r<f;r++)u.vertices.push(n[t][i][r]);t>0&&(e+=n[t-1].length,u.holes.push(e))}return u};eit.default=bst;hf=fc(function(n,t){function i(n,t,i){void 0===i&&(i={});var r={type:"Feature"};return(0===i.id||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=t||{},r.geometry=n,r}function f(n,t,r){if(void 0===r&&(r={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(n[0])||!u(n[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:n},t,r)}function e(n,t,r){var e,o,u,f;for(void 0===r&&(r={}),e=0,o=n;e<o.length;e++){if(u=o[e],u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(f=0;f<u[u.length-1].length;f++)if(u[u.length-1][f]!==u[0][f])throw new Error("First and last Position are not equivalent.");}return i({type:"Polygon",coordinates:n},t,r)}function o(n,t,r){if(void 0===r&&(r={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:n},t,r)}function r(n,t){void 0===t&&(t={});var i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=n,i}function h(n,t,r){return void 0===r&&(r={}),i({type:"MultiLineString",coordinates:n},t,r)}function c(n,t,r){return void 0===r&&(r={}),i({type:"MultiPoint",coordinates:n},t,r)}function l(n,t,r){return void 0===r&&(r={}),i({type:"MultiPolygon",coordinates:n},t,r)}function a(n,i){void 0===i&&(i="kilometers");var r=t.factors[i];if(!r)throw new Error(i+" units is invalid");return n*r}function s(n,i){void 0===i&&(i="kilometers");var r=t.factors[i];if(!r)throw new Error(i+" units is invalid");return n/r}function v(n){return 180*(n%(2*Math.PI))/Math.PI}function u(n){return!isNaN(n)&&null!==n&&!Array.isArray(n)}Object.defineProperty(t,"__esModule",{value:!0});t.earthRadius=6371008.8;t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius};t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133};t.areaFactors={acres:.000247105,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:.0001,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};t.feature=i;t.geometry=function(n,t){switch(n){case"Point":return f(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return e(t).geometry;case"MultiPoint":return c(t).geometry;case"MultiLineString":return h(t).geometry;case"MultiPolygon":return l(t).geometry;default:throw new Error(n+" is invalid");}};t.point=f;t.points=function(n,t,i){return void 0===i&&(i={}),r(n.map(function(n){return f(n,t)}),i)};t.polygon=e;t.polygons=function(n,t,i){return void 0===i&&(i={}),r(n.map(function(n){return e(n,t)}),i)};t.lineString=o;t.lineStrings=function(n,t,i){return void 0===i&&(i={}),r(n.map(function(n){return o(n,t)}),i)};t.featureCollection=r;t.multiLineString=h;t.multiPoint=c;t.multiPolygon=l;t.geometryCollection=function(n,t,r){return void 0===r&&(r={}),i({type:"GeometryCollection",geometries:n},t,r)};t.round=function(n,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,t||0);return Math.round(n*i)/i};t.radiansToLength=a;t.lengthToRadians=s;t.lengthToDegrees=function(n,t){return v(s(n,t))};t.bearingToAzimuth=function(n){var t=n%360;return t<0&&(t+=360),t};t.radiansToDegrees=v;t.degreesToRadians=function(n){return n%360*Math.PI/180};t.convertLength=function(n,t,i){if(void 0===t&&(t="kilometers"),void 0===i&&(i="kilometers"),!(n>=0))throw new Error("length must be a positive number");return a(s(n,t),i)};t.convertArea=function(n,i,r){var u,f;if(void 0===i&&(i="meters"),void 0===r&&(r="kilometers"),!(n>=0))throw new Error("area must be a positive number");if(u=t.areaFactors[i],!u)throw new Error("invalid original units");if(f=t.areaFactors[r],!f)throw new Error("invalid final units");return n/u*f};t.isNumber=u;t.isObject=function(n){return!!n&&n.constructor===Object};t.validateBBox=function(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(4!==n.length&&6!==n.length)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(n){if(!u(n))throw new Error("bbox must only contain numbers");})};t.validateId=function(n){if(!n)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");}});var ykt=function(n){var t=[];return eb(n,function(n){t.push(n)}),t},pkt=eb,wkt=function(n,t,i,r){var u=i;return eb(n,function(n,r,f,e,o){u=0===r&&void 0===i?n:t(u,n,r,f,e,o)},r),u},bkt=rht,kkt=function(n,t,i){var r=i;return rht(n,function(n,u){r=0===u&&void 0===i?n:t(r,n,u)}),r},dkt=function(n,t){var r;if(t=t||{},!hf.isObject(t))throw new Error("options is invalid");var o,s=t.featureIndex||0,u=t.multiFeatureIndex||0,f=t.geometryIndex||0,i=t.coordIndex||0,e=t.properties;switch(n.type){case"FeatureCollection":s<0&&(s=n.features.length+s);e=e||n.features[s].properties;o=n.features[s].geometry;break;case"Feature":e=e||n.properties;o=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=n;break;default:throw new Error("geojson is invalid");}if(null===o)return null;r=o.coordinates;switch(o.type){case"Point":return hf.point(r,e,t);case"MultiPoint":return u<0&&(u=r.length+u),hf.point(r[u],e,t);case"LineString":return i<0&&(i=r.length+i),hf.point(r[i],e,t);case"Polygon":return f<0&&(f=r.length+f),i<0&&(i=r[f].length+i),hf.point(r[f][i],e,t);case"MultiLineString":return u<0&&(u=r.length+u),i<0&&(i=r[u].length+i),hf.point(r[u][i],e,t);case"MultiPolygon":return u<0&&(u=r.length+u),f<0&&(f=r[u].length+f),i<0&&(i=r[u][f].length-i),hf.point(r[u][f][i],e,t)}throw new Error("geojson is invalid");},gkt=function(n,t){var r;if(t=t||{},!hf.isObject(t))throw new Error("options is invalid");var o,s=t.featureIndex||0,u=t.multiFeatureIndex||0,f=t.geometryIndex||0,i=t.segmentIndex||0,e=t.properties;switch(n.type){case"FeatureCollection":s<0&&(s=n.features.length+s);e=e||n.features[s].properties;o=n.features[s].geometry;break;case"Feature":e=e||n.properties;o=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=n;break;default:throw new Error("geojson is invalid");}if(null===o)return null;r=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return i<0&&(i=r.length+i-1),hf.lineString([r[i],r[i+1]],e,t);case"Polygon":return f<0&&(f=r.length+f),i<0&&(i=r[f].length+i-1),hf.lineString([r[f][i],r[f][i+1]],e,t);case"MultiLineString":return u<0&&(u=r.length+u),i<0&&(i=r[u].length+i-1),hf.lineString([r[u][i],r[u][i+1]],e,t);case"MultiPolygon":return u<0&&(u=r.length+u),f<0&&(f=r[u].length+f),i<0&&(i=r[u][f].length-i-1),hf.lineString([r[u][f][i],r[u][f][i+1]],e,t)}throw new Error("geojson is invalid");},ndt=yd,tdt=function(n,t,i){var r=i;return yd(n,function(n,u,f){r=0===u&&0===f&&void 0===i?n:t(r,n,u,f)}),r},idt=cit,rdt=function(n,t,i){var r=i;return cit(n,function(n,u,f,e,o){r=0===u&&void 0===i?n:t(r,n,u,f,e,o)}),r},udt=fht,fdt=function(n,t,i){var r=i;return fht(n,function(n,u,f,e){r=0===u&&void 0===i?n:t(r,n,u,f,e)}),r},edt=iht,odt=function(n,t,i){var r=i;return iht(n,function(n,u){r=0===u&&void 0===i?n:t(r,n,u)}),r},sdt=uht,hdt=function(n,t,i){var r=i,u=!1;return uht(n,function(n,f,e,o,s){r=!1===u&&void 0===i?n:t(r,n,f,e,o,s);u=!0}),r},lit=Object.defineProperty({coordAll:ykt,coordEach:pkt,coordReduce:wkt,featureEach:bkt,featureReduce:kkt,findPoint:dkt,findSegment:gkt,flattenEach:ndt,flattenReduce:tdt,geomEach:idt,geomReduce:rdt,lineEach:udt,lineReduce:fdt,propEach:edt,propReduce:odt,segmentEach:sdt,segmentReduce:hdt},"__esModule",{value:!0});ait.default=ait;var cdt=ait,ky=Object.defineProperty({"default":cdt},"__esModule",{value:!0}).default,ldt=lit.featureEach,eht=(lit.coordEach,hf.polygon,hf.featureCollection);dy=oht;sht=oht;dy.default=sht;yit=6378137;dit=function(n,t,i,r,u){this.coord=n;this.param=t;this.ringAndEdgeIn=i;this.ringAndEdgeOut=r;this.nxtIsectAlongEdgeIn=u};git=function(n,t,i,r,u,f,e){this.coord=n;this.ringAndEdge1=t;this.ringAndEdge2=i;this.nxtIsectAlongRingAndEdge1=r;this.nxtIsectAlongRingAndEdge2=u;this.ringAndEdge1Walkable=f;this.ringAndEdge2Walkable=e};var tct=Math.PI/180,ict=180/Math.PI,hb=function(n,t){this.lon=n;this.lat=t;this.x=tct*n;this.y=tct*t};hb.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};hb.prototype.antipode=function(){var n=-1*this.lat,t=this.lon<0?180+this.lon:-1*(180-this.lon);return new hb(t,n)};nrt=function(){this.coords=[];this.length=0};nrt.prototype.move_to=function(n){this.length++;this.coords.push(n)};bd=function(n){this.properties=n||{};this.geometries=[]};bd.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],n=0;n<this.geometries.length;n++)t.push(this.geometries[n].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}};bd.prototype.wkt=function(){for(var i="",t="LINESTRING(",r=function(n){t+=n[0]+" "+n[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(r);i+=t.substring(0,t.length-1)+")"}return i};kd=function(n,t,i){if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new hb(n.x,n.y);this.end=new hb(t.x,t.y);this.properties=i||{};var r=this.start.x-this.end.x,u=this.start.y-this.end.y,f=Math.pow(Math.sin(u/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(f)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+t);};kd.prototype.interpolate=function(n){var t=Math.sin((1-n)*this.g)/Math.sin(this.g),i=Math.sin(n*this.g)/Math.sin(this.g),r=t*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),u=t*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),f=t*Math.sin(this.start.y)+i*Math.sin(this.end.y),e=ict*Math.atan2(f,Math.sqrt(Math.pow(r,2)+Math.pow(u,2)));return[ict*Math.atan2(u,r),e]};kd.prototype.Arc=function(n,t){var i=[],st,l,ht,ct,s,u,r,g,vt,yt,it,rt,ut,c,ft,y,et,ot,p;if(!n||n<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(st=1/(n-1),l=0;l<n;++l)ht=st*l,ct=this.interpolate(ht),i.push(ct);for(var lt=!1,w=0,a=t&&t.offset?t.offset:10,o=180-a,h=-180+a,at=360-a,v=1;v<i.length;++v){var b=i[v-1][0],k=i[v][0],d=Math.abs(k-b);d>at&&(k>o&&b<h||b>o&&k<h)?lt=!0:d>w&&(w=d)}if(s=[],lt&&w<a)for(u=[],s.push(u),r=0;r<i.length;++r)if(g=parseFloat(i[r][0]),r>0&&Math.abs(g-i[r-1][0])>at){var f=parseFloat(i[r-1][0]),nt=parseFloat(i[r-1][1]),e=parseFloat(i[r][0]),tt=parseFloat(i[r][1]);if(f>-180&&f<h&&180===e&&r+1<i.length&&i[r-1][0]>-180&&i[r-1][0]<h){u.push([-180,i[r][1]]);r++;u.push([i[r][0],i[r][1]]);continue}if(f>o&&f<180&&-180===e&&r+1<i.length&&i[r-1][0]>o&&i[r-1][0]<180){u.push([180,i[r][1]]);r++;u.push([i[r][0],i[r][1]]);continue}f<h&&e>o&&(vt=f,f=e,e=vt,yt=nt,nt=tt,tt=yt);(f>o&&e<h&&(e+=360),f<=180&&e>=180&&f<e)?(it=(180-f)/(e-f),rt=it*tt+(1-it)*nt,u.push([i[r-1][0]>o?180:-180,rt]),(u=[]).push([i[r-1][0]>o?-180:180,rt]),s.push(u)):(u=[],s.push(u));u.push([g,i[r][1]])}else u.push([i[r][0],i[r][1]]);else for(ut=[],s.push(ut),c=0;c<i.length;++c)ut.push([i[c][0],i[c][1]]);for(ft=new bd(this.properties),y=0;y<s.length;++y)for(et=new nrt,ft.geometries.push(et),ot=s[y],p=0;p<ot.length;++p)et.move_to(ot[p]);return ft};var vct=fc(function(n){function t(n){var t=[];for(var i in n)t.push(i);return t}(n.exports="function"==typeof Object.keys?Object.keys:t).shim=t}),yct=fc(function(n,t){function i(n){return"[object Arguments]"==Object.prototype.toString.call(n)}function r(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Object.prototype.hasOwnProperty.call(n,"callee")&&!Object.prototype.propertyIsEnumerable.call(n,"callee")||!1}var u="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(t=n.exports=u?i:r).supported=i;t.unsupported=r}),tp=fc(function(n){function r(n){return null==n}function u(n){return!(!n||"object"!=typeof n||"number"!=typeof n.length)&&"function"==typeof n.copy&&"function"==typeof n.slice&&!(n.length>0&&"number"!=typeof n[0])}var t=Array.prototype.slice,i=n.exports=function(n,f,e){return e||(e={}),n===f||(n instanceof Date&&f instanceof Date?n.getTime()===f.getTime():!n||!f||"object"!=typeof n&&"object"!=typeof f?e.strict?n===f:n==f:function(n,f,e){var o,c,s,h;if(r(n)||r(f)||n.prototype!==f.prototype)return!1;if(yct(n))return!!yct(f)&&(n=t.call(n),f=t.call(f),i(n,f,e));if(u(n)){if(!u(f)||n.length!==f.length)return!1;for(o=0;o<n.length;o++)if(n[o]!==f[o])return!1;return!0}try{s=vct(n);h=vct(f)}catch(n){return!1}if(s.length!=h.length)return!1;for(s.sort(),h.sort(),o=s.length-1;o>=0;o--)if(s[o]!=h[o])return!1;for(o=s.length-1;o>=0;o--)if(c=s[o],!i(n[c],f[c],e))return!1;return typeof n==typeof f}(n,f,e))}});urt={successCallback:null,verbose:!1,polygons:!1};ea={};var ee=64,ah=16,ht=[],ct=[],lt=[],at=[],vt=[],yt=[],pt=[],wt=[],bt=[],kt=[],dt=[],gt=[],ni=[],ti=[],ii=[],ri=[],ui=[],fi=[],ei=[],oi=[],si=[],hi=[],ci=[],li=[];pt[85]=kt[85]=-1;wt[85]=dt[85]=0;bt[85]=gt[85]=1;ei[85]=hi[85]=1;oi[85]=ci[85]=0;si[85]=li[85]=1;ht[85]=at[85]=0;ct[85]=vt[85]=-1;lt[85]=ii[85]=0;ri[85]=ni[85]=0;ui[85]=ti[85]=1;yt[85]=fi[85]=1;hi[1]=hi[169]=0;ci[1]=ci[169]=-1;li[1]=li[169]=0;ni[1]=ni[169]=-1;ti[1]=ti[169]=0;ii[1]=ii[169]=0;kt[4]=kt[166]=0;dt[4]=dt[166]=-1;gt[4]=gt[166]=1;ri[4]=ri[166]=1;ui[4]=ui[166]=0;fi[4]=fi[166]=0;pt[16]=pt[154]=0;wt[16]=wt[154]=1;bt[16]=bt[154]=1;at[16]=at[154]=1;vt[16]=vt[154]=0;yt[16]=yt[154]=1;ei[64]=ei[106]=0;oi[64]=oi[106]=1;si[64]=si[106]=0;ht[64]=ht[106]=-1;ct[64]=ct[106]=0;lt[64]=lt[106]=1;ei[2]=ei[168]=0;oi[2]=oi[168]=-1;si[2]=si[168]=1;hi[2]=hi[168]=0;ci[2]=ci[168]=-1;li[2]=li[168]=0;ni[2]=ni[168]=-1;ti[2]=ti[168]=0;ii[2]=ii[168]=0;ri[2]=ri[168]=-1;ui[2]=ui[168]=0;fi[2]=fi[168]=1;pt[8]=pt[162]=0;wt[8]=wt[162]=-1;bt[8]=bt[162]=0;kt[8]=kt[162]=0;dt[8]=dt[162]=-1;gt[8]=gt[162]=1;ni[8]=ni[162]=1;ti[8]=ti[162]=0;ii[8]=ii[162]=1;ri[8]=ri[162]=1;ui[8]=ui[162]=0;fi[8]=fi[162]=0;pt[32]=pt[138]=0;wt[32]=wt[138]=1;bt[32]=bt[138]=1;kt[32]=kt[138]=0;dt[32]=dt[138]=1;gt[32]=gt[138]=0;ht[32]=ht[138]=1;ct[32]=ct[138]=0;lt[32]=lt[138]=0;at[32]=at[138]=1;vt[32]=vt[138]=0;yt[32]=yt[138]=1;hi[128]=hi[42]=0;ci[128]=ci[42]=1;li[128]=li[42]=1;ei[128]=ei[42]=0;oi[128]=oi[42]=1;si[128]=si[42]=0;ht[128]=ht[42]=-1;ct[128]=ct[42]=0;lt[128]=lt[42]=1;at[128]=at[42]=-1;vt[128]=vt[42]=0;yt[128]=yt[42]=0;kt[5]=kt[165]=-1;dt[5]=dt[165]=0;gt[5]=gt[165]=0;hi[5]=hi[165]=1;ci[5]=ci[165]=0;li[5]=li[165]=0;ri[20]=ri[150]=0;ui[20]=ui[150]=1;fi[20]=fi[150]=1;at[20]=at[150]=0;vt[20]=vt[150]=-1;yt[20]=yt[150]=1;pt[80]=pt[90]=-1;wt[80]=wt[90]=0;bt[80]=bt[90]=1;ei[80]=ei[90]=1;oi[80]=oi[90]=0;si[80]=si[90]=1;ni[65]=ni[105]=0;ti[65]=ti[105]=1;ii[65]=ii[105]=0;ht[65]=ht[105]=0;ct[65]=ct[105]=-1;lt[65]=lt[105]=0;pt[160]=pt[10]=-1;wt[160]=wt[10]=0;bt[160]=bt[10]=1;kt[160]=kt[10]=-1;dt[160]=dt[10]=0;gt[160]=gt[10]=0;hi[160]=hi[10]=1;ci[160]=ci[10]=0;li[160]=li[10]=0;ei[160]=ei[10]=1;oi[160]=oi[10]=0;si[160]=si[10]=1;ri[130]=ri[40]=0;ui[130]=ui[40]=1;fi[130]=fi[40]=1;ni[130]=ni[40]=0;ti[130]=ti[40]=1;ii[130]=ii[40]=0;ht[130]=ht[40]=0;ct[130]=ct[40]=-1;lt[130]=lt[40]=0;at[130]=at[40]=0;vt[130]=vt[40]=-1;yt[130]=yt[40]=1;kt[37]=kt[133]=0;dt[37]=dt[133]=1;gt[37]=gt[133]=1;hi[37]=hi[133]=0;ci[37]=ci[133]=1;li[37]=li[133]=0;ht[37]=ht[133]=-1;ct[37]=ct[133]=0;lt[37]=lt[133]=0;at[37]=at[133]=1;vt[37]=vt[133]=0;yt[37]=yt[133]=0;ri[148]=ri[22]=-1;ui[148]=ui[22]=0;fi[148]=fi[22]=0;hi[148]=hi[22]=0;ci[148]=ci[22]=-1;li[148]=li[22]=1;ei[148]=ei[22]=0;oi[148]=oi[22]=1;si[148]=si[22]=1;at[148]=at[22]=-1;vt[148]=vt[22]=0;yt[148]=yt[22]=1;pt[82]=pt[88]=0;wt[82]=wt[88]=-1;bt[82]=bt[88]=1;ri[82]=ri[88]=1;ui[82]=ui[88]=0;fi[82]=fi[88]=1;ni[82]=ni[88]=-1;ti[82]=ti[88]=0;ii[82]=ii[88]=1;ei[82]=ei[88]=0;oi[82]=oi[88]=-1;si[82]=si[88]=0;pt[73]=pt[97]=0;wt[73]=wt[97]=1;bt[73]=bt[97]=0;kt[73]=kt[97]=0;dt[73]=dt[97]=-1;gt[73]=gt[97]=0;ni[73]=ni[97]=1;ti[73]=ti[97]=0;ii[73]=ii[97]=0;ht[73]=ht[97]=1;ct[73]=ct[97]=0;lt[73]=lt[97]=1;pt[145]=pt[25]=0;wt[145]=wt[25]=-1;bt[145]=bt[25]=0;ni[145]=ni[25]=1;ti[145]=ti[25]=0;ii[145]=ii[25]=1;hi[145]=hi[25]=0;ci[145]=ci[25]=1;li[145]=li[25]=1;at[145]=at[25]=-1;vt[145]=vt[25]=0;yt[145]=yt[25]=0;kt[70]=kt[100]=0;dt[70]=dt[100]=1;gt[70]=gt[100]=0;ri[70]=ri[100]=-1;ui[70]=ui[100]=0;fi[70]=fi[100]=1;ei[70]=ei[100]=0;oi[70]=oi[100]=-1;si[70]=si[100]=1;ht[70]=ht[100]=1;ct[70]=ct[100]=0;lt[70]=lt[100]=0;kt[101]=kt[69]=0;dt[101]=dt[69]=1;gt[101]=gt[69]=0;ht[101]=ht[69]=1;ct[101]=ct[69]=0;lt[101]=lt[69]=0;hi[149]=hi[21]=0;ci[149]=ci[21]=1;li[149]=li[21]=1;at[149]=at[21]=-1;vt[149]=vt[21]=0;yt[149]=yt[21]=0;ri[86]=ri[84]=-1;ui[86]=ui[84]=0;fi[86]=fi[84]=1;ei[86]=ei[84]=0;oi[86]=oi[84]=-1;si[86]=si[84]=1;pt[89]=pt[81]=0;wt[89]=wt[81]=-1;bt[89]=bt[81]=0;ni[89]=ni[81]=1;ti[89]=ti[81]=0;ii[89]=ii[81]=1;pt[96]=pt[74]=0;wt[96]=wt[74]=1;bt[96]=bt[74]=0;kt[96]=kt[74]=-1;dt[96]=dt[74]=0;gt[96]=gt[74]=1;ei[96]=ei[74]=1;oi[96]=oi[74]=0;si[96]=si[74]=0;ht[96]=ht[74]=1;ct[96]=ct[74]=0;lt[96]=lt[74]=1;pt[24]=pt[146]=0;wt[24]=wt[146]=-1;bt[24]=bt[146]=1;ri[24]=ri[146]=1;ui[24]=ui[146]=0;fi[24]=fi[146]=1;ni[24]=ni[146]=0;ti[24]=ti[146]=1;ii[24]=ii[146]=1;at[24]=at[146]=0;vt[24]=vt[146]=-1;yt[24]=yt[146]=0;kt[6]=kt[164]=-1;dt[6]=dt[164]=0;gt[6]=gt[164]=1;ri[6]=ri[164]=-1;ui[6]=ui[164]=0;fi[6]=fi[164]=0;hi[6]=hi[164]=0;ci[6]=ci[164]=-1;li[6]=li[164]=1;ei[6]=ei[164]=1;oi[6]=oi[164]=0;si[6]=si[164]=0;ni[129]=ni[41]=0;ti[129]=ti[41]=1;ii[129]=ii[41]=1;hi[129]=hi[41]=0;ci[129]=ci[41]=1;li[129]=li[41]=0;ht[129]=ht[41]=-1;ct[129]=ct[41]=0;lt[129]=lt[41]=0;at[129]=at[41]=0;vt[129]=vt[41]=-1;yt[129]=yt[41]=0;ri[66]=ri[104]=0;ui[66]=ui[104]=1;fi[66]=fi[104]=0;ni[66]=ni[104]=-1;ti[66]=ti[104]=0;ii[66]=ii[104]=1;ei[66]=ei[104]=0;oi[66]=oi[104]=-1;si[66]=si[104]=0;ht[66]=ht[104]=0;ct[66]=ct[104]=-1;lt[66]=lt[104]=1;pt[144]=pt[26]=-1;wt[144]=wt[26]=0;bt[144]=bt[26]=0;hi[144]=hi[26]=1;ci[144]=ci[26]=0;li[144]=li[26]=1;ei[144]=ei[26]=0;oi[144]=oi[26]=1;si[144]=si[26]=1;at[144]=at[26]=-1;vt[144]=vt[26]=0;yt[144]=yt[26]=1;kt[36]=kt[134]=0;dt[36]=dt[134]=1;gt[36]=gt[134]=1;ri[36]=ri[134]=0;ui[36]=ui[134]=1;fi[36]=fi[134]=0;ht[36]=ht[134]=0;ct[36]=ct[134]=-1;lt[36]=lt[134]=1;at[36]=at[134]=1;vt[36]=vt[134]=0;yt[36]=yt[134]=0;pt[9]=pt[161]=-1;wt[9]=wt[161]=0;bt[9]=bt[161]=0;kt[9]=kt[161]=0;dt[9]=dt[161]=-1;gt[9]=gt[161]=0;ni[9]=ni[161]=1;ti[9]=ti[161]=0;ii[9]=ii[161]=0;hi[9]=hi[161]=1;ci[9]=ci[161]=0;li[9]=li[161]=1;pt[136]=0;wt[136]=1;bt[136]=1;kt[136]=0;dt[136]=1;gt[136]=0;ri[136]=-1;ui[136]=0;fi[136]=1;ni[136]=-1;ti[136]=0;ii[136]=0;hi[136]=0;ci[136]=-1;li[136]=0;ei[136]=0;oi[136]=-1;si[136]=1;ht[136]=1;ct[136]=0;lt[136]=0;at[136]=1;vt[136]=0;yt[136]=1;pt[34]=0;wt[34]=-1;bt[34]=0;kt[34]=0;dt[34]=-1;gt[34]=1;ri[34]=1;ui[34]=0;fi[34]=0;ni[34]=1;ti[34]=0;ii[34]=1;hi[34]=0;ci[34]=1;li[34]=1;ei[34]=0;oi[34]=1;si[34]=0;ht[34]=-1;ct[34]=0;lt[34]=1;at[34]=-1;vt[34]=0;yt[34]=0;pt[35]=0;wt[35]=1;bt[35]=1;kt[35]=0;dt[35]=-1;gt[35]=1;ri[35]=1;ui[35]=0;fi[35]=0;ni[35]=-1;ti[35]=0;ii[35]=0;hi[35]=0;ci[35]=-1;li[35]=0;ei[35]=0;oi[35]=1;si[35]=0;ht[35]=-1;ct[35]=0;lt[35]=1;at[35]=1;vt[35]=0;yt[35]=1;pt[153]=0;wt[153]=1;bt[153]=1;ni[153]=-1;ti[153]=0;ii[153]=0;hi[153]=0;ci[153]=-1;li[153]=0;at[153]=1;vt[153]=0;yt[153]=1;kt[102]=0;dt[102]=-1;gt[102]=1;ri[102]=1;ui[102]=0;fi[102]=0;ei[102]=0;oi[102]=1;si[102]=0;ht[102]=-1;ct[102]=0;lt[102]=1;pt[155]=0;wt[155]=-1;bt[155]=0;ni[155]=1;ti[155]=0;ii[155]=1;hi[155]=0;ci[155]=1;li[155]=1;at[155]=-1;vt[155]=0;yt[155]=0;kt[103]=0;dt[103]=1;gt[103]=0;ri[103]=-1;ui[103]=0;fi[103]=1;ei[103]=0;oi[103]=-1;si[103]=1;ht[103]=1;ct[103]=0;lt[103]=0;pt[152]=0;wt[152]=1;bt[152]=1;ri[152]=-1;ui[152]=0;fi[152]=1;ni[152]=-1;ti[152]=0;ii[152]=0;hi[152]=0;ci[152]=-1;li[152]=0;ei[152]=0;oi[152]=-1;si[152]=1;at[152]=1;vt[152]=0;yt[152]=1;pt[156]=0;wt[156]=-1;bt[156]=1;ri[156]=1;ui[156]=0;fi[156]=1;ni[156]=-1;ti[156]=0;ii[156]=0;hi[156]=0;ci[156]=-1;li[156]=0;ei[156]=0;oi[156]=1;si[156]=1;at[156]=-1;vt[156]=0;yt[156]=1;pt[137]=0;wt[137]=1;bt[137]=1;kt[137]=0;dt[137]=1;gt[137]=0;ni[137]=-1;ti[137]=0;ii[137]=0;hi[137]=0;ci[137]=-1;li[137]=0;ht[137]=1;ct[137]=0;lt[137]=0;at[137]=1;vt[137]=0;yt[137]=1;pt[139]=0;wt[139]=1;bt[139]=1;kt[139]=0;dt[139]=-1;gt[139]=0;ni[139]=1;ti[139]=0;ii[139]=0;hi[139]=0;ci[139]=1;li[139]=0;ht[139]=-1;ct[139]=0;lt[139]=0;at[139]=1;vt[139]=0;yt[139]=1;pt[98]=0;wt[98]=-1;bt[98]=0;kt[98]=0;dt[98]=-1;gt[98]=1;ri[98]=1;ui[98]=0;fi[98]=0;ni[98]=1;ti[98]=0;ii[98]=1;ei[98]=0;oi[98]=1;si[98]=0;ht[98]=-1;ct[98]=0;lt[98]=1;pt[99]=0;wt[99]=1;bt[99]=0;kt[99]=0;dt[99]=-1;gt[99]=1;ri[99]=1;ui[99]=0;fi[99]=0;ni[99]=-1;ti[99]=0;ii[99]=1;ei[99]=0;oi[99]=-1;si[99]=0;ht[99]=1;ct[99]=0;lt[99]=1;kt[38]=0;dt[38]=-1;gt[38]=1;ri[38]=1;ui[38]=0;fi[38]=0;hi[38]=0;ci[38]=1;li[38]=1;ei[38]=0;oi[38]=1;si[38]=0;ht[38]=-1;ct[38]=0;lt[38]=1;at[38]=-1;vt[38]=0;yt[38]=0;kt[39]=0;dt[39]=1;gt[39]=1;ri[39]=-1;ui[39]=0;fi[39]=0;hi[39]=0;ci[39]=-1;li[39]=1;ei[39]=0;oi[39]=1;si[39]=0;ht[39]=-1;ct[39]=0;lt[39]=1;at[39]=1;vt[39]=0;yt[39]=0;var frt=function(n){return[[n.bottomleft,0],[0,0],[0,n.leftbottom]]},ert=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0]]},ort=function(n){return[[n.topright,1],[1,1],[1,n.righttop]]},srt=function(n){return[[0,n.lefttop],[0,1],[n.topleft,1]]},hrt=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop]]},crt=function(n){return[[n.bottomright,0],[n.bottomleft,0],[1,n.righttop],[1,n.rightbottom]]},lrt=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.topleft,1],[n.topright,1]]},art=function(n){return[[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]},c=[],h=[],y=[],v=[],g=[],k=[],ai=[],vi=[];v[1]=g[1]=18;v[169]=g[169]=18;y[4]=h[4]=12;y[166]=h[166]=12;c[16]=vi[16]=4;c[154]=vi[154]=4;k[64]=ai[64]=22;k[106]=ai[106]=22;y[2]=k[2]=17;v[2]=g[2]=18;y[168]=k[168]=17;v[168]=g[168]=18;c[8]=v[8]=9;h[8]=y[8]=12;c[162]=v[162]=9;h[162]=y[162]=12;c[32]=vi[32]=4;h[32]=ai[32]=1;c[138]=vi[138]=4;h[138]=ai[138]=1;g[128]=vi[128]=21;k[128]=ai[128]=22;g[42]=vi[42]=21;k[42]=ai[42]=22;h[5]=g[5]=14;h[165]=g[165]=14;y[20]=vi[20]=6;y[150]=vi[150]=6;c[80]=k[80]=11;c[90]=k[90]=11;v[65]=ai[65]=3;v[105]=ai[105]=3;c[160]=k[160]=11;h[160]=g[160]=14;c[10]=k[10]=11;h[10]=g[10]=14;y[130]=vi[130]=6;v[130]=ai[130]=3;y[40]=vi[40]=6;v[40]=ai[40]=3;h[101]=ai[101]=1;h[69]=ai[69]=1;g[149]=vi[149]=21;g[21]=vi[21]=21;y[86]=k[86]=17;y[84]=k[84]=17;c[89]=v[89]=9;c[81]=v[81]=9;c[96]=ai[96]=0;h[96]=k[96]=15;c[74]=ai[74]=0;h[74]=k[74]=15;c[24]=y[24]=8;v[24]=vi[24]=7;c[146]=y[146]=8;v[146]=vi[146]=7;h[6]=k[6]=15;y[6]=g[6]=16;h[164]=k[164]=15;y[164]=g[164]=16;v[129]=vi[129]=7;g[129]=ai[129]=20;v[41]=vi[41]=7;g[41]=ai[41]=20;y[66]=ai[66]=2;v[66]=k[66]=19;y[104]=ai[104]=2;v[104]=k[104]=19;c[144]=g[144]=10;k[144]=vi[144]=23;c[26]=g[26]=10;k[26]=vi[26]=23;h[36]=vi[36]=5;y[36]=ai[36]=2;h[134]=vi[134]=5;y[134]=ai[134]=2;c[9]=g[9]=10;h[9]=v[9]=13;c[161]=g[161]=10;h[161]=v[161]=13;h[37]=vi[37]=5;g[37]=ai[37]=20;h[133]=vi[133]=5;g[133]=ai[133]=20;y[148]=g[148]=16;k[148]=vi[148]=23;y[22]=g[22]=16;k[22]=vi[22]=23;c[82]=y[82]=8;v[82]=k[82]=19;c[88]=y[88]=8;v[88]=k[88]=19;c[73]=ai[73]=0;h[73]=v[73]=13;c[97]=ai[97]=0;h[97]=v[97]=13;c[145]=v[145]=9;g[145]=vi[145]=21;c[25]=v[25]=9;g[25]=vi[25]=21;h[70]=ai[70]=1;y[70]=k[70]=17;h[100]=ai[100]=1;y[100]=k[100]=17;c[34]=v[34]=9;h[34]=y[34]=12;g[34]=vi[34]=21;k[34]=ai[34]=22;c[136]=vi[136]=4;h[136]=ai[136]=1;y[136]=k[136]=17;v[136]=g[136]=18;c[35]=vi[35]=4;h[35]=y[35]=12;v[35]=g[35]=18;k[35]=ai[35]=22;c[153]=vi[153]=4;v[153]=g[153]=18;h[102]=y[102]=12;k[102]=ai[102]=22;c[155]=v[155]=9;g[155]=vi[155]=23;h[103]=ai[103]=1;y[103]=k[103]=17;c[152]=vi[152]=4;y[152]=k[152]=17;v[152]=g[152]=18;c[156]=y[156]=8;v[156]=g[156]=18;k[156]=vi[156]=23;c[137]=vi[137]=4;h[137]=ai[137]=1;v[137]=g[137]=18;c[139]=vi[139]=4;h[139]=v[139]=13;g[139]=ai[139]=20;c[98]=v[98]=9;h[98]=y[98]=12;k[98]=ai[98]=22;c[99]=ai[99]=0;h[99]=y[99]=12;v[99]=k[99]=19;h[38]=y[38]=12;g[38]=vi[38]=21;k[38]=ai[38]=22;h[39]=vi[39]=5;y[39]=g[39]=16;k[39]=ai[39]=22;s=[];s[1]=s[169]=frt;s[4]=s[166]=ert;s[16]=s[154]=ort;s[64]=s[106]=srt;s[168]=s[2]=hrt;s[162]=s[8]=crt;s[138]=s[32]=lrt;s[42]=s[128]=art;s[5]=s[165]=function(n){return[[0,0],[0,n.leftbottom],[1,n.rightbottom],[1,0]]};s[20]=s[150]=function(n){return[[1,0],[n.bottomright,0],[n.topright,1],[1,1]]};s[80]=s[90]=function(n){return[[1,1],[1,n.righttop],[0,n.lefttop],[0,1]]};s[65]=s[105]=function(n){return[[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]};s[160]=s[10]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.leftbottom],[0,n.lefttop]]};s[130]=s[40]=function(n){return[[n.topleft,1],[n.topright,1],[n.bottomright,0],[n.bottomleft,0]]};s[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]};s[101]=s[69]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,1],[n.topleft,1]]};s[149]=s[21]=function(n){return[[n.topright,1],[1,1],[1,0],[0,0],[0,n.leftbottom]]};s[86]=s[84]=function(n){return[[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[1,1]]};s[89]=s[81]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,1]]};s[96]=s[74]=function(n){return[[1,n.righttop],[1,n.rightbottom],[0,n.lefttop],[0,1],[n.topleft,1]]};s[24]=s[146]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[n.topright,1]]};s[6]=s[164]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop]]};s[129]=s[41]=function(n){return[[n.topright,1],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1]]};s[66]=s[104]=function(n){return[[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]};s[144]=s[26]=function(n){return[[1,1],[1,n.righttop],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]};s[36]=s[134]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[n.topleft,1],[n.topright,1]]};s[9]=s[161]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom]]};s[37]=s[133]=function(n){return[[1,n.rightbottom],[1,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]};s[148]=s[22]=function(n){return[[1,1],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]};s[82]=s[88]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1]]};s[73]=s[97]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,1],[n.topleft,1]]};s[145]=s[25]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]};s[70]=s[100]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]};s[34]=function(n){return[art(n),crt(n)]};s[35]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};s[136]=function(n){return[lrt(n),hrt(n)]};s[153]=function(n){return[ort(n),frt(n)]};s[102]=function(n){return[ert(n),srt(n)]};s[155]=function(n){return[[1,1],[1,n.righttop],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topright,1]]};s[103]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.lefttop],[0,1],[n.topleft,1]]};s[152]=function(n){return[ort(n),hrt(n)]};s[156]=function(n){return[[1,1],[1,n.righttop],[n.bottomright,0],[n.bottomleft,0],[0,n.leftbottom],[0,n.lefttop],[n.topright,1]]};s[137]=function(n){return[lrt(n),frt(n)]};s[139]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomleft,0],[0,0],[0,n.leftbottom],[n.topleft,1],[n.topright,1]]};s[98]=function(n){return[crt(n),srt(n)]};s[99]=function(n){return[[1,n.righttop],[1,n.rightbottom],[n.bottomright,0],[n.bottomleft,0],[0,n.lefttop],[0,1],[n.topleft,1]]};s[38]=function(n){return[ert(n),art(n)]};s[39]=function(n){return[[1,n.rightbottom],[1,0],[n.bottomright,0],[0,n.leftbottom],[0,n.lefttop],[n.topleft,1],[n.topright,1]]};var elt=function(){function n(t){this.id=n.buildId(t);this.coordinates=t;this.innerEdges=[];this.outerEdges=[];this.outerEdgesSorted=!1}return n.buildId=function(n){return n.join(",")},n.prototype.removeInnerEdge=function(n){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==n.from.id})},n.prototype.removeOuterEdge=function(n){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==n.to.id})},n.prototype.addOuterEdge=function(n){this.outerEdges.push(n);this.outerEdgesSorted=!1},n.prototype.sortOuterEdges=function(){var n=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,i){var r=t.to,u=i.to,f;return r.coordinates[0]-n.coordinates[0]>=0&&u.coordinates[0]-n.coordinates[0]<0?1:r.coordinates[0]-n.coordinates[0]<0&&u.coordinates[0]-n.coordinates[0]>=0?-1:r.coordinates[0]-n.coordinates[0]==0&&u.coordinates[0]-n.coordinates[0]==0?r.coordinates[1]-n.coordinates[1]>=0||u.coordinates[1]-n.coordinates[1]>=0?r.coordinates[1]-u.coordinates[1]:u.coordinates[1]-r.coordinates[1]:(f=prt(n.coordinates,r.coordinates,u.coordinates),f<0?1:f>0?-1:Math.pow(r.coordinates[0]-n.coordinates[0],2)+Math.pow(r.coordinates[1]-n.coordinates[1],2)-(Math.pow(u.coordinates[0]-n.coordinates[0],2)+Math.pow(u.coordinates[1]-n.coordinates[1],2)))}),this.outerEdgesSorted=!0)},n.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},n.prototype.getOuterEdge=function(n){return this.sortOuterEdges(),this.outerEdges[n]},n.prototype.addInnerEdge=function(n){this.innerEdges.push(n)},n}(),hgt=function(){function n(n,t){this.from=n;this.to=t;this.next=void 0;this.label=void 0;this.symetric=void 0;this.ring=void 0;this.from.addOuterEdge(this);this.to.addInnerEdge(this)}return n.prototype.getSymetric=function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric},n.prototype.deleteEdge=function(){this.from.removeOuterEdge(this);this.to.removeInnerEdge(this)},n.prototype.isEqual=function(n){return this.from.id===n.from.id&&this.to.id===n.to.id},n.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},n.prototype.toLineString=function(){return gi([this.from.coordinates,this.to.coordinates])},n.prototype.compareTo=function(n){return prt(n.from.coordinates,n.to.coordinates,this.to.coordinates)},n}(),olt=function(){function n(){this.edges=[];this.polygon=void 0;this.envelope=void 0}return n.prototype.push=function(n){this.edges.push(n);this.polygon=this.envelope=void 0},n.prototype.get=function(n){return this.edges[n]},Object.defineProperty(n.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),n.prototype.forEach=function(n){this.edges.forEach(n)},n.prototype.map=function(n){return this.edges.map(n)},n.prototype.some=function(n){return this.edges.some(n)},n.prototype.isValid=function(){return!0},n.prototype.isHole=function(){var u=this,n=this.edges.reduce(function(n,t,i){return t.from.coordinates[1]>u.edges[n].from.coordinates[1]&&(n=i),n},0),t=(0===n?this.length:n)-1,i=(n+1)%this.length,r=prt(this.edges[t].from.coordinates,this.edges[n].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[t].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},n.prototype.toMultiPoint=function(){return pw(this.edges.map(function(n){return n.from.coordinates}))},n.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var n=this.edges.map(function(n){return n.from.coordinates});return n.push(this.edges[0].from.coordinates),this.polygon=ot([n])},n.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=pst(this.toPolygon())},n.findEdgeRingContaining=function(n,t){var r,i,u=n.getEnvelope();return t.forEach(function(t){var v,f,e,o,s,h,c=t.getEnvelope();if((i&&(r=i.getEnvelope()),f=u,e=(v=c).geometry.coordinates[0].map(function(n){return n[0]}),o=v.geometry.coordinates[0].map(function(n){return n[1]}),s=f.geometry.coordinates[0].map(function(n){return n[0]}),h=f.geometry.coordinates[0].map(function(n){return n[1]}),Math.max.apply(null,e)!==Math.max.apply(null,s)||Math.max.apply(null,o)!==Math.max.apply(null,h)||Math.min.apply(null,e)!==Math.min.apply(null,s)||Math.min.apply(null,o)!==Math.min.apply(null,h))&&flt(c,u)){for(var p=n.map(function(n){return n.from.coordinates}),l=void 0,w=function(n){t.some(function(t){return i=n,r=t.from.coordinates,i[0]===r[0]&&i[1]===r[1];var i,r})||(l=n)},a=0,y=p;a<y.length;a++)w(y[a]);l&&t.inside(ft(l))&&(i&&!flt(r,c)||(i=t))}}),i},n.prototype.inside=function(n){return cr(n,this.toPolygon())},n}(),cgt=function(){function n(){this.edges=[];this.nodes={}}return n.fromGeoJson=function(t){!function(n){if(!n)throw new Error("No geojson passed");if("FeatureCollection"!==n.type&&"GeometryCollection"!==n.type&&"MultiLineString"!==n.type&&"LineString"!==n.type&&"Feature"!==n.type)throw new Error("Invalid input type '"+n.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature");}(t);var i=new n;return sf(t,function(n){ww(n,"LineString","Graph::fromGeoJson");gn(n,function(n,t){if(n){var r=i.getNode(n),u=i.getNode(t);i.addEdge(r,u)}return t})}),i},n.prototype.getNode=function(n){var i=elt.buildId(n),t=this.nodes[i];return t||(t=this.nodes[i]=new elt(n)),t},n.prototype.addEdge=function(n,t){var i=new hgt(n,t),r=i.getSymetric();this.edges.push(i);this.edges.push(r)},n.prototype.deleteDangles=function(){var n=this;Object.keys(this.nodes).map(function(t){return n.nodes[t]}).forEach(function(t){return n._removeIfDangle(t)})},n.prototype._removeIfDangle=function(n){var i=this,t;n.innerEdges.length<=1&&(t=n.getOuterEdges().map(function(n){return n.to}),this.removeNode(n),t.forEach(function(n){return i._removeIfDangle(n)}))},n.prototype.deleteCutEdges=function(){var n=this;this._computeNextCWEdges();this._findLabeledEdgeRings();this.edges.forEach(function(t){t.label===t.symetric.label&&(n.removeEdge(t.symetric),n.removeEdge(t))})},n.prototype._computeNextCWEdges=function(n){var t=this;void 0===n?Object.keys(this.nodes).forEach(function(n){return t._computeNextCWEdges(t.nodes[n])}):n.getOuterEdges().forEach(function(t,i){n.getOuterEdge((0===i?n.getOuterEdges().length:i)-1).symetric.next=t})},n.prototype._computeNextCCWEdges=function(n,t){for(var e,i,o=n.getOuterEdges(),u=o.length-1;u>=0;--u){var s=o[u],h=s.symetric,r=void 0,f=void 0;s.label===t&&(r=s);h.label===t&&(f=h);r&&f&&(f&&(i=f),r&&(i&&(i.next=r,i=void 0),e||(e=r)))}i&&(i.next=e)},n.prototype._findLabeledEdgeRings=function(){var n=[],t=0;return this.edges.forEach(function(i){if(!(i.label>=0)){n.push(i);var r=i;do r.label=t,r=r.next;while(!i.isEqual(r));t++}}),n},n.prototype.getEdgeRings=function(){var n=this,t;return this._computeNextCWEdges(),this.edges.forEach(function(n){n.label=void 0}),this._findLabeledEdgeRings().forEach(function(t){n._findIntersectionNodes(t).forEach(function(i){n._computeNextCCWEdges(i,t.label)})}),t=[],this.edges.forEach(function(i){i.ring||t.push(n._findEdgeRing(i))}),t},n.prototype._findIntersectionNodes=function(n){var i=[],t=n,r=function(){var r=0;t.from.getOuterEdges().forEach(function(t){t.label===n.label&&++r});r>1&&i.push(t.from);t=t.next};do r();while(!n.isEqual(t));return i},n.prototype._findEdgeRing=function(n){var t=n,i=new olt;do i.push(t),t.ring=i,t=t.next;while(!n.isEqual(t));return i},n.prototype.removeNode=function(n){var t=this;n.getOuterEdges().forEach(function(n){return t.removeEdge(n)});n.innerEdges.forEach(function(n){return t.removeEdge(n)});delete this.nodes[n.id]},n.prototype.removeEdge=function(n){this.edges=this.edges.filter(function(t){return!t.isEqual(n)});n.deleteEdge()},n}();vh=function(n){this.precision=n&&n.precision?n.precision:17;this.direction=!(!n||!n.direction)&&n.direction;this.pseudoNode=!(!n||!n.pseudoNode)&&n.pseudoNode;this.objectComparator=n&&n.objectComparator?n.objectComparator:vgt};vh.prototype.compare=function(n,t){if(n.type!==t.type||!blt(n,t))return!1;switch(n.type){case"Point":return this.compareCoord(n.coordinates,t.coordinates);case"LineString":return this.compareLine(n.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(n,t);case"Feature":return this.compareFeature(n,t);default:if(0===n.type.indexOf("Multi")){var i=this,r=wlt(n),u=wlt(t);return r.every(function(n){return this.some(function(t){return i.compare(n,t)})},u)}}return!1};vh.prototype.compareCoord=function(n,t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i].toFixed(this.precision)!==t[i].toFixed(this.precision))return!1;return!0};vh.prototype.compareLine=function(n,t,i,r){var f,u,e;return blt(n,t)?(f=this.pseudoNode?n:this.removePseudo(n),u=this.pseudoNode?t:this.removePseudo(t),!r||this.compareCoord(f[0],u[0])||(u=this.fixStartIndex(u,f))?(e=this.compareCoord(f[i],u[i]),this.direction||e?this.comparePath(f,u):!!this.compareCoord(f[i],u[u.length-(1+i)])&&this.comparePath(f.slice().reverse(),u)):void 0):!1};vh.prototype.fixStartIndex=function(n,t){for(var u,i=-1,r=0;r<n.length;r++)if(this.compareCoord(n[r],t[0])){i=r;break}return i>=0&&(u=[].concat(n.slice(i,n.length),n.slice(1,i+1))),u};vh.prototype.comparePath=function(n,t){var i=this;return n.every(function(n,t){return i.compareCoord(n,this[t])},t)};vh.prototype.comparePolygon=function(n,t){if(this.compareLine(n.coordinates[0],t.coordinates[0],1,!0)){var i=n.coordinates.slice(1,n.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length),u=this;return i.every(function(n){return this.some(function(t){return u.compareLine(n,t,1,!0)})},r)}return!1};vh.prototype.compareFeature=function(n,t){return!(n.id!==t.id||!this.objectComparator(n.properties,t.properties)||!this.compareBBox(n,t))&&this.compare(n.geometry,t.geometry)};vh.prototype.compareBBox=function(n,t){return!!(!n.bbox&&!t.bbox||n.bbox&&t.bbox&&this.compareCoord(n.bbox,t.bbox))};vh.prototype.removePseudo=function(n){return n};brt=vh;var ygt=fc(function(n){function t(n,t,i,r){this.dataset=[];this.epsilon=1;this.minPts=2;this.distance=this._euclideanDistance;this.clusters=[];this.noise=[];this._visited=[];this._assigned=[];this._datasetLength=0;this._init(n,t,i,r)}t.prototype.run=function(n,t,i,r){var u,f,e;for(this._init(n,t,i,r),u=0;u<this._datasetLength;u++)1!==this._visited[u]&&(this._visited[u]=1,f=this._regionQuery(u),f.length<this.minPts?this.noise.push(u):(e=this.clusters.length,this.clusters.push([]),this._addToCluster(u,e),this._expandCluster(e,f)));return this.clusters};t.prototype._init=function(n,t,i,r){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n;this.clusters=[];this.noise=[];this._datasetLength=n.length;this._visited=new Array(this._datasetLength);this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t);i&&(this.minPts=i);r&&(this.distance=r)};t.prototype._expandCluster=function(n,t){for(var i,u,r=0;r<t.length;r++)i=t[r],1!==this._visited[i]&&(this._visited[i]=1,u=this._regionQuery(i),u.length>=this.minPts&&(t=this._mergeArrays(t,u))),1!==this._assigned[i]&&this._addToCluster(i,n)};t.prototype._addToCluster=function(n,t){this.clusters[t].push(n);this._assigned[n]=1};t.prototype._regionQuery=function(n){for(var i=[],t=0;t<this._datasetLength;t++)this.distance(this.dataset[n],this.dataset[t])<this.epsilon&&i.push(t);return i};t.prototype._mergeArrays=function(n,t){for(var r,u=t.length,i=0;i<u;i++)r=t[i],n.indexOf(r)<0&&n.push(r);return n};t.prototype._euclideanDistance=function(n,t){for(var r=0,i=Math.min(n.length,t.length);i--;)r+=(n[i]-t[i])*(n[i]-t[i]);return Math.sqrt(r)};n.exports&&(n.exports=t)}),pgt=fc(function(n){function t(n,t,i){this.k=3;this.dataset=[];this.assignments=[];this.centroids=[];this.init(n,t,i)}t.prototype.init=function(n,t,i){this.assignments=[];this.centroids=[];void 0!==n&&(this.dataset=n);void 0!==t&&(this.k=t);void 0!==i&&(this.distance=i)};t.prototype.run=function(n,t){var c,e,o,r,u,f;for(this.init(n,t),c=this.dataset.length,e=0;e<this.k;e++)this.centroids[e]=this.randomCentroid();for(o=!0;o;)for(o=this.assign(),r=0;r<this.k;r++){for(var s=new Array(f),h=0,i=0;i<f;i++)s[i]=0;for(u=0;u<c;u++)if(f=this.dataset[u].length,r===this.assignments[u]){for(i=0;i<f;i++)s[i]+=this.dataset[u][i];h++}if(h>0){for(i=0;i<f;i++)s[i]/=h;this.centroids[r]=s}else this.centroids[r]=this.randomCentroid(),o=!0}return this.getClusters()};t.prototype.randomCentroid=function(){var n,t,i=this.dataset.length-1;do t=Math.round(Math.random()*i),n=this.dataset[t];while(this.centroids.indexOf(n)>=0);return n};t.prototype.assign=function(){for(var t,i=!1,r=this.dataset.length,n=0;n<r;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,i=!0);return i};t.prototype.getClusters=function(){for(var i,n=new Array(this.k),t=0;t<this.assignments.length;t++)void 0===n[i=this.assignments[t]]&&(n[i]=[]),n[i].push(t);return n};t.prototype.argmin=function(n,t,i){for(var u,f=Number.MAX_VALUE,e=0,o=t.length,r=0;r<o;r++)(u=i(n,t[r]))<f&&(f=u,e=r);return e};t.prototype.distance=function(n,t){for(var u,r=0,i=Math.min(n.length,t.length);i--;)u=n[i]-t[i],r+=u*u;return Math.sqrt(r)};n.exports&&(n.exports=t)}),dlt=fc(function(n){function t(n,t,i){this._queue=[];this._priorities=[];this._sorting="desc";this._init(n,t,i)}t.prototype.insert=function(n,t){for(var u,i=this._queue.length,r=i;r--;)u=this._priorities[r],"desc"===this._sorting?t>u&&(i=r):t<u&&(i=r);this._insertAt(n,t,i)};t.prototype.remove=function(n){for(var t=this._queue.length;t--;)if(n===this._queue[t]){this._queue.splice(t,1);this._priorities.splice(t,1);break}};t.prototype.forEach=function(n){this._queue.forEach(n)};t.prototype.getElements=function(){return this._queue};t.prototype.getElementPriority=function(n){return this._priorities[n]};t.prototype.getPriorities=function(){return this._priorities};t.prototype.getElementsWithPriorities=function(){for(var t=[],n=0,i=this._queue.length;n<i;n++)t.push([this._queue[n],this._priorities[n]]);return t};t.prototype._init=function(n,t,i){if(n&&t){if(this._queue=[],this._priorities=[],n.length!==t.length)throw new Error("Arrays must have the same length");for(var r=0;r<n.length;r++)this.insert(n[r],t[r])}i&&(this._sorting=i)};t.prototype._insertAt=function(n,t,i){this._queue.length===i?(this._queue.push(n),this._priorities.push(t)):(this._queue.splice(i,0,n),this._priorities.splice(i,0,t))};n.exports&&(n.exports=t)}),wgt=fc(function(n){function t(n,t,i,r){this.epsilon=1;this.minPts=1;this.distance=this._euclideanDistance;this._reachability=[];this._processed=[];this._coreDistance=0;this._orderedList=[];this._init(n,t,i,r)}if(n.exports)var i=dlt;t.prototype.run=function(n,t,r,u){var f,o,s,e,h;for(this._init(n,t,r,u),f=0,o=this.dataset.length;f<o;f++)1!==this._processed[f]&&(this._processed[f]=1,this.clusters.push([f]),s=this.clusters.length-1,this._orderedList.push(f),e=new i(null,null,"asc"),h=this._regionQuery(f),void 0!==this._distanceToCore(f)&&(this._updateQueue(f,h,e),this._expandCluster(s,e)));return this.clusters};t.prototype.getReachabilityPlot=function(){for(var t,r,i=[],n=0,u=this._orderedList.length;n<u;n++)t=this._orderedList[n],r=this._reachability[t],i.push([t,r]);return i};t.prototype._init=function(n,t,i,r){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n;this.clusters=[];this._reachability=new Array(this.dataset.length);this._processed=new Array(this.dataset.length);this._coreDistance=0;this._orderedList=[]}t&&(this.epsilon=t);i&&(this.minPts=i);r&&(this.distance=r)};t.prototype._updateQueue=function(n,t,i){var r=this;this._coreDistance=this._distanceToCore(n);t.forEach(function(t){if(void 0===r._processed[t]){var f=r.distance(r.dataset[n],r.dataset[t]),u=Math.max(r._coreDistance,f);void 0===r._reachability[t]?(r._reachability[t]=u,i.insert(t,u)):u<r._reachability[t]&&(r._reachability[t]=u,i.remove(t),i.insert(t,u))}})};t.prototype._expandCluster=function(n,t){for(var i,f,u=t.getElements(),r=0,e=u.length;r<e;r++)i=u[r],void 0===this._processed[i]&&(f=this._regionQuery(i),this._processed[i]=1,this.clusters[n].push(i),this._orderedList.push(i),void 0!==this._distanceToCore(i)&&(this._updateQueue(i,f,t),this._expandCluster(n,t)))};t.prototype._distanceToCore=function(n){for(var i=this.epsilon,t=0;t<i;t++)if(this._regionQuery(n,t).length>=this.minPts)return t};t.prototype._regionQuery=function(n,t){t=t||this.epsilon;for(var r=[],i=0,u=this.dataset.length;i<u;i++)this.distance(this.dataset[n],this.dataset[i])<t&&r.push(i);return r};t.prototype._euclideanDistance=function(n,t){for(var r=0,i=Math.min(n.length,t.length);i--;)r+=(n[i]-t[i])*(n[i]-t[i]);return Math.sqrt(r)};n.exports&&(n.exports=t)}),bgt=fc(function(n){n.exports&&(n.exports={DBSCAN:ygt,KMEANS:pgt,OPTICS:wgt,PriorityQueue:dlt})}),glt=function(n,t,i){for(var f,e=n.length,u=0,r=0;r<e;r++)f=(n[r]||0)-(t[r]||0),u+=f*f;return i?Math.sqrt(u):u},kgt=glt,dgt=function(n,t,i){var r=Math.abs(n-t);return i?r:r*r},ggt=glt,nnt=function(n,t){for(var r,u,f={},i=[],e=t<<2,o=n.length,s=n[0].length>0;i.length<t&&e-->0;)r=n[Math.floor(Math.random()*o)],u=s?r.join("_"):""+r,f[u]||(f[u]=!0,i.push(r));if(i.length<t)throw new Error("Error initializating clusters");return i},tnt=function(n,t){var b=n[0].length?kgt:dgt,u=[],f=n.length,k=n[0].length>0,y=n[Math.floor(Math.random()*f)],s,h,v,c,r,e,w,l;for(k&&y.join("_"),u.push(y);u.length<t;){for(var a=[],d=u.length,p=0,i=[],o=0;o<f;o++){for(s=1/0,h=0;h<d;h++)v=b(n[o],u[h]),v<=s&&(s=v);a[o]=s}for(c=0;c<f;c++)p+=a[c];for(r=0;r<f;r++)i[r]={i:r,v:n[r],pr:a[r]/p,cs:0};for(i.sort(function(n,t){return n.pr-t.pr}),i[0].cs=i[0].pr,e=1;e<f;e++)i[e].cs=i[e-1].cs+i[e].pr;for(w=Math.random(),l=0;l<f-1&&i[l++].cs<w;);u.push(i[l-1].v)}return u};tat=function(n,t,i,r){var u=[],b=[],k=[],ot=[],f=!1,st=r||1e4,d=n.length,l=n[0].length,ut=l>0,g=[],ft,nt,h,e,o,tt,v,s,y,p,c,w;if(i)u="kmrand"==i?nnt(n,t):"kmpp"==i?tnt(n,t):i;else for(ft={};u.length<t;)nt=Math.floor(Math.random()*d),ft[nt]||(ft[nt]=!0,u.push(n[nt]));do{for(nat(t,0,g),h=0;h<d;h++){for(var ht=1/0,et=0,a=0;a<t;a++)(ot=ut?ggt(n[h],u[a]):Math.abs(n[h]-u[a]))<=ht&&(ht=ot,et=a);k[h]=et;g[et]++}for(e=[],o=(b=[],0);o<t;o++)e[o]=ut?nat(l,0,e[o]):0,b[o]=u[o];if(ut){for(tt=0;tt<t;tt++)u[tt]=[];for(v=0;v<d;v++)for(var lt=e[k[v]],at=n[v],it=0;it<l;it++)lt[it]+=at[it];for(f=!0,s=0;s<t;s++){for(var ct=u[s],vt=e[s],yt=b[s],pt=g[s],rt=0;rt<l;rt++)ct[rt]=vt[rt]/pt||0;if(f)for(y=0;y<l;y++)if(yt[y]!=ct[y]){f=!1;break}}}else{for(p=0;p<d;p++)e[k[p]]+=n[p];for(c=0;c<t;c++)u[c]=e[c]/g[c]||0;for(f=!0,w=0;w<t;w++)if(b[w]!=u[w]){f=!1;break}}f=f||--st<=0}while(!f);return{it:1e4-st,k:t,idxs:k,centroids:u}};ab={search:function(n,t,i,r){var f,u,h,c;n.cleanDirty();var l=(r=r||{}).heuristic||ab.heuristics.manhattan,a=r.closest||!1,e=new uat(function(n){return n.f}),o=t;for(t.h=l(t,i),e.push(t);e.size()>0;){if(f=e.pop(),f===i)return rat(f);f.closed=!0;for(var v=n.neighbors(f),s=0,y=v.length;s<y;++s)u=v[s],u.closed||u.isWall()||(h=f.g+u.getCost(f),c=u.visited,(!c||h<u.g)&&(u.visited=!0,u.parent=f,u.h=u.h||l(u,i),u.g=h,u.f=u.g+u.h,n.markDirty(u),a&&(u.h<o.h||u.h===o.h&&u.g<o.g)&&(o=u),c?e.rescoreElement(u):e.push(u)))}return a?rat(o):[]},heuristics:{manhattan:function(n,t){return Math.abs(t.x-n.x)+Math.abs(t.y-n.y)},diagonal:function(n,t){var u=Math.sqrt(2),i=Math.abs(t.x-n.x),r=Math.abs(t.y-n.y);return 1*(i+r)+(u-2)*Math.min(i,r)}},cleanNode:function(n){n.f=0;n.g=0;n.h=0;n.visited=!1;n.closed=!1;n.parent=null}};rp.prototype.init=function(){this.dirtyNodes=[];for(var n=0;n<this.nodes.length;n++)ab.cleanNode(this.nodes[n])};rp.prototype.cleanDirty=function(){for(var n=0;n<this.dirtyNodes.length;n++)ab.cleanNode(this.dirtyNodes[n]);this.dirtyNodes=[]};rp.prototype.markDirty=function(n){this.dirtyNodes.push(n)};rp.prototype.neighbors=function(n){var u=[],t=n.x,r=n.y,i=this.grid;return i[t-1]&&i[t-1][r]&&u.push(i[t-1][r]),i[t+1]&&i[t+1][r]&&u.push(i[t+1][r]),i[t]&&i[t][r-1]&&u.push(i[t][r-1]),i[t]&&i[t][r+1]&&u.push(i[t][r+1]),this.diagonal&&(i[t-1]&&i[t-1][r-1]&&u.push(i[t-1][r-1]),i[t+1]&&i[t+1][r-1]&&u.push(i[t+1][r-1]),i[t-1]&&i[t-1][r+1]&&u.push(i[t-1][r+1]),i[t+1]&&i[t+1][r+1]&&u.push(i[t+1][r+1])),u};rp.prototype.toString=function(){for(var t,r,n,u,f=[],e=this.grid,i=0,o=e.length;i<o;i++){for(t=[],n=0,u=(r=e[i]).length;n<u;n++)t.push(r[n].weight);f.push(t.join(" "))}return f.join("\n")};tg.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};tg.prototype.getCost=function(n){return n&&n.x!==this.x&&n.y!==this.y?1.41421*this.weight:this.weight};tg.prototype.isWall=function(){return 0===this.weight};uat.prototype={push:function(n){this.content.push(n);this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),n},remove:function(n){var t=this.content.indexOf(n),i=this.content.pop();t!==this.content.length-1&&(this.content[t]=i,this.scoreFunction(i)<this.scoreFunction(n)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var t,r,i=this.content[n];n>0;){if(t=(n+1>>1)-1,r=this.content[t],!(this.scoreFunction(i)<this.scoreFunction(r)))break;this.content[t]=i;this.content[n]=r;n=t}},bubbleUp:function(n){for(var s,h,u=this.content.length,f=this.content[n],e=this.scoreFunction(f);;){var o,i=n+1<<1,r=i-1,t=null;if(r<u&&(s=this.content[r],(o=this.scoreFunction(s))<e&&(t=r)),i<u&&(h=this.content[i],this.scoreFunction(h)<(null===t?e:o)&&(t=i)),null===t)break;this.content[n]=this.content[t];this.content[t]=f;n=t}}};ig.prototype={constructor:ig,insert:function(n,t){var i,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;i=n}else this._?(n=eat(this._),t.P=null,t.N=n,n.P=n.L=t,i=n):(t.P=t.N=null,this._=t,i=null);for(t.L=t.R=null,t.U=i,t.C=!0,n=t;i&&i.C;)i===(r=i.U).L?(u=r.R)&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.R&&(vb(this,i),i=(n=i).U),i.C=!1,r.C=!0,yb(this,r)):(u=r.L)&&u.C?(i.C=u.C=!1,r.C=!0,n=r):(n===i.L&&(yb(this,i),i=(n=i).U),i.C=!1,r.C=!0,vb(this,r)),i=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P);n.P&&(n.P.N=n.N);n.N=n.P=null;var t,r,e,i=n.U,f=n.L,u=n.R;if(r=f?u?eat(u):f:u,i?i.L===n?i.L=r:i.R=r:this._=r,f&&u?(e=r.C,r.C=n.C,r.L=f,f.U=r,r!==u?(i=r.U,r.U=n.U,n=r.R,i.L=n,r.R=u,u.U=r):(r.U=i,i=r,n=r.R)):(e=n.C,n=r),n&&(n.U=i),!e)if(n&&n.C)n.C=!1;else{do{if(n===this._)break;if(n===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,vb(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,yb(this,t),t=i.R);t.C=i.C;i.C=t.R.C=!1;vb(this,i);n=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,yb(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,vb(this,t),t=i.L);t.C=i.C;i.C=t.L.C=!1;yb(this,i);n=this._;break}t.C=!0;n=i;i=i.U}while(!n.C);n&&(n.C=!1)}}};drt=[];grt=[];lr=1e-6;cat=1e-12;tut.prototype={constructor:tut,polygons:function(){var n=this.edges;return this.cells.map(function(t){var i=t.halfedges.map(function(i){return oat(t,n[i])});return i.data=t.site.data,i})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(i,r){if(c=(h=i.halfedges).length)for(var h,c,e,o,l,a,s=i.site,v=-1,u=t[h[c-1]],f=u.left===s?u.right:u.left;++v<c;)e=f,f=(u=t[h[v]]).left===s?u.right:u.left,e&&f&&r<e.index&&r<f.index&&(l=e,a=f,((o=s)[0]-a[0])*(l[1]-o[1])-(o[0]-l[0])*(a[1]-o[1])<0)&&n.push([s.data,e.data,f.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,t,i){for(var o,r,u=this,f=u._found||0,c=u.cells.length;!(r=u.cells[f]);)if(++f>=c)return null;var s=n-r.site[0],h=t-r.site[1],e=s*s+h*h;do r=u.cells[o=f],f=null,r.halfedges.forEach(function(i){var s=u.edges[i],o=s.left;if(o!==r.site&&o||(o=s.right)){var h=n-o[0],c=t-o[1],l=h*h+c*c;l<e&&(e=l,f=o.index)}});while(null!==f);return u._found=o,null==i||e<=i*i?r.site:null}};tvt=Object.freeze({__proto__:null,toMercator:bat,toWgs84:kat});ivt=function(){for(var t,i,u=0,n=0,f=arguments.length;n<f;n++)u+=arguments[n].length;for(t=Array(u),i=0,n=0;n<f;n++)for(var e=arguments[n],r=0,o=e.length;r<o;r++,i++)t[i]=e[r];return t};svt=Object.freeze({__proto__:null,randomPosition:kb,randomPoint:rvt,randomPolygon:uvt,randomLineString:fvt});avt=Object.freeze({__proto__:null,getCluster:hvt,clusterEach:rut,clusterReduce:cvt,createBins:uut,applyFilter:fg,propertiesContainsFilter:fut,filterProperties:lvt});cl=function(n,t){this.next=null;this.key=n;this.data=t;this.left=null;this.right=null};
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */
eg=function(){function n(n){void 0===n&&(n=gnt);this._root=null;this._size=0;this._comparator=n}return n.prototype.insert=function(n,t){return this._size++,this._root=eut(n,t,this._root,this._comparator)},n.prototype.add=function(n,t){var i=new cl(n,t);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var f=this._comparator,r=oa(n,this._root,f),u=f(n,r.key);return 0===u?this._root=r:(u<0?(i.left=r.left,i.right=r,r.left=null):u>0&&(i.right=r.right,i.left=r,r.right=null),this._size++,this._root=i),this._root},n.prototype.remove=function(n){this._root=this._remove(n,this._root,this._comparator)},n.prototype._remove=function(n,t,i){var r;return null===t?null:0===i(n,(t=oa(n,t,i)).key)?(null===t.left?r=t.right:(r=oa(n,t.left,i)).right=t.right,this._size--,r):t},n.prototype.pop=function(){var n=this._root;if(n){for(;n.left;)n=n.left;return this._root=oa(n.key,this._root,this._comparator),this._root=this._remove(n.key,this._root,this._comparator),{key:n.key,data:n.data}}return null},n.prototype.findStatic=function(n){for(var i,t=this._root,r=this._comparator;t;){if(i=r(n,t.key),0===i)return t;t=i<0?t.left:t.right}return null},n.prototype.find=function(n){return this._root&&(this._root=oa(n,this._root,this._comparator),0!==this._comparator(n,this._root.key))?null:this._root},n.prototype.contains=function(n){for(var i,t=this._root,r=this._comparator;t;){if(i=r(n,t.key),0===i)return!0;t=i<0?t.left:t.right}return!1},n.prototype.forEach=function(n,t){for(var i=this._root,r=[],u=!1;!u;)null!==i?(r.push(i),i=i.left):0!==r.length?(i=r.pop(),n.call(t,i),i=i.right):u=!0;return this},n.prototype.range=function(n,t,i,r){for(var f=[],e=this._comparator,u=this._root;0!==f.length||u;)if(u)f.push(u),u=u.left;else{if(e((u=f.pop()).key,t)>0)break;if(e(u.key,n)>=0&&i.call(r,u))return this;u=u.right}return this},n.prototype.keys=function(){var n=[];return this.forEach(function(t){var i=t.key;return n.push(i)}),n},n.prototype.values=function(){var n=[];return this.forEach(function(t){var i=t.data;return n.push(i)}),n},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(n){if(void 0===n&&(n=this._root),n)for(;n.left;)n=n.left;return n},n.prototype.maxNode=function(n){if(void 0===n&&(n=this._root),n)for(;n.right;)n=n.right;return n},n.prototype.at=function(n){for(var t=this._root,r=!1,u=0,i=[];!r;)if(t)i.push(t),t=t.left;else if(i.length>0){if(t=i.pop(),u===n)return t;u++;t=t.right}else r=!0;return null},n.prototype.next=function(n){var t=this._root,i=null,u,r;if(n.right){for(i=n.right;i.left;)i=i.left;return i}for(u=this._comparator;t;){if(r=u(n.key,t.key),0===r)break;r<0?(i=t,t=t.left):t=t.right}return i},n.prototype.prev=function(n){var t=this._root,i=null,u,r;if(null!==n.left){for(i=n.left;i.right;)i=i.right;return i}for(u=this._comparator;t;){if(r=u(n.key,t.key),0===r)break;r<0?t=t.left:(i=t,t=t.right)}return i},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return function(n){for(var t=n,i=[],u=!1,f=new cl(null,null),r=f;!u;)t?(i.push(t),t=t.left):i.length>0?t=(t=r=r.next=i.pop()).right:u=!0;return r.next=null,f.next}(this._root)},n.prototype.load=function(n,t,i){var r,u,f;return void 0===t&&(t=[]),void 0===i&&(i=!1),r=n.length,u=this._comparator,(i&&cut(n,t,0,r-1,u),null===this._root)?(this._root=sut(n,t,0,r),this._size=r):(f=function(n,t,i){for(var e=new cl(null,null),f=e,r=n,u=t;null!==r&&null!==u;)i(r.key,u.key)<0?(f.next=r,r=r.next):(f.next=u,u=u.next),f=f.next;return null!==r?f.next=r:null!==u&&(f.next=u),e.next}(this.toList(),function(n,t){for(var u=new cl(null,null),r=u,i=0;i<n.length;i++)r=r.next=new cl(n[i],t[i]);return r.next=null,u.next}(n,t),u),r=this._size+r,this._root=hut({head:f},0,r)),this},n.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(n){void 0===n&&(n=function(n){return String(n.key)});var t=[];return out(this._root,"",!0,function(n){return t.push(n)},n),t.join("")},n.prototype.update=function(n,t,i){var r=this._comparator,e=vvt(n,this._root,r),u=e.left,f=e.right;r(n,t)<0?f=eut(t,i,f,r):u=eut(t,i,u,r);this._root=function(n,t,i){return null===t?n:(null===n||((t=oa(n.key,t,i)).left=n),t)}(u,f,r)},n.prototype.split=function(n){return vvt(n,this._root,this._comparator)},n}();var db=function(n,t){return n.ll.x<=t.x&&t.x<=n.ur.x&&n.ll.y<=t.y&&t.y<=n.ur.y},lut=function(n,t){if(t.ur.x<n.ll.x||n.ur.x<t.ll.x||t.ur.y<n.ll.y||n.ur.y<t.ll.y)return null;var i=n.ll.x<t.ll.x?t.ll.x:n.ll.x,r=n.ur.x<t.ur.x?n.ur.x:t.ur.x;return{ll:{x:i,y:n.ll.y<t.ll.y?t.ll.y:n.ll.y},ur:{x:r,y:n.ur.y<t.ur.y?n.ur.y:t.ur.y}}},sa=Number.EPSILON;void 0===sa&&(sa=Math.pow(2,-52));var nti=sa*sa,aut=function(n,t){if(-sa<n&&n<sa&&-sa<t&&t<sa)return 0;var i=n-t;return i*i<nti*n*t?0:n<t?-1:1},tti=function(){function n(){ds(this,n);this.reset()}return ge(n,[{key:"reset",value:function(){this.xRounder=new pvt;this.yRounder=new pvt}},{key:"round",value:function(n,t){return{x:this.xRounder.round(n),y:this.yRounder.round(t)}}}]),n}(),pvt=function(){function n(){ds(this,n);this.tree=new eg;this.round(0)}return ge(n,[{key:"round",value:function(n){var t=this.tree.add(n),r=this.tree.prev(t),i;return null!==r&&0===aut(t.key,r.key)?(this.tree.remove(n),r.key):(i=this.tree.next(t),null!==i&&0===aut(t.key,i.key)?(this.tree.remove(n),i.key):n)}}]),n}(),gb=new tti,nk=function(n,t){return n.x*t.y-n.y*t.x},wvt=function(n,t){return n.x*t.x+n.y*t.y},bvt=function(n,t,i){var r={x:t.x-n.x,y:t.y-n.y},u={x:i.x-n.x,y:i.y-n.y},f=nk(r,u);return aut(f,0)},og=function(n){return Math.sqrt(wvt(n,n))},iti=function(n,t,i){var r={x:t.x-n.x,y:t.y-n.y},u={x:i.x-n.x,y:i.y-n.y};return wvt(u,r)/og(u)/og(r)},kvt=function(n,t,i){return 0===t.y?null:{x:n.x+t.x/t.y*(i-n.y),y:i}},dvt=function(n,t,i){return 0===t.x?null:{x:i,y:n.y+t.y/t.x*(i-n.x)}},oc=function(){function n(t,i){ds(this,n);void 0===t.events?t.events=[this]:t.events.push(this);this.point=t;this.isLeft=i}return ge(n,null,[{key:"compare",value:function(t,i){var r=n.comparePoints(t.point,i.point);return 0!==r?r:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:sg.compare(t.segment,i.segment))}},{key:"comparePoints",value:function(n,t){return n.x<t.x?-1:n.x>t.x?1:n.y<t.y?-1:n.y>t.y?1:0}}]),ge(n,[{key:"link",value:function(n){var i;if(n.point===this.point)throw new Error("Tried to link already linked events");for(var r=n.point.events,t=0,u=r.length;t<u;t++)i=r[t],this.point.events.push(i),i.point=this.point;this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t,i,r,u=this.point.events.length,n=0;n<u;n++)if(t=this.point.events[n],void 0===t.segment.consumedBy)for(i=n+1;i<u;i++)r=this.point.events[i],void 0===r.consumedBy&&t.otherSE.point.events===r.otherSE.point.events&&t.segment.consume(r.segment)}},{key:"getAvailableLinkedEvents",value:function(){for(var n,i=[],t=0,r=this.point.events.length;t<r;t++)n=this.point.events[t],n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&i.push(n);return i}},{key:"getLeftmostComparator",value:function(n){var i=this,t=new Map,r=function(r){var u,f,e,o,s,h=r.otherSE;t.set(r,{sine:(u=i.point,f=n.point,e=h.point,o={x:f.x-u.x,y:f.y-u.y},s={x:e.x-u.x,y:e.y-u.y},nk(s,o)/og(s)/og(o)),cosine:iti(i.point,n.point,h.point)})};return function(n,i){t.has(n)||r(n);t.has(i)||r(i);var s=t.get(n),u=s.sine,f=s.cosine,h=t.get(i),e=h.sine,o=h.cosine;return u>=0&&e>=0?f<o?1:f>o?-1:0:u<0&&e<0?f<o?-1:f>o?1:0:e<u?-1:e>u?1:0}}}]),n}(),rti=0,sg=function(){function n(t,i,r,u){ds(this,n);this.id=++rti;this.leftSE=t;t.segment=this;t.otherSE=i;this.rightSE=i;i.segment=this;i.otherSE=t;this.rings=r;this.windings=u}return ge(n,null,[{key:"compare",value:function(n,t){var s=n.leftSE.point.x,h=t.leftSE.point.x,u=n.rightSE.point.x,f=t.rightSE.point.x,c,l,a,v,y,p;if(f<s)return 1;if(u<h)return-1;var i=n.leftSE.point.y,r=t.leftSE.point.y,e=n.rightSE.point.y,o=t.rightSE.point.y;if(s<h)return r<i&&r<e?1:r>i&&r>e?-1:(c=n.comparePoint(t.leftSE.point),c<0)?1:c>0?-1:(l=t.comparePoint(n.rightSE.point),0!==l?l:-1);if(s>h)return i<r&&i<o?-1:i>r&&i>o?1:(a=t.comparePoint(n.leftSE.point),0!==a)?a:(v=n.comparePoint(t.rightSE.point),v<0?1:v>0?-1:1);if(i<r)return-1;if(i>r)return 1;if(u<f&&(y=t.comparePoint(n.rightSE.point),0!==y))return y;if(u>f){if(p=n.comparePoint(t.rightSE.point),p<0)return 1;if(p>0)return-1}if(u!==f){var w=e-i,b=u-s,k=o-r,d=f-h;if(w>b&&k<d)return 1;if(w<b&&k>d)return-1}return u>f?1:u<f||e<o?-1:e>o?1:n.id<t.id?-1:n.id>t.id?1:0}}]),ge(n,[{key:"replaceRightSE",value:function(n){this.rightSE=n;this.rightSE.segment=this;this.rightSE.otherSE=this.leftSE;this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var n=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<t?n:t},ur:{x:this.rightSE.point.x,y:n>t?n:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y}},{key:"comparePoint",value:function(n){var u,f,e,r;if(this.isAnEndpoint(n))return 0;var t=this.leftSE.point,o=this.rightSE.point,i=this.vector();return t.x===o.x?n.x===t.x?0:n.x<t.x?1:-1:(u=(n.y-t.y)/i.y,f=t.x+u*i.x,n.x===f)?0:(e=(n.x-t.x)/i.x,r=t.y+e*i.y,n.y===r?0:n.y<r?-1:1)}},{key:"getIntersection",value:function(n){var s=this.bbox(),h=n.bbox(),c=lut(s,h),o;if(null===c)return null;var t=this.leftSE.point,i=this.rightSE.point,r=n.leftSE.point,u=n.rightSE.point,l=db(s,r)&&0===this.comparePoint(r),a=db(h,t)&&0===n.comparePoint(t),f=db(s,u)&&0===this.comparePoint(u),e=db(h,i)&&0===n.comparePoint(i);return a&&l?e&&!f?i:!e&&f?u:null:a?f&&t.x===u.x&&t.y===u.y?null:t:l?e&&i.x===r.x&&i.y===r.y?null:r:e&&f?null:e?i:f?u:(o=function(n,t,i,r){var u;if(0===t.x)return dvt(i,r,n.x);if(0===r.x)return dvt(n,t,i.x);if(0===t.y)return kvt(i,r,n.y);if(0===r.y)return kvt(n,t,i.y);if(u=nk(t,r),0==u)return null;var f={x:i.x-n.x,y:i.y-n.y},e=nk(f,t)/u,o=nk(f,r)/u;return{x:(n.x+o*t.x+(i.x+e*r.x))/2,y:(n.y+o*t.y+(i.y+e*r.y))/2}}(t,this.vector(),r,n.vector()),null===o?null:db(c,o)?gb.round(o.x,o.y):null)}},{key:"split",value:function(t){var r=[],e=void 0!==t.events,u=new oc(t,!0),f=new oc(t,!1),o=this.rightSE,i;return this.replaceRightSE(f),r.push(f),r.push(u),i=new n(u,o,this.rings.slice(),this.windings.slice()),oc.comparePoints(i.leftSE.point,i.rightSE.point)>0&&i.swapEvents(),oc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),e&&(u.checkForConsuming(),f.checkForConsuming()),r}},{key:"swapEvents",value:function(){var i=this.rightSE,n,t;for(this.rightSE=this.leftSE,this.leftSE=i,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1,n=0,t=this.windings.length;n<t;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var f,e,o,u,s,r=this,i=t;r.consumedBy;)r=r.consumedBy;for(;i.consumedBy;)i=i.consumedBy;if(f=n.compare(r,i),0!==f){for(f>0&&(e=r,r=i,i=e),r.prev===i&&(o=r,r=i,i=o),u=0,s=i.rings.length;u<s;u++){var h=i.rings[u],c=i.windings[u],l=r.rings.indexOf(h);-1===l?(r.rings.push(h),r.windings.push(c)):r.windings[l]+=c}i.rings=null;i.windings=null;i.consumedBy=r;i.leftSE.consumedBy=r.leftSE;i.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){var o,f,t,c,e,w,l;if(void 0!==this._afterState)return this._afterState;o=this.beforeState();this._afterState={rings:o.rings.slice(0),windings:o.windings.slice(0),multiPolys:[]};for(var i=this._afterState.rings,s=this._afterState.windings,a=this._afterState.multiPolys,r=0,b=this.rings.length;r<b;r++){var v=this.rings[r],y=this.windings[r],p=i.indexOf(v);-1===p?(i.push(v),s.push(y)):s[p]+=y}for(var n=[],h=[],u=0,k=i.length;u<k;u++)0!==s[u]&&(f=i[u],t=f.poly,-1===h.indexOf(t)&&(f.isExterior?n.push(t):(-1===h.indexOf(t)&&h.push(t),c=n.indexOf(f.poly),-1!==c&&n.splice(c,1))));for(e=0,w=n.length;e<w;e++)l=n[e].multiPoly,-1===a.indexOf(l)&&a.push(l);return this._afterState}},{key:"isInResult",value:function(){var n,t,f,e,r,i,o,u;if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;n=this.beforeState().multiPolys;t=this.afterState().multiPolys;switch(yh.type){case"union":f=0===n.length;e=0===t.length;this._isInResult=f!==e;break;case"intersection":n.length<t.length?(r=n.length,i=t.length):(r=t.length,i=n.length);this._isInResult=i===yh.numMultiPolys&&r<i;break;case"xor":o=Math.abs(n.length-t.length);this._isInResult=o%2==1;break;case"difference":u=function(n){return 1===n.length&&n[0].isSubject};this._isInResult=u(n)!==u(t);break;default:throw new Error("Unrecognized operation type found ".concat(yh.type));}return this._isInResult}}],[{key:"fromRing",value:function(t,i,r){var u,f,e,o=oc.comparePoints(t,i);if(o<0)u=t,f=i,e=1;else{if(!(o>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));u=i;f=t;e=-1}return new n(new oc(u,!0),new oc(f,!1),[r],[e])}}]),n}(),gvt=function(){function n(t,i,r){var f,u;if(ds(this,n),!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=i,this.isExterior=r,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");f=gb.round(t[0][0],t[0][1]);this.bbox={ll:{x:f.x,y:f.y},ur:{x:f.x,y:f.y}};for(var e=f,o=1,s=t.length;o<s;o++){if("number"!=typeof t[o][0]||"number"!=typeof t[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");u=gb.round(t[o][0],t[o][1]);u.x===e.x&&u.y===e.y||(this.segments.push(sg.fromRing(e,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),e=u)}f.x===e.x&&f.y===e.y||this.segments.push(sg.fromRing(e,f,this))}return ge(n,[{key:"getSweepEvents",value:function(){for(var i,n=[],t=0,r=this.segments.length;t<r;t++)i=this.segments[t],n.push(i.leftSE),n.push(i.rightSE);return n}}]),n}(),uti=function(){function n(t,i){var u,f,r;if(ds(this,n),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");for(this.exteriorRing=new gvt(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[],u=1,f=t.length;u<f;u++)r=new gvt(t[u],this,!1),r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r);this.multiPoly=i}return ge(n,[{key:"getSweepEvents",value:function(){for(var i=this.exteriorRing.getSweepEvents(),n=0,u=this.interiorRings.length;n<u;n++)for(var r=this.interiorRings[n].getSweepEvents(),t=0,f=r.length;t<f;t++)i.push(r[t]);return i}}]),n}(),nyt=function(){function n(t,i){var u,f,r;if(ds(this,n),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(n){}for(this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}},u=0,f=t.length;u<f;u++)r=new uti(t[u],this),r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r);this.isSubject=i}return ge(n,[{key:"getSweepEvents",value:function(){for(var i=[],n=0,u=this.polys.length;n<u;n++)for(var r=this.polys[n].getSweepEvents(),t=0,f=r.length;t<f;t++)i.push(r[t]);return i}}]),n}(),fti=function(){function n(t){ds(this,n);this.events=t;for(var i=0,r=t.length;i<r;i++)t[i].segment.ringOut=this;this.poly=null}return ge(n,null,[{key:"factory",value:function(t){for(var u,f,a,v,w,b,s,h=[],c=0,k=t.length;c<k;c++)if(u=t[c],u.isInResult()&&!u.ringOut){for(var p=null,i=u.leftSE,l=u.rightSE,r=[i],d=i.point,e=[];p=i,i=l,r.push(i),i.point!==d;)for(;;){if(f=i.getAvailableLinkedEvents(),0===f.length){a=r[0].point;v=r[r.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(a.x,",")+" ".concat(a.y,"]. Last matching segment found ends at")+" [".concat(v.x,", ").concat(v.y,"]."));}if(1===f.length){l=f[0].otherSE;break}for(var y=null,o=0,g=e.length;o<g;o++)if(e[o].point===i.point){y=o;break}if(null===y){e.push({index:r.length,point:i.point});w=i.getLeftmostComparator(p);l=f.sort(w)[0].otherSE;break}b=e.splice(y)[0];s=r.splice(b.index);s.unshift(s[0].otherSE);h.push(new n(s.reverse()))}h.push(new n(r))}return h}}]),ge(n,[{key:"getGeom",value:function(){for(var r,f,e,o,t=this.events[0].point,n=[t],i=1,h=this.events.length-1;i<h;i++)r=this.events[i].point,f=this.events[i+1].point,0!==bvt(r,t,f)&&(n.push(r),t=r);if(1===n.length)return null;e=n[0];o=n[1];0===bvt(e,t,o)&&n.shift();n.push(n[0]);for(var c=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,s=[],u=l;u!=a;u+=c)s.push([n[u].x,n[u].y]);return s}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var n=this.enclosingRing();this._isExteriorRing=!n||!n.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var u,n,t,i=this.events[0],r=1,f=this.events.length;r<f;r++)u=this.events[r],oc.compare(i,u)>0&&(i=u);for(n=i.segment.prevInResult(),t=n?n.prevInResult():null;;){if(!n)return null;if(!t)return n.ringOut;if(t.ringOut!==n.ringOut)return t.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=t.prevInResult();t=n?n.prevInResult():null}}}]),n}(),tyt=function(){function n(t){ds(this,n);this.exteriorRing=t;t.poly=this;this.interiorRings=[]}return ge(n,[{key:"addInterior",value:function(n){this.interiorRings.push(n);n.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()],n,r,i;if(null===t[0])return null;for(n=0,r=this.interiorRings.length;n<r;n++)i=this.interiorRings[n].getGeom(),null!==i&&t.push(i);return t}}]),n}(),eti=function(){function n(t){ds(this,n);this.rings=t;this.polys=this._composePolys(t)}return ge(n,[{key:"getGeom",value:function(){for(var t,i=[],n=0,r=this.polys.length;n<r;n++)t=this.polys[n].getGeom(),null!==t&&i.push(t);return i}},{key:"_composePolys",value:function(n){for(var t,i,r=[],u=0,f=n.length;u<f;u++)t=n[u],t.poly||(t.isExteriorRing()?r.push(new tyt(t)):(i=t.enclosingRing(),i.poly||r.push(new tyt(i)),i.poly.addInterior(t)));return r}}]),n}(),oti=function(){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sg.compare;ds(this,n);this.queue=t;this.tree=new eg(i);this.segments=[]}return ge(n,[{key:"process",value:function(n){var t=n.segment,u=[],c,f,o,e,s,p,h;if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(t),u;if(c=n.isLeft?this.tree.insert(t):this.tree.find(t),!c)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=c,a=c,i=void 0,r=void 0;void 0===i;)null===(l=this.tree.prev(l))?i=null:void 0===l.key.consumedBy&&(i=l.key);for(;void 0===r;)null===(a=this.tree.next(a))?r=null:void 0===a.key.consumedBy&&(r=a.key);if(n.isLeft){if(f=null,i&&(o=i.getIntersection(t),null!==o&&(t.isAnEndpoint(o)||(f=o),!i.isAnEndpoint(o))))for(var d=this._splitSafely(i,o),v=0,rt=d.length;v<rt;v++)u.push(d[v]);if(e=null,r&&(s=r.getIntersection(t),null!==s&&(t.isAnEndpoint(s)||(e=s),!r.isAnEndpoint(s))))for(var g=this._splitSafely(r,s),y=0,ut=g.length;y<ut;y++)u.push(g[y]);if(null!==f||null!==e){p=null;p=null===f?e:null===e?f:oc.comparePoints(f,e)<=0?f:e;this.queue.remove(t.rightSE);u.push(t.rightSE);for(var nt=t.split(p),w=0,ft=nt.length;w<ft;w++)u.push(nt[w])}u.length>0?(this.tree.remove(t),u.push(n)):(this.segments.push(t),t.prev=i)}else{if(i&&r&&(h=i.getIntersection(r),null!==h)){if(!i.isAnEndpoint(h))for(var tt=this._splitSafely(i,h),b=0,et=tt.length;b<et;b++)u.push(tt[b]);if(!r.isAnEndpoint(h))for(var it=this._splitSafely(r,h),k=0,ot=it.length;k<ot;k++)u.push(it[k])}this.tree.remove(t)}return u}},{key:"_splitSafely",value:function(n,t){var i,r;return this.tree.remove(n),i=n.rightSE,this.queue.remove(i),r=n.split(t),r.push(i),void 0===n.consumedBy&&this.tree.insert(n),r}}]),n}(),iyt="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,sti="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,yh=new(function(){function n(){ds(this,n)}return ge(n,[{key:"run",value:function(n,t,i){var b,o,s,k,f,e,w,tt;yh.type=n;gb.reset();for(var r=[new nyt(t,!0)],h=0,it=i.length;h<it;h++)r.push(new nyt(i[h],!1));if(yh.numMultiPolys=r.length,"difference"===yh.type)for(b=r[0],o=1;o<r.length;)null!==lut(r[o].bbox,b.bbox)?o++:r.splice(o,1);if("intersection"===yh.type)for(s=0,k=r.length;s<k;s++)for(var rt=r[s],c=s+1,ut=r.length;c<ut;c++)if(null===lut(rt.bbox,r[c].bbox))return[];for(var u=new eg(oc.compare),l=0,ft=r.length;l<ft;l++)for(var d=r[l].getSweepEvents(),a=0,et=d.length;a<et;a++)if(u.insert(d[a]),u.size>iyt)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var v=new oti(u),g=u.size,y=u.pop();y;){if(f=y.key,u.size===g){e=f.segment;throw new Error("Unable to pop() ".concat(f.isLeft?"left":"right"," SweepEvent ")+"[".concat(f.point.x,", ").concat(f.point.y,"] from segment #").concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] from queue. ")+"Please file a bug report.");}if(u.size>iyt)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(v.segments.length>sti)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var nt=v.process(f),p=0,ot=nt.length;p<ot;p++)w=nt[p],void 0===w.consumedBy&&u.insert(w);g=u.size;y=u.pop()}return gb.reset(),tt=fti.factory(v.segments),new eti(tt).getGeom()}}]),n}()),ll={union:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return yh.run("union",n,r)},intersection:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return yh.run("intersection",n,r)},xor:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return yh.run("xor",n,r)},difference:function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return yh.run("difference",n,r)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(n){var r;if(null==this)throw new TypeError(this+" is not an object");var u=Object(this),i=Math.max(Math.min(u.length,9007199254740991),0)||0,t=1 in arguments&&parseInt(Number(arguments[1]),10)||0;for(t=t<0?Math.max(i+t,0):Math.min(t,i),r=(2 in arguments)&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i,r=r<0?Math.max(i+arguments[2],0):Math.min(r,i);t<r;)u[t]=n,++t;return u},writable:!0});Number.isFinite=Number.isFinite||function(n){return"number"==typeof n&&isFinite(n)};Number.isInteger=Number.isInteger||function(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(n){return n!=n};Math.trunc=Math.trunc||function(n){return n<0?Math.ceil(n):Math.floor(n)};ha=function(){};ha.prototype.interfaces_=function(){return[]};ha.prototype.getClass=function(){return ha};ha.prototype.equalsWithTolerance=function(n,t,i){return Math.abs(n-t)<=i};var ar=function(n){function t(t){n.call(this,t);this.name="IllegalArgumentException";this.message=t;this.stack=(new n).stack}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Error),nt=function(){},ryt={MAX_VALUE:{configurable:!0}};nt.isNaN=function(n){return Number.isNaN(n)};nt.doubleToLongBits=function(n){return n};nt.longBitsToDouble=function(n){return n};nt.isInfinite=function(n){return!Number.isFinite(n)};ryt.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(nt,ryt);var ho=function(){},hg=function(){},op=function(){};i=function n(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=n.NULL_ORDINATE;else if(1===arguments.length){var t=arguments[0];this.x=t.x;this.y=t.y;this.z=t.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=n.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])};ca={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};i.prototype.setOrdinate=function(n,t){switch(n){case i.X:this.x=t;break;case i.Y:this.y=t;break;case i.Z:this.z=t;break;default:throw new ar("Invalid ordinate index: "+n);}};i.prototype.equals2D=function(){var n,t,i;return 1===arguments.length?(n=arguments[0],this.x===n.x&&this.y===n.y):2===arguments.length?(t=arguments[0],i=arguments[1],!!ha.equalsWithTolerance(this.x,t.x,i)&&!!ha.equalsWithTolerance(this.y,t.y,i)):void 0};i.prototype.getOrdinate=function(n){switch(n){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.z}throw new ar("Invalid ordinate index: "+n);};i.prototype.equals3D=function(n){return this.x===n.x&&this.y===n.y&&(this.z===n.z||nt.isNaN(this.z))&&nt.isNaN(n.z)};i.prototype.equals=function(n){return n instanceof i&&this.equals2D(n)};i.prototype.equalInZ=function(n,t){return ha.equalsWithTolerance(this.z,n.z,t)};i.prototype.compareTo=function(n){var t=n;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0};i.prototype.clone=function(){};i.prototype.copy=function(){return new i(this)};i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};i.prototype.distance3D=function(n){var t=this.x-n.x,i=this.y-n.y,r=this.z-n.z;return Math.sqrt(t*t+i*i+r*r)};i.prototype.distance=function(n){var t=this.x-n.x,i=this.y-n.y;return Math.sqrt(t*t+i*i)};i.prototype.hashCode=function(){var n=17;return 37*(n=37*n+i.hashCode(this.x))+i.hashCode(this.y)};i.prototype.setCoordinate=function(n){this.x=n.x;this.y=n.y;this.z=n.z};i.prototype.interfaces_=function(){return[ho,hg,co]};i.prototype.getClass=function(){return i};i.hashCode=function(){if(1===arguments.length){var t=arguments[0],n=nt.doubleToLongBits(t);return Math.trunc((n^n)>>>32)}};ca.DimensionalComparator.get=function(){return sc};ca.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800};ca.NULL_ORDINATE.get=function(){return nt.NaN};ca.X.get=function(){return 0};ca.Y.get=function(){return 1};ca.Z.get=function(){return 2};Object.defineProperties(i,ca);sc=function(){if((this._dimensionsToTest=2,0!==arguments.length)&&1===arguments.length){var n=arguments[0];if(2!==n&&3!==n)throw new ar("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}};sc.prototype.compare=function(n,t){var i=n,r=t,f=sc.compare(i.x,r.x),u;return 0!==f?f:(u=sc.compare(i.y,r.y),0!==u?u:this._dimensionsToTest<=2?0:sc.compare(i.z,r.z))};sc.prototype.interfaces_=function(){return[op]};sc.prototype.getClass=function(){return sc};sc.compare=function(n,t){return n<t?-1:n>t?1:nt.isNaN(n)?nt.isNaN(t)?0:-1:nt.isNaN(t)?1:0};wv=function(){};wv.prototype.create=function(){};wv.prototype.interfaces_=function(){return[]};wv.prototype.getClass=function(){return wv};r=function(){};sp={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};r.prototype.interfaces_=function(){return[]};r.prototype.getClass=function(){return r};r.toLocationSymbol=function(n){switch(n){case r.EXTERIOR:return"e";case r.BOUNDARY:return"b";case r.INTERIOR:return"i";case r.NONE:return"-"}throw new ar("Unknown location value: "+n);};sp.INTERIOR.get=function(){return 0};sp.BOUNDARY.get=function(){return 1};sp.EXTERIOR.get=function(){return 2};sp.NONE.get=function(){return-1};Object.defineProperties(r,sp);var w=function(n,t){return n.interfaces_&&n.interfaces_().indexOf(t)>-1},no=function(){},uyt={LOG_10:{configurable:!0}};no.prototype.interfaces_=function(){return[]};no.prototype.getClass=function(){return no};no.log10=function(n){var t=Math.log(n);return nt.isInfinite(t)||nt.isNaN(t)?t:t/no.LOG_10};no.min=function(n,t,i,r){var u=n;return t<u&&(u=t),i<u&&(u=i),r<u&&(u=r),u};no.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2];return n<i?i:n>r?r:n}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var t=arguments[0],u=arguments[1],f=arguments[2];return t<u?u:t>f?f:t}};no.wrap=function(n,t){return n<0?t- -n%t:n%t};no.max=function(){if(3===arguments.length){var o=arguments[0],i=arguments[1],r=arguments[2],t=o;return i>t&&(t=i),r>t&&(t=r),t}if(4===arguments.length){var s=arguments[0],u=arguments[1],f=arguments[2],e=arguments[3],n=s;return u>n&&(n=u),f>n&&(n=f),e>n&&(n=e),n}};no.average=function(n,t){return(n+t)/2};uyt.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(no,uyt);us=function(n){this.str=n};us.prototype.append=function(n){this.str+=n};us.prototype.setCharAt=function(n,t){this.str=this.str.substr(0,n)+t+this.str.substr(n+1)};us.prototype.toString=function(){return this.str};fs=function(n){this.value=n};fs.prototype.intValue=function(){return this.value};fs.prototype.compareTo=function(n){return this.value<n?-1:this.value>n?1:0};fs.isNaN=function(n){return Number.isNaN(n)};hp=function(){};hp.isWhitespace=function(n){return n<=32&&n>=0||127===n};hp.toUpperCase=function(n){return n.toUpperCase()};u=function n(){var t,i,r,u,f;(this._hi=0,this._lo=0,0===arguments.length)?this.init(0):1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this.init(t)):arguments[0]instanceof n?(i=arguments[0],this.init(i)):"string"==typeof arguments[0]&&(r=arguments[0],n.call(this,n.parse(r))):2===arguments.length&&(u=arguments[0],f=arguments[1],this.init(u,f))};lo={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};u.prototype.le=function(n){return(this._hi<n._hi||this._hi===n._hi)&&this._lo<=n._lo};u.prototype.extractSignificantDigits=function(n,t){var i=this.abs(),r=u.magnitude(i._hi),v=u.TEN.pow(r),f,h,o,c,l;(i=i.divide(v)).gt(u.TEN)?(i=i.divide(u.TEN),r+=1):i.lt(u.ONE)&&(i=i.multiply(u.TEN),r-=1);for(var y=r+1,s=new us,a=u.MAX_PRINT_DIGITS-1,e=0;e<=a;e++){if(n&&e===y&&s.append("."),f=Math.trunc(i._hi),f<0)break;if(h=!1,o=0,f>9?(h=!0,o="9"):o="0"+f,s.append(o),i=i.subtract(u.valueOf(f)).multiply(u.TEN),h&&i.selfAdd(u.TEN),c=!0,l=u.magnitude(i._hi),l<0&&Math.abs(l)>=a-e&&(c=!1),!c)break}return t[0]=r,s.toString()};u.prototype.sqr=function(){return this.multiply(this)};u.prototype.doubleValue=function(){return this._hi+this._lo};u.prototype.subtract=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],this.add(n.negate())):"number"==typeof arguments[0]?(t=arguments[0],this.add(-t)):void 0};u.prototype.equals=function(){if(1===arguments.length){var n=arguments[0];return this._hi===n._hi&&this._lo===n._lo}};u.prototype.isZero=function(){return 0===this._hi&&0===this._lo};u.prototype.selfSubtract=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],this.isNaN()?this:this.selfAdd(-n._hi,-n._lo)):"number"==typeof arguments[0]?(t=arguments[0],this.isNaN()?this:this.selfAdd(-t,0)):void 0};u.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};u.prototype.min=function(n){return this.le(n)?this:n};u.prototype.selfDivide=function(){var o,s;if(1===arguments.length){if(arguments[0]instanceof u)return o=arguments[0],this.selfDivide(o._hi,o._lo);if("number"==typeof arguments[0])return s=arguments[0],this.selfDivide(s,0)}else if(2===arguments.length){var i=arguments[0],a=arguments[1],r=null,h=null,f=null,c=null,n=null,e=null,l=null,t=null;return n=this._hi/i,t=(r=(e=u.SPLIT*n)-(r=e-n))*(f=(t=u.SPLIT*i)-(f=t-i))-(l=n*i)+r*(c=i-f)+(h=n-r)*f+h*c,t=n+(e=(this._hi-l-t+this._lo-n*a)/i),this._hi=t,this._lo=n-t+e,this}};u.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};u.prototype.divide=function(){var l,a,s;if(arguments[0]instanceof u){var n=arguments[0],r=null,o=null,f=null,h=null,t=null,e=null,c=null,i=null;return o=(t=this._hi/n._hi)-(r=(e=u.SPLIT*t)-(r=e-t)),i=r*(f=(i=u.SPLIT*n._hi)-(f=i-n._hi))-(c=t*n._hi)+r*(h=n._hi-f)+o*f+o*h,l=i=t+(e=(this._hi-c-i+this._lo-t*n._lo)/n._hi),a=t-i+e,new u(l,a)}if("number"==typeof arguments[0])return s=arguments[0],nt.isNaN(s)?u.createNaN():u.copy(this).selfDivide(s,0)};u.prototype.ge=function(n){return(this._hi>n._hi||this._hi===n._hi)&&this._lo>=n._lo};u.prototype.pow=function(n){if(0===n)return u.valueOf(1);var t=new u(this),i=u.valueOf(1),r=Math.abs(n);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(t),(r/=2)>0&&(t=t.sqr());else i=t;return n<0?i.reciprocal():i};u.prototype.ceil=function(){if(this.isNaN())return u.NaN;var n=Math.ceil(this._hi),t=0;return n===this._hi&&(t=Math.ceil(this._lo)),new u(n,t)};u.prototype.compareTo=function(n){var t=n;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0};u.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()};u.prototype.setValue=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],this.init(n),this):"number"==typeof arguments[0]?(t=arguments[0],this.init(t),this):void 0};u.prototype.max=function(n){return this.ge(n)?this:n};u.prototype.sqrt=function(){if(this.isZero())return u.valueOf(0);if(this.isNegative())return u.NaN;var n=1/Math.sqrt(this._hi),i=this._hi*n,t=u.valueOf(i),r=this.subtract(t.sqr())._hi*.5*n;return t.add(r)};u.prototype.selfAdd=function(){var f,a,d;if(1===arguments.length){if(arguments[0]instanceof u)return f=arguments[0],this.selfAdd(f._hi,f._lo);if("number"==typeof arguments[0]){var v=arguments[0],e=null,o=null,i=null,s=null,y=null,p=null;return s=(i=this._hi+v)-(y=i-this._hi),o=(p=(s=v-y+(this._hi-s))+this._lo)+(i-(e=i+p)),this._hi=e+o,this._lo=o+(e-this._hi),this}}else if(2===arguments.length){var w=arguments[0],b=arguments[1],h=null,r=null,c=null,t=null,l=null,n=null,k=null;return t=this._hi+w,r=this._lo+b,l=t-(n=t-this._hi),c=r-(k=r-this._lo),a=(h=t+(n=(l=w-n+(this._hi-l))+r))+(n=(c=b-k+(this._lo-c))+(n+(t-h))),d=n+(h-a),this._hi=a,this._lo=d,this}};u.prototype.selfMultiply=function(){var e,h,s,l;if(1===arguments.length){if(arguments[0]instanceof u)return e=arguments[0],this.selfMultiply(e._hi,e._lo);if("number"==typeof arguments[0])return h=arguments[0],this.selfMultiply(h,0)}else if(2===arguments.length){var t=arguments[0],a=arguments[1],n=null,o=null,i=null,c=null,r=null,f=null;return n=(r=u.SPLIT*this._hi)-this._hi,f=u.SPLIT*t,n=r-n,o=this._hi-n,i=f-t,s=(r=this._hi*t)+(f=n*(i=f-i)-r+n*(c=t-i)+o*i+o*c+(this._hi*a+this._lo*t)),l=f+(n=r-s),this._hi=s,this._lo=l,this}};u.prototype.selfSqr=function(){return this.selfMultiply(this)};u.prototype.floor=function(){if(this.isNaN())return u.NaN;var n=Math.floor(this._hi),t=0;return n===this._hi&&(t=Math.floor(this._lo)),new u(n,t)};u.prototype.negate=function(){return this.isNaN()?this:new u(-this._hi,-this._lo)};u.prototype.clone=function(){};u.prototype.multiply=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],n.isNaN()?u.createNaN():u.copy(this).selfMultiply(n)):"number"==typeof arguments[0]?(t=arguments[0],nt.isNaN(t)?u.createNaN():u.copy(this).selfMultiply(t,0)):void 0};u.prototype.isNaN=function(){return nt.isNaN(this._hi)};u.prototype.intValue=function(){return Math.trunc(this._hi)};u.prototype.toString=function(){var n=u.magnitude(this._hi);return n>=-3&&n<=20?this.toStandardNotation():this.toSciNotation()};u.prototype.toStandardNotation=function(){var r=this.getSpecialNumberString(),e;if(null!==r)return r;var f=new Array(1).fill(null),n=this.extractSignificantDigits(!0,f),i=f[0]+1,t=n;return"."===n.charAt(0)?t="0"+n:i<0?t="0."+u.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(e=i-n.length,t=n+u.stringOfChar("0",e)+".0"),this.isNegative()?"-"+t:t};u.prototype.reciprocal=function(){var f,s,n,h,i=null,t=null,r=null,e=null,o;return f=(n=1/this._hi)-(i=(r=u.SPLIT*n)-(i=r-n)),t=(e=u.SPLIT*this._hi)-this._hi,o=n+(r=(1-(h=n*this._hi)-(e=i*(t=e-t)-h+i*(s=this._hi-t)+f*t+f*s)-n*this._lo)/this._hi),new u(o,n-o+r)};u.prototype.toSciNotation=function(){var t,i,r;if(this.isZero())return u.SCI_NOT_ZERO;if(t=this.getSpecialNumberString(),null!==t)return t;var f=new Array(1).fill(null),n=this.extractSignificantDigits(!1,f),e=u.SCI_NOT_EXPONENT_CHAR+f[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);return i="",n.length>1&&(i=n.substring(1)),r=n.charAt(0)+"."+i,this.isNegative()?"-"+r+e:r+e};u.prototype.abs=function(){return this.isNaN()?u.NaN:this.isNegative()?this.negate():new u(this)};u.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0};u.prototype.lt=function(n){return(this._hi<n._hi||this._hi===n._hi)&&this._lo<n._lo};u.prototype.add=function(){var n,t;return arguments[0]instanceof u?(n=arguments[0],u.copy(this).selfAdd(n)):"number"==typeof arguments[0]?(t=arguments[0],u.copy(this).selfAdd(t)):void 0};u.prototype.init=function(){var t,n,i,r;1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this._hi=t,this._lo=0):arguments[0]instanceof u&&(n=arguments[0],this._hi=n._hi,this._lo=n._lo):2===arguments.length&&(i=arguments[0],r=arguments[1],this._hi=i,this._lo=r)};u.prototype.gt=function(n){return(this._hi>n._hi||this._hi===n._hi)&&this._lo>n._lo};u.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0};u.prototype.trunc=function(){return this.isNaN()?u.NaN:this.isPositive()?this.floor():this.ceil()};u.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};u.prototype.interfaces_=function(){return[co,ho,hg]};u.prototype.getClass=function(){return u};u.sqr=function(n){return u.valueOf(n).selfMultiply(n)};u.valueOf=function(){var n,t;return"string"==typeof arguments[0]?(n=arguments[0],u.parse(n)):"number"==typeof arguments[0]?(t=arguments[0],new u(t)):void 0};u.sqrt=function(n){return u.valueOf(n).sqrt()};u.parse=function(n){for(var h,o,i,y,l,f,e,p,w,t=0,s=n.length;hp.isWhitespace(n.charAt(t));)t++;h=!1;t<s&&(o=n.charAt(t),"-"!==o&&"+"!==o||(t++,"-"===o&&(h=!0)));for(var r=new u,c=0,a=0,v=0;!(t>=s);)if(i=n.charAt(t),t++,hp.isDigit(i))y=i-"0",r.selfMultiply(u.TEN),r.selfAdd(y),c++;else{if("."!==i){if("e"===i||"E"===i){l=n.substring(t);try{v=fs.parseInt(l)}catch(t){throw t instanceof Error?new Error("Invalid exponent "+l+" in string "+n):t;}break}throw new Error("Unexpected character '"+i+"' at position "+t+" in string "+n);}a=c}return f=r,e=c-a-v,0===e?f=r:e>0?(p=u.TEN.pow(e),f=r.divide(p)):e<0&&(w=u.TEN.pow(-e),f=r.multiply(w)),h?f.negate():f};u.createNaN=function(){return new u(nt.NaN,nt.NaN)};u.copy=function(n){return new u(n)};u.magnitude=function(n){var i=Math.abs(n),r=Math.log(i)/Math.log(10),t=Math.trunc(Math.floor(r));return 10*Math.pow(10,t)<=i&&(t+=1),t};u.stringOfChar=function(n,t){for(var i=new us,r=0;r<t;r++)i.append(n);return i.toString()};lo.PI.get=function(){return new u(3.1415926535897931,12246467991473532e-32)};lo.TWO_PI.get=function(){return new u(6.2831853071795862,24492935982947064e-32)};lo.PI_2.get=function(){return new u(1.5707963267948966,6123233995736766e-32)};lo.E.get=function(){return new u(2.7182818284590451,14456468917292502e-32)};lo.NaN.get=function(){return new u(nt.NaN,nt.NaN)};lo.EPS.get=function(){return 123259516440783e-46};lo.SPLIT.get=function(){return 134217729};lo.MAX_PRINT_DIGITS.get=function(){return 32};lo.TEN.get=function(){return u.valueOf(10)};lo.ONE.get=function(){return u.valueOf(1)};lo.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};lo.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(u,lo);df=function(){};vut={DP_SAFE_EPSILON:{configurable:!0}};df.prototype.interfaces_=function(){return[]};df.prototype.getClass=function(){return df};df.orientationIndex=function(n,t,i){var r=df.orientationIndexFilter(n,t,i);if(r<=1)return r;var f=u.valueOf(t.x).selfAdd(-n.x),e=u.valueOf(t.y).selfAdd(-n.y),o=u.valueOf(i.x).selfAdd(-t.x),s=u.valueOf(i.y).selfAdd(-t.y);return f.selfMultiply(s).selfSubtract(e.selfMultiply(o)).signum()};df.signOfDet2x2=function(n,t,i,r){return n.multiply(r).selfSubtract(t.multiply(i)).signum()};df.intersection=function(n,t,r,f){var o=u.valueOf(f.y).selfSubtract(r.y).selfMultiply(u.valueOf(t.x).selfSubtract(n.x)),s=u.valueOf(f.x).selfSubtract(r.x).selfMultiply(u.valueOf(t.y).selfSubtract(n.y)),e=o.subtract(s),h=u.valueOf(f.x).selfSubtract(r.x).selfMultiply(u.valueOf(n.y).selfSubtract(r.y)),c=u.valueOf(f.y).selfSubtract(r.y).selfMultiply(u.valueOf(n.x).selfSubtract(r.x)),l=h.subtract(c).selfDivide(e).doubleValue(),a=u.valueOf(n.x).selfAdd(u.valueOf(t.x).selfSubtract(n.x).selfMultiply(l)).doubleValue(),v=u.valueOf(t.x).selfSubtract(n.x).selfMultiply(u.valueOf(n.y).selfSubtract(r.y)),y=u.valueOf(t.y).selfSubtract(n.y).selfMultiply(u.valueOf(n.x).selfSubtract(r.x)),p=v.subtract(y).selfDivide(e).doubleValue(),w=u.valueOf(r.y).selfAdd(u.valueOf(f.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new i(a,w)};df.orientationIndexFilter=function(n,t,i){var e=null,r=(n.x-i.x)*(t.y-i.y),u=(n.y-i.y)*(t.x-i.x),f=r-u,o;if(r>0){if(u<=0)return df.signum(f);e=r+u}else{if(!(r<0)||u>=0)return df.signum(f);e=-r-u}return o=df.DP_SAFE_EPSILON*e,f>=o||-f>=o?df.signum(f):2};df.signum=function(n){return n>0?1:n<0?-1:0};vut.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(df,vut);st=function(){};cp={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};cp.X.get=function(){return 0};cp.Y.get=function(){return 1};cp.Z.get=function(){return 2};cp.M.get=function(){return 3};st.prototype.setOrdinate=function(){};st.prototype.size=function(){};st.prototype.getOrdinate=function(){};st.prototype.getCoordinate=function(){};st.prototype.getCoordinateCopy=function(){};st.prototype.getDimension=function(){};st.prototype.getX=function(){};st.prototype.clone=function(){};st.prototype.expandEnvelope=function(){};st.prototype.copy=function(){};st.prototype.getY=function(){};st.prototype.toCoordinateArray=function(){};st.prototype.interfaces_=function(){return[hg]};st.prototype.getClass=function(){return st};Object.defineProperties(st,cp);var fyt=function(){},lp=function(n){function t(){n.call(this,"Projective point not representable on the Cartesian plane.")}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(fyt),rf=function(){};rf.arraycopy=function(n,t,i,r,u){for(var e=0,f=t;f<t+u;f++)i[r+e]=n[f],e++};rf.getProperty=function(n){return{"line.separator":"\n"}[n]};ao=function n(){var c,l,a,t,r,u,f;if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length)c=arguments[0],this.x=c.x,this.y=c.y,this.w=1;else if(2===arguments.length)"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(l=arguments[0],a=arguments[1],this.x=l,this.y=a,this.w=1):arguments[0]instanceof n&&arguments[1]instanceof n?(t=arguments[0],r=arguments[1],this.x=t.y*r.w-r.y*t.w,this.y=r.x*t.w-t.x*r.w,this.w=t.x*r.y-r.x*t.y):arguments[0]instanceof i&&arguments[1]instanceof i&&(u=arguments[0],f=arguments[1],this.x=u.y-f.y,this.y=f.x-u.x,this.w=u.x*f.y-f.x*u.y);else if(3===arguments.length){var d=arguments[0],g=arguments[1],nt=arguments[2];this.x=d;this.y=g;this.w=nt}else if(4===arguments.length){var e=arguments[0],o=arguments[1],s=arguments[2],h=arguments[3],v=e.y-o.y,y=o.x-e.x,p=e.x*o.y-o.x*e.y,w=s.y-h.y,b=h.x-s.x,k=s.x*h.y-h.x*s.y;this.x=y*k-b*p;this.y=w*p-v*k;this.w=v*b-w*y}};ao.prototype.getY=function(){var n=this.y/this.w;if(nt.isNaN(n)||nt.isInfinite(n))throw new lp;return n};ao.prototype.getX=function(){var n=this.x/this.w;if(nt.isNaN(n)||nt.isInfinite(n))throw new lp;return n};ao.prototype.getCoordinate=function(){var n=new i;return n.x=this.getX(),n.y=this.getY(),n};ao.prototype.interfaces_=function(){return[]};ao.prototype.getClass=function(){return ao};ao.intersection=function(n,t,r,u){var o=n.y-t.y,s=t.x-n.x,h=n.x*t.y-t.x*n.y,c=r.y-u.y,l=u.x-r.x,a=r.x*u.y-u.x*r.y,v=o*l-c*s,f=(s*a-l*h)/v,e=(c*h-o*a)/v;if(nt.isNaN(f)||nt.isInfinite(f)||nt.isNaN(e)||nt.isInfinite(e))throw new lp;return new i(f,e)};l=function n(){var t,f,r,u;if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)arguments[0]instanceof i?(t=arguments[0],this.init(t.x,t.x,t.y,t.y)):arguments[0]instanceof n&&(f=arguments[0],this.init(f));else if(2===arguments.length)r=arguments[0],u=arguments[1],this.init(r.x,u.x,r.y,u.y);else if(4===arguments.length){var e=arguments[0],o=arguments[1],s=arguments[2],h=arguments[3];this.init(e,o,s,h)}};yut={serialVersionUID:{configurable:!0}};l.prototype.getArea=function(){return this.getWidth()*this.getHeight()};l.prototype.equals=function(n){if(!(n instanceof l))return!1;var t=n;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()};l.prototype.intersection=function(n){if(this.isNull()||n.isNull()||!this.intersects(n))return new l;var t=this._minx>n._minx?this._minx:n._minx,i=this._miny>n._miny?this._miny:n._miny,r=this._maxx<n._maxx?this._maxx:n._maxx,u=this._maxy<n._maxy?this._maxy:n._maxy;return new l(t,r,i,u)};l.prototype.isNull=function(){return this._maxx<this._minx};l.prototype.getMaxX=function(){return this._maxx};l.prototype.covers=function(){var t,n,r,u;if(1===arguments.length){if(arguments[0]instanceof i)return t=arguments[0],this.covers(t.x,t.y);if(arguments[0]instanceof l)return n=arguments[0],!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}else if(2===arguments.length)return r=arguments[0],u=arguments[1],!this.isNull()&&r>=this._minx&&r<=this._maxx&&u>=this._miny&&u<=this._maxy};l.prototype.intersects=function(){var n,t,r,u;if(1===arguments.length){if(arguments[0]instanceof l)return n=arguments[0],!this.isNull()&&!n.isNull()&&!(n._minx>this._maxx||n._maxx<this._minx||n._miny>this._maxy||n._maxy<this._miny);if(arguments[0]instanceof i)return t=arguments[0],this.intersects(t.x,t.y)}else if(2===arguments.length)return r=arguments[0],u=arguments[1],!this.isNull()&&!(r>this._maxx||r<this._minx||u>this._maxy||u<this._miny)};l.prototype.getMinY=function(){return this._miny};l.prototype.getMinX=function(){return this._minx};l.prototype.expandToInclude=function(){var u,n,t,r;if(1===arguments.length){if(arguments[0]instanceof i)u=arguments[0],this.expandToInclude(u.x,u.y);else if(arguments[0]instanceof l){if(n=arguments[0],n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else 2===arguments.length&&(t=arguments[0],r=arguments[1],this.isNull()?(this._minx=t,this._maxx=t,this._miny=r,this._maxy=r):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r)))};l.prototype.minExtent=function(){if(this.isNull())return 0;var n=this.getWidth(),t=this.getHeight();return n<t?n:t};l.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};l.prototype.compareTo=function(n){var t=n;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0};l.prototype.translate=function(n,t){if(this.isNull())return null;this.init(this.getMinX()+n,this.getMaxX()+n,this.getMinY()+t,this.getMaxY()+t)};l.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};l.prototype.setToNull=function(){this._minx=0;this._maxx=-1;this._miny=0;this._maxy=-1};l.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};l.prototype.maxExtent=function(){if(this.isNull())return 0;var n=this.getWidth(),t=this.getHeight();return n>t?n:t};l.prototype.expandBy=function(){var n,t,i;if(1===arguments.length)n=arguments[0],this.expandBy(n,n);else if(2===arguments.length){if(t=arguments[0],i=arguments[1],this.isNull())return null;this._minx-=t;this._maxx+=t;this._miny-=i;this._maxy+=i;(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};l.prototype.contains=function(){var n,t,r,u;if(1===arguments.length){if(arguments[0]instanceof l)return n=arguments[0],this.covers(n);if(arguments[0]instanceof i)return t=arguments[0],this.covers(t)}else if(2===arguments.length)return r=arguments[0],u=arguments[1],this.covers(r,u)};l.prototype.centre=function(){return this.isNull()?null:new i((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};l.prototype.init=function(){var n,t,r,u;if(0===arguments.length)this.setToNull();else if(1===arguments.length)arguments[0]instanceof i?(n=arguments[0],this.init(n.x,n.x,n.y,n.y)):arguments[0]instanceof l&&(t=arguments[0],this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy);else if(2===arguments.length)r=arguments[0],u=arguments[1],this.init(r.x,u.x,r.y,u.y);else if(4===arguments.length){var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3];f<e?(this._minx=f,this._maxx=e):(this._minx=e,this._maxx=f);o<s?(this._miny=o,this._maxy=s):(this._miny=s,this._maxy=o)}};l.prototype.getMaxY=function(){return this._maxy};l.prototype.distance=function(n){var t,i;return this.intersects(n)?0:(t=0,this._maxx<n._minx?t=n._minx-this._maxx:this._minx>n._maxx&&(t=this._minx-n._maxx),i=0,this._maxy<n._miny?i=n._miny-this._maxy:this._miny>n._maxy&&(i=this._miny-n._maxy),0===t?i:0===i?t:Math.sqrt(t*t+i*i))};l.prototype.hashCode=function(){var n=17;return 37*(n=37*(n=37*(n=37*n+i.hashCode(this._minx))+i.hashCode(this._maxx))+i.hashCode(this._miny))+i.hashCode(this._maxy)};l.prototype.interfaces_=function(){return[ho,co]};l.prototype.getClass=function(){return l};l.intersects=function(){if(3===arguments.length){var n=arguments[0],t=arguments[1],i=arguments[2];return i.x>=(n.x<t.x?n.x:t.x)&&i.x<=(n.x>t.x?n.x:t.x)&&i.y>=(n.y<t.y?n.y:t.y)&&i.y<=(n.y>t.y?n.y:t.y)}if(4===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2],e=arguments[3],o=Math.min(f.x,e.x),s=Math.max(f.x,e.x),h=Math.min(r.x,u.x),c=Math.max(r.x,u.x);return!(h>s)&&!(c<o)&&(o=Math.min(f.y,e.y),s=Math.max(f.y,e.y),h=Math.min(r.y,u.y),c=Math.max(r.y,u.y),!(h>s)&&!(c<o))}};yut.serialVersionUID.get=function(){return 0x51845cd552189800};Object.defineProperties(l,yut);es={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};tk=function(n){this.geometryFactory=n||new rt};tk.prototype.read=function(n){var i,r,u,t;if(n=n.replace(/[\n\r]/g," "),t=es.typeStr.exec(n),-1!==n.search("EMPTY")&&((t=es.emptyTypeStr.exec(n))[2]=void 0),t&&(r=t[1].toLowerCase(),u=t[2],ap[r]&&(i=ap[r].apply(this,[u]))),void 0===i)throw new Error("Could not parse WKT "+n);return i};tk.prototype.write=function(n){return this.extractGeometry(n)};tk.prototype.extractGeometry=function(n){var t=n.getGeometryType().toLowerCase(),i;return hc[t]?(i=t.toUpperCase(),n.isEmpty()?i+" EMPTY":i+"("+hc[t].apply(this,[n])+")"):null};var hc={coordinate:function(n){return n.x+" "+n.y},point:function(n){return hc.coordinate.call(this,n._coordinates._coordinates[0])},multipoint:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push("("+hc.point.apply(this,[n._geometries[t]])+")");return i.join(",")},linestring:function(n){for(var i=[],t=0,r=n._points._coordinates.length;t<r;++t)i.push(hc.coordinate.apply(this,[n._points._coordinates[t]]));return i.join(",")},linearring:function(n){for(var i=[],t=0,r=n._points._coordinates.length;t<r;++t)i.push(hc.coordinate.apply(this,[n._points._coordinates[t]]));return i.join(",")},multilinestring:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push("("+hc.linestring.apply(this,[n._geometries[t]])+")");return i.join(",")},polygon:function(n){var i=[],t,r;for(i.push("("+hc.linestring.apply(this,[n._shell])+")"),t=0,r=n._holes.length;t<r;++t)i.push("("+hc.linestring.apply(this,[n._holes[t]])+")");return i.join(",")},multipolygon:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push("("+hc.polygon.apply(this,[n._geometries[t]])+")");return i.join(",")},geometrycollection:function(n){for(var i=[],t=0,r=n._geometries.length;t<r;++t)i.push(this.extractGeometry(n._geometries[t]));return i.join(",")}},ap={point:function(n){if(void 0===n)return this.geometryFactory.createPoint();var t=n.trim().split(es.spaces);return this.geometryFactory.createPoint(new i(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(n){var i;if(void 0===n)return this.geometryFactory.createMultiPoint();for(var r=n.trim().split(","),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(es.trimParens,"$1"),u.push(ap.point.apply(this,[i]));return this.geometryFactory.createMultiPoint(u)},linestring:function(n){if(void 0===n)return this.geometryFactory.createLineString();for(var t,u=n.trim().split(","),f=[],r=0,e=u.length;r<e;++r)t=u[r].trim().split(es.spaces),f.push(new i(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(f)},linearring:function(n){if(void 0===n)return this.geometryFactory.createLinearRing();for(var t,u=n.trim().split(","),f=[],r=0,e=u.length;r<e;++r)t=u[r].trim().split(es.spaces),f.push(new i(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(f)},multilinestring:function(n){var i;if(void 0===n)return this.geometryFactory.createMultiLineString();for(var r=n.trim().split(es.parenComma),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(es.trimParens,"$1"),u.push(ap.linestring.apply(this,[i]));return this.geometryFactory.createMultiLineString(u)},polygon:function(n){var r,u,i;if(void 0===n)return this.geometryFactory.createPolygon();for(var f,e=n.trim().split(es.parenComma),o=[],t=0,s=e.length;t<s;++t)r=e[t].replace(es.trimParens,"$1"),u=ap.linestring.apply(this,[r]),i=this.geometryFactory.createLinearRing(u._points),0===t?f=i:o.push(i);return this.geometryFactory.createPolygon(f,o)},multipolygon:function(n){var i;if(void 0===n)return this.geometryFactory.createMultiPolygon();for(var r=n.trim().split(es.doubleParenComma),u=[],t=0,f=r.length;t<f;++t)i=r[t].replace(es.trimParens,"$1"),u.push(ap.polygon.apply(this,[i]));return this.geometryFactory.createMultiPolygon(u)},geometrycollection:function(n){if(void 0===n)return this.geometryFactory.createGeometryCollection();for(var i=(n=n.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],t=0,u=i.length;t<u;++t)r.push(this.read(i[t]));return this.geometryFactory.createGeometryCollection(r)}},os=function(n){this.parser=new tk(n)};os.prototype.write=function(n){return this.parser.write(n)};os.toLineString=function(n,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+n.x+" "+n.y+", "+t.x+" "+t.y+" )"};var cc=function(n){function t(t){n.call(this,t);this.name="RuntimeException";this.message=t;this.stack=(new n).stack}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(Error),cg=function(n){function t(){if(n.call(this),0===arguments.length)n.call(this);else if(1===arguments.length){var t=arguments[0];n.call(this,t)}}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(cc),it=function(){};it.prototype.interfaces_=function(){return[]};it.prototype.getClass=function(){return it};it.shouldNeverReachHere=function(){if(0===arguments.length)it.shouldNeverReachHere(null);else if(1===arguments.length){var n=arguments[0];throw new cg("Should never reach here"+(null!==n?": "+n:""));}};it.isTrue=function(){var n;if(1===arguments.length)it.isTrue(arguments[0],null);else if(2===arguments.length&&(n=arguments[1],!arguments[0]))throw null===n?new cg:new cg(n);};it.equals=function(){var n,t,i;if(2===arguments.length)it.equals(n=arguments[0],t=arguments[1],null);else if(3===arguments.length&&(n=arguments[0],i=arguments[2],!(t=arguments[1]).equals(n)))throw new cg("Expected "+n+" but encountered "+t+(null!==i?": "+i:""));};vr=function(){this._result=null;this._inputLines=Array(2).fill().map(function(){return Array(2)});this._intPt=new Array(2).fill(null);this._intLineIndex=null;this._isProper=null;this._pa=null;this._pb=null;this._precisionModel=null;this._intPt[0]=new i;this._intPt[1]=new i;this._pa=this._intPt[0];this._pb=this._intPt[1];this._result=0};la={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};vr.prototype.getIndexAlongSegment=function(n,t){return this.computeIntLineIndex(),this._intLineIndex[n][t]};vr.prototype.getTopologySummary=function(){var n=new us;return this.isEndPoint()&&n.append(" endpoint"),this._isProper&&n.append(" proper"),this.isCollinear()&&n.append(" collinear"),n.toString()};vr.prototype.computeIntersection=function(n,t,i,r){this._inputLines[0][0]=n;this._inputLines[0][1]=t;this._inputLines[1][0]=i;this._inputLines[1][1]=r;this._result=this.computeIntersect(n,t,i,r)};vr.prototype.getIntersectionNum=function(){return this._result};vr.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var n=arguments[0],t=this.getEdgeDistance(n,0),i=this.getEdgeDistance(n,1);t>i?(this._intLineIndex[n][0]=0,this._intLineIndex[n][1]=1):(this._intLineIndex[n][0]=1,this._intLineIndex[n][1]=0)}};vr.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};vr.prototype.setPrecisionModel=function(n){this._precisionModel=n};vr.prototype.isInteriorIntersection=function(){var t=this,i,n;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(i=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[i][0])&&!t._intPt[n].equals2D(t._inputLines[i][1]))return!0;return!1}};vr.prototype.getIntersection=function(n){return this._intPt[n]};vr.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};vr.prototype.hasIntersection=function(){return this._result!==vr.NO_INTERSECTION};vr.prototype.getEdgeDistance=function(n,t){return vr.computeEdgeDistance(this._intPt[t],this._inputLines[n][0],this._inputLines[n][1])};vr.prototype.isCollinear=function(){return this._result===vr.COLLINEAR_INTERSECTION};vr.prototype.toString=function(){return os.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+os.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};vr.prototype.getEndpoint=function(n,t){return this._inputLines[n][t]};vr.prototype.isIntersection=function(n){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(n))return!0;return!1};vr.prototype.getIntersectionAlongSegment=function(n,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[n][t]]};vr.prototype.interfaces_=function(){return[]};vr.prototype.getClass=function(){return vr};vr.computeEdgeDistance=function(n,t,i){var u=Math.abs(i.x-t.x),f=Math.abs(i.y-t.y),r=-1,e,o;return n.equals(t)?r=0:n.equals(i)?r=u>f?u:f:(e=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y),0!==(r=u>f?e:o)||n.equals(t)||(r=Math.max(e,o))),it.isTrue(!(0===r&&!n.equals(t)),"Bad distance calculation"),r};vr.nonRobustComputeEdgeDistance=function(n,t){var i=n.x-t.x,r=n.y-t.y,u=Math.sqrt(i*i+r*r);return it.isTrue(!(0===u&&!n.equals(t)),"Invalid distance calculation"),u};la.DONT_INTERSECT.get=function(){return 0};la.DO_INTERSECT.get=function(){return 1};la.COLLINEAR.get=function(){return 2};la.NO_INTERSECTION.get=function(){return 0};la.POINT_INTERSECTION.get=function(){return 1};la.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(vr,la);al=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(n){var t=new l(this._inputLines[0][0],this._inputLines[0][1]),i=new l(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(n)&&i.contains(n)},t.prototype.computeIntersection=function(){if(3!==arguments.length)return n.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],i=arguments[1],r=arguments[2];if(this._isProper=!1,l.intersects(i,r,t)&&0===o.orientationIndex(i,r,t)&&0===o.orientationIndex(r,i,t))return this._isProper=!0,(t.equals(i)||t.equals(r))&&(this._isProper=!1),this._result=n.POINT_INTERSECTION,null;this._result=n.NO_INTERSECTION},t.prototype.normalizeToMinimum=function(n,t,i,r,u){u.x=this.smallestInAbsValue(n.x,t.x,i.x,r.x);u.y=this.smallestInAbsValue(n.y,t.y,i.y,r.y);n.x-=u.x;n.y-=u.y;t.x-=u.x;t.y-=u.y;i.x-=u.x;i.y-=u.y;r.x-=u.x;r.y-=u.y},t.prototype.safeHCoordinateIntersection=function(n,i,r,u){var f=null;try{f=ao.intersection(n,i,r,u)}catch(e){if(!(e instanceof lp))throw e;f=t.nearestEndpoint(n,i,r,u)}return f},t.prototype.intersection=function(n,r,u,f){var e=this.intersectionWithNormalization(n,r,u,f);return this.isInSegmentEnvelopes(e)||(e=new i(t.nearestEndpoint(n,r,u,f))),null!==this._precisionModel&&this._precisionModel.makePrecise(e),e},t.prototype.smallestInAbsValue=function(n,t,i,r){var u=n,f=Math.abs(u);return Math.abs(t)<f&&(u=t,f=Math.abs(t)),Math.abs(i)<f&&(u=i,f=Math.abs(i)),Math.abs(r)<f&&(u=r),u},t.prototype.checkDD=function(n,t,i,r,u){var f=df.intersection(n,t,i,r),e=this.isInSegmentEnvelopes(f);rf.out.println("DD in env = "+e+"  --------------------- "+f);u.distance(f)>.0001&&rf.out.println("Distance = "+u.distance(f))},t.prototype.intersectionWithNormalization=function(n,t,r,u){var o=new i(n),s=new i(t),h=new i(r),c=new i(u),e=new i,f;return this.normalizeToEnvCentre(o,s,h,c,e),f=this.safeHCoordinateIntersection(o,s,h,c),f.x+=e.x,f.y+=e.y,f},t.prototype.computeCollinearIntersection=function(t,i,r,u){var f=l.intersects(t,i,r),e=l.intersects(t,i,u),o=l.intersects(r,u,t),s=l.intersects(r,u,i);return f&&e?(this._intPt[0]=r,this._intPt[1]=u,n.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=t,this._intPt[1]=i,n.COLLINEAR_INTERSECTION):f&&o?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||e||s?n.COLLINEAR_INTERSECTION:n.POINT_INTERSECTION):f&&s?(this._intPt[0]=r,this._intPt[1]=i,!r.equals(i)||e||o?n.COLLINEAR_INTERSECTION:n.POINT_INTERSECTION):e&&o?(this._intPt[0]=u,this._intPt[1]=t,!u.equals(t)||f||s?n.COLLINEAR_INTERSECTION:n.POINT_INTERSECTION):e&&s?(this._intPt[0]=u,this._intPt[1]=i,!u.equals(i)||f||o?n.COLLINEAR_INTERSECTION:n.POINT_INTERSECTION):n.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(n,t,i,r,u){var f=n.x<t.x?n.x:t.x,e=n.y<t.y?n.y:t.y,o=n.x>t.x?n.x:t.x,s=n.y>t.y?n.y:t.y,h=i.x<r.x?i.x:r.x,c=i.y<r.y?i.y:r.y,l=i.x>r.x?i.x:r.x,a=i.y>r.y?i.y:r.y,v=((f>h?f:h)+(o<l?o:l))/2,y=((e>c?e:c)+(s<a?s:a))/2;u.x=v;u.y=y;n.x-=u.x;n.y-=u.y;t.x-=u.x;t.y-=u.y;i.x-=u.x;i.y-=u.y;r.x-=u.x;r.y-=u.y},t.prototype.computeIntersect=function(t,r,u,f){var e,s,h,c;return(this._isProper=!1,!l.intersects(t,r,u,f))?n.NO_INTERSECTION:(e=o.orientationIndex(t,r,u),s=o.orientationIndex(t,r,f),e>0&&s>0||e<0&&s<0)?n.NO_INTERSECTION:(h=o.orientationIndex(u,f,t),c=o.orientationIndex(u,f,r),h>0&&c>0||h<0&&c<0?n.NO_INTERSECTION:0===e&&0===s&&0===h&&0===c?this.computeCollinearIntersection(t,r,u,f):(0===e||0===s||0===h||0===c?(this._isProper=!1,t.equals2D(u)||t.equals2D(f)?this._intPt[0]=t:r.equals2D(u)||r.equals2D(f)?this._intPt[0]=r:0===e?this._intPt[0]=new i(u):0===s?this._intPt[0]=new i(f):0===h?this._intPt[0]=new i(t):0===c&&(this._intPt[0]=new i(r))):(this._isProper=!0,this._intPt[0]=this.intersection(t,r,u,f)),n.POINT_INTERSECTION))},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(n,t,i,r){var e=n,u=o.distancePointLine(n,i,r),f=o.distancePointLine(t,i,r);return f<u&&(u=f,e=t),(f=o.distancePointLine(i,n,t))<u&&(u=f,e=i),(f=o.distancePointLine(r,n,t))<u&&(u=f,e=r),e},t}(vr);aa=function(){};aa.prototype.interfaces_=function(){return[]};aa.prototype.getClass=function(){return aa};aa.orientationIndex=function(n,t,i){var r=t.x-n.x,u=t.y-n.y,f=i.x-t.x,e=i.y-t.y;return aa.signOfDet2x2(r,u,f,e)};aa.signOfDet2x2=function(n,t,i,r){var u=null,f=null,e=null;if(u=1,0===n||0===r)return 0===t||0===i?0:t>0?i>0?-u:u:i>0?u:-u;if(0===t||0===i)return r>0?n>0?u:-u:n>0?-u:u;if(t>0?r>0?t<=r||(u=-u,f=n,n=i,i=f,f=t,t=r,r=f):t<=-r?(u=-u,i=-i,r=-r):(f=n,n=-i,i=f,f=t,t=-r,r=f):r>0?-t<=r?(u=-u,n=-n,t=-t):(f=-n,n=i,i=f,f=-t,t=r,r=f):t>=r?(n=-n,t=-t,i=-i,r=-r):(u=-u,f=-n,n=-i,i=f,f=-t,t=-r,r=f),n>0){if(!(i>0)||!(n<=i))return u}else{if(i>0||!(n>=i))return-u;u=-u;n=-n;i=-i}for(;;){if((r-=(e=Math.floor(i/n))*t)<0)return-u;if(r>t)return u;if(n>(i-=e*n)+i){if(t<r+r)return u}else{if(t>r+r)return-u;i=n-i;r=t-r;u=-u}if(0===r)return 0===i?0:-u;if(0===i||(t-=(e=Math.floor(n/i))*r)<0)return u;if(t>r)return-u;if(i>(n-=e*i)+n){if(r<t+t)return-u}else{if(r>t+t)return u;n=i-n;t=r-t;u=-u}if(0===t)return 0===n?0:u;if(0===n)return-u}};ss=function(){this._p=null;this._crossingCount=0;this._isPointOnSegment=!1;var n=arguments[0];this._p=n};ss.prototype.countSegment=function(n,t){var i,r;if(n.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(n.y===this._p.y&&t.y===this._p.y)return i=n.x,r=t.x,i>r&&(i=t.x,r=n.x),this._p.x>=i&&this._p.x<=r&&(this._isPointOnSegment=!0),null;if(n.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&n.y<=this._p.y){var o=n.x-this._p.x,f=n.y-this._p.y,s=t.x-this._p.x,e=t.y-this._p.y,u=aa.signOfDet2x2(o,f,s,e);if(0===u)return this._isPointOnSegment=!0,null;e<f&&(u=-u);u>0&&this._crossingCount++}};ss.prototype.isPointInPolygon=function(){return this.getLocation()!==r.EXTERIOR};ss.prototype.getLocation=function(){return this._isPointOnSegment?r.BOUNDARY:this._crossingCount%2==1?r.INTERIOR:r.EXTERIOR};ss.prototype.isOnSegment=function(){return this._isPointOnSegment};ss.prototype.interfaces_=function(){return[]};ss.prototype.getClass=function(){return ss};ss.locatePointInRing=function(){var h,c;if(arguments[0]instanceof i&&w(arguments[1],st)){for(var l=arguments[0],f=arguments[1],n=new ss(l),o=new i,s=new i,t=1;t<f.size();t++)if(f.getCoordinate(t,o),f.getCoordinate(t-1,s),n.countSegment(o,s),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof i&&arguments[1]instanceof Array){for(var a=arguments[0],e=arguments[1],r=new ss(a),u=1;u<e.length;u++)if(h=e[u],c=e[u-1],r.countSegment(h,c),r.isOnSegment())return r.getLocation();return r.getLocation()}};o=function(){};va={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};o.prototype.interfaces_=function(){return[]};o.prototype.getClass=function(){return o};o.orientationIndex=function(n,t,i){return df.orientationIndex(n,t,i)};o.signedArea=function(){var n,f,o,s,h,e;if(arguments[0]instanceof Array){if(n=arguments[0],n.length<3)return 0;for(var c=0,a=n[0].x,u=1;u<n.length-1;u++){var v=n[u].x-a,y=n[u+1].y,p=n[u-1].y;c+=v*(p-y)}return c/2}if(w(arguments[0],st)){if(f=arguments[0],o=f.size(),o<3)return 0;var l=new i,r=new i,t=new i;for(f.getCoordinate(0,r),f.getCoordinate(1,t),s=r.x,t.x-=s,h=0,e=1;e<o-1;e++)l.y=r.y,r.x=t.x,r.y=t.y,f.getCoordinate(e+1,t),t.x-=s,h+=r.x*(l.y-t.y);return h/2}};o.distanceLineLine=function(n,t,i,r){var u,f;if(n.equals(t))return o.distancePointLine(n,i,r);if(i.equals(r))return o.distancePointLine(r,n,t);if(u=!1,l.intersects(n,t,i,r))if(f=(t.x-n.x)*(r.y-i.y)-(t.y-n.y)*(r.x-i.x),0===f)u=!0;else{var h=(n.y-i.y)*(r.x-i.x)-(n.x-i.x)*(r.y-i.y),e=((n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y))/f,s=h/f;(s<0||s>1||e<0||e>1)&&(u=!0)}else u=!0;return u?no.min(o.distancePointLine(n,i,r),o.distancePointLine(t,i,r),o.distancePointLine(i,n,t),o.distancePointLine(r,n,t)):0};o.isPointInRing=function(n,t){return o.locatePointInRing(n,t)!==r.EXTERIOR};o.computeLength=function(n){var f=n.size(),r,t;if(f<=1)return 0;r=0;t=new i;n.getCoordinate(0,t);for(var e=t.x,o=t.y,u=1;u<f;u++){n.getCoordinate(u,t);var s=t.x,h=t.y,c=s-e,l=h-o;r+=Math.sqrt(c*c+l*l);e=s;o=h}return r};o.isCCW=function(n){var s=n.length-1,c,i,r,f,e,l,a;if(s<3)throw new ar("Ring has fewer than 4 points, so orientation cannot be determined");for(var t=n[0],u=0,h=1;h<=s;h++)c=n[h],c.y>t.y&&(t=c,u=h);i=u;do(i-=1)<0&&(i=s);while(n[i].equals2D(t)&&i!==u);r=u;do r=(r+1)%s;while(n[r].equals2D(t)&&r!==u);return(f=n[i],e=n[r],f.equals2D(t)||e.equals2D(t)||f.equals2D(e))?!1:(l=o.computeOrientation(f,t,e),a=!1,a=0===l?f.x>e.x:l>0,a)};o.locatePointInRing=function(n,t){return ss.locatePointInRing(n,t)};o.distancePointLinePerpendicular=function(n,t,i){var r=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y),u=((t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y))/r;return Math.abs(u)*Math.sqrt(r)};o.computeOrientation=function(n,t,i){return o.orientationIndex(n,t,i)};o.distancePointLine=function(){var s,r,f,u,h,e,c,l;if(2===arguments.length){if(s=arguments[0],r=arguments[1],0===r.length)throw new ar("Line array must contain at least one vertex");for(f=s.distance(r[0]),u=0;u<r.length-1;u++)h=o.distancePointLine(s,r[u],r[u+1]),h<f&&(f=h);return f}if(3===arguments.length){var i=arguments[0],n=arguments[1],t=arguments[2];return n.x===t.x&&n.y===t.y?i.distance(n):(e=(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y),c=((i.x-n.x)*(t.x-n.x)+(i.y-n.y)*(t.y-n.y))/e,c<=0)?i.distance(n):c>=1?i.distance(t):(l=((n.y-i.y)*(t.x-n.x)-(n.x-i.x)*(t.y-n.y))/e,Math.abs(l)*Math.sqrt(e))}};o.isOnLine=function(n,t){for(var u,f,r=new al,i=1;i<t.length;i++)if(u=t[i-1],f=t[i],r.computeIntersection(n,u,f),r.hasIntersection())return!0;return!1};va.CLOCKWISE.get=function(){return-1};va.RIGHT.get=function(){return o.CLOCKWISE};va.COUNTERCLOCKWISE.get=function(){return 1};va.LEFT.get=function(){return o.COUNTERCLOCKWISE};va.COLLINEAR.get=function(){return 0};va.STRAIGHT.get=function(){return o.COLLINEAR};Object.defineProperties(o,va);ph=function(){};ph.prototype.filter=function(){};ph.prototype.interfaces_=function(){return[]};ph.prototype.getClass=function(){return ph};p=function(){var n=arguments[0];this._envelope=null;this._factory=null;this._SRID=null;this._userData=null;this._factory=n;this._SRID=n.getSRID()};gs={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};p.prototype.isGeometryCollection=function(){return this.getSortIndex()===p.SORTINDEX_GEOMETRYCOLLECTION};p.prototype.getFactory=function(){return this._factory};p.prototype.getGeometryN=function(){return this};p.prototype.getArea=function(){return 0};p.prototype.isRectangle=function(){return!1};p.prototype.equals=function(){var n,t,i;return arguments[0]instanceof p?(n=arguments[0],null!==n&&this.equalsTopo(n)):arguments[0]instanceof Object?(t=arguments[0],!(t instanceof p))?!1:(i=t,this.equalsExact(i)):void 0};p.prototype.equalsExact=function(n){return this===n||this.equalsExact(n,0)};p.prototype.geometryChanged=function(){this.apply(p.geometryChangedFilter)};p.prototype.geometryChangedAction=function(){this._envelope=null};p.prototype.equalsNorm=function(n){return null!==n&&this.norm().equalsExact(n.norm())};p.prototype.getLength=function(){return 0};p.prototype.getNumGeometries=function(){return 1};p.prototype.compareTo=function(){var i,t,n,r;return 1===arguments.length?(i=arguments[0],t=i,this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(i)):2===arguments.length?(n=arguments[0],r=arguments[1],this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)):void 0};p.prototype.getUserData=function(){return this._userData};p.prototype.getSRID=function(){return this._SRID};p.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};p.prototype.checkNotGeometryCollection=function(n){if(n.getSortIndex()===p.SORTINDEX_GEOMETRYCOLLECTION)throw new ar("This method does not support GeometryCollection arguments");};p.prototype.equal=function(n,t,i){return 0===i?n.equals(t):n.distance(t)<=i};p.prototype.norm=function(){var n=this.copy();return n.normalize(),n};p.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};p.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new l(this._envelope)};p.prototype.setSRID=function(n){this._SRID=n};p.prototype.setUserData=function(n){this._userData=n};p.prototype.compare=function(n,t){for(var i=n.iterator(),r=t.iterator();i.hasNext()&&r.hasNext();){var f=i.next(),e=r.next(),u=f.compareTo(e);if(0!==u)return u}return i.hasNext()?1:r.hasNext()?-1:0};p.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};p.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===p.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===p.SORTINDEX_MULTIPOINT||this.getSortIndex()===p.SORTINDEX_MULTILINESTRING||this.getSortIndex()===p.SORTINDEX_MULTIPOLYGON};p.prototype.interfaces_=function(){return[hg,ho,co]};p.prototype.getClass=function(){return p};p.hasNonEmptyElements=function(n){for(var t=0;t<n.length;t++)if(!n[t].isEmpty())return!0;return!1};p.hasNullElements=function(n){for(var t=0;t<n.length;t++)if(null===n[t])return!0;return!1};gs.serialVersionUID.get=function(){return 0x799ea46522854c00};gs.SORTINDEX_POINT.get=function(){return 0};gs.SORTINDEX_MULTIPOINT.get=function(){return 1};gs.SORTINDEX_LINESTRING.get=function(){return 2};gs.SORTINDEX_LINEARRING.get=function(){return 3};gs.SORTINDEX_MULTILINESTRING.get=function(){return 4};gs.SORTINDEX_POLYGON.get=function(){return 5};gs.SORTINDEX_MULTIPOLYGON.get=function(){return 6};gs.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};gs.geometryChangedFilter.get=function(){return lg};Object.defineProperties(p,gs);lg=function(){};lg.interfaces_=function(){return[ph]};lg.filter=function(n){n.geometryChangedAction()};nh=function(){};nh.prototype.filter=function(){};nh.prototype.interfaces_=function(){return[]};nh.prototype.getClass=function(){return nh};to=function(){};wh={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};to.prototype.isInBoundary=function(){};to.prototype.interfaces_=function(){return[]};to.prototype.getClass=function(){return to};wh.Mod2BoundaryNodeRule.get=function(){return bv};wh.EndPointBoundaryNodeRule.get=function(){return kv};wh.MultiValentEndPointBoundaryNodeRule.get=function(){return dv};wh.MonoValentEndPointBoundaryNodeRule.get=function(){return gv};wh.MOD2_BOUNDARY_RULE.get=function(){return new bv};wh.ENDPOINT_BOUNDARY_RULE.get=function(){return new kv};wh.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new dv};wh.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new gv};wh.OGC_SFS_BOUNDARY_RULE.get=function(){return to.MOD2_BOUNDARY_RULE};Object.defineProperties(to,wh);bv=function(){};bv.prototype.isInBoundary=function(n){return n%2==1};bv.prototype.interfaces_=function(){return[to]};bv.prototype.getClass=function(){return bv};kv=function(){};kv.prototype.isInBoundary=function(n){return n>0};kv.prototype.interfaces_=function(){return[to]};kv.prototype.getClass=function(){return kv};dv=function(){};dv.prototype.isInBoundary=function(n){return n>1};dv.prototype.interfaces_=function(){return[to]};dv.prototype.getClass=function(){return dv};gv=function(){};gv.prototype.isInBoundary=function(n){return 1===n};gv.prototype.interfaces_=function(){return[to]};gv.prototype.getClass=function(){return gv};uu=function(){};uu.prototype.add=function(){};uu.prototype.addAll=function(){};uu.prototype.isEmpty=function(){};uu.prototype.iterator=function(){};uu.prototype.size=function(){};uu.prototype.toArray=function(){};uu.prototype.remove=function(){};put.prototype=new Error;put.prototype.name="IndexOutOfBoundsException";ny=function(){};ny.prototype.hasNext=function(){};ny.prototype.next=function(){};ny.prototype.remove=function(){};vo=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(uu);vp.prototype=new Error;vp.prototype.name="NoSuchElementException";var e=function(n){function t(){n.call(this);this.array_=[];arguments[0]instanceof uu&&this.addAll(arguments[0])}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[n,uu]},t.prototype.add=function(n){return 1===arguments.length?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.set=function(n,t){var i=this.array_[n];return this.array_[n]=t,i},t.prototype.iterator=function(){return new hti(this)},t.prototype.get=function(n){if(n<0||n>=this.size())throw new put;return this.array_[n]},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t},t.prototype.remove=function(n){for(var i=!1,t=0,r=this.array_.length;t<r;t++)if(this.array_[t]===n){this.array_.splice(t,1);i=!0;break}return i},t}(vo),hti=function(n){function t(t){n.call(this);this.arrayList_=t;this.position_=0}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new vp;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(ny),ik=function(n){function t(){var t,i,r;(n.call(this),0===arguments.length)||(1===arguments.length?(t=arguments[0],this.ensureCapacity(t.length),this.add(t,!0)):2===arguments.length&&(i=arguments[0],r=arguments[1],this.ensureCapacity(i.length),this.add(i,r)))}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(n){return this.get(n)},t.prototype.addAll=function(){var r=this;if(2===arguments.length){for(var u=arguments[0],f=arguments[1],t=!1,i=u.iterator();i.hasNext();)r.add(i.next(),f),t=!0;return t}return n.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var i=n.prototype.clone.call(this),t=0;t<this.size();t++)i.add(t,this.get(t).copy());return i},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var o=this,l,a,v,s,y,p,w,b,u,f,c,d,g,e;if(1===arguments.length)l=arguments[0],n.prototype.add.call(this,l);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return a=arguments[0],v=arguments[1],this.add(a,v,!0),!0;if(arguments[0]instanceof i&&"boolean"==typeof arguments[1]){if(s=arguments[0],y=arguments[1],!y&&this.size()>=1&&(p=this.get(this.size()-1),p.equals2D(s)))return null;n.prototype.add.call(this,s)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return w=arguments[0],b=arguments[1],this.add(w,b),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],k=arguments[1],rt=arguments[2];if(rt)for(u=0;u<r.length;u++)o.add(r[u],k);else for(f=r.length-1;f>=0;f--)o.add(r[f],k);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof i){var t=arguments[0],h=arguments[1],ut=arguments[2];if(!ut&&(c=this.size(),c>0&&(t>0&&(d=this.get(t-1),d.equals2D(h))||t<c&&(g=this.get(t),g.equals2D(h)))))return null;n.prototype.add.call(this,t,h)}}else if(4===arguments.length){var ft=arguments[0],et=arguments[1],nt=arguments[2],tt=arguments[3],it=1;for(nt>tt&&(it=-1),e=nt;e!==tt;e+=it)o.add(ft[e],et);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new i(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,r),t}(e),ut=function(){},ag={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ag.ForwardComparator.get=function(){return yp};ag.BidirectionalComparator.get=function(){return ty};ag.coordArrayType.get=function(){return new Array(0).fill(null)};ut.prototype.interfaces_=function(){return[]};ut.prototype.getClass=function(){return ut};ut.isRing=function(n){return!(n.length<4)&&!!n[0].equals2D(n[n.length-1])};ut.ptNotInList=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],ut.indexOf(r,t)<0)return r;return null};ut.scroll=function(n,t){var i=ut.indexOf(t,n),r;if(i<0)return null;r=new Array(n.length).fill(null);rf.arraycopy(n,i,r,0,n.length-i);rf.arraycopy(n,0,r,n.length-i,i);rf.arraycopy(r,0,n,0,n.length)};ut.equals=function(){var n,t,i,u;if(2===arguments.length){if(n=arguments[0],t=arguments[1],n===t)return!0;if(null===n||null===t||n.length!==t.length)return!1;for(i=0;i<n.length;i++)if(!n[i].equals(t[i]))return!1;return!0}if(3===arguments.length){var r=arguments[0],f=arguments[1],e=arguments[2];if(r===f)return!0;if(null===r||null===f||r.length!==f.length)return!1;for(u=0;u<r.length;u++)if(0!==e.compare(r[u],f[u]))return!1;return!0}};ut.intersection=function(n,t){for(var r=new ik,i=0;i<n.length;i++)t.intersects(n[i])&&r.add(n[i],!0);return r.toCoordinateArray()};ut.hasRepeatedPoints=function(n){for(var t=1;t<n.length;t++)if(n[t-1].equals(n[t]))return!0;return!1};ut.removeRepeatedPoints=function(n){return ut.hasRepeatedPoints(n)?new ik(n,!1).toCoordinateArray():n};ut.reverse=function(n){for(var r,i=n.length-1,u=Math.trunc(i/2),t=0;t<=u;t++)r=n[t],n[t]=n[i-t],n[i-t]=r};ut.removeNull=function(n){for(var u,f,t,i=0,r=0;r<n.length;r++)null!==n[r]&&i++;if(u=new Array(i).fill(null),0===i)return u;for(f=0,t=0;t<n.length;t++)null!==n[t]&&(u[f++]=n[t]);return u};ut.copyDeep=function(){if(1===arguments.length){for(var r=arguments[0],u=new Array(r.length).fill(null),n=0;n<r.length;n++)u[n]=new i(r[n]);return u}if(5===arguments.length)for(var f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3],h=arguments[4],t=0;t<h;t++)o[s+t]=new i(f[e+t])};ut.isEqualReversed=function(n,t){for(var r,u,i=0;i<n.length;i++)if(r=n[i],u=t[n.length-i-1],0!==r.compareTo(u))return!1;return!0};ut.envelope=function(n){for(var i=new l,t=0;t<n.length;t++)i.expandToInclude(n[t]);return i};ut.toCoordinateArray=function(n){return n.toArray(ut.coordArrayType)};ut.atLeastNCoordinatesOrNothing=function(n,t){return t.length>=n?t:[]};ut.indexOf=function(n,t){for(var i=0;i<t.length;i++)if(n.equals(t[i]))return i;return-1};ut.increasingDirection=function(n){for(var r,i,t=0;t<Math.trunc(n.length/2);t++)if(r=n.length-1-t,i=n[t].compareTo(n[r]),0!==i)return i;return 1};ut.compare=function(n,t){for(var r,i=0;i<n.length&&i<t.length;){if(r=n[i].compareTo(t[i]),0!==r)return r;i++}return i<t.length?-1:i<n.length?1:0};ut.minCoordinate=function(n){for(var t=null,i=0;i<n.length;i++)(null===t||t.compareTo(n[i])>0)&&(t=n[i]);return t};ut.extract=function(n,t,i){var r,u,e,f;if(t=no.clamp(t,0,n.length),r=(i=no.clamp(i,-1,n.length))-t+1,i<0&&(r=0),t>=n.length&&(r=0),i<t&&(r=0),u=new Array(r).fill(null),0===r)return u;for(e=0,f=t;f<=i;f++)u[e++]=n[f];return u};Object.defineProperties(ut,ag);yp=function(){};yp.prototype.compare=function(n,t){return ut.compare(n,t)};yp.prototype.interfaces_=function(){return[op]};yp.prototype.getClass=function(){return yp};ty=function(){};ty.prototype.compare=function(n,t){var i=n,r=t,u;return i.length<r.length?-1:i.length>r.length?1:0===i.length?0:(u=ut.compare(i,r),ut.isEqualReversed(i,r)?0:u)};ty.prototype.OLDcompare=function(n,t){var i=n,r=t,u;if(i.length<r.length)return-1;if(i.length>r.length)return 1;if(0===i.length)return 0;for(var f=ut.increasingDirection(i),e=ut.increasingDirection(r),o=f>0?0:i.length-1,s=e>0?0:i.length-1,h=0;h<i.length;h++){if(u=i[o].compareTo(r[s]),0!==u)return u;o+=f;s+=e}return 0};ty.prototype.interfaces_=function(){return[op]};ty.prototype.getClass=function(){return ty};ya=function(){};ya.prototype.get=function(){};ya.prototype.put=function(){};ya.prototype.size=function(){};ya.prototype.values=function(){};ya.prototype.entrySet=function(){};eyt=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t}(ya);rk.prototype=new Error;rk.prototype.name="OperationNotSupported";vg.prototype=new uu;vg.prototype.contains=function(){};yg=function(n){function t(){n.call(this);this.array_=[];arguments[0]instanceof uu&&this.addAll(arguments[0])}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.contains=function(n){for(var t=0,i=this.array_.length;t<i;t++)if(this.array_[t]===n)return!0;return!1},t.prototype.add=function(n){return!this.contains(n)&&(this.array_.push(n),!0)},t.prototype.addAll=function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.remove=function(){throw new Error;},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t},t.prototype.iterator=function(){return new oyt(this)},t}(vg);oyt=function(n){function t(t){n.call(this);this.hashSet_=t;this.position_=0}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new vp;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new rk;},t}(ny);cf.prototype=new eyt;cf.prototype.get=function(n){for(var i,t=this.root_;null!==t;)if(i=n.compareTo(t.key),i<0)t=t.left;else{if(!(i>0))return t.value;t=t.right}return null};cf.prototype.put=function(n,t){var r,f,i,e,u;if(null===this.root_)return this.root_={key:n,value:t,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;i=this.root_;do if(r=i,(f=n.compareTo(i.key))<0)i=i.left;else{if(!(f>0))return e=i.value,i.value=t,e;i=i.right}while(null!==i);return u={key:n,left:null,right:null,value:t,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},f<0?r.left=u:r.right=u,this.fixAfterInsertion(u),this.size_++,null};cf.prototype.fixAfterInsertion=function(n){var t=this,i,r;for(n.color=1;null!=n&&n!==this.root_&&1===n.parent.color;)or(n)===wut(or(or(n)))?(i=hyt(or(or(n))),1===syt(i)?(lc(or(n),0),lc(i,0),lc(or(or(n)),1),n=or(or(n))):(n===hyt(or(n))&&(n=or(n),t.rotateLeft(n)),lc(or(n),0),lc(or(or(n)),1),t.rotateRight(or(or(n))))):(r=wut(or(or(n))),1===syt(r)?(lc(or(n),0),lc(r,0),lc(or(or(n)),1),n=or(or(n))):(n===wut(or(n))&&(n=or(n),t.rotateRight(n)),lc(or(n),0),lc(or(or(n)),1),t.rotateLeft(or(or(n)))));this.root_.color=0};cf.prototype.values=function(){var t=new e,n=this.getFirstEntry();if(null!==n)for(t.add(n.value);null!==(n=cf.successor(n));)t.add(n.value);return t};cf.prototype.entrySet=function(){var t=new yg,n=this.getFirstEntry();if(null!==n)for(t.add(n);null!==(n=cf.successor(n));)t.add(n);return t};cf.prototype.rotateLeft=function(n){if(null!=n){var t=n.right;n.right=t.left;null!=t.left&&(t.left.parent=n);t.parent=n.parent;null===n.parent?this.root_=t:n.parent.left===n?n.parent.left=t:n.parent.right=t;t.left=n;n.parent=t}};cf.prototype.rotateRight=function(n){if(null!=n){var t=n.left;n.left=t.right;null!=t.right&&(t.right.parent=n);t.parent=n.parent;null===n.parent?this.root_=t:n.parent.right===n?n.parent.right=t:n.parent.left=t;t.right=n;n.parent=t}};cf.prototype.getFirstEntry=function(){var n=this.root_;if(null!=n)for(;null!=n.left;)n=n.left;return n};cf.successor=function(n){var i,t,r;if(null===n)return null;if(null!==n.right){for(i=n.right;null!==i.left;)i=i.left;return i}for(t=n.parent,r=n;null!==t&&r===t.right;)r=t,t=t.parent;return t};cf.prototype.size=function(){return this.size_};pp=function(){};pp.prototype.interfaces_=function(){return[]};pp.prototype.getClass=function(){return pp};cyt.prototype=new vg;th.prototype=new cyt;th.prototype.contains=function(n){for(var t=0,i=this.array_.length;t<i;t++)if(0===this.array_[t].compareTo(n))return!0;return!1};th.prototype.add=function(n){if(this.contains(n))return!1;for(var t=0,i=this.array_.length;t<i;t++)if(1===this.array_[t].compareTo(n))return this.array_.splice(t,0,n),!0;return this.array_.push(n),!0};th.prototype.addAll=function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next());return!0};th.prototype.remove=function(){throw new rk;};th.prototype.size=function(){return this.array_.length};th.prototype.isEmpty=function(){return 0===this.array_.length};th.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};th.prototype.iterator=function(){return new uk(this)};uk=function(n){this.treeSet_=n;this.position_=0};uk.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new vp;return this.treeSet_.array_[this.position_++]};uk.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};uk.prototype.remove=function(){throw new rk;};vl=function(){};vl.sort=function(){var t,u,f,i,n=arguments[0],r;if(1===arguments.length)i=function(n,t){return n.compareTo(t)},n.sort(i);else if(2===arguments.length)f=arguments[1],i=function(n,t){return f.compare(n,t)},n.sort(i);else if(3===arguments.length)for((u=n.slice(arguments[1],arguments[2])).sort(),r=n.slice(0,arguments[1]).concat(u,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<r.length;t++)n.push(r[t]);else if(4===arguments.length)for(u=n.slice(arguments[1],arguments[2]),f=arguments[3],i=function(n,t){return f.compare(n,t)},u.sort(i),r=n.slice(0,arguments[1]).concat(u,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<r.length;t++)n.push(r[t])};vl.asList=function(n){for(var i=new e,t=0,r=n.length;t<r;t++)i.add(n[t]);return i};yi=function(){};yo={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};yo.P.get=function(){return 0};yo.L.get=function(){return 1};yo.A.get=function(){return 2};yo.FALSE.get=function(){return-1};yo.TRUE.get=function(){return-2};yo.DONTCARE.get=function(){return-3};yo.SYM_FALSE.get=function(){return"F"};yo.SYM_TRUE.get=function(){return"T"};yo.SYM_DONTCARE.get=function(){return"*"};yo.SYM_P.get=function(){return"0"};yo.SYM_L.get=function(){return"1"};yo.SYM_A.get=function(){return"2"};yi.prototype.interfaces_=function(){return[]};yi.prototype.getClass=function(){return yi};yi.toDimensionSymbol=function(n){switch(n){case yi.FALSE:return yi.SYM_FALSE;case yi.TRUE:return yi.SYM_TRUE;case yi.DONTCARE:return yi.SYM_DONTCARE;case yi.P:return yi.SYM_P;case yi.L:return yi.SYM_L;case yi.A:return yi.SYM_A}throw new ar("Unknown dimension value: "+n);};yi.toDimensionValue=function(n){switch(hp.toUpperCase(n)){case yi.SYM_FALSE:return yi.FALSE;case yi.SYM_TRUE:return yi.TRUE;case yi.SYM_DONTCARE:return yi.DONTCARE;case yi.SYM_P:return yi.P;case yi.SYM_L:return yi.L;case yi.SYM_A:return yi.A}throw new ar("Unknown dimension symbol: "+n);};Object.defineProperties(yi,yo);hs=function(){};hs.prototype.filter=function(){};hs.prototype.interfaces_=function(){return[]};hs.prototype.getClass=function(){return hs};po=function(){};po.prototype.filter=function(){};po.prototype.isDone=function(){};po.prototype.isGeometryChanged=function(){};po.prototype.interfaces_=function(){return[]};po.prototype.getClass=function(){return po};var gf=function(n){function t(t,i){if(n.call(this,i),this._geometries=t||[],n.hasNullElements(this._geometries))throw new ar("geometries must not contain null elements");}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var t=new l,n=0;n<this._geometries.length;n++)t.expandToInclude(this._geometries[n].getEnvelopeInternal());return t},t.prototype.getGeometryN=function(n){return this._geometries[n]},t.prototype.getSortIndex=function(){return n.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var i,n,r=new Array(this.getNumPoints()).fill(null),u=-1,t=0;t<this._geometries.length;t++)for(i=this._geometries[t].getCoordinates(),n=0;n<i.length;n++)r[++u]=i[n];return r},t.prototype.getArea=function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getArea();return t},t.prototype.equalsExact=function(){var f=this,i,u,r,t;if(2===arguments.length){if((i=arguments[0],u=arguments[1],!this.isEquivalentClass(i))||(r=i,this._geometries.length!==r._geometries.length))return!1;for(t=0;t<this._geometries.length;t++)if(!f._geometries[t].equalsExact(r._geometries[t],u))return!1;return!0}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var n=0;n<this._geometries.length;n++)this._geometries[n].normalize();vl.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var n=yi.FALSE,t=0;t<this._geometries.length;t++)n=Math.max(n,this._geometries[t].getBoundaryDimension());return n},t.prototype.getDimension=function(){for(var n=yi.FALSE,t=0;t<this._geometries.length;t++)n=Math.max(n,this._geometries[t].getDimension());return n},t.prototype.getLength=function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getLength();return t},t.prototype.getNumPoints=function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getNumPoints();return t},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var i=this._geometries.length,t=new Array(i).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(t)},t.prototype.compareToSameClass=function(){var f=this;if(1===arguments.length){var e=arguments[0],o=new th(vl.asList(this._geometries)),s=new th(vl.asList(e._geometries));return this.compare(o,s)}if(2===arguments.length){for(var h=arguments[0],c=arguments[1],t=h,i=this.getNumGeometries(),r=t.getNumGeometries(),n=0;n<i&&n<r;){var l=f.getGeometryN(n),a=t.getGeometryN(n),u=l.compareToSameClass(a,c);if(0!==u)return u;n++}return n<i?1:n<r?-1:0}},t.prototype.apply=function(){var n=this,s,t,i,r,e,u,o,f;if(w(arguments[0],nh))for(s=arguments[0],t=0;t<this._geometries.length;t++)n._geometries[t].apply(s);else if(w(arguments[0],po)){if(i=arguments[0],0===this._geometries.length)return null;for(r=0;r<this._geometries.length&&(n._geometries[r].apply(i),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(w(arguments[0],hs))for(e=arguments[0],e.filter(this),u=0;u<this._geometries.length;u++)n._geometries[u].apply(e);else if(w(arguments[0],ph))for(o=arguments[0],o.filter(this),f=0;f<this._geometries.length;f++)n._geometries[f].apply(o)},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),it.shouldNeverReachHere(),null},t.prototype.clone=function(){var i=n.prototype.clone.call(this),t;for(i._geometries=new Array(this._geometries.length).fill(null),t=0;t<this._geometries.length;t++)i._geometries[t]=this._geometries[t].clone();return i},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=this._geometries[n].copy();return new t(i,this._factory)},t.prototype.isEmpty=function(){for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(t,i),t}(p),pa=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return p.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,i)}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?yi.FALSE:0},t.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var t=this._geometries.length,i=new Array(t).fill(null),n=0;n<this._geometries.length;n++)i[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(i)},t.prototype.getBoundary=function(){return new wo(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=this._geometries[n].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[pp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(t,i),t}(gf),wo=function(){var n,i,t,r;(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length)?(n=arguments[0],i=to.MOD2_BOUNDARY_RULE,this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i):2===arguments.length&&(t=arguments[0],r=arguments[1],this._geom=t,this._geomFact=t.getFactory(),this._bnRule=r)};wo.prototype.boundaryMultiLineString=function(n){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(n);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)};wo.prototype.getBoundary=function(){return this._geom instanceof pr?this.boundaryLineString(this._geom):this._geom instanceof pa?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};wo.prototype.boundaryLineString=function(n){return this._geom.isEmpty()?this.getEmptyMultiPoint():n.isClosed()?this._bnRule.isInBoundary(2)?n.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([n.getStartPoint(),n.getEndPoint()])};wo.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};wo.prototype.computeBoundaryCoordinates=function(n){var r=this,o=new e,i,t,u,f,s;for(this._endpointMap=new cf,i=0;i<n.getNumGeometries();i++)t=n.getGeometryN(i),0!==t.getNumPoints()&&(r.addEndpoint(t.getCoordinateN(0)),r.addEndpoint(t.getCoordinateN(t.getNumPoints()-1)));for(u=this._endpointMap.entrySet().iterator();u.hasNext();)f=u.next(),s=f.getValue().count,r._bnRule.isInBoundary(s)&&o.add(f.getKey());return ut.toCoordinateArray(o)};wo.prototype.addEndpoint=function(n){var t=this._endpointMap.get(n);null===t&&(t=new fk,this._endpointMap.put(n,t));t.count++};wo.prototype.interfaces_=function(){return[]};wo.prototype.getClass=function(){return wo};wo.getBoundary=function(){var n,t;if(1===arguments.length)return n=arguments[0],t=new wo(n),t.getBoundary();if(2===arguments.length){var i=arguments[0],r=arguments[1],u=new wo(i,r);return u.getBoundary()}};fk=function(){this.count=null};fk.prototype.interfaces_=function(){return[]};fk.prototype.getClass=function(){return fk};lyt=function(){};io=function(){};pg={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};io.prototype.interfaces_=function(){return[]};io.prototype.getClass=function(){return io};io.chars=function(n,t){for(var r=new Array(t).fill(null),i=0;i<t;i++)r[i]=n;return String(r)};io.getStackTrace=function(){if(1===arguments.length){var n=arguments[0],t=new ati,u=new cti(t);return n.printStackTrace(u),t.toString()}if(2===arguments.length){for(var f=arguments[0],e=arguments[1],i="",o=new lti(io.getStackTrace(f)),s=new yti(o),r=0;r<e;r++)try{i+=s.readLine()+io.NEWLINE}catch(n){if(!(n instanceof vti))throw n;it.shouldNeverReachHere()}return i}};io.split=function(n,t){for(var s,o,r,h=t.length,u=new e,i=""+n,f=i.indexOf(t);f>=0;)s=i.substring(0,f),u.add(s),f=(i=i.substring(f+h)).indexOf(t);for(i.length>0&&u.add(i),o=new Array(u.size()).fill(null),r=0;r<o.length;r++)o[r]=u.get(r);return o};io.toString=function(){if(1===arguments.length){var n=arguments[0];return io.SIMPLE_ORDINATE_FORMAT.format(n)}};io.spaces=function(n){return io.chars(" ",n)};pg.NEWLINE.get=function(){return rf.getProperty("line.separator")};pg.SIMPLE_ORDINATE_FORMAT.get=function(){return new lyt("0.#")};Object.defineProperties(io,pg);br=function(){};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};br.copyCoord=function(n,t,i,r){for(var f=Math.min(n.getDimension(),i.getDimension()),u=0;u<f;u++)i.setOrdinate(r,u,n.getOrdinate(t,u))};br.isRing=function(n){var t=n.size();return 0===t||!(t<=3)&&n.getOrdinate(0,st.X)===n.getOrdinate(t-1,st.X)&&n.getOrdinate(0,st.Y)===n.getOrdinate(t-1,st.Y)};br.isEqual=function(n,t){var u=n.size(),f,i,r,e,o;if(u!==t.size())return!1;for(f=Math.min(n.getDimension(),t.getDimension()),i=0;i<u;i++)for(r=0;r<f;r++)if(e=n.getOrdinate(i,r),o=t.getOrdinate(i,r),n.getOrdinate(i,r)!==t.getOrdinate(i,r)&&(!nt.isNaN(e)||!nt.isNaN(o)))return!1;return!0};br.extend=function(n,t,i){var f=n.create(i,t.getDimension()),r=t.size(),u;if(br.copy(t,0,f,0,r),r>0)for(u=r;u<i;u++)br.copy(t,r-1,f,u,1);return f};br.reverse=function(n){for(var i=n.size()-1,r=Math.trunc(i/2),t=0;t<=r;t++)br.swap(n,t,i-t)};br.swap=function(n,t,i){var r,u;if(t===i)return null;for(r=0;r<n.getDimension();r++)u=n.getOrdinate(t,r),n.setOrdinate(t,r,n.getOrdinate(i,r)),n.setOrdinate(i,r,u)};br.copy=function(n,t,i,r,u){for(var f=0;f<u;f++)br.copyCoord(n,t+f,i,r+f)};br.toString=function(){var r,u,f,n,t,i;if(1===arguments.length){if(r=arguments[0],u=r.size(),0===u)return"()";for(f=r.getDimension(),n=new us,n.append("("),t=0;t<u;t++)for(t>0&&n.append(" "),i=0;i<f;i++)i>0&&n.append(","),n.append(io.toString(r.getOrdinate(t,i)));return n.append(")"),n.toString()}};br.ensureValidRing=function(n,t){var i=t.size();return 0===i?t:i<=3?br.createClosedRing(n,t,4):t.getOrdinate(0,st.X)===t.getOrdinate(i-1,st.X)&&t.getOrdinate(0,st.Y)===t.getOrdinate(i-1,st.Y)?t:br.createClosedRing(n,t,i+1)};br.createClosedRing=function(n,t,i){var u=n.create(i,t.getDimension()),f=t.size(),r;for(br.copy(t,0,u,0,f),r=f;r<i;r++)br.copy(t,0,u,r,1);return u};pr=function(n){function t(t,i){n.call(this,i);this._points=null;this.init(t)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new l:this._points.expandEnvelope(new l)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return n.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var u=this,i,f,r,t;if(2===arguments.length){if((i=arguments[0],f=arguments[1],!this.isEquivalentClass(i))||(r=i,this._points.size()!==r._points.size()))return!1;for(t=0;t<this._points.size();t++)if(!u.equal(u._points.getCoordinate(t),r._points.getCoordinate(t),f))return!1;return!0}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i,n=this,t=0;t<Math.trunc(this._points.size()/2);t++)if(i=n._points.size()-1-t,!n._points.getCoordinate(t).equals(n._points.getCoordinate(i)))return n._points.getCoordinate(t).compareTo(n._points.getCoordinate(i))>0&&br.reverse(n._points),null},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?yi.FALSE:0},t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return o.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var n=this._points.copy();return br.reverse(n),this.getFactory().createLineString(n)},t.prototype.compareToSameClass=function(){var u=this,r;if(1===arguments.length){for(var f=arguments[0],i=f,n=0,t=0;n<this._points.size()&&t<i._points.size();){if(r=u._points.getCoordinate(n).compareTo(i._points.getCoordinate(t)),0!==r)return r;n++;t++}return n<this._points.size()?1:t<i._points.size()?-1:0}if(2===arguments.length){var e=arguments[0],o=arguments[1],s=e;return o.compare(this._points,s._points)}},t.prototype.apply=function(){var r=this,u,n,t,i,f,e;if(w(arguments[0],nh))for(u=arguments[0],n=0;n<this._points.size();n++)u.filter(r._points.getCoordinate(n));else if(w(arguments[0],po)){if(t=arguments[0],0===this._points.size())return null;for(i=0;i<this._points.size()&&(t.filter(r._points,i),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],hs)?(f=arguments[0],f.filter(this)):w(arguments[0],ph)&&(e=arguments[0],e.filter(this))},t.prototype.getBoundary=function(){return new wo(this).getBoundary()},t.prototype.isEquivalentClass=function(n){return n instanceof t},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._points=this._points.clone(),t},t.prototype.getCoordinateN=function(n){return this._points.getCoordinate(n)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return 0===this._points.size()},t.prototype.init=function(n){if(null===n&&(n=this.getFactory().getCoordinateSequenceFactory().create([])),1===n.size())throw new ar("Invalid number of points in LineString (found "+n.size()+" - must be 0 or >= 2)");this._points=n},t.prototype.isCoordinate=function(n){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(n))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(n){return this.getFactory().createPoint(this._points.getCoordinate(n))},t.prototype.interfaces_=function(){return[pp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,i),t}(p);wp=function(){};wp.prototype.interfaces_=function(){return[]};wp.prototype.getClass=function(){return wp};oe=function(n){function t(t,i){n.call(this,i);this._coordinates=t||null;this.init(this._coordinates)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new l;var n=new l;return n.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),n},t.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),i))}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return yi.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){var n,t;if(1===arguments.length)return n=arguments[0],t=n,this.getCoordinate().compareTo(t.getCoordinate());if(2===arguments.length){var i=arguments[0],r=arguments[1],u=i;return r.compare(this._coordinates,u._coordinates)}},t.prototype.apply=function(){var t,n,i,r;if(w(arguments[0],nh)){if(t=arguments[0],this.isEmpty())return null;t.filter(this.getCoordinate())}else if(w(arguments[0],po)){if(n=arguments[0],this.isEmpty())return null;n.filter(this._coordinates,0);n.isGeometryChanged()&&this.geometryChanged()}else w(arguments[0],hs)?(i=arguments[0],i.filter(this)):w(arguments[0],ph)&&(r=arguments[0],r.filter(this))},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(n){null===n&&(n=this.getFactory().getCoordinateSequenceFactory().create([]));it.isTrue(n.size()<=1);this._coordinates=n},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[wp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,i),t}(p);ac=function(){};ac.prototype.interfaces_=function(){return[]};ac.prototype.getClass=function(){return ac};var su=function(n){function t(t,i,r){if(n.call(this,r),this._shell=null,this._holes=null,null===t&&(t=this.getFactory().createLinearRing()),null===i&&(i=[]),n.hasNullElements(i))throw new ar("holes must not contain null elements");if(t.isEmpty()&&n.hasNonEmptyElements(i))throw new ar("shell is empty but holes are not");this._shell=t;this._holes=i}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return n.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var n,u,t;if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),f=-1,e=this._shell.getCoordinates(),r=0;r<e.length;r++)i[++f]=e[r];for(n=0;n<this._holes.length;n++)for(u=this._holes[n].getCoordinates(),t=0;t<u.length;t++)i[++f]=u[t];return i},t.prototype.getArea=function(){var t=0,n;for(t+=Math.abs(o.signedArea(this._shell.getCoordinateSequence())),n=0;n<this._holes.length;n++)t-=Math.abs(o.signedArea(this._holes[n].getCoordinateSequence()));return t},t.prototype.isRectangle=function(){var u,f,e,o;if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var n=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),i=0;i<5;i++)if((u=n.getX(i),u!==t.getMinX()&&u!==t.getMaxX())||(f=n.getY(i),f!==t.getMinY()&&f!==t.getMaxY()))return!1;for(var s=n.getX(0),h=n.getY(0),r=1;r<=4;r++){if(e=n.getX(r),o=n.getY(r),e!==s==(o!==h))return!1;s=e;h=o}return!0},t.prototype.equalsExact=function(){var f=this,i,r,t;if(2===arguments.length){if(i=arguments[0],r=arguments[1],!this.isEquivalentClass(i))return!1;var u=i,e=this._shell,o=u._shell;if(!e.equalsExact(o,r)||this._holes.length!==u._holes.length)return!1;for(t=0;t<this._holes.length;t++)if(!f._holes[t].equalsExact(u._holes[t],r))return!1;return!0}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var r=this,i,n,u,t,f;if(0===arguments.length){for(this.normalize(this._shell,!0),i=0;i<this._holes.length;i++)r.normalize(r._holes[i],!1);vl.sort(this._holes)}else if(2===arguments.length){if(n=arguments[0],u=arguments[1],n.isEmpty())return null;t=new Array(n.getCoordinates().length-1).fill(null);rf.arraycopy(n.getCoordinates(),0,t,0,t.length);f=ut.minCoordinate(n.getCoordinates());ut.scroll(t,f);rf.arraycopy(t,0,n.getCoordinates(),0,t.length);n.getCoordinates()[t.length]=t[0];o.isCCW(n.getCoordinates())===u&&ut.reverse(n.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var t=0,n;for(t+=this._shell.getLength(),n=0;n<this._holes.length;n++)t+=this._holes[n].getLength();return t},t.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)t+=this._holes[n].getNumPoints();return t},t.prototype.reverse=function(){var t=this.copy(),n;for(t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)t._holes[n]=this._holes[n].copy().reverse();return t},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var o=this;if(1===arguments.length){var s=arguments[0],h=this._shell,c=s._shell;return h.compareToSameClass(c)}if(2===arguments.length){var l=arguments[0],i=arguments[1],t=l,a=this._shell,v=t._shell,r=a.compareToSameClass(v,i);if(0!==r)return r;for(var u=this.getNumInteriorRing(),f=t.getNumInteriorRing(),n=0;n<u&&n<f;){var y=o.getInteriorRingN(n),p=t.getInteriorRingN(n),e=y.compareToSameClass(p,i);if(0!==e)return e;n++}return n<u?1:n<f?-1:0}},t.prototype.apply=function(n){var u=this,t,i,r;if(w(n,nh))for(this._shell.apply(n),t=0;t<this._holes.length;t++)u._holes[t].apply(n);else if(w(n,po)){if(this._shell.apply(n),!n.isDone())for(i=0;i<this._holes.length&&(u._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(w(n,hs))n.filter(this);else if(w(n,ph))for(n.filter(this),this._shell.apply(n),r=0;r<this._holes.length;r++)u._holes[r].apply(n)},t.prototype.getBoundary=function(){var n,t;if(this.isEmpty())return this.getFactory().createMultiLineString();for(n=new Array(this._holes.length+1).fill(null),n[0]=this._shell,t=0;t<this._holes.length;t++)n[t+1]=this._holes[t];return n.length<=1?this.getFactory().createLinearRing(n[0].getCoordinateSequence()):this.getFactory().createMultiLineString(n)},t.prototype.clone=function(){var i=n.prototype.clone.call(this),t;for(i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null),t=0;t<this._holes.length;t++)i._holes[t]=this._holes[t].clone();return i},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var r=this._shell.copy(),i=new Array(this._holes.length).fill(null),n=0;n<i.length;n++)i[n]=this._holes[n].copy();return new t(r,i,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(n){return this._holes[n]},t.prototype.interfaces_=function(){return[ac]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,i),t}(p),bp=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return p.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,i)}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._geometries[t].getCoordinate()}return n.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return yi.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=this._geometries[n].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[wp]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(t,i),t}(gf),bh=function(n){function t(t,r){t instanceof i&&r instanceof rt&&(t=r.getCoordinateSequenceFactory().create(t));n.call(this,t,r);this.validateConstruction()}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return p.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return yi.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var n=this._points.copy();return br.reverse(n),this.getFactory().createLinearRing(n)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new ar("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new ar("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)");},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,r),t}(pr),kh=function(n){function t(){n.apply(this,arguments)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return p.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,i)}return n.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var i=this._geometries.length,t=new Array(i).fill(null),n=0;n<this._geometries.length;n++)t[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(t)},t.prototype.getBoundary=function(){var n,t,r,i,u;if(this.isEmpty())return this.getFactory().createMultiLineString();for(n=new e,t=0;t<this._geometries.length;t++)for(r=this._geometries[t].getBoundary(),i=0;i<r.getNumGeometries();i++)n.add(r.getGeometryN(i));return u=new Array(n.size()).fill(null),this.getFactory().createMultiLineString(n.toArray(u))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),n=0;n<i.length;n++)i[n]=this._geometries[n].copy();return new t(i,this._factory)},t.prototype.interfaces_=function(){return[ac]},t.prototype.getClass=function(){return t},i.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,i),t}(gf),bo=function(n){this._factory=n||null;this._isUserDataCopied=!1},wg={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};bo.prototype.setCopyUserData=function(n){this._isUserDataCopied=n};bo.prototype.edit=function(n,t){if(null===n)return null;var i=this.editInternal(n,t);return this._isUserDataCopied&&i.setUserData(n.getUserData()),i};bo.prototype.editInternal=function(n,t){return null===this._factory&&(this._factory=n.getFactory()),n instanceof gf?this.editGeometryCollection(n,t):n instanceof su?this.editPolygon(n,t):n instanceof oe||n instanceof pr?t.edit(n,this._factory):(it.shouldNeverReachHere("Unsupported Geometry class: "+n.getClass().getName()),null)};bo.prototype.editGeometryCollection=function(n,t){for(var u,i=t.edit(n,this._factory),r=new e,f=0;f<i.getNumGeometries();f++)u=this.edit(i.getGeometryN(f),t),null===u||u.isEmpty()||r.add(u);return i.getClass()===bp?this._factory.createMultiPoint(r.toArray([])):i.getClass()===pa?this._factory.createMultiLineString(r.toArray([])):i.getClass()===kh?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))};bo.prototype.editPolygon=function(n,t){var i=t.edit(n,this._factory),r,o,u,f;if(null===i&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;if(r=this.edit(i.getExteriorRing(),t),null===r||r.isEmpty())return this._factory.createPolygon();for(o=new e,u=0;u<i.getNumInteriorRing();u++)f=this.edit(i.getInteriorRingN(u),t),null===f||f.isEmpty()||o.add(f);return this._factory.createPolygon(r,o.toArray([]))};bo.prototype.interfaces_=function(){return[]};bo.prototype.getClass=function(){return bo};bo.GeometryEditorOperation=function(){};wg.NoOpGeometryOperation.get=function(){return kp};wg.CoordinateOperation.get=function(){return dp};wg.CoordinateSequenceOperation.get=function(){return gp};Object.defineProperties(bo,wg);kp=function(){};kp.prototype.edit=function(n){return n};kp.prototype.interfaces_=function(){return[bo.GeometryEditorOperation]};kp.prototype.getClass=function(){return kp};dp=function(){};dp.prototype.edit=function(n,t){var i=this.editCoordinates(n.getCoordinates(),n);return null===i?n:n instanceof bh?t.createLinearRing(i):n instanceof pr?t.createLineString(i):n instanceof oe?i.length>0?t.createPoint(i[0]):t.createPoint():n};dp.prototype.interfaces_=function(){return[bo.GeometryEditorOperation]};dp.prototype.getClass=function(){return dp};gp=function(){};gp.prototype.edit=function(n,t){return n instanceof bh?t.createLinearRing(this.edit(n.getCoordinateSequence(),n)):n instanceof pr?t.createLineString(this.edit(n.getCoordinateSequence(),n)):n instanceof oe?t.createPoint(this.edit(n.getCoordinateSequence(),n)):n};gp.prototype.interfaces_=function(){return[bo.GeometryEditorOperation]};gp.prototype.getClass=function(){return gp};kr=function(){var f=this,e,r,n,t,o,h,s,c,u;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0]))for(e=arguments[0],this._coordinates=new Array(e).fill(null),r=0;r<e;r++)f._coordinates[r]=new i;else if(w(arguments[0],st)){if(n=arguments[0],null===n)return this._coordinates=new Array(0).fill(null),null;for(this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null),t=0;t<this._coordinates.length;t++)f._coordinates[t]=n.getCoordinateCopy(t)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1]))o=arguments[0],h=arguments[1],this._coordinates=o,this._dimension=h,null===o&&(this._coordinates=new Array(0).fill(null));else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1]))for(s=arguments[0],c=arguments[1],this._coordinates=new Array(s).fill(null),this._dimension=c,u=0;u<s;u++)f._coordinates[u]=new i};but={serialVersionUID:{configurable:!0}};kr.prototype.setOrdinate=function(n,t,i){switch(t){case st.X:this._coordinates[n].x=i;break;case st.Y:this._coordinates[n].y=i;break;case st.Z:this._coordinates[n].z=i;break;default:throw new ar("invalid ordinateIndex");}};kr.prototype.size=function(){return this._coordinates.length};kr.prototype.getOrdinate=function(n,t){switch(t){case st.X:return this._coordinates[n].x;case st.Y:return this._coordinates[n].y;case st.Z:return this._coordinates[n].z}return nt.NaN};kr.prototype.getCoordinate=function(){var i,n,t;if(1===arguments.length)return i=arguments[0],this._coordinates[i];2===arguments.length&&(n=arguments[0],t=arguments[1],t.x=this._coordinates[n].x,t.y=this._coordinates[n].y,t.z=this._coordinates[n].z)};kr.prototype.getCoordinateCopy=function(n){return new i(this._coordinates[n])};kr.prototype.getDimension=function(){return this._dimension};kr.prototype.getX=function(n){return this._coordinates[n].x};kr.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=this._coordinates[n].clone();return new kr(t,this._dimension)};kr.prototype.expandEnvelope=function(n){for(var t=0;t<this._coordinates.length;t++)n.expandToInclude(this._coordinates[t]);return n};kr.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)t[n]=this._coordinates[n].copy();return new kr(t,this._dimension)};kr.prototype.toString=function(){var n,t;if(this._coordinates.length>0){for(n=new us(17*this._coordinates.length),n.append("("),n.append(this._coordinates[0]),t=1;t<this._coordinates.length;t++)n.append(", "),n.append(this._coordinates[t]);return n.append(")"),n.toString()}return"()"};kr.prototype.getY=function(n){return this._coordinates[n].y};kr.prototype.toCoordinateArray=function(){return this._coordinates};kr.prototype.interfaces_=function(){return[st,co]};kr.prototype.getClass=function(){return kr};but.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(kr,but);ih=function(){};bg={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ih.prototype.readResolve=function(){return ih.instance()};ih.prototype.create=function(){var i,r,t,n;if(1===arguments.length){if(arguments[0]instanceof Array)return i=arguments[0],new kr(i);if(w(arguments[0],st))return r=arguments[0],new kr(r)}else if(2===arguments.length)return t=arguments[0],n=arguments[1],n>3&&(n=3),n<2?new kr(t):new kr(t,n)};ih.prototype.interfaces_=function(){return[wv,co]};ih.prototype.getClass=function(){return ih};ih.instance=function(){return ih.instanceObject};bg.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};bg.instanceObject.get=function(){return new ih};Object.defineProperties(ih,bg);var ayt=function(n){function t(){n.call(this);this.map_=new Map}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.get=function(n){return this.map_.get(n)||null},t.prototype.put=function(n,t){return this.map_.set(n,t),t},t.prototype.values=function(){for(var t=new e,i=this.map_.values(),n=i.next();!n.done;)t.add(n.value),n=i.next();return t},t.prototype.entrySet=function(){var n=new yg;return this.map_.entries().forEach(function(t){return n.add(t)}),n},t.prototype.size=function(){return this.map_.size()},t}(ya),wi=function n(){var t,r,i;(this._modelType=null,this._scale=null,0===arguments.length)?this._modelType=n.FLOATING:1===arguments.length&&(arguments[0]instanceof cs?(t=arguments[0],this._modelType=t,t===n.FIXED&&this.setScale(1)):"number"==typeof arguments[0]?(r=arguments[0],this._modelType=n.FIXED,this.setScale(r)):arguments[0]instanceof n&&(i=arguments[0],this._modelType=i._modelType,this._scale=i._scale))},kut={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};wi.prototype.equals=function(n){if(!(n instanceof wi))return!1;var t=n;return this._modelType===t._modelType&&this._scale===t._scale};wi.prototype.compareTo=function(n){var t=n,i=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return new fs(i).compareTo(new fs(r))};wi.prototype.getScale=function(){return this._scale};wi.prototype.isFloating=function(){return this._modelType===wi.FLOATING||this._modelType===wi.FLOATING_SINGLE};wi.prototype.getType=function(){return this._modelType};wi.prototype.toString=function(){var n="UNKNOWN";return this._modelType===wi.FLOATING?n="Floating":this._modelType===wi.FLOATING_SINGLE?n="Floating-Single":this._modelType===wi.FIXED&&(n="Fixed (Scale="+this.getScale()+")"),n};wi.prototype.makePrecise=function(){var n,t;if("number"==typeof arguments[0])return(n=arguments[0],nt.isNaN(n))?n:this._modelType===wi.FLOATING_SINGLE?n:this._modelType===wi.FIXED?Math.round(n*this._scale)/this._scale:n;if(arguments[0]instanceof i){if(t=arguments[0],this._modelType===wi.FLOATING)return null;t.x=this.makePrecise(t.x);t.y=this.makePrecise(t.y)}};wi.prototype.getMaximumSignificantDigits=function(){var n=16;return this._modelType===wi.FLOATING?n=16:this._modelType===wi.FLOATING_SINGLE?n=6:this._modelType===wi.FIXED&&(n=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),n};wi.prototype.setScale=function(n){this._scale=Math.abs(n)};wi.prototype.interfaces_=function(){return[co,ho]};wi.prototype.getClass=function(){return wi};wi.mostPrecise=function(n,t){return n.compareTo(t)>=0?n:t};kut.serialVersionUID.get=function(){return 0x6bee6404e9a25c00};kut.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(wi,kut);cs=function n(t){this._name=t||null;n.nameToTypeMap.put(t,this)};kg={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};cs.prototype.readResolve=function(){return cs.nameToTypeMap.get(this._name)};cs.prototype.toString=function(){return this._name};cs.prototype.interfaces_=function(){return[co]};cs.prototype.getClass=function(){return cs};kg.serialVersionUID.get=function(){return-552860263173159e4};kg.nameToTypeMap.get=function(){return new ayt};Object.defineProperties(cs,kg);wi.Type=cs;wi.FIXED=new cs("FIXED");wi.FLOATING=new cs("FLOATING");wi.FLOATING_SINGLE=new cs("FLOATING SINGLE");rt=function n(){this._precisionModel=new wi;this._SRID=0;this._coordinateSequenceFactory=n.getDefaultCoordinateSequenceFactory();0===arguments.length||(1===arguments.length?w(arguments[0],wv)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof wi&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))};dut={serialVersionUID:{configurable:!0}};rt.prototype.toGeometry=function(n){return n.isNull()?this.createPoint(null):n.getMinX()===n.getMaxX()&&n.getMinY()===n.getMaxY()?this.createPoint(new i(n.getMinX(),n.getMinY())):n.getMinX()===n.getMaxX()||n.getMinY()===n.getMaxY()?this.createLineString([new i(n.getMinX(),n.getMinY()),new i(n.getMaxX(),n.getMaxY())]):this.createPolygon(this.createLinearRing([new i(n.getMinX(),n.getMinY()),new i(n.getMinX(),n.getMaxY()),new i(n.getMaxX(),n.getMaxY()),new i(n.getMaxX(),n.getMinY()),new i(n.getMinX(),n.getMinY())]),null)};rt.prototype.createLineString=function(n){return n?n instanceof Array?new pr(this.getCoordinateSequenceFactory().create(n),this):w(n,st)?new pr(n,this):void 0:new pr(this.getCoordinateSequenceFactory().create([]),this)};rt.prototype.createMultiLineString=function(){if(0===arguments.length)return new pa(null,this);if(1===arguments.length){var n=arguments[0];return new pa(n,this)}};rt.prototype.buildGeometry=function(n){for(var r,u,t,i=null,f=!1,e=!1,o=n.iterator();o.hasNext();)r=o.next(),u=r.getClass(),null===i&&(i=u),u!==i&&(f=!0),r.isGeometryCollectionOrDerived()&&(e=!0);if(null===i)return this.createGeometryCollection();if(f||e)return this.createGeometryCollection(rt.toGeometryArray(n));if(t=n.iterator().next(),n.size()>1){if(t instanceof su)return this.createMultiPolygon(rt.toPolygonArray(n));if(t instanceof pr)return this.createMultiLineString(rt.toLineStringArray(n));if(t instanceof oe)return this.createMultiPoint(rt.toPointArray(n));it.shouldNeverReachHere("Unhandled class: "+t.getClass().getName())}return t};rt.prototype.createMultiPointFromCoords=function(n){return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)};rt.prototype.createPoint=function(){var n,t;if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof i)return n=arguments[0],this.createPoint(null!==n?this.getCoordinateSequenceFactory().create([n]):null);if(w(arguments[0],st))return t=arguments[0],new oe(t,this)}};rt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};rt.prototype.createPolygon=function(){var n,t,i,r,u;if(0===arguments.length)return new su(null,null,this);if(1===arguments.length){if(w(arguments[0],st))return n=arguments[0],this.createPolygon(this.createLinearRing(n));if(arguments[0]instanceof Array)return t=arguments[0],this.createPolygon(this.createLinearRing(t));if(arguments[0]instanceof bh)return i=arguments[0],this.createPolygon(i,null)}else if(2===arguments.length)return r=arguments[0],u=arguments[1],new su(r,u,this)};rt.prototype.getSRID=function(){return this._SRID};rt.prototype.createGeometryCollection=function(){if(0===arguments.length)return new gf(null,this);if(1===arguments.length){var n=arguments[0];return new gf(n,this)}};rt.prototype.createGeometry=function(n){return new bo(this).edit(n,{edit:function(){if(2===arguments.length){var n=arguments[0];return this._coordinateSequenceFactory.create(n)}}})};rt.prototype.getPrecisionModel=function(){return this._precisionModel};rt.prototype.createLinearRing=function(){var n,t;if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array)return n=arguments[0],this.createLinearRing(null!==n?this.getCoordinateSequenceFactory().create(n):null);if(w(arguments[0],st))return t=arguments[0],new bh(t,this)}};rt.prototype.createMultiPolygon=function(){if(0===arguments.length)return new kh(null,this);if(1===arguments.length){var n=arguments[0];return new kh(n,this)}};rt.prototype.createMultiPoint=function(){var f=this,e,i,n,r,t,u;if(0===arguments.length)return new bp(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return e=arguments[0],new bp(e,this);if(arguments[0]instanceof Array)return i=arguments[0],this.createMultiPoint(null!==i?this.getCoordinateSequenceFactory().create(i):null);if(w(arguments[0],st)){if(n=arguments[0],null===n)return this.createMultiPoint(new Array(0).fill(null));for(r=new Array(n.size()).fill(null),t=0;t<n.size();t++)u=f.getCoordinateSequenceFactory().create(1,n.getDimension()),br.copy(n,t,u,0,1),r[t]=f.createPoint(u);return this.createMultiPoint(r)}}};rt.prototype.interfaces_=function(){return[co]};rt.prototype.getClass=function(){return rt};rt.toMultiPolygonArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.toGeometryArray=function(n){if(null===n)return null;var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.getDefaultCoordinateSequenceFactory=function(){return ih.instance()};rt.toMultiLineStringArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.toLineStringArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.toMultiPointArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.toLinearRingArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.toPointArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.toPolygonArray=function(n){var t=new Array(n.size()).fill(null);return n.toArray(t)};rt.createPointFromInternalCoord=function(n,t){return t.getPrecisionModel().makePrecise(n),t.getFactory().createPoint(n)};dut.serialVersionUID.get=function(){return-0x5ea75f2051eeb400};Object.defineProperties(rt,dut);vyt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];ek=function(n){this.geometryFactory=n||new rt};ek.prototype.read=function(n){var i,t=(i="string"==typeof n?JSON.parse(n):n).type;if(!rh[t])throw new Error("Unknown GeoJSON type: "+i.type);return-1!==vyt.indexOf(t)?rh[t].apply(this,[i.coordinates]):"GeometryCollection"===t?rh[t].apply(this,[i.geometries]):rh[t].apply(this,[i])};ek.prototype.write=function(n){var t=n.getGeometryType();if(!vc[t])throw new Error("Geometry is not supported");return vc[t].apply(this,[n])};var rh={Feature:function(n){var t={},i,r;for(i in n)t[i]=n[i];if(n.geometry){if(r=n.geometry.type,!rh[r])throw new Error("Unknown GeoJSON type: "+n.type);t.geometry=this.read(n.geometry)}return n.bbox&&(t.bbox=rh.bbox.apply(this,[n.bbox])),t},FeatureCollection:function(n){var t={},i;if(n.features)for(t.features=[],i=0;i<n.features.length;++i)t.features.push(this.read(n.features[i]));return n.bbox&&(t.bbox=this.parse.bbox.apply(this,[n.bbox])),t},coordinates:function(n){for(var u,r=[],t=0;t<n.length;++t)u=n[t],r.push(new i(u[0],u[1]));return r},bbox:function(n){return this.geometryFactory.createLinearRing([new i(n[0],n[1]),new i(n[2],n[1]),new i(n[2],n[3]),new i(n[0],n[3]),new i(n[0],n[1])])},Point:function(n){var t=new i(n[0],n[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(n){for(var i=[],t=0;t<n.length;++t)i.push(rh.Point.apply(this,[n[t]]));return this.geometryFactory.createMultiPoint(i)},LineString:function(n){var t=rh.coordinates.apply(this,[n]);return this.geometryFactory.createLineString(t)},MultiLineString:function(n){for(var i=[],t=0;t<n.length;++t)i.push(rh.LineString.apply(this,[n[t]]));return this.geometryFactory.createMultiLineString(i)},Polygon:function(n){for(var r=rh.coordinates.apply(this,[n[0]]),u=this.geometryFactory.createLinearRing(r),i=[],t=1;t<n.length;++t){var f=n[t],e=rh.coordinates.apply(this,[f]),o=this.geometryFactory.createLinearRing(e);i.push(o)}return this.geometryFactory.createPolygon(u,i)},MultiPolygon:function(n){for(var r,i=[],t=0;t<n.length;++t)r=n[t],i.push(rh.Polygon.apply(this,[r]));return this.geometryFactory.createMultiPolygon(i)},GeometryCollection:function(n){for(var r,i=[],t=0;t<n.length;++t)r=n[t],i.push(this.read(r));return this.geometryFactory.createGeometryCollection(i)}},vc={coordinate:function(n){return[n.x,n.y]},Point:function(n){return{type:"Point",coordinates:vc.coordinate.apply(this,[n.getCoordinate()])}},MultiPoint:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=vc.Point.apply(this,[r]),i.push(u.coordinates);return{type:"MultiPoint",coordinates:i}},LineString:function(n){for(var u,i=[],r=n.getCoordinates(),t=0;t<r.length;++t)u=r[t],i.push(vc.coordinate.apply(this,[u]));return{type:"LineString",coordinates:i}},MultiLineString:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=vc.LineString.apply(this,[r]),i.push(u.coordinates);return{type:"MultiLineString",coordinates:i}},Polygon:function(n){var i=[],f=vc.LineString.apply(this,[n._shell]),t,r,u;for(i.push(f.coordinates),t=0;t<n._holes.length;++t)r=n._holes[t],u=vc.LineString.apply(this,[r]),i.push(u.coordinates);return{type:"Polygon",coordinates:i}},MultiPolygon:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=vc.Polygon.apply(this,[r]),i.push(u.coordinates);return{type:"MultiPolygon",coordinates:i}},GeometryCollection:function(n){for(var r,u,i=[],t=0;t<n._geometries.length;++t)r=n._geometries[t],u=r.getGeometryType(),i.push(vc[u].apply(this,[r]));return{type:"GeometryCollection",geometries:i}}},gut=function(n){this.geometryFactory=n||new rt;this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new ek(this.geometryFactory)};gut.prototype.read=function(n){var t=this.parser.read(n);return this.precisionModel.getType()===wi.FIXED&&this.reducePrecision(t),t};gut.prototype.reducePrecision=function(n){var t,i;if(n.coordinate)this.precisionModel.makePrecise(n.coordinate);else if(n.points)for(t=0,i=n.points.length;t<i;t++)this.precisionModel.makePrecise(n.points[t]);else if(n.geometries)for(t=0,i=n.geometries.length;t<i;t++)this.reducePrecision(n.geometries[t])};nft=function(){this.parser=new ek(this.geometryFactory)};nft.prototype.write=function(n){return this.parser.write(n)};f=function(){};ok={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};f.prototype.interfaces_=function(){return[]};f.prototype.getClass=function(){return f};f.opposite=function(n){return n===f.LEFT?f.RIGHT:n===f.RIGHT?f.LEFT:n};ok.ON.get=function(){return 0};ok.LEFT.get=function(){return 1};ok.RIGHT.get=function(){return 2};Object.defineProperties(f,ok);dg.prototype=new Error;dg.prototype.name="EmptyStackException";uh.prototype=new vo;uh.prototype.add=function(n){return this.array_.push(n),!0};uh.prototype.get=function(n){if(n<0||n>=this.size())throw new Error;return this.array_[n]};uh.prototype.push=function(n){return this.array_.push(n),n};uh.prototype.pop=function(){if(0===this.array_.length)throw new dg;return this.array_.pop()};uh.prototype.peek=function(){if(0===this.array_.length)throw new dg;return this.array_[this.array_.length-1]};uh.prototype.empty=function(){return 0===this.array_.length};uh.prototype.isEmpty=function(){return this.empty()};uh.prototype.search=function(n){return this.array_.indexOf(n)};uh.prototype.size=function(){return this.array_.length};uh.prototype.toArray=function(){for(var t=[],n=0,i=this.array_.length;n<i;n++)t.push(this.array_[n]);return t};ls=function(){this._minIndex=-1;this._minCoord=null;this._minDe=null;this._orientedDe=null};ls.prototype.getCoordinate=function(){return this._minCoord};ls.prototype.getRightmostSide=function(n,t){var i=this.getRightmostSideOfSegment(n,t);return i<0&&(i=this.getRightmostSideOfSegment(n,t-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(n)),i};ls.prototype.findRightmostEdgeAtVertex=function(){var n=this._minDe.getEdge().getCoordinates();it.isTrue(this._minIndex>0&&this._minIndex<n.length,"rightmost point expected to be interior vertex of edge");var t=n[this._minIndex-1],i=n[this._minIndex+1],r=o.computeOrientation(this._minCoord,i,t),u=!1;(t.y<this._minCoord.y&&i.y<this._minCoord.y&&r===o.COUNTERCLOCKWISE||t.y>this._minCoord.y&&i.y>this._minCoord.y&&r===o.CLOCKWISE)&&(u=!0);u&&(this._minIndex=this._minIndex-1)};ls.prototype.getRightmostSideOfSegment=function(n,t){var i=n.getEdge().getCoordinates(),r;return t<0||t+1>=i.length?-1:i[t].y===i[t+1].y?-1:(r=f.LEFT,i[t].y<i[t+1].y&&(r=f.RIGHT),r)};ls.prototype.getEdge=function(){return this._orientedDe};ls.prototype.checkForRightmostCoordinate=function(n){for(var t=this,r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)(null===t._minCoord||r[i].x>t._minCoord.x)&&(t._minDe=n,t._minIndex=i,t._minCoord=r[i])};ls.prototype.findRightmostEdgeAtNode=function(){var n=this._minDe.getNode().getEdges();this._minDe=n.getRightmostEdge();this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};ls.prototype.findEdge=function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),i.isForward()&&this.checkForRightmostCoordinate(i);it.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing");0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex();this._orientedDe=this._minDe;this.getRightmostSide(this._minDe,this._minIndex)===f.LEFT&&(this._orientedDe=this._minDe.getSym())};ls.prototype.interfaces_=function(){return[]};ls.prototype.getClass=function(){return ls};dh=function(n){function t(r,u){n.call(this,t.msgWithCoord(r,u));this.pt=u?new i(u):null;this.name="TopologyException"}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(n,t){return t?n:n+" [ "+t+" ]"},t}(cc);sk=function(){this.array_=[]};sk.prototype.addLast=function(n){this.array_.push(n)};sk.prototype.removeFirst=function(){return this.array_.shift()};sk.prototype.isEmpty=function(){return 0===this.array_.length};lf=function(){this._finder=null;this._dirEdgeList=new e;this._nodes=new e;this._rightMostCoord=null;this._env=null;this._finder=new ls};lf.prototype.clearVisitedEdges=function(){for(var n=this._dirEdgeList.iterator();n.hasNext();)n.next().setVisited(!1)};lf.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};lf.prototype.computeNodeDepth=function(n){for(var i,u,f,t=null,r=n.getEdges().iterator();r.hasNext();)if(i=r.next(),i.isVisited()||i.getSym().isVisited()){t=i;break}if(null===t)throw new dh("unable to find edge to compute depths at "+n.getCoordinate());for(n.getEdges().computeDepths(t),u=n.getEdges().iterator();u.hasNext();)f=u.next(),f.setVisited(!0),this.copySymDepths(f)};lf.prototype.computeDepth=function(n){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(f.RIGHT,n);this.copySymDepths(t);this.computeDepths(t)};lf.prototype.create=function(n){this.addReachable(n);this._finder.findEdge(this._dirEdgeList);this._rightMostCoord=this._finder.getCoordinate()};lf.prototype.findResultEdges=function(){for(var n,t=this._dirEdgeList.iterator();t.hasNext();)n=t.next(),n.getDepth(f.RIGHT)>=1&&n.getDepth(f.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)};lf.prototype.computeDepths=function(n){var t=new yg,i=new sk,o=n.getNode(),r,f,e,u;for(i.addLast(o),t.add(o),n.setVisited(!0);!i.isEmpty();)for(r=i.removeFirst(),t.add(r),this.computeNodeDepth(r),f=r.getEdges().iterator();f.hasNext();)e=f.next().getSym(),e.isVisited()||(u=e.getNode(),t.contains(u)||(i.addLast(u),t.add(u)))};lf.prototype.compareTo=function(n){var t=n;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0};lf.prototype.getEnvelope=function(){var t,i,r,n;if(null===this._env){for(t=new l,i=this._dirEdgeList.iterator();i.hasNext();)for(r=i.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env};lf.prototype.addReachable=function(n){var t=new uh,i;for(t.add(n);!t.empty();)i=t.pop(),this.add(i,t)};lf.prototype.copySymDepths=function(n){var t=n.getSym();t.setDepth(f.LEFT,n.getDepth(f.RIGHT));t.setDepth(f.RIGHT,n.getDepth(f.LEFT))};lf.prototype.add=function(n,t){var i,r,u;for(n.setVisited(!0),this._nodes.add(n),i=n.getEdges().iterator();i.hasNext();)r=i.next(),this._dirEdgeList.add(r),u=r.getSym().getNode(),u.isVisited()||t.push(u)};lf.prototype.getNodes=function(){return this._nodes};lf.prototype.getDirectedEdges=function(){return this._dirEdgeList};lf.prototype.interfaces_=function(){return[ho]};lf.prototype.getClass=function(){return lf};ur=function n(){var e=this,r,u,i,t;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)r=arguments[0],this.init(r.length);else if(Number.isInteger(arguments[0]))u=arguments[0],this.init(1),this.location[f.ON]=u;else if(arguments[0]instanceof n&&(i=arguments[0],this.init(i.location.length),null!==i))for(t=0;t<this.location.length;t++)e.location[t]=i.location[t]}else if(3===arguments.length){var o=arguments[0],s=arguments[1],h=arguments[2];this.init(3);this.location[f.ON]=o;this.location[f.LEFT]=s;this.location[f.RIGHT]=h}};ur.prototype.setAllLocations=function(n){for(var t=0;t<this.location.length;t++)this.location[t]=n};ur.prototype.isNull=function(){for(var n=0;n<this.location.length;n++)if(this.location[n]!==r.NONE)return!1;return!0};ur.prototype.setAllLocationsIfNull=function(n){for(var t=0;t<this.location.length;t++)this.location[t]===r.NONE&&(this.location[t]=n)};ur.prototype.isLine=function(){return 1===this.location.length};ur.prototype.merge=function(n){var i,t;for(n.location.length>this.location.length&&(i=new Array(3).fill(null),i[f.ON]=this.location[f.ON],i[f.LEFT]=r.NONE,i[f.RIGHT]=r.NONE,this.location=i),t=0;t<this.location.length;t++)this.location[t]===r.NONE&&t<n.location.length&&(this.location[t]=n.location[t])};ur.prototype.getLocations=function(){return this.location};ur.prototype.flip=function(){if(this.location.length<=1)return null;var n=this.location[f.LEFT];this.location[f.LEFT]=this.location[f.RIGHT];this.location[f.RIGHT]=n};ur.prototype.toString=function(){var n=new us;return this.location.length>1&&n.append(r.toLocationSymbol(this.location[f.LEFT])),n.append(r.toLocationSymbol(this.location[f.ON])),this.location.length>1&&n.append(r.toLocationSymbol(this.location[f.RIGHT])),n.toString()};ur.prototype.setLocations=function(n,t,i){this.location[f.ON]=n;this.location[f.LEFT]=t;this.location[f.RIGHT]=i};ur.prototype.get=function(n){return n<this.location.length?this.location[n]:r.NONE};ur.prototype.isArea=function(){return this.location.length>1};ur.prototype.isAnyNull=function(){for(var n=0;n<this.location.length;n++)if(this.location[n]===r.NONE)return!0;return!1};ur.prototype.setLocation=function(){var n,t,i;1===arguments.length?(n=arguments[0],this.setLocation(f.ON,n)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.location[t]=i)};ur.prototype.init=function(n){this.location=new Array(n).fill(null);this.setAllLocations(r.NONE)};ur.prototype.isEqualOnSide=function(n,t){return this.location[t]===n.location[t]};ur.prototype.allPositionsEqual=function(n){for(var t=0;t<this.location.length;t++)if(this.location[t]!==n)return!1;return!0};ur.prototype.interfaces_=function(){return[]};ur.prototype.getClass=function(){return ur};di=function n(){var t,i,u,f;if(this.elt=new Array(2).fill(null),1===arguments.length)Number.isInteger(arguments[0])?(t=arguments[0],this.elt[0]=new ur(t),this.elt[1]=new ur(t)):arguments[0]instanceof n&&(i=arguments[0],this.elt[0]=new ur(i.elt[0]),this.elt[1]=new ur(i.elt[1]));else if(2===arguments.length)u=arguments[0],f=arguments[1],this.elt[0]=new ur(r.NONE),this.elt[1]=new ur(r.NONE),this.elt[u].setLocation(f);else if(3===arguments.length){var e=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new ur(e,o,s);this.elt[1]=new ur(e,o,s)}else if(4===arguments.length){var h=arguments[0],c=arguments[1],l=arguments[2],a=arguments[3];this.elt[0]=new ur(r.NONE,r.NONE,r.NONE);this.elt[1]=new ur(r.NONE,r.NONE,r.NONE);this.elt[h].setLocations(c,l,a)}};di.prototype.getGeometryCount=function(){var n=0;return this.elt[0].isNull()||n++,this.elt[1].isNull()||n++,n};di.prototype.setAllLocations=function(n,t){this.elt[n].setAllLocations(t)};di.prototype.isNull=function(n){return this.elt[n].isNull()};di.prototype.setAllLocationsIfNull=function(){var n,t,i;1===arguments.length?(n=arguments[0],this.setAllLocationsIfNull(0,n),this.setAllLocationsIfNull(1,n)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.elt[t].setAllLocationsIfNull(i))};di.prototype.isLine=function(n){return this.elt[n].isLine()};di.prototype.merge=function(n){for(var i=this,t=0;t<2;t++)null===i.elt[t]&&null!==n.elt[t]?i.elt[t]=new ur(n.elt[t]):i.elt[t].merge(n.elt[t])};di.prototype.flip=function(){this.elt[0].flip();this.elt[1].flip()};di.prototype.getLocation=function(){var n,t,i;return 1===arguments.length?(n=arguments[0],this.elt[n].get(f.ON)):2===arguments.length?(t=arguments[0],i=arguments[1],this.elt[t].get(i)):void 0};di.prototype.toString=function(){var n=new us;return null!==this.elt[0]&&(n.append("A:"),n.append(this.elt[0].toString())),null!==this.elt[1]&&(n.append(" B:"),n.append(this.elt[1].toString())),n.toString()};di.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var n=arguments[0];return this.elt[n].isArea()}};di.prototype.isAnyNull=function(n){return this.elt[n].isAnyNull()};di.prototype.setLocation=function(){var n,t;if(2===arguments.length)n=arguments[0],t=arguments[1],this.elt[n].setLocation(f.ON,t);else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this.elt[i].setLocation(r,u)}};di.prototype.isEqualOnSide=function(n,t){return this.elt[0].isEqualOnSide(n.elt[0],t)&&this.elt[1].isEqualOnSide(n.elt[1],t)};di.prototype.allPositionsEqual=function(n,t){return this.elt[n].allPositionsEqual(t)};di.prototype.toLine=function(n){this.elt[n].isArea()&&(this.elt[n]=new ur(this.elt[n].location[0]))};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};di.toLineLabel=function(n){for(var i=new di(r.NONE),t=0;t<2;t++)i.setLocation(t,n.getLocation(t));return i};nu=function(){this._startDe=null;this._maxNodeDegree=-1;this._edges=new e;this._pts=new e;this._label=new di(r.NONE);this._ring=null;this._isHole=null;this._shell=null;this._holes=new e;this._geometryFactory=null;var n=arguments[0],t=arguments[1];this._geometryFactory=t;this.computePoints(n);this.computeRing()};nu.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)t[n]=this._pts.get(n);this._ring=this._geometryFactory.createLinearRing(t);this._isHole=o.isCCW(this._ring.getCoordinates())};nu.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()};nu.prototype.computePoints=function(n){var i=this,t,r,u;this._startDe=n;t=n;r=!0;do{if(null===t)throw new dh("Found null DirectedEdge");if(t.getEdgeRing()===i)throw new dh("Directed Edge visited twice during ring-building at "+t.getCoordinate());i._edges.add(t);u=t.getLabel();it.isTrue(u.isArea());i.mergeLabel(u);i.addPoints(t.getEdge(),t.isForward(),r);r=!1;i.setEdgeRing(t,i);t=i.getNext(t)}while(t!==this._startDe)};nu.prototype.getLinearRing=function(){return this._ring};nu.prototype.getCoordinate=function(n){return this._pts.get(n)};nu.prototype.computeMaxNodeDegree=function(){var t=this,n,i;this._maxNodeDegree=0;n=this._startDe;do i=n.getNode().getEdges().getOutgoingDegree(t),i>t._maxNodeDegree&&(t._maxNodeDegree=i),n=t.getNext(n);while(n!==this._startDe);this._maxNodeDegree*=2};nu.prototype.addPoints=function(n,t,i){var r=n.getCoordinates(),e,u,o,f;if(t)for(e=1,i&&(e=0),u=e;u<r.length;u++)this._pts.add(r[u]);else for(o=r.length-2,i&&(o=r.length-1),f=o;f>=0;f--)this._pts.add(r[f])};nu.prototype.isHole=function(){return this._isHole};nu.prototype.setInResult=function(){var n=this._startDe;do n.getEdge().setInResult(!0),n=n.getNext();while(n!==this._startDe)};nu.prototype.containsPoint=function(n){var i=this.getLinearRing(),t;if(!i.getEnvelopeInternal().contains(n)||!o.isPointInRing(n,i.getCoordinates()))return!1;for(t=this._holes.iterator();t.hasNext();)if(t.next().containsPoint(n))return!1;return!0};nu.prototype.addHole=function(n){this._holes.add(n)};nu.prototype.isShell=function(){return null===this._shell};nu.prototype.getLabel=function(){return this._label};nu.prototype.getEdges=function(){return this._edges};nu.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};nu.prototype.getShell=function(){return this._shell};nu.prototype.mergeLabel=function(){var n;if(1===arguments.length)n=arguments[0],this.mergeLabel(n,0),this.mergeLabel(n,1);else if(2===arguments.length){var u=arguments[0],t=arguments[1],i=u.getLocation(t,f.RIGHT);if(i===r.NONE)return null;if(this._label.getLocation(t)===r.NONE)return this._label.setLocation(t,i),null}};nu.prototype.setShell=function(n){this._shell=n;null!==n&&n.addHole(this)};nu.prototype.toPolygon=function(n){for(var i=new Array(this._holes.size()).fill(null),t=0;t<this._holes.size();t++)i[t]=this._holes.get(t).getLinearRing();return n.createPolygon(this.getLinearRing(),i)};nu.prototype.interfaces_=function(){return[]};nu.prototype.getClass=function(){return nu};var pti=function(n){function t(){var t=arguments[0],i=arguments[1];n.call(this,t,i)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(n,t){n.setMinEdgeRing(t)},t.prototype.getNext=function(n){return n.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(nu),wti=function(n){function t(){var t=arguments[0],i=arguments[1];n.call(this,t,i)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var t=new e,n=this._startDe,i;do null===n.getMinEdgeRing()&&(i=new pti(n,this._geometryFactory),t.add(i)),n=n.getNext();while(n!==this._startDe);return t},t.prototype.setEdgeRing=function(n,t){n.setEdgeRing(t)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this._startDe;do n.getNode().getEdges().linkMinimalDirectedEdges(this),n=n.getNext();while(n!==this._startDe)},t.prototype.getNext=function(n){return n.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(nu),ro=function(){if((this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length)&&1===arguments.length){var n=arguments[0];this._label=n}};ro.prototype.setVisited=function(n){this._isVisited=n};ro.prototype.setInResult=function(n){this._isInResult=n};ro.prototype.isCovered=function(){return this._isCovered};ro.prototype.isCoveredSet=function(){return this._isCoveredSet};ro.prototype.setLabel=function(n){this._label=n};ro.prototype.getLabel=function(){return this._label};ro.prototype.setCovered=function(n){this._isCovered=n;this._isCoveredSet=!0};ro.prototype.updateIM=function(n){it.isTrue(this._label.getGeometryCount()>=2,"found partial label");this.computeIM(n)};ro.prototype.isInResult=function(){return this._isInResult};ro.prototype.isVisited=function(){return this._isVisited};ro.prototype.interfaces_=function(){return[]};ro.prototype.getClass=function(){return ro};hk=function(n){function t(){n.call(this);this._coord=null;this._edges=null;var t=arguments[0],i=arguments[1];this._coord=t;this._edges=i;this._label=new di(0,r.NONE)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();)if(n.next().getEdge().isInResult())return!0;return!1},t.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(){},t.prototype.computeMergedLocation=function(n,t){var i=r.NONE,u;return(i=this._label.getLocation(t),n.isNull(t))||(u=n.getLocation(t),i!==r.BOUNDARY&&(i=u)),i},t.prototype.setLabel=function(){if(2!==arguments.length)return n.prototype.setLabel.apply(this,arguments);var t=arguments[0],i=arguments[1];null===this._label?this._label=new di(t,i):this._label.setLocation(t,i)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var i=this,u,f,n,e,o;if(arguments[0]instanceof t)u=arguments[0],this.mergeLabel(u._label);else if(arguments[0]instanceof di)for(f=arguments[0],n=0;n<2;n++)e=i.computeMergedLocation(f,n),o=i._label.getLocation(n),o===r.NONE&&i._label.setLocation(n,e)},t.prototype.add=function(n){this._edges.insert(n);n.setNode(this)},t.prototype.setLabelBoundary=function(n){var i,t;if(null===this._label)return null;i=r.NONE;null!==this._label&&(i=this._label.getLocation(n));t=null;switch(i){case r.BOUNDARY:t=r.INTERIOR;break;case r.INTERIOR:default:t=r.BOUNDARY}this._label.setLocation(n,t)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ro);as=function(){this.nodeMap=new cf;this.nodeFact=null;var n=arguments[0];this.nodeFact=n};as.prototype.find=function(n){return this.nodeMap.get(n)};as.prototype.addNode=function(){var r,t,n,u;return arguments[0]instanceof i?(r=arguments[0],t=this.nodeMap.get(r),null===t&&(t=this.nodeFact.createNode(r),this.nodeMap.put(r,t)),t):arguments[0]instanceof hk?(n=arguments[0],u=this.nodeMap.get(n.getCoordinate()),null===u?(this.nodeMap.put(n.getCoordinate(),n),n):(u.mergeLabel(n),u)):void 0};as.prototype.print=function(n){for(var t=this.iterator();t.hasNext();)t.next().print(n)};as.prototype.iterator=function(){return this.nodeMap.values().iterator()};as.prototype.values=function(){return this.nodeMap.values()};as.prototype.getBoundaryNodes=function(n){for(var u,t=new e,i=this.iterator();i.hasNext();)u=i.next(),u.getLabel().getLocation(n)===r.BOUNDARY&&t.add(u);return t};as.prototype.add=function(n){var t=n.getCoordinate();this.addNode(t).add(n)};as.prototype.interfaces_=function(){return[]};as.prototype.getClass=function(){return as};nr=function(){};nw={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};nr.prototype.interfaces_=function(){return[]};nr.prototype.getClass=function(){return nr};nr.isNorthern=function(n){return n===nr.NE||n===nr.NW};nr.isOpposite=function(n,t){return n!==t&&2==(n-t+4)%4};nr.commonHalfPlane=function(n,t){if(n===t)return n;if(2==(n-t+4)%4)return-1;var i=n<t?n:t;return 0===i&&3===(n>t?n:t)?3:i};nr.isInHalfPlane=function(n,t){return t===nr.SE?n===nr.SE||n===nr.SW:n===t||n===t+1};nr.quadrant=function(){var u,r,n,t;if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){if(u=arguments[0],r=arguments[1],0===u&&0===r)throw new ar("Cannot compute the quadrant for point ( "+u+", "+r+" )");return u>=0?r>=0?nr.NE:nr.SE:r>=0?nr.NW:nr.SW}if(arguments[0]instanceof i&&arguments[1]instanceof i){if(n=arguments[0],t=arguments[1],t.x===n.x&&t.y===n.y)throw new ar("Cannot compute the quadrant for two identical points "+n);return t.x>=n.x?t.y>=n.y?nr.NE:nr.SE:t.y>=n.y?nr.NW:nr.SW}};nw.NE.get=function(){return 0};nw.NW.get=function(){return 1};nw.SW.get=function(){return 2};nw.SE.get=function(){return 3};Object.defineProperties(nr,nw);uf=function(){var n;if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)n=arguments[0],this._edge=n;else if(3===arguments.length){var t=arguments[0],i=arguments[1],r=arguments[2];this._edge=t;this.init(i,r);this._label=null}else if(4===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];this._edge=u;this.init(f,e);this._label=o}};uf.prototype.compareDirection=function(n){return this._dx===n._dx&&this._dy===n._dy?0:this._quadrant>n._quadrant?1:this._quadrant<n._quadrant?-1:o.computeOrientation(n._p0,n._p1,this._p1)};uf.prototype.getDy=function(){return this._dy};uf.prototype.getCoordinate=function(){return this._p0};uf.prototype.setNode=function(n){this._node=n};uf.prototype.print=function(n){var i=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),r=t.lastIndexOf("."),u=t.substring(r+1);n.print("  "+u+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+i+"   "+this._label)};uf.prototype.compareTo=function(n){var t=n;return this.compareDirection(t)};uf.prototype.getDirectedCoordinate=function(){return this._p1};uf.prototype.getDx=function(){return this._dx};uf.prototype.getLabel=function(){return this._label};uf.prototype.getEdge=function(){return this._edge};uf.prototype.getQuadrant=function(){return this._quadrant};uf.prototype.getNode=function(){return this._node};uf.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf(".");return"  "+n.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};uf.prototype.computeLabel=function(){};uf.prototype.init=function(n,t){this._p0=n;this._p1=t;this._dx=t.x-n.x;this._dy=t.y-n.y;this._quadrant=nr.quadrant(this._dx,this._dy);it.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")};uf.prototype.interfaces_=function(){return[ho]};uf.prototype.getClass=function(){return uf};gg=function(n){function t(){var t=arguments[0],r=arguments[1],i;(n.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)?this.init(t.getCoordinate(0),t.getCoordinate(1)):(i=t.getNumPoints()-1,this.init(t.getCoordinate(i),t.getCoordinate(i-1)));this.computeDirectedLabel()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(n){return this._depth[n]},t.prototype.setVisited=function(n){this._isVisited=n},t.prototype.computeDirectedLabel=function(){this._label=new di(this._edge.getLabel());this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(n,t){if(-999!==this._depth[n]&&this._depth[n]!==t)throw new dh("assigned depths do not match",this.getCoordinate());this._depth[n]=t},t.prototype.isInteriorAreaEdge=function(){for(var t=this,i=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,f.LEFT)===r.INTERIOR&&t._label.getLocation(n,f.RIGHT)===r.INTERIOR||(i=!1);return i},t.prototype.setNextMin=function(n){this._nextMin=n},t.prototype.print=function(t){n.prototype.print.call(this,t);t.print(" "+this._depth[f.LEFT]+"/"+this._depth[f.RIGHT]);t.print(" ("+this.getDepthDelta()+")");this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},t.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,r.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,r.EXTERIOR);return n&&t&&i},t.prototype.setEdgeRing=function(n){this._edgeRing=n},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},t.prototype.setInResult=function(n){this._isInResult=n},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(n){this.print(n);n.print(" ");this._isForward?this._edge.print(n):this._edge.printReverse(n)},t.prototype.setSym=function(n){this._sym=n},t.prototype.setVisitedEdge=function(n){this.setVisited(n);this._sym.setVisited(n)},t.prototype.setEdgeDepths=function(n,t){var i=this.getEdge().getDepthDelta(),r,u,e;this._isForward||(i=-i);r=1;n===f.LEFT&&(r=-1);u=f.opposite(n);e=t+i*r;this.setDepth(n,t);this.setDepth(u,e)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(n){this._next=n},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(n,t){return n===r.EXTERIOR&&t===r.INTERIOR?1:n===r.INTERIOR&&t===r.EXTERIOR?-1:0},t}(uf);iy=function(){};iy.prototype.createNode=function(n){return new hk(n,null)};iy.prototype.interfaces_=function(){return[]};iy.prototype.getClass=function(){return iy};yr=function(){if(this._edges=new e,this._nodes=null,this._edgeEndList=new e,0===arguments.length)this._nodes=new as(new iy);else if(1===arguments.length){var n=arguments[0];this._nodes=new as(n)}};yr.prototype.printEdges=function(n){var t,i;for(n.println("Edges:"),t=0;t<this._edges.size();t++)n.println("edge "+t+":"),i=this._edges.get(t),i.print(n),i.eiList.print(n)};yr.prototype.find=function(n){return this._nodes.find(n)};yr.prototype.addNode=function(){var n,t;return arguments[0]instanceof hk?(n=arguments[0],this._nodes.addNode(n)):arguments[0]instanceof i?(t=arguments[0],this._nodes.addNode(t)):void 0};yr.prototype.getNodeIterator=function(){return this._nodes.iterator()};yr.prototype.linkResultDirectedEdges=function(){for(var n=this._nodes.iterator();n.hasNext();)n.next().getEdges().linkResultDirectedEdges()};yr.prototype.debugPrintln=function(n){rf.out.println(n)};yr.prototype.isBoundaryNode=function(n,t){var u=this._nodes.find(t),i;return null===u?!1:(i=u.getLabel(),null!==i&&i.getLocation(n)===r.BOUNDARY)};yr.prototype.linkAllDirectedEdges=function(){for(var n=this._nodes.iterator();n.hasNext();)n.next().getEdges().linkAllDirectedEdges()};yr.prototype.matchInSameDirection=function(n,t,i,r){return!!n.equals(i)&&o.computeOrientation(n,t,r)===o.COLLINEAR&&nr.quadrant(n,t)===nr.quadrant(i,r)};yr.prototype.getEdgeEnds=function(){return this._edgeEndList};yr.prototype.debugPrint=function(n){rf.out.print(n)};yr.prototype.getEdgeIterator=function(){return this._edges.iterator()};yr.prototype.findEdgeInSameDirection=function(n,t){for(var f,i,r=this,u=0;u<this._edges.size();u++)if((f=r._edges.get(u),i=f.getCoordinates(),r.matchInSameDirection(n,t,i[0],i[1]))||r.matchInSameDirection(n,t,i[i.length-1],i[i.length-2]))return f;return null};yr.prototype.insertEdge=function(n){this._edges.add(n)};yr.prototype.findEdgeEnd=function(n){for(var i,t=this.getEdgeEnds().iterator();t.hasNext();)if(i=t.next(),i.getEdge()===n)return i;return null};yr.prototype.addEdges=function(n){for(var i,r,u,t=this,f=n.iterator();f.hasNext();)i=f.next(),t._edges.add(i),r=new gg(i,!0),u=new gg(i,!1),r.setSym(u),u.setSym(r),t.add(r),t.add(u)};yr.prototype.add=function(n){this._nodes.add(n);this._edgeEndList.add(n)};yr.prototype.getNodes=function(){return this._nodes.values()};yr.prototype.findEdge=function(n,t){for(var r,u,i=0;i<this._edges.size();i++)if(r=this._edges.get(i),u=r.getCoordinates(),n.equals(u[0])&&t.equals(u[1]))return r;return null};yr.prototype.interfaces_=function(){return[]};yr.prototype.getClass=function(){return yr};yr.linkResultDirectedEdges=function(n){for(var t=n.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()};se=function(){this._geometryFactory=null;this._shellList=new e;var n=arguments[0];this._geometryFactory=n};se.prototype.sortShellsAndHoles=function(n,t,i){for(var r,u=n.iterator();u.hasNext();)r=u.next(),r.isHole()?i.add(r):t.add(r)};se.prototype.computePolygons=function(n){for(var r,t=new e,i=n.iterator();i.hasNext();)r=i.next().toPolygon(this._geometryFactory),t.add(r);return t};se.prototype.placeFreeHoles=function(n,t){for(var i,u,r=t.iterator();r.hasNext();)if(i=r.next(),null===i.getShell()){if(u=this.findEdgeRingContaining(i,n),null===u)throw new dh("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(u)}};se.prototype.buildMinimalEdgeRings=function(n,t,i){for(var r,u,f,o=new e,s=n.iterator();s.hasNext();)r=s.next(),r.getMaxNodeDegree()>2?(r.linkDirectedEdgesForMinimalEdgeRings(),u=r.buildMinimalRings(),f=this.findShell(u),null!==f?(this.placePolygonHoles(f,u),t.add(f)):i.addAll(u)):o.add(r);return o};se.prototype.containsPoint=function(n){for(var t=this._shellList.iterator();t.hasNext();)if(t.next().containsPoint(n))return!0;return!1};se.prototype.buildMaximalEdgeRings=function(n){for(var t,u,i=new e,r=n.iterator();r.hasNext();)t=r.next(),t.isInResult()&&t.getLabel().isArea()&&null===t.getEdgeRing()&&(u=new wti(t,this._geometryFactory),i.add(u),u.setInResult());return i};se.prototype.placePolygonHoles=function(n,t){for(var r,i=t.iterator();i.hasNext();)r=i.next(),r.isHole()&&r.setShell(n)};se.prototype.getPolygons=function(){return this.computePolygons(this._shellList)};se.prototype.findEdgeRingContaining=function(n,t){for(var r,u=n.getLinearRing(),l=u.getEnvelopeInternal(),a=u.getCoordinateN(0),i=null,f=null,e=t.iterator();e.hasNext();){var s=e.next(),h=s.getLinearRing(),c=h.getEnvelopeInternal();null!==i&&(f=i.getLinearRing().getEnvelopeInternal());r=!1;c.contains(l)&&o.isPointInRing(a,h.getCoordinates())&&(r=!0);r&&(null===i||f.contains(c))&&(i=s)}return i};se.prototype.findShell=function(n){for(var t,i=0,r=null,u=n.iterator();u.hasNext();)t=u.next(),t.isHole()||(r=t,i++);return it.isTrue(i<=1,"found two shells in MinimalEdgeRing list"),r};se.prototype.add=function(){var n,i,r;if(1===arguments.length)n=arguments[0],this.add(n.getEdgeEnds(),n.getNodes());else if(2===arguments.length){i=arguments[0];r=arguments[1];yr.linkResultDirectedEdges(r);var u=this.buildMaximalEdgeRings(i),t=new e,f=this.buildMinimalEdgeRings(u,this._shellList,t);this.sortShellsAndHoles(f,this._shellList,t);this.placeFreeHoles(this._shellList,t)}};se.prototype.interfaces_=function(){return[]};se.prototype.getClass=function(){return se};ry=function(){};ry.prototype.getBounds=function(){};ry.prototype.interfaces_=function(){return[]};ry.prototype.getClass=function(){return ry};ko=function(){this._bounds=null;this._item=null;var n=arguments[0],t=arguments[1];this._bounds=n;this._item=t};ko.prototype.getItem=function(){return this._item};ko.prototype.getBounds=function(){return this._bounds};ko.prototype.interfaces_=function(){return[ry,co]};ko.prototype.getClass=function(){return ko};gh=function(){this._size=null;this._items=null;this._size=0;this._items=new e;this._items.add(null)};gh.prototype.poll=function(){if(this.isEmpty())return null;var n=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),n};gh.prototype.size=function(){return this._size};gh.prototype.reorder=function(n){for(var i=this,t=null,r=this._items.get(n);2*n<=this._size&&((t=2*n)!==i._size&&i._items.get(t+1).compareTo(i._items.get(t))<0&&t++,i._items.get(t).compareTo(r)<0);n=t)i._items.set(n,i._items.get(t));this._items.set(n,r)};gh.prototype.clear=function(){this._size=0;this._items.clear()};gh.prototype.isEmpty=function(){return 0===this._size};gh.prototype.add=function(n){this._items.add(null);this._size+=1;var t=this._size;for(this._items.set(0,n);n.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,n)};gh.prototype.interfaces_=function(){return[]};gh.prototype.getClass=function(){return gh};yc=function(){};yc.prototype.visitItem=function(){};yc.prototype.interfaces_=function(){return[]};yc.prototype.getClass=function(){return yc};wa=function(){};wa.prototype.insert=function(){};wa.prototype.remove=function(){};wa.prototype.query=function(){};wa.prototype.interfaces_=function(){return[]};wa.prototype.getClass=function(){return wa};fu=function(){if((this._childBoundables=new e,this._bounds=null,this._level=null,0!==arguments.length)&&1===arguments.length){var n=arguments[0];this._level=n}};tft={serialVersionUID:{configurable:!0}};fu.prototype.getLevel=function(){return this._level};fu.prototype.size=function(){return this._childBoundables.size()};fu.prototype.getChildBoundables=function(){return this._childBoundables};fu.prototype.addChildBoundable=function(n){it.isTrue(null===this._bounds);this._childBoundables.add(n)};fu.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};fu.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds};fu.prototype.interfaces_=function(){return[ry,co]};fu.prototype.getClass=function(){return fu};tft.serialVersionUID.get=function(){return 0x5a1e55ec41369800};Object.defineProperties(fu,tft);go=function(){};go.reverseOrder=function(){return{compare:function(n,t){return t.compareTo(n)}}};go.min=function(n){return go.sort(n),n.get(0)};go.sort=function(n,t){var i=n.toArray();t?vl.sort(i,t):vl.sort(i);for(var u=n.iterator(),r=0,f=i.length;r<f;r++)u.next(),u.set(i[r])};go.singletonList=function(n){var t=new e;return t.add(n),t};tu=function(){this._boundable1=null;this._boundable2=null;this._distance=null;this._itemDistance=null;var n=arguments[0],t=arguments[1],i=arguments[2];this._boundable1=n;this._boundable2=t;this._itemDistance=i;this._distance=this.distance()};tu.prototype.expandToQueue=function(n,t){var i=tu.isComposite(this._boundable1),r=tu.isComposite(this._boundable2);if(i&&r)return tu.area(this._boundable1)>tu.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,n,t),null):(this.expand(this._boundable2,this._boundable1,n,t),null);if(i)return this.expand(this._boundable1,this._boundable2,n,t),null;if(r)return this.expand(this._boundable2,this._boundable1,n,t),null;throw new ar("neither boundable is composite");};tu.prototype.isLeaves=function(){return!(tu.isComposite(this._boundable1)||tu.isComposite(this._boundable2))};tu.prototype.compareTo=function(n){var t=n;return this._distance<t._distance?-1:this._distance>t._distance?1:0};tu.prototype.expand=function(n,t,i,r){for(var e,f,u=n.getChildBoundables().iterator();u.hasNext();)e=u.next(),f=new tu(e,t,this._itemDistance),f.getDistance()<r&&i.add(f)};tu.prototype.getBoundable=function(n){return 0===n?this._boundable1:this._boundable2};tu.prototype.getDistance=function(){return this._distance};tu.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};tu.prototype.interfaces_=function(){return[ho]};tu.prototype.getClass=function(){return tu};tu.area=function(n){return n.getBounds().getArea()};tu.isComposite=function(n){return n instanceof fu};lu=function n(){var i,t;(this._root=null,this._built=!1,this._itemBoundables=new e,this._nodeCapacity=null,0===arguments.length)?(i=n.DEFAULT_NODE_CAPACITY,this._nodeCapacity=i):1===arguments.length&&(t=arguments[0],it.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t)};ck={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};lu.prototype.getNodeCapacity=function(){return this._nodeCapacity};lu.prototype.lastNode=function(n){return n.get(n.size()-1)};lu.prototype.size=function(){var r=this,n;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var u=arguments[0],t=0,i=u.getChildBoundables().iterator();i.hasNext();)n=i.next(),n instanceof fu?t+=r.size(n):n instanceof ko&&(t+=1);return t}};lu.prototype.removeItem=function(n,t){for(var r,i=null,u=n.getChildBoundables().iterator();u.hasNext();)r=u.next(),r instanceof ko&&r.getItem()===t&&(i=r);return null!==i&&(n.getChildBoundables().remove(i),!0)};lu.prototype.itemsTree=function(){var f=this,i,n,r;if(0===arguments.length)return this.build(),i=this.itemsTree(this._root),null===i?new e:i;if(1===arguments.length){for(var o=arguments[0],t=new e,u=o.getChildBoundables().iterator();u.hasNext();)n=u.next(),n instanceof fu?(r=f.itemsTree(n),null!==r&&t.add(r)):n instanceof ko?t.add(n.getItem()):it.shouldNeverReachHere();return t.size()<=0?null:t}};lu.prototype.insert=function(n,t){it.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built.");this._itemBoundables.add(new ko(n,t))};lu.prototype.boundablesAtLevel=function(){var s=this,o,i,f,n;if(1===arguments.length)return o=arguments[0],i=new e,this.boundablesAtLevel(o,this._root,i),i;if(3===arguments.length){var t=arguments[0],r=arguments[1],u=arguments[2];if(it.isTrue(t>-2),r.getLevel()===t)return u.add(r),null;for(f=r.getChildBoundables().iterator();f.hasNext();)n=f.next(),n instanceof fu?s.boundablesAtLevel(t,n,u):(it.isTrue(n instanceof ko),-1===t&&u.add(n));return null}};lu.prototype.query=function(){var i=this,r,u,f,h,n,t;if(1===arguments.length)return r=arguments[0],this.build(),u=new e,this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,u),u;if(2===arguments.length){if(f=arguments[0],h=arguments[1],this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),f)&&this.query(f,this._root,h)}else if(3===arguments.length)if(w(arguments[2],yc)&&arguments[0]instanceof Object&&arguments[1]instanceof fu)for(var c=arguments[0],b=arguments[1],l=arguments[2],a=b.getChildBoundables(),o=0;o<a.size();o++)n=a.get(o),i.getIntersectsOp().intersects(n.getBounds(),c)&&(n instanceof fu?i.query(c,n,l):n instanceof ko?l.visitItem(n.getItem()):it.shouldNeverReachHere());else if(w(arguments[2],vo)&&arguments[0]instanceof Object&&arguments[1]instanceof fu)for(var v=arguments[0],k=arguments[1],y=arguments[2],p=k.getChildBoundables(),s=0;s<p.size();s++)t=p.get(s),i.getIntersectsOp().intersects(t.getBounds(),v)&&(t instanceof fu?i.query(v,t,y):t instanceof ko?y.add(t.getItem()):it.shouldNeverReachHere())};lu.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1);this._itemBoundables=null;this._built=!0};lu.prototype.getRoot=function(){return this.build(),this._root};lu.prototype.remove=function(){var e=this,i,o,n,f,t;if(2===arguments.length)return i=arguments[0],o=arguments[1],this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.remove(i,this._root,o);if(3===arguments.length){var s=arguments[0],r=arguments[1],h=arguments[2],u=this.removeItem(r,h);if(u)return!0;for(n=null,f=r.getChildBoundables().iterator();f.hasNext();)if(t=f.next(),e.getIntersectsOp().intersects(t.getBounds(),s)&&t instanceof fu&&(u=e.remove(s,t,h))){n=t;break}return null!==n&&n.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(n),u}};lu.prototype.createHigherLevels=function(n,t){it.isTrue(!n.isEmpty());var i=this.createParentBoundables(n,t+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,t+1)};lu.prototype.depth=function(){var u=this,t,i;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var f=arguments[0],n=0,r=f.getChildBoundables().iterator();r.hasNext();)t=r.next(),t instanceof fu&&(i=u.depth(t),i>n&&(n=i));return n+1}};lu.prototype.createParentBoundables=function(n,t){var r=this,i,u,f,o;for(it.isTrue(!n.isEmpty()),i=new e,i.add(this.createNode(t)),u=new e(n),go.sort(u,this.getComparator()),f=u.iterator();f.hasNext();)o=f.next(),r.lastNode(i).getChildBoundables().size()===r.getNodeCapacity()&&i.add(r.createNode(t)),r.lastNode(i).addChildBoundable(o);return i};lu.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};lu.prototype.interfaces_=function(){return[co]};lu.prototype.getClass=function(){return lu};lu.compareDoubles=function(n,t){return n>t?1:n<t?-1:0};ck.IntersectsOp.get=function(){return yyt};ck.serialVersionUID.get=function(){return-0x35ef64c82d4c5400};ck.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(lu,ck);yyt=function(){};uy=function(){};uy.prototype.distance=function(){};uy.prototype.interfaces_=function(){return[]};uy.prototype.getClass=function(){return uy};var pyt=function(n){function t(i){i=i||t.DEFAULT_NODE_CAPACITY;n.call(this,i)}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(n,t){it.isTrue(n.length>0);for(var r=new e,i=0;i<n.length;i++)r.addAll(this.createParentBoundablesFromVerticalSlice(n[i],t));return r},t.prototype.createNode=function(n){return new wyt(n)},t.prototype.size=function(){return 0===arguments.length?n.prototype.size.call(this):n.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(2!==arguments.length)return n.prototype.insert.apply(this,arguments);var t=arguments[0],i=arguments[1];if(t.isNull())return null;n.prototype.insert.call(this,t,i)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(n,t){for(var u,o,s=Math.trunc(Math.ceil(n.size()/t)),r=new Array(t).fill(null),f=n.iterator(),i=0;i<t;i++)for(r[i]=new e,u=0;f.hasNext()&&u<s;)o=f.next(),r[i].add(o),u++;return r},t.prototype.query=function(){var t,i,r;if(1===arguments.length)return t=arguments[0],n.prototype.query.call(this,t);if(2===arguments.length)i=arguments[0],r=arguments[1],n.prototype.query.call(this,i,r);else if(3===arguments.length)if(w(arguments[2],yc)&&arguments[0]instanceof Object&&arguments[1]instanceof fu){var u=arguments[0],f=arguments[1],e=arguments[2];n.prototype.query.call(this,u,f,e)}else if(w(arguments[2],vo)&&arguments[0]instanceof Object&&arguments[1]instanceof fu){var o=arguments[0],s=arguments[1],h=arguments[2];n.prototype.query.call(this,o,s,h)}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(t,i){return n.prototype.createParentBoundables.call(this,t,i)},t.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],i=arguments[1];return n.prototype.remove.call(this,t,i)}return n.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return 0===arguments.length?n.prototype.depth.call(this):n.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(n,i){var u,r,f;return it.isTrue(!n.isEmpty()),u=Math.trunc(Math.ceil(n.size()/this.getNodeCapacity())),r=new e(n),go.sort(r,t.xComparator),f=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(u)))),this.createParentBoundablesFromVerticalSlices(f,i)},t.prototype.nearestNeighbour=function(){var e,o,s,n,f;if(1===arguments.length){if(w(arguments[0],uy))return e=arguments[0],o=new tu(this.getRoot(),this.getRoot(),e),this.nearestNeighbour(o);if(arguments[0]instanceof tu)return s=arguments[0],this.nearestNeighbour(s,nt.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof t&&w(arguments[1],uy)){var h=arguments[0],c=arguments[1],l=new tu(this.getRoot(),h.getRoot(),c);return this.nearestNeighbour(l)}if(arguments[0]instanceof tu&&"number"==typeof arguments[1]){var a=arguments[0],v=arguments[1],i=v,u=null,r=new gh;for(r.add(a);!r.isEmpty()&&i>0;){if(n=r.poll(),f=n.getDistance(),f>=i)break;n.isLeaves()?(i=f,u=n):n.expandToQueue(r,i)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var y=arguments[0],p=arguments[1],b=arguments[2],k=new ko(y,p),d=new tu(this.getRoot(),k,b);return this.nearestNeighbour(d)[0]}},t.prototype.interfaces_=function(){return[wa,co]},t.prototype.getClass=function(){return t},t.centreX=function(n){return t.avg(n.getMinX(),n.getMaxX())},t.avg=function(n,t){return(n+t)/2},t.centreY=function(n){return t.avg(n.getMinY(),n.getMaxY())},i.STRtreeNode.get=function(){return wyt},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[op]},compare:function(i,r){return n.compareDoubles(t.centreX(i.getBounds()),t.centreX(r.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[op]},compare:function(i,r){return n.compareDoubles(t.centreY(i.getBounds()),t.centreY(r.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[n.IntersectsOp]},intersects:function(n,t){return n.intersects(t)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,i),t}(lu),wyt=function(n){function t(){var t=arguments[0];n.call(this,t)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var i,n=null,t=this.getChildBoundables().iterator();t.hasNext();)i=t.next(),null===n?n=new l(i.getBounds()):n.expandToInclude(i.getBounds());return n},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(fu),he=function(){};he.prototype.interfaces_=function(){return[]};he.prototype.getClass=function(){return he};he.relativeSign=function(n,t){return n<t?-1:n>t?1:0};he.compare=function(n,t,i){if(t.equals2D(i))return 0;var r=he.relativeSign(t.x,i.x),u=he.relativeSign(t.y,i.y);switch(n){case 0:return he.compareValue(r,u);case 1:return he.compareValue(u,r);case 2:return he.compareValue(u,-r);case 3:return he.compareValue(-r,u);case 4:return he.compareValue(-r,-u);case 5:return he.compareValue(-u,-r);case 6:return he.compareValue(-u,r);case 7:return he.compareValue(r,-u)}return it.shouldNeverReachHere("invalid octant value"),0};he.compareValue=function(n,t){return n<0?-1:n>0?1:t<0?-1:t>0?1:0};pc=function(){this._segString=null;this.coord=null;this.segmentIndex=null;this._segmentOctant=null;this._isInterior=null;var n=arguments[0],t=arguments[1],r=arguments[2],u=arguments[3];this._segString=n;this.coord=new i(t);this.segmentIndex=r;this._segmentOctant=u;this._isInterior=!t.equals2D(n.getCoordinate(r))};pc.prototype.getCoordinate=function(){return this.coord};pc.prototype.print=function(n){n.print(this.coord);n.print(" seg # = "+this.segmentIndex)};pc.prototype.compareTo=function(n){var t=n;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:he.compare(this._segmentOctant,this.coord,t.coord)};pc.prototype.isEndPoint=function(n){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===n};pc.prototype.isInterior=function(){return this._isInterior};pc.prototype.interfaces_=function(){return[ho]};pc.prototype.getClass=function(){return pc};af=function(){this._nodeMap=new cf;this._edge=null;var n=arguments[0];this._edge=n};af.prototype.getSplitCoordinates=function(){var r=new ik,n,t,i;for(this.addEndpoints(),n=this.iterator(),t=n.next();n.hasNext();)i=n.next(),this.addEdgeCoordinates(t,i,r),t=i;return r.toCoordinateArray()};af.prototype.addCollapsedNodes=function(){var n=new e,t,i;for(this.findCollapsesFromInsertedNodes(n),this.findCollapsesFromExistingVertices(n),t=n.iterator();t.hasNext();)i=t.next().intValue(),this.add(this._edge.getCoordinate(i),i)};af.prototype.print=function(n){n.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(n)};af.prototype.findCollapsesFromExistingVertices=function(n){for(var i,r,t=0;t<this._edge.size()-2;t++)i=this._edge.getCoordinate(t),r=this._edge.getCoordinate(t+2),i.equals2D(r)&&n.add(new fs(t+1))};af.prototype.addEdgeCoordinates=function(n,t,r){var f=this._edge.getCoordinate(t.segmentIndex),e=t.isInterior()||!t.coord.equals2D(f),u;for(r.add(new i(n.coord),!1),u=n.segmentIndex+1;u<=t.segmentIndex;u++)r.add(this._edge.getCoordinate(u));e&&r.add(new i(t.coord))};af.prototype.iterator=function(){return this._nodeMap.values().iterator()};af.prototype.addSplitEdges=function(n){var t,i,r,u;for(this.addEndpoints(),this.addCollapsedNodes(),t=this.iterator(),i=t.next();t.hasNext();)r=t.next(),u=this.createSplitEdge(i,r),n.add(u),i=r};af.prototype.findCollapseIndex=function(n,t,i){if(!n.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-n.segmentIndex;return t.isInterior()||r--,1===r&&(i[0]=n.segmentIndex+1,!0)};af.prototype.findCollapsesFromInsertedNodes=function(n){for(var i,r=new Array(1).fill(null),t=this.iterator(),u=t.next();t.hasNext();)i=t.next(),this.findCollapseIndex(u,i,r)&&n.add(new fs(r[0])),u=i};af.prototype.getEdge=function(){return this._edge};af.prototype.addEndpoints=function(){var n=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0);this.add(this._edge.getCoordinate(n),n)};af.prototype.createSplitEdge=function(n,t){var e=t.segmentIndex-n.segmentIndex+2,s=this._edge.getCoordinate(t.segmentIndex),o=t.isInterior()||!t.coord.equals2D(s),r,u,f;for(o||e--,r=new Array(e).fill(null),u=0,r[u++]=new i(n.coord),f=n.segmentIndex+1;f<=t.segmentIndex;f++)r[u++]=this._edge.getCoordinate(f);return o&&(r[u]=new i(t.coord)),new dr(r,this._edge.getData())};af.prototype.add=function(n,t){var i=new pc(this._edge,n,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(i);return null!==r?(it.isTrue(r.coord.equals2D(n),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(i,i),i)};af.prototype.checkSplitEdgesCorrectness=function(n){var t=this._edge.getCoordinates(),u=n.get(0).getCoordinate(0),i,r;if(!u.equals2D(t[0]))throw new cc("bad split edge start point at "+u);if(i=n.get(n.size()-1).getCoordinates(),r=i[i.length-1],!r.equals2D(t[t.length-1]))throw new cc("bad split edge end point at "+r);};af.prototype.interfaces_=function(){return[]};af.prototype.getClass=function(){return af};ba=function(){};ba.prototype.interfaces_=function(){return[]};ba.prototype.getClass=function(){return ba};ba.octant=function(){var t,n,r,u;if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){if(t=arguments[0],n=arguments[1],0===t&&0===n)throw new ar("Cannot compute the octant for point ( "+t+", "+n+" )");return r=Math.abs(t),u=Math.abs(n),t>=0?n>=0?r>=u?0:1:r>=u?7:6:n>=0?r>=u?3:2:r>=u?4:5}if(arguments[0]instanceof i&&arguments[1]instanceof i){var f=arguments[0],e=arguments[1],o=e.x-f.x,s=e.y-f.y;if(0===o&&0===s)throw new ar("Cannot compute the octant for two identical points "+f);return ba.octant(o,s)}};fh=function(){};fh.prototype.getCoordinates=function(){};fh.prototype.size=function(){};fh.prototype.getCoordinate=function(){};fh.prototype.isClosed=function(){};fh.prototype.setData=function(){};fh.prototype.getData=function(){};fh.prototype.interfaces_=function(){return[]};fh.prototype.getClass=function(){return fh};tw=function(){};tw.prototype.addIntersection=function(){};tw.prototype.interfaces_=function(){return[fh]};tw.prototype.getClass=function(){return tw};dr=function(){this._nodeList=new af(this);this._pts=null;this._data=null;var n=arguments[0],t=arguments[1];this._pts=n;this._data=t};dr.prototype.getCoordinates=function(){return this._pts};dr.prototype.size=function(){return this._pts.length};dr.prototype.getCoordinate=function(n){return this._pts[n]};dr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};dr.prototype.getSegmentOctant=function(n){return n===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(n),this.getCoordinate(n+1))};dr.prototype.setData=function(n){this._data=n};dr.prototype.safeOctant=function(n,t){return n.equals2D(t)?0:ba.octant(n,t)};dr.prototype.getData=function(){return this._data};dr.prototype.addIntersection=function(){var n,t;if(2===arguments.length)n=arguments[0],t=arguments[1],this.addIntersectionNode(n,t);else if(4===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[3],e=new i(r.getIntersection(f));this.addIntersection(e,u)}};dr.prototype.toString=function(){return os.toLineString(new kr(this._pts))};dr.prototype.getNodeList=function(){return this._nodeList};dr.prototype.addIntersectionNode=function(n,t){var i=t,r=i+1,u;return r<this._pts.length&&(u=this._pts[r],n.equals2D(u)&&(i=r)),this._nodeList.add(n,i)};dr.prototype.addIntersections=function(n,t,i){for(var r=0;r<n.getIntersectionNum();r++)this.addIntersection(n,t,i,r)};dr.prototype.interfaces_=function(){return[tw]};dr.prototype.getClass=function(){return dr};dr.getNodedSubstrings=function(){var t,n,r;if(1===arguments.length)return t=arguments[0],n=new e,dr.getNodedSubstrings(t,n),n;if(2===arguments.length)for(var u=arguments[0],f=arguments[1],i=u.iterator();i.hasNext();)r=i.next(),r.getNodeList().addSplitEdges(f)};a=function(){var n;if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new i,this.p1=new i;else if(1===arguments.length)n=arguments[0],this.p0=new i(n.p0),this.p1=new i(n.p1);else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var t=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3];this.p0=new i(t,r);this.p1=new i(u,f)}};ift={serialVersionUID:{configurable:!0}};a.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};a.prototype.orientationIndex=function(){var u;if(arguments[0]instanceof a){var r=arguments[0],n=o.orientationIndex(this.p0,this.p1,r.p0),t=o.orientationIndex(this.p0,this.p1,r.p1);return n>=0&&t>=0||n<=0&&t<=0?Math.max(n,t):0}if(arguments[0]instanceof i)return u=arguments[0],o.orientationIndex(this.p0,this.p1,u)};a.prototype.toGeometry=function(n){return n.createLineString([this.p0,this.p1])};a.prototype.isVertical=function(){return this.p0.x===this.p1.x};a.prototype.equals=function(n){if(!(n instanceof a))return!1;var t=n;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)};a.prototype.intersection=function(n){var t=new al;return t.computeIntersection(this.p0,this.p1,n.p0,n.p1),t.hasIntersection()?t.getIntersection(0):null};a.prototype.project=function(){var n,s,t,e,o;if(arguments[0]instanceof i)return(n=arguments[0],n.equals(this.p0)||n.equals(this.p1))?new i(n):(s=this.projectionFactor(n),t=new i,t.x=this.p0.x+s*(this.p1.x-this.p0.x),t.y=this.p0.y+s*(this.p1.y-this.p0.y),t);if(arguments[0]instanceof a){var r=arguments[0],u=this.projectionFactor(r.p0),f=this.projectionFactor(r.p1);return u>=1&&f>=1?null:u<=0&&f<=0?null:(e=this.project(r.p0),u<0&&(e=this.p0),u>1&&(e=this.p1),o=this.project(r.p1),f<0&&(o=this.p0),f>1&&(o=this.p1),new a(e,o))}};a.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};a.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};a.prototype.getCoordinate=function(n){return 0===n?this.p0:this.p1};a.prototype.distancePerpendicular=function(n){return o.distancePointLinePerpendicular(n,this.p0,this.p1)};a.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};a.prototype.midPoint=function(){return a.midPoint(this.p0,this.p1)};a.prototype.projectionFactor=function(n){if(n.equals(this.p0))return 0;if(n.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,r=t*t+i*i;return r<=0?nt.NaN:((n.x-this.p0.x)*t+(n.y-this.p0.y)*i)/r};a.prototype.closestPoints=function(n){var u=this.intersection(n),f,e,o;if(null!==u)return[u,u];var t=new Array(2).fill(null),i=nt.MAX_VALUE,r=null,s=this.closestPoint(n.p0);return i=s.distance(n.p0),t[0]=s,t[1]=n.p0,f=this.closestPoint(n.p1),(r=f.distance(n.p1))<i&&(i=r,t[0]=f,t[1]=n.p1),e=n.closestPoint(this.p0),(r=e.distance(this.p0))<i&&(i=r,t[0]=this.p0,t[1]=e),o=n.closestPoint(this.p1),(r=o.distance(this.p1))<i&&(i=r,t[0]=this.p1,t[1]=o),t};a.prototype.closestPoint=function(n){var t=this.projectionFactor(n);return t>0&&t<1?this.project(n):this.p0.distance(n)<this.p1.distance(n)?this.p0:this.p1};a.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};a.prototype.getLength=function(){return this.p0.distance(this.p1)};a.prototype.compareTo=function(n){var t=n,i=this.p0.compareTo(t.p0);return 0!==i?i:this.p1.compareTo(t.p1)};a.prototype.reverse=function(){var n=this.p0;this.p0=this.p1;this.p1=n};a.prototype.equalsTopo=function(n){return this.p0.equals(n.p0)&&(this.p1.equals(n.p1)||this.p0.equals(n.p1))&&this.p1.equals(n.p0)};a.prototype.lineIntersection=function(n){try{return ao.intersection(this.p0,this.p1,n.p0,n.p1)}catch(n){if(!(n instanceof lp))throw n;}return null};a.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};a.prototype.pointAlongOffset=function(n,t){var s=this.p0.x+n*(this.p1.x-this.p0.x),h=this.p0.y+n*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,f=Math.sqrt(r*r+u*u),e=0,o=0;if(0!==t){if(f<=0)throw new Error("Cannot compute offset from zero-length line segment");e=t*r/f;o=t*u/f}return new i(s-o,h+e)};a.prototype.setCoordinates=function(){var n,t,i;1===arguments.length?(n=arguments[0],this.setCoordinates(n.p0,n.p1)):2===arguments.length&&(t=arguments[0],i=arguments[1],this.p0.x=t.x,this.p0.y=t.y,this.p1.x=i.x,this.p1.y=i.y)};a.prototype.segmentFraction=function(n){var t=this.projectionFactor(n);return t<0?t=0:(t>1||nt.isNaN(t))&&(t=1),t};a.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};a.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};a.prototype.distance=function(){var n,t;return arguments[0]instanceof a?(n=arguments[0],o.distanceLineLine(this.p0,this.p1,n.p0,n.p1)):arguments[0]instanceof i?(t=arguments[0],o.distancePointLine(t,this.p0,this.p1)):void 0};a.prototype.pointAlong=function(n){var t=new i;return t.x=this.p0.x+n*(this.p1.x-this.p0.x),t.y=this.p0.y+n*(this.p1.y-this.p0.y),t};a.prototype.hashCode=function(){var t=nt.doubleToLongBits(this.p0.x),i,n;return t^=31*nt.doubleToLongBits(this.p0.y),i=Math.trunc(t)^Math.trunc(t>>32),n=nt.doubleToLongBits(this.p1.x),n^=31*nt.doubleToLongBits(this.p1.y),i^Math.trunc(n)^Math.trunc(n>>32)};a.prototype.interfaces_=function(){return[ho,co]};a.prototype.getClass=function(){return a};a.midPoint=function(n,t){return new i((n.x+t.x)/2,(n.y+t.y)/2)};ift.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(a,ift);iw=function(){this.tempEnv1=new l;this.tempEnv2=new l;this._overlapSeg1=new a;this._overlapSeg2=new a};iw.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];n.getLineSegment(t,this._overlapSeg1);i.getLineSegment(r,this._overlapSeg2);this.overlap(this._overlapSeg1,this._overlapSeg2)}};iw.prototype.interfaces_=function(){return[]};iw.prototype.getClass=function(){return iw};ce=function(){this._pts=null;this._start=null;this._end=null;this._env=null;this._context=null;this._id=null;var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3];this._pts=n;this._start=t;this._end=i;this._context=r};ce.prototype.getLineSegment=function(n,t){t.p0=this._pts[n];t.p1=this._pts[n+1]};ce.prototype.computeSelect=function(n,t,i,r){var f=this._pts[t],e=this._pts[i],u;if(r.tempEnv1.init(f,e),i-t==1)return r.select(this,t),null;if(!n.intersects(r.tempEnv1))return null;u=Math.trunc((t+i)/2);t<u&&this.computeSelect(n,t,u,r);u<i&&this.computeSelect(n,u,i,r)};ce.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),i=0,n=this._start;n<=this._end;n++)t[i++]=this._pts[n];return t};ce.prototype.computeOverlaps=function(n,t){this.computeOverlapsInternal(this._start,this._end,n,n._start,n._end,t)};ce.prototype.setId=function(n){this._id=n};ce.prototype.select=function(n,t){this.computeSelect(n,this._start,this._end,t)};ce.prototype.getEnvelope=function(){if(null===this._env){var n=this._pts[this._start],t=this._pts[this._end];this._env=new l(n,t)}return this._env};ce.prototype.getEndIndex=function(){return this._end};ce.prototype.getStartIndex=function(){return this._start};ce.prototype.getContext=function(){return this._context};ce.prototype.getId=function(){return this._id};ce.prototype.computeOverlapsInternal=function(n,t,i,r,u,f){var s=this._pts[n],h=this._pts[t],c=i._pts[r],l=i._pts[u],o,e;if(t-n==1&&u-r==1)return f.overlap(this,n,i,r),null;if(f.tempEnv1.init(s,h),f.tempEnv2.init(c,l),!f.tempEnv1.intersects(f.tempEnv2))return null;o=Math.trunc((n+t)/2);e=Math.trunc((r+u)/2);n<o&&(r<e&&this.computeOverlapsInternal(n,o,i,r,e,f),e<u&&this.computeOverlapsInternal(n,o,i,e,u,f));o<t&&(r<e&&this.computeOverlapsInternal(o,t,i,r,e,f),e<u&&this.computeOverlapsInternal(o,t,i,e,u,f))};ce.prototype.interfaces_=function(){return[]};ce.prototype.getClass=function(){return ce};vs=function(){};vs.prototype.interfaces_=function(){return[]};vs.prototype.getClass=function(){return vs};vs.getChainStartIndices=function(n){var t=0,i=new e,r;i.add(new fs(t));do r=vs.findChainEnd(n,t),i.add(new fs(r)),t=r;while(t<n.length-1);return vs.toIntArray(i)};vs.findChainEnd=function(n,t){for(var u,r,i=t;i<n.length-1&&n[i].equals2D(n[i+1]);)i++;if(i>=n.length-1)return n.length-1;for(u=nr.quadrant(n[i],n[i+1]),r=t+1;r<n.length;){if(!n[r-1].equals2D(n[r])&&nr.quadrant(n[r-1],n[r])!==u)break;r++}return r-1};vs.getChains=function(){var i,f;if(1===arguments.length)return i=arguments[0],vs.getChains(i,null);if(2===arguments.length){for(var r=arguments[0],o=arguments[1],u=new e,t=vs.getChainStartIndices(r),n=0;n<t.length-1;n++)f=new ce(r,t[n],t[n+1],o),u.add(f);return u}};vs.toIntArray=function(n){for(var i=new Array(n.size()).fill(null),t=0;t<i.length;t++)i[t]=n.get(t).intValue();return i};yl=function(){};yl.prototype.computeNodes=function(){};yl.prototype.getNodedSubstrings=function(){};yl.prototype.interfaces_=function(){return[]};yl.prototype.getClass=function(){return yl};rw=function(){if((this._segInt=null,0!==arguments.length)&&1===arguments.length){var n=arguments[0];this.setSegmentIntersector(n)}};rw.prototype.setSegmentIntersector=function(n){this._segInt=n};rw.prototype.interfaces_=function(){return[yl]};rw.prototype.getClass=function(){return rw};var rft=function(n){function t(t){t?n.call(this,t):n.call(this);this._monoChains=new e;this._index=new pyt;this._idCounter=0;this._nodedSegStrings=null;this._nOverlaps=0}n&&(t.__proto__=n);t.prototype=Object.create(n&&n.prototype);t.prototype.constructor=t;var i={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return dr.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(n){for(var t,i=this,r=vs.getChains(n.getCoordinates(),n).iterator();r.hasNext();)t=r.next(),t.setId(i._idCounter++),i._index.insert(t.getEnvelope(),t),i._monoChains.add(t)},t.prototype.computeNodes=function(n){this._nodedSegStrings=n;for(var t=n.iterator();t.hasNext();)this.add(t.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var n,i,r,t=this,f=new byt(this._segInt),u=this._monoChains.iterator();u.hasNext();)for(n=u.next(),i=t._index.query(n.getEnvelope()).iterator();i.hasNext();)if(r=i.next(),r.getId()>n.getId()&&(n.computeOverlaps(r,f),t._nOverlaps++),t._segInt.isDone())return null},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},i.SegmentOverlapAction.get=function(){return byt},Object.defineProperties(t,i),t}(rw),byt=function(n){function t(){n.call(this);this._si=null;var t=arguments[0];this._si=t}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(4!==arguments.length)return n.prototype.overlap.apply(this,arguments);var t=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3],f=t.getContext(),e=r.getContext();this._si.processIntersections(f,i,e,u)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(iw),bi=function n(){var t,i,r;if(this._quadrantSegments=n.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=n.CAP_ROUND,this._joinStyle=n.JOIN_ROUND,this._mitreLimit=n.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=n.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)t=arguments[0],this.setQuadrantSegments(t);else if(2===arguments.length)i=arguments[0],r=arguments[1],this.setQuadrantSegments(i),this.setEndCapStyle(r);else if(4===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];this.setQuadrantSegments(u);this.setEndCapStyle(f);this.setJoinStyle(e);this.setMitreLimit(o)}},wc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};bi.prototype.getEndCapStyle=function(){return this._endCapStyle};bi.prototype.isSingleSided=function(){return this._isSingleSided};bi.prototype.setQuadrantSegments=function(n){this._quadrantSegments=n;0===this._quadrantSegments&&(this._joinStyle=bi.JOIN_BEVEL);this._quadrantSegments<0&&(this._joinStyle=bi.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments));n<=0&&(this._quadrantSegments=1);this._joinStyle!==bi.JOIN_ROUND&&(this._quadrantSegments=bi.DEFAULT_QUADRANT_SEGMENTS)};bi.prototype.getJoinStyle=function(){return this._joinStyle};bi.prototype.setJoinStyle=function(n){this._joinStyle=n};bi.prototype.setSimplifyFactor=function(n){this._simplifyFactor=n<0?0:n};bi.prototype.getSimplifyFactor=function(){return this._simplifyFactor};bi.prototype.getQuadrantSegments=function(){return this._quadrantSegments};bi.prototype.setEndCapStyle=function(n){this._endCapStyle=n};bi.prototype.getMitreLimit=function(){return this._mitreLimit};bi.prototype.setMitreLimit=function(n){this._mitreLimit=n};bi.prototype.setSingleSided=function(n){this._isSingleSided=n};bi.prototype.interfaces_=function(){return[]};bi.prototype.getClass=function(){return bi};bi.bufferDistanceError=function(n){var t=Math.PI/2/n;return 1-Math.cos(t/2)};wc.CAP_ROUND.get=function(){return 1};wc.CAP_FLAT.get=function(){return 2};wc.CAP_SQUARE.get=function(){return 3};wc.JOIN_ROUND.get=function(){return 1};wc.JOIN_MITRE.get=function(){return 2};wc.JOIN_BEVEL.get=function(){return 3};wc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};wc.DEFAULT_MITRE_LIMIT.get=function(){return 5};wc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01};Object.defineProperties(bi,wc);wr=function(n){this._distanceTol=null;this._isDeleted=null;this._angleOrientation=o.COUNTERCLOCKWISE;this._inputLine=n||null};uw={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};wr.prototype.isDeletable=function(n,t,i,r){var u=this._inputLine[n],f=this._inputLine[t],e=this._inputLine[i];return!!this.isConcave(u,f,e)&&!!this.isShallow(u,f,e,r)&&this.isShallowSampled(u,f,n,i,r)};wr.prototype.deleteShallowConcavities=function(){for(var u,t=this,i=1,n=this.findNextNonDeletedIndex(i),r=this.findNextNonDeletedIndex(n),f=!1;r<this._inputLine.length;)u=!1,t.isDeletable(i,n,r,t._distanceTol)&&(t._isDeleted[n]=wr.DELETE,u=!0,f=!0),i=u?r:n,n=t.findNextNonDeletedIndex(i),r=t.findNextNonDeletedIndex(n);return f};wr.prototype.isShallowConcavity=function(n,t,i,r){return o.computeOrientation(n,t,i)===this._angleOrientation&&o.distancePointLine(t,n,i)<r};wr.prototype.isShallowSampled=function(n,t,i,r,u){var e=Math.trunc((r-i)/wr.NUM_PTS_TO_CHECK),f;for(e<=0&&(e=1),f=i;f<r;f+=e)if(!this.isShallow(n,t,this._inputLine[f],u))return!1;return!0};wr.prototype.isConcave=function(n,t,i){return o.computeOrientation(n,t,i)===this._angleOrientation};wr.prototype.simplify=function(n){this._distanceTol=Math.abs(n);n<0&&(this._angleOrientation=o.CLOCKWISE);this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()};wr.prototype.findNextNonDeletedIndex=function(n){for(var t=n+1;t<this._inputLine.length&&this._isDeleted[t]===wr.DELETE;)t++;return t};wr.prototype.isShallow=function(n,t,i,r){return o.distancePointLine(t,n,i)<r};wr.prototype.collapseLine=function(){for(var t=new ik,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==wr.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()};wr.prototype.interfaces_=function(){return[]};wr.prototype.getClass=function(){return wr};wr.simplify=function(n,t){return new wr(n).simplify(t)};uw.INIT.get=function(){return 0};uw.DELETE.get=function(){return 1};uw.KEEP.get=function(){return 1};uw.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(wr,uw);ye=function(){this._ptList=null;this._precisionModel=null;this._minimimVertexDistance=0;this._ptList=new e};uft={COORDINATE_ARRAY_TYPE:{configurable:!0}};ye.prototype.getCoordinates=function(){return this._ptList.toArray(ye.COORDINATE_ARRAY_TYPE)};ye.prototype.setPrecisionModel=function(n){this._precisionModel=n};ye.prototype.addPt=function(n){var t=new i(n);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)};ye.prototype.revere=function(){};ye.prototype.addPts=function(n,t){var i,r;if(t)for(i=0;i<n.length;i++)this.addPt(n[i]);else for(r=n.length-1;r>=0;r--)this.addPt(n[r])};ye.prototype.isRedundant=function(n){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return n.distance(t)<this._minimimVertexDistance};ye.prototype.toString=function(){return(new rt).createLineString(this.getCoordinates()).toString()};ye.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var n=new i(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(n.equals(t))return null;this._ptList.add(n)};ye.prototype.setMinimumVertexDistance=function(n){this._minimimVertexDistance=n};ye.prototype.interfaces_=function(){return[]};ye.prototype.getClass=function(){return ye};uft.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(ye,uft);et=function(){};ka={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};et.prototype.interfaces_=function(){return[]};et.prototype.getClass=function(){return et};et.toDegrees=function(n){return 180*n/Math.PI};et.normalize=function(n){for(;n>Math.PI;)n-=et.PI_TIMES_2;for(;n<=-Math.PI;)n+=et.PI_TIMES_2;return n};et.angle=function(){var n;if(1===arguments.length)return n=arguments[0],Math.atan2(n.y,n.x);if(2===arguments.length){var t=arguments[0],i=arguments[1],r=i.x-t.x,u=i.y-t.y;return Math.atan2(u,r)}};et.isAcute=function(n,t,i){var r=n.x-t.x,u=n.y-t.y;return r*(i.x-t.x)+u*(i.y-t.y)>0};et.isObtuse=function(n,t,i){var r=n.x-t.x,u=n.y-t.y;return r*(i.x-t.x)+u*(i.y-t.y)<0};et.interiorAngle=function(n,t,i){var r=et.angle(t,n),u=et.angle(t,i);return Math.abs(u-r)};et.normalizePositive=function(n){if(n<0){for(;n<0;)n+=et.PI_TIMES_2;n>=et.PI_TIMES_2&&(n=0)}else{for(;n>=et.PI_TIMES_2;)n-=et.PI_TIMES_2;n<0&&(n=0)}return n};et.angleBetween=function(n,t,i){var r=et.angle(t,n),u=et.angle(t,i);return et.diff(r,u)};et.diff=function(n,t){var i=null;return(i=n<t?t-n:n-t)>Math.PI&&(i=2*Math.PI-i),i};et.toRadians=function(n){return n*Math.PI/180};et.getTurn=function(n,t){var i=Math.sin(t-n);return i>0?et.COUNTERCLOCKWISE:i<0?et.CLOCKWISE:et.NONE};et.angleBetweenOriented=function(n,t,i){var u=et.angle(t,n),r=et.angle(t,i)-u;return r<=-Math.PI?r+et.PI_TIMES_2:r>Math.PI?r-et.PI_TIMES_2:r};ka.PI_TIMES_2.get=function(){return 2*Math.PI};ka.PI_OVER_2.get=function(){return Math.PI/2};ka.PI_OVER_4.get=function(){return Math.PI/4};ka.COUNTERCLOCKWISE.get=function(){return o.COUNTERCLOCKWISE};ka.CLOCKWISE.get=function(){return o.CLOCKWISE};ka.NONE.get=function(){return o.COLLINEAR};Object.defineProperties(et,ka);sr=function n(){this._maxCurveSegmentError=0;this._filletAngleQuantum=null;this._closingSegLengthFactor=1;this._segList=null;this._distance=0;this._precisionModel=null;this._bufParams=null;this._li=null;this._s0=null;this._s1=null;this._s2=null;this._seg0=new a;this._seg1=new a;this._offset0=new a;this._offset1=new a;this._side=0;this._hasNarrowConcaveAngle=!1;var i=arguments[0],t=arguments[1],r=arguments[2];this._precisionModel=i;this._bufParams=t;this._li=new al;this._filletAngleQuantum=Math.PI/2/t.getQuadrantSegments();t.getQuadrantSegments()>=8&&t.getJoinStyle()===bi.JOIN_ROUND&&(this._closingSegLengthFactor=n.MAX_CLOSING_SEG_LEN_FACTOR);this.init(r)};fw={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};sr.prototype.addNextSegment=function(n,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=n,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=o.computeOrientation(this._s0,this._s1,this._s2),r=i===o.CLOCKWISE&&this._side===f.LEFT||i===o.COUNTERCLOCKWISE&&this._side===f.RIGHT;0===i?this.addCollinear(t):r?this.addOutsideTurn(i,t):this.addInsideTurn(i,t)};sr.prototype.addLineEndCap=function(n,t){var h=new a(n,t),e=new a,u,r,c,l;this.computeOffsetSegment(h,f.LEFT,this._distance,e);u=new a;this.computeOffsetSegment(h,f.RIGHT,this._distance,u);var v=t.x-n.x,y=t.y-n.y,s=Math.atan2(y,v);switch(this._bufParams.getEndCapStyle()){case bi.CAP_ROUND:this._segList.addPt(e.p1);this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,o.CLOCKWISE,this._distance);this._segList.addPt(u.p1);break;case bi.CAP_FLAT:this._segList.addPt(e.p1);this._segList.addPt(u.p1);break;case bi.CAP_SQUARE:r=new i;r.x=Math.abs(this._distance)*Math.cos(s);r.y=Math.abs(this._distance)*Math.sin(s);c=new i(e.p1.x+r.x,e.p1.y+r.y);l=new i(u.p1.x+r.x,u.p1.y+r.y);this._segList.addPt(c);this._segList.addPt(l)}};sr.prototype.getCoordinates=function(){return this._segList.getCoordinates()};sr.prototype.addMitreJoin=function(n,t,r,u){var e=!0,f=null;try{f=ao.intersection(t.p0,t.p1,r.p0,r.p1);(u<=0?1:f.distance(n)/Math.abs(u))>this._bufParams.getMitreLimit()&&(e=!1)}catch(n){if(!(n instanceof lp))throw n;f=new i(0,0);e=!1}e?this._segList.addPt(f):this.addLimitedMitreJoin(t,r,u,this._bufParams.getMitreLimit())};sr.prototype.addFilletCorner=function(n,t,i,r,u){var s=t.x-n.x,h=t.y-n.y,f=Math.atan2(h,s),c=i.x-n.x,l=i.y-n.y,e=Math.atan2(l,c);r===o.CLOCKWISE?f<=e&&(f+=2*Math.PI):f>=e&&(f-=2*Math.PI);this._segList.addPt(t);this.addFilletArc(n,f,e,r,u);this._segList.addPt(i)};sr.prototype.addOutsideTurn=function(n,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*sr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===bi.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===bi.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,n,this._distance),this._segList.addPt(this._offset1.p0))};sr.prototype.createSquare=function(n){this._segList.addPt(new i(n.x+this._distance,n.y+this._distance));this._segList.addPt(new i(n.x+this._distance,n.y-this._distance));this._segList.addPt(new i(n.x-this._distance,n.y-this._distance));this._segList.addPt(new i(n.x-this._distance,n.y+this._distance));this._segList.closeRing()};sr.prototype.addSegments=function(n,t){this._segList.addPts(n,t)};sr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};sr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};sr.prototype.initSideSegments=function(n,t,i){this._s1=n;this._s2=t;this._side=i;this._seg1.setCoordinates(n,t);this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)};sr.prototype.addLimitedMitreJoin=function(n,t,r,u){var e=this._seg0.p1,p=et.angle(e,this._seg0.p0),s=et.angleBetweenOriented(this._seg0.p0,e,this._seg1.p1)/2,w=et.normalize(p+s),h=et.normalize(w+Math.PI),o=u*r,c=r-o*Math.abs(Math.sin(s)),b=e.x+o*Math.cos(h),k=e.y+o*Math.sin(h),d=new i(b,k),l=new a(e,d),v=l.pointAlongOffset(1,c),y=l.pointAlongOffset(1,-c);this._side===f.LEFT?(this._segList.addPt(v),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(v))};sr.prototype.computeOffsetSegment=function(n,t,i,r){var o=t===f.LEFT?1:-1,u=n.p1.x-n.p0.x,e=n.p1.y-n.p0.y,s=Math.sqrt(u*u+e*e),h=o*i*u/s,c=o*i*e/s;r.p0.x=n.p0.x-c;r.p0.y=n.p0.y+h;r.p1.x=n.p1.x-c;r.p1.y=n.p1.y+h};sr.prototype.addFilletArc=function(n,t,r,u,f){var a=u===o.CLOCKWISE?-1:1,e=Math.abs(t-r),l=Math.trunc(e/this._filletAngleQuantum+.5),c;if(l<1)return null;for(var v=e/l,s=0,h=new i;s<e;)c=t+a*s,h.x=n.x+f*Math.cos(c),h.y=n.y+f*Math.sin(c),this._segList.addPt(h),s+=v};sr.prototype.addInsideTurn=function(){var n,t;(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())?this._segList.addPt(this._li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*sr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)?this._segList.addPt(this._offset0.p1):((this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0)?(n=new i((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(n),t=new i((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(t)):this._segList.addPt(this._s1),this._segList.addPt(this._offset1.p0))};sr.prototype.createCircle=function(n){var t=new i(n.x+this._distance,n.y);this._segList.addPt(t);this.addFilletArc(n,0,2*Math.PI,-1,this._distance);this._segList.closeRing()};sr.prototype.addBevelJoin=function(n,t){this._segList.addPt(n.p1);this._segList.addPt(t.p0)};sr.prototype.init=function(n){this._distance=n;this._maxCurveSegmentError=n*(1-Math.cos(this._filletAngleQuantum/2));this._segList=new ye;this._segList.setPrecisionModel(this._precisionModel);this._segList.setMinimumVertexDistance(n*sr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};sr.prototype.addCollinear=function(n){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===bi.JOIN_BEVEL||this._bufParams.getJoinStyle()===bi.JOIN_MITRE?(n&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,o.CLOCKWISE,this._distance))};sr.prototype.closeRing=function(){this._segList.closeRing()};sr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};sr.prototype.interfaces_=function(){return[]};sr.prototype.getClass=function(){return sr};fw.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001};fw.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001};fw.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};fw.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(sr,fw);ne=function(){this._distance=0;this._precisionModel=null;this._bufParams=null;var n=arguments[0],t=arguments[1];this._precisionModel=n;this._bufParams=t};ne.prototype.getOffsetCurve=function(n,t){var r;if(this._distance=t,0===t)return null;var u=t<0,f=Math.abs(t),i=this.getSegGen(f);return n.length<=1?this.computePointCurve(n[0],i):this.computeOffsetCurve(n,u,i),r=i.getCoordinates(),u&&ut.reverse(r),r};ne.prototype.computeSingleSidedBufferCurve=function(n,t,i){var h=this.simplifyTolerance(this._distance),r,e,o,u,c,s;if(t)for(i.addSegments(n,!0),r=wr.simplify(n,-h),e=r.length-1,i.initSideSegments(r[e],r[e-1],f.LEFT),i.addFirstSegment(),o=e-2;o>=0;o--)i.addNextSegment(r[o],!0);else for(i.addSegments(n,!1),u=wr.simplify(n,h),c=u.length-1,i.initSideSegments(u[0],u[1],f.LEFT),i.addFirstSegment(),s=2;s<=c;s++)i.addNextSegment(u[s],!0);i.addLastSegment();i.closeRing()};ne.prototype.computeRingBufferCurve=function(n,t,i){var e=this.simplifyTolerance(this._distance),r,o,u,s;for(t===f.RIGHT&&(e=-e),r=wr.simplify(n,e),o=r.length-1,i.initSideSegments(r[o-1],r[0],t),u=1;u<=o;u++)s=1!==u,i.addNextSegment(r[u],s);i.closeRing()};ne.prototype.computeLineBufferCurve=function(n,t){var h=this.simplifyTolerance(this._distance),r=wr.simplify(n,h),s=r.length-1,u,i,e,o;for(t.initSideSegments(r[0],r[1],f.LEFT),u=2;u<=s;u++)t.addNextSegment(r[u],!0);for(t.addLastSegment(),t.addLineEndCap(r[s-1],r[s]),i=wr.simplify(n,-h),e=i.length-1,t.initSideSegments(i[e],i[e-1],f.LEFT),o=e-2;o>=0;o--)t.addNextSegment(i[o],!0);t.addLastSegment();t.addLineEndCap(i[1],i[0]);t.closeRing()};ne.prototype.computePointCurve=function(n,t){switch(this._bufParams.getEndCapStyle()){case bi.CAP_ROUND:t.createCircle(n);break;case bi.CAP_SQUARE:t.createSquare(n)}};ne.prototype.getLineCurve=function(n,t){var r,i,u;return(this._distance=t,t<0&&!this._bufParams.isSingleSided())?null:0===t?null:(r=Math.abs(t),i=this.getSegGen(r),n.length<=1?this.computePointCurve(n[0],i):this._bufParams.isSingleSided()?(u=t<0,this.computeSingleSidedBufferCurve(n,u,i)):this.computeLineBufferCurve(n,i),i.getCoordinates())};ne.prototype.getBufferParameters=function(){return this._bufParams};ne.prototype.simplifyTolerance=function(n){return n*this._bufParams.getSimplifyFactor()};ne.prototype.getRingCurve=function(n,t,i){if(this._distance=i,n.length<=2)return this.getLineCurve(n,i);if(0===i)return ne.copyCoordinates(n);var r=this.getSegGen(i);return this.computeRingBufferCurve(n,t,r),r.getCoordinates()};ne.prototype.computeOffsetCurve=function(n,t,i){var h=this.simplifyTolerance(this._distance),r,e,o,u,c,s;if(t)for(r=wr.simplify(n,-h),e=r.length-1,i.initSideSegments(r[e],r[e-1],f.LEFT),i.addFirstSegment(),o=e-2;o>=0;o--)i.addNextSegment(r[o],!0);else for(u=wr.simplify(n,h),c=u.length-1,i.initSideSegments(u[0],u[1],f.LEFT),i.addFirstSegment(),s=2;s<=c;s++)i.addNextSegment(u[s],!0);i.addLastSegment()};ne.prototype.getSegGen=function(n){return new sr(this._precisionModel,this._bufParams,n)};ne.prototype.interfaces_=function(){return[]};ne.prototype.getClass=function(){return ne};ne.copyCoordinates=function(n){for(var r=new Array(n.length).fill(null),t=0;t<r.length;t++)r[t]=new i(n[t]);return r};da=function(){this._subgraphs=null;this._seg=new a;this._cga=new o;var n=arguments[0];this._subgraphs=n};fft={DepthSegment:{configurable:!0}};da.prototype.findStabbedSegments=function(){var n=this,h,c,b,a,k,v;if(1===arguments.length){for(var s=arguments[0],y=new e,p=this._subgraphs.iterator();p.hasNext();)h=p.next(),c=h.getEnvelope(),s.y<c.getMinY()||s.y>c.getMaxY()||n.findStabbedSegments(s,h.getDirectedEdges(),y);return y}if(3===arguments.length)if(w(arguments[2],vo)&&arguments[0]instanceof i&&arguments[1]instanceof gg)for(var r=arguments[0],l=arguments[1],g=arguments[2],u=l.getEdge().getCoordinates(),t=0;t<u.length-1;t++)n._seg.p0=u[t],n._seg.p1=u[t+1],n._seg.p0.y>n._seg.p1.y&&n._seg.reverse(),b=Math.max(n._seg.p0.x,n._seg.p1.x),b<r.x||n._seg.isHorizontal()||r.y<n._seg.p0.y||r.y>n._seg.p1.y||o.computeOrientation(n._seg.p0,n._seg.p1,r)===o.RIGHT||(a=l.getDepth(f.LEFT),n._seg.p0.equals(u[t])||(a=l.getDepth(f.RIGHT)),k=new pl(n._seg,a),g.add(k));else if(w(arguments[2],vo)&&arguments[0]instanceof i&&w(arguments[1],vo))for(var nt=arguments[0],tt=arguments[1],it=arguments[2],d=tt.iterator();d.hasNext();)v=d.next(),v.isForward()&&n.findStabbedSegments(nt,v,it)};da.prototype.getDepth=function(n){var t=this.findStabbedSegments(n);return 0===t.size()?0:go.min(t)._leftDepth};da.prototype.interfaces_=function(){return[]};da.prototype.getClass=function(){return da};fft.DepthSegment.get=function(){return pl};Object.defineProperties(da,fft);pl=function(){this._upwardSeg=null;this._leftDepth=null;var n=arguments[0],t=arguments[1];this._upwardSeg=new a(n);this._leftDepth=t};pl.prototype.compareTo=function(n){var t=n,i;return this._upwardSeg.minX()>=t._upwardSeg.maxX()?1:this._upwardSeg.maxX()<=t._upwardSeg.minX()?-1:(i=this._upwardSeg.orientationIndex(t._upwardSeg),0!==i||0!=(i=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(t._upwardSeg))};pl.prototype.compareX=function(n,t){var i=n.p0.compareTo(t.p0);return 0!==i?i:n.p1.compareTo(t.p1)};pl.prototype.toString=function(){return this._upwardSeg.toString()};pl.prototype.interfaces_=function(){return[ho]};pl.prototype.getClass=function(){return pl};pi=function(n,t,i){this.p0=n||null;this.p1=t||null;this.p2=i||null};pi.prototype.area=function(){return pi.area(this.p0,this.p1,this.p2)};pi.prototype.signedArea=function(){return pi.signedArea(this.p0,this.p1,this.p2)};pi.prototype.interpolateZ=function(n){if(null===n)throw new ar("Supplied point is null.");return pi.interpolateZ(n,this.p0,this.p1,this.p2)};pi.prototype.longestSideLength=function(){return pi.longestSideLength(this.p0,this.p1,this.p2)};pi.prototype.isAcute=function(){return pi.isAcute(this.p0,this.p1,this.p2)};pi.prototype.circumcentre=function(){return pi.circumcentre(this.p0,this.p1,this.p2)};pi.prototype.area3D=function(){return pi.area3D(this.p0,this.p1,this.p2)};pi.prototype.centroid=function(){return pi.centroid(this.p0,this.p1,this.p2)};pi.prototype.inCentre=function(){return pi.inCentre(this.p0,this.p1,this.p2)};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};pi.area=function(n,t,i){return Math.abs(((i.x-n.x)*(t.y-n.y)-(t.x-n.x)*(i.y-n.y))/2)};pi.signedArea=function(n,t,i){return((i.x-n.x)*(t.y-n.y)-(t.x-n.x)*(i.y-n.y))/2};pi.det=function(n,t,i,r){return n*r-t*i};pi.interpolateZ=function(n,t,i,r){var u=t.x,f=t.y,e=i.x-u,o=r.x-u,s=i.y-f,h=r.y-f,c=e*h-o*s,l=n.x-u,a=n.y-f,v=(h*l-o*a)/c,y=(-s*l+e*a)/c;return t.z+v*(i.z-t.z)+y*(r.z-t.z)};pi.longestSideLength=function(n,t,i){var e=n.distance(t),u=t.distance(i),f=i.distance(n),r=e;return u>r&&(r=u),f>r&&(r=f),r};pi.isAcute=function(n,t,i){return!!et.isAcute(n,t,i)&&!!et.isAcute(t,i,n)&&!!et.isAcute(i,n,t)};pi.circumcentre=function(n,t,r){var s=r.x,h=r.y,u=n.x-s,f=n.y-h,e=t.x-s,o=t.y-h,c=2*pi.det(u,f,e,o),l=pi.det(f,u*u+f*f,o,e*e+o*o),a=pi.det(u,u*u+f*f,e,e*e+o*o);return new i(s-l/c,h+a/c)};pi.perpendicularBisector=function(n,t){var i=t.x-n.x,r=t.y-n.y,u=new ao(n.x+i/2,n.y+r/2,1),f=new ao(n.x-r+i/2,n.y+i+r/2,1);return new ao(u,f)};pi.angleBisector=function(n,t,r){var u=t.distance(n),f=u/(u+t.distance(r)),e=r.x-n.x,o=r.y-n.y;return new i(n.x+f*e,n.y+f*o)};pi.area3D=function(n,t,i){var r=t.x-n.x,u=t.y-n.y,f=t.z-n.z,e=i.x-n.x,o=i.y-n.y,s=i.z-n.z,h=u*s-f*o,c=f*e-r*s,l=r*o-u*e,a=h*h+c*c+l*l;return Math.sqrt(a)/2};pi.centroid=function(n,t,r){var u=(n.x+t.x+r.x)/3,f=(n.y+t.y+r.y)/3;return new i(u,f)};pi.inCentre=function(n,t,r){var u=t.distance(r),f=n.distance(r),e=n.distance(t),o=u+f+e,s=(u*n.x+f*t.x+e*r.x)/o,h=(u*n.y+f*t.y+e*r.y)/o;return new i(s,h)};uo=function(){this._inputGeom=null;this._distance=null;this._curveBuilder=null;this._curveList=new e;var n=arguments[0],t=arguments[1],i=arguments[2];this._inputGeom=n;this._distance=t;this._curveBuilder=i};uo.prototype.addPoint=function(n){if(this._distance<=0)return null;var t=n.getCoordinates(),i=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(i,r.EXTERIOR,r.INTERIOR)};uo.prototype.addPolygon=function(n){var t=this,u=this._distance,e=f.LEFT,o,s,i,h,c;if((this._distance<0&&(u=-this._distance,e=f.RIGHT),o=n.getExteriorRing(),s=ut.removeRepeatedPoints(o.getCoordinates()),this._distance<0&&this.isErodedCompletely(o,this._distance))||this._distance<=0&&s.length<3)return null;for(this.addPolygonRing(s,u,e,r.EXTERIOR,r.INTERIOR),i=0;i<n.getNumInteriorRing();i++)h=n.getInteriorRingN(i),c=ut.removeRepeatedPoints(h.getCoordinates()),t._distance>0&&t.isErodedCompletely(h,-t._distance)||t.addPolygonRing(c,u,f.opposite(e),r.INTERIOR,r.EXTERIOR)};uo.prototype.isTriangleErodedCompletely=function(n,t){var i=new pi(n[0],n[1],n[2]),r=i.inCentre();return o.distancePointLine(r,i.p0,i.p1)<Math.abs(t)};uo.prototype.addLineString=function(n){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=ut.removeRepeatedPoints(n.getCoordinates()),i=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(i,r.EXTERIOR,r.INTERIOR)};uo.prototype.addCurve=function(n,t,i){if(null===n||n.length<2)return null;var u=new dr(n,new di(0,r.BOUNDARY,t,i));this._curveList.add(u)};uo.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};uo.prototype.addPolygonRing=function(n,t,i,r,u){var e,s,h;if(0===t&&n.length<bh.MINIMUM_VALID_SIZE)return null;e=r;s=u;n.length>=bh.MINIMUM_VALID_SIZE&&o.isCCW(n)&&(e=u,s=r,i=f.opposite(i));h=this._curveBuilder.getRingCurve(n,i,t);this.addCurve(h,e,s)};uo.prototype.add=function(n){if(n.isEmpty())return null;n instanceof su?this.addPolygon(n):n instanceof pr?this.addLineString(n):n instanceof oe?this.addPoint(n):(n instanceof bp||n instanceof pa||n instanceof kh||n instanceof gf)&&this.addCollection(n)};uo.prototype.isErodedCompletely=function(n,t){var i=n.getCoordinates(),r,u;return i.length<4?t<0:4===i.length?this.isTriangleErodedCompletely(i,t):(r=n.getEnvelopeInternal(),u=Math.min(r.getHeight(),r.getWidth()),t<0&&2*Math.abs(t)>u)};uo.prototype.addCollection=function(n){for(var i,t=0;t<n.getNumGeometries();t++)i=n.getGeometryN(t),this.add(i)};uo.prototype.interfaces_=function(){return[]};uo.prototype.getClass=function(){return uo};fy=function(){};fy.prototype.locate=function(){};fy.prototype.interfaces_=function(){return[]};fy.prototype.getClass=function(){return fy};eh=function(){this._parent=null;this._atStart=null;this._max=null;this._index=null;this._subcollectionIterator=null;var n=arguments[0];this._parent=n;this._atStart=!0;this._index=0;this._max=n.getNumGeometries()};eh.prototype.next=function(){if(this._atStart)return this._atStart=!1,eh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new vp;var n=this._parent.getGeometryN(this._index++);return n instanceof gf?(this._subcollectionIterator=new eh(n),this._subcollectionIterator.next()):n};eh.prototype.remove=function(){throw new Error(this.getClass().getName());};eh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};eh.prototype.interfaces_=function(){return[ny]};eh.prototype.getClass=function(){return eh};eh.isAtomic=function(n){return!(n instanceof gf)};pe=function(){this._geom=null;var n=arguments[0];this._geom=n};pe.prototype.locate=function(n){return pe.locate(n,this._geom)};pe.prototype.interfaces_=function(){return[fy]};pe.prototype.getClass=function(){return pe};pe.isPointInRing=function(n,t){return!!t.getEnvelopeInternal().intersects(n)&&o.isPointInRing(n,t.getCoordinates())};pe.containsPointInPolygon=function(n,t){var r,i,u;if(t.isEmpty()||(r=t.getExteriorRing(),!pe.isPointInRing(n,r)))return!1;for(i=0;i<t.getNumInteriorRing();i++)if(u=t.getInteriorRingN(i),pe.isPointInRing(n,u))return!1;return!0};pe.containsPoint=function(n,t){var i,r;if(t instanceof su)return pe.containsPointInPolygon(n,t);if(t instanceof gf)for(i=new eh(t);i.hasNext();)if(r=i.next(),r!==t&&pe.containsPoint(n,r))return!0;return!1};pe.locate=function(n,t){return t.isEmpty()?r.EXTERIOR:pe.containsPoint(n,t)?r.INTERIOR:r.EXTERIOR};ff=function(){this._edgeMap=new cf;this._edgeList=null;this._ptInAreaLocation=[r.NONE,r.NONE]};ff.prototype.getNextCW=function(n){this.getEdges();var t=this._edgeList.indexOf(n),i=t-1;return 0===t&&(i=this._edgeList.size()-1),this._edgeList.get(i)};ff.prototype.propagateSideLabels=function(n){for(var e,i,h,o,t,c,l,u=r.NONE,s=this.iterator();s.hasNext();)e=s.next().getLabel(),e.isArea(n)&&e.getLocation(n,f.LEFT)!==r.NONE&&(u=e.getLocation(n,f.LEFT));if(u===r.NONE)return null;for(i=u,h=this.iterator();h.hasNext();)if(o=h.next(),t=o.getLabel(),t.getLocation(n,f.ON)===r.NONE&&t.setLocation(n,f.ON,i),t.isArea(n))if(c=t.getLocation(n,f.LEFT),l=t.getLocation(n,f.RIGHT),l!==r.NONE){if(l!==i)throw new dh("side location conflict",o.getCoordinate());c===r.NONE&&it.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")");i=c}else it.isTrue(t.getLocation(n,f.LEFT)===r.NONE,"found single null side"),t.setLocation(n,f.RIGHT,i),t.setLocation(n,f.LEFT,i)};ff.prototype.getCoordinate=function(){var n=this.iterator();return n.hasNext()?n.next().getCoordinate():null};ff.prototype.print=function(n){rf.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(n)};ff.prototype.isAreaLabelsConsistent=function(n){return this.computeEdgeEndLabels(n.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};ff.prototype.checkAreaLabelsConsistent=function(n){var i=this.getEdges(),c,u,e,o,t,s,h;if(i.size()<=0)return!0;for(c=i.size()-1,u=i.get(c).getLabel().getLocation(n,f.LEFT),it.isTrue(u!==r.NONE,"Found unlabelled area edge"),e=u,o=this.iterator();o.hasNext();){if((t=o.next().getLabel(),it.isTrue(t.isArea(n),"Found non-area edge"),s=t.getLocation(n,f.LEFT),h=t.getLocation(n,f.RIGHT),s===h)||h!==e)return!1;e=s}return!0};ff.prototype.findIndex=function(n){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===n)return t;return-1};ff.prototype.iterator=function(){return this.getEdges().iterator()};ff.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new e(this._edgeMap.values())),this._edgeList};ff.prototype.getLocation=function(n,t,i){return this._ptInAreaLocation[n]===r.NONE&&(this._ptInAreaLocation[n]=pe.locate(t,i[n].getGeometry())),this._ptInAreaLocation[n]};ff.prototype.toString=function(){var n=new us,t,i;for(n.append("EdgeEndStar:   "+this.getCoordinate()),n.append("\n"),t=this.iterator();t.hasNext();)i=t.next(),n.append(i),n.append("\n");return n.toString()};ff.prototype.computeEdgeEndLabels=function(n){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(n)};ff.prototype.computeLabelling=function(n){var f,e,o,t,s,u,l;for(this.computeEdgeEndLabels(n[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1),f=[!1,!1],e=this.iterator();e.hasNext();)for(o=e.next().getLabel(),t=0;t<2;t++)o.isLine(t)&&o.getLocation(t)===r.BOUNDARY&&(f[t]=!0);for(s=this.iterator();s.hasNext();)for(var h=s.next(),c=h.getLabel(),i=0;i<2;i++)c.isAnyNull(i)&&(u=r.NONE,f[i]?u=r.EXTERIOR:(l=h.getCoordinate(),u=this.getLocation(i,l,n)),c.setAllLocationsIfNull(i,u))};ff.prototype.getDegree=function(){return this._edgeMap.size()};ff.prototype.insertEdgeEnd=function(n,t){this._edgeMap.put(n,t);this._edgeList=null};ff.prototype.interfaces_=function(){return[]};ff.prototype.getClass=function(){return ff};var bti=function(n){function t(){n.call(this);this._resultAreaEdgeList=null;this._label=null;this._SCANNING_FOR_INCOMING=1;this._LINKING_TO_OUTGOING=2}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var t=this,n,e;this.getResultAreaEdges();for(var i=null,u=null,r=this._SCANNING_FOR_INCOMING,f=0;f<this._resultAreaEdgeList.size();f++)if(n=t._resultAreaEdgeList.get(f),e=n.getSym(),n.getLabel().isArea())switch(null===i&&n.isInResult()&&(i=n),r){case t._SCANNING_FOR_INCOMING:if(!e.isInResult())continue;u=e;r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!n.isInResult())continue;u.setNext(n);r=t._SCANNING_FOR_INCOMING}if(r===this._LINKING_TO_OUTGOING){if(null===i)throw new dh("no outgoing dirEdge found",this.getCoordinate());it.isTrue(i.isInResult(),"unable to link last incoming dirEdge");u.setNext(i)}},t.prototype.insert=function(n){var t=n;this.insertEdgeEnd(t,t)},t.prototype.getRightmostEdge=function(){var i=this.getEdges(),r=i.size(),n;if(r<1)return null;if(n=i.get(0),1===r)return n;var t=i.get(r-1),u=n.getQuadrant(),f=t.getQuadrant();return nr.isNorthern(u)&&nr.isNorthern(f)?n:nr.isNorthern(u)||nr.isNorthern(f)?0!==n.getDy()?n:0!==t.getDy()?t:(it.shouldNeverReachHere("found two horizontal edges incident on node"),null):t},t.prototype.print=function(n){var t,i;for(rf.out.println("DirectedEdgeStar: "+this.getCoordinate()),t=this.iterator();t.hasNext();)i=t.next(),n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()},t.prototype.getResultAreaEdges=function(){var t,n;if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;for(this._resultAreaEdgeList=new e,t=this.iterator();t.hasNext();)n=t.next(),(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n);return this._resultAreaEdgeList},t.prototype.updateLabelling=function(n){for(var i,t=this.iterator();t.hasNext();)i=t.next().getLabel(),i.setAllLocationsIfNull(0,n.getLocation(0)),i.setAllLocationsIfNull(1,n.getLocation(1))},t.prototype.linkAllDirectedEdges=function(){var r,u;this.getEdges();for(var n=null,t=null,i=this._edgeList.size()-1;i>=0;i--)r=this._edgeList.get(i),u=r.getSym(),null===t&&(t=u),null!==n&&u.setNext(n),n=r;t.setNext(n)},t.prototype.computeDepths=function(){var e=this,r;if(1===arguments.length){var n=arguments[0],u=this.findIndex(n),o=n.getDepth(f.LEFT),s=n.getDepth(f.RIGHT),h=this.computeDepths(u+1,this._edgeList.size(),o),c=this.computeDepths(0,u,h);if(c!==s)throw new dh("depth mismatch at "+n.getCoordinate());}else if(3===arguments.length){for(var l=arguments[0],a=arguments[1],v=arguments[2],t=v,i=l;i<a;i++)r=e._edgeList.get(i),r.setEdgeDepths(f.RIGHT,t),t=r.getDepth(f.LEFT);return t}},t.prototype.mergeSymLabels=function(){for(var t,n=this.iterator();n.hasNext();)t=n.next(),t.getLabel().merge(t.getSym().getLabel())},t.prototype.linkMinimalDirectedEdges=function(n){for(var t,o,i=this,r=null,f=null,u=this._SCANNING_FOR_INCOMING,e=this._resultAreaEdgeList.size()-1;e>=0;e--){t=i._resultAreaEdgeList.get(e);o=t.getSym();switch(null===r&&t.getEdgeRing()===n&&(r=t),u){case i._SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==n)continue;f=o;u=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(t.getEdgeRing()!==n)continue;f.setNextMin(t);u=i._SCANNING_FOR_INCOMING}}u===this._LINKING_TO_OUTGOING&&(it.isTrue(null!==r,"found null for first outgoing dirEdge"),it.isTrue(r.getEdgeRing()===n,"unable to link last incoming dirEdge"),f.setNextMin(r))},t.prototype.getOutgoingDegree=function(){var n,t,i,f;if(0===arguments.length){for(n=0,t=this.iterator();t.hasNext();)i=t.next(),i.isInResult()&&n++;return n}if(1===arguments.length){for(var e=arguments[0],r=0,u=this.iterator();u.hasNext();)f=u.next(),f.getEdgeRing()===e&&r++;return r}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var i,o,u,e,t,s,n=r.NONE,f=this.iterator();f.hasNext();)if(i=f.next(),o=i.getSym(),!i.isLineEdge()){if(i.isInResult()){n=r.INTERIOR;break}if(o.isInResult()){n=r.EXTERIOR;break}}if(n===r.NONE)return null;for(u=n,e=this.iterator();e.hasNext();)t=e.next(),s=t.getSym(),t.isLineEdge()?t.getEdge().setCovered(u===r.INTERIOR):(t.isInResult()&&(u=r.EXTERIOR),s.isInResult()&&(u=r.INTERIOR))},t.prototype.computeLabelling=function(t){var u,e,i,f;for(n.prototype.computeLabelling.call(this,t),this._label=new di(r.NONE),u=this.iterator();u.hasNext();)for(e=u.next().getEdge().getLabel(),i=0;i<2;i++)f=e.getLocation(i),f!==r.INTERIOR&&f!==r.BOUNDARY||this._label.setLocation(i,r.INTERIOR)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ff),kyt=function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.createNode=function(n){return new hk(n,new bti)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(iy),wl=function n(){this._pts=null;this._orientation=null;var t=arguments[0];this._pts=t;this._orientation=n.orientation(t)};wl.prototype.compareTo=function(n){var t=n;return wl.compareOriented(this._pts,this._orientation,t._pts,t._orientation)};wl.prototype.interfaces_=function(){return[ho]};wl.prototype.getClass=function(){return wl};wl.orientation=function(n){return 1===ut.increasingDirection(n)};wl.compareOriented=function(n,t,i,r){for(var e,u,f,h=t?1:-1,c=r?1:-1,l=t?n.length:-1,a=r?i.length:-1,o=t?0:n.length-1,s=r?0:i.length-1;;){if(e=n[o].compareTo(i[s]),0!==e)return e;if(u=(o+=h)===l,f=(s+=c)===a,u&&!f)return-1;if(!u&&f)return 1;if(u&&f)return 0}};ns=function(){this._edges=new e;this._ocaMap=new cf};ns.prototype.print=function(n){var i,u,r,t;for(n.print("MULTILINESTRING ( "),i=0;i<this._edges.size();i++){for(u=this._edges.get(i),i>0&&n.print(","),n.print("("),r=u.getCoordinates(),t=0;t<r.length;t++)t>0&&n.print(","),n.print(r[t].x+" "+r[t].y);n.println(")")}n.print(")  ")};ns.prototype.addAll=function(n){for(var t=n.iterator();t.hasNext();)this.add(t.next())};ns.prototype.findEdgeIndex=function(n){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(n))return t;return-1};ns.prototype.iterator=function(){return this._edges.iterator()};ns.prototype.getEdges=function(){return this._edges};ns.prototype.get=function(n){return this._edges.get(n)};ns.prototype.findEqualEdge=function(n){var t=new wl(n.getCoordinates());return this._ocaMap.get(t)};ns.prototype.add=function(n){this._edges.add(n);var t=new wl(n.getCoordinates());this._ocaMap.put(t,n)};ns.prototype.interfaces_=function(){return[]};ns.prototype.getClass=function(){return ns};bl=function(){};bl.prototype.processIntersections=function(){};bl.prototype.isDone=function(){};bl.prototype.interfaces_=function(){return[]};bl.prototype.getClass=function(){return bl};we=function(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._hasInterior=!1;this._properIntersectionPoint=null;this._li=null;this._isSelfIntersection=null;this.numIntersections=0;this.numInteriorIntersections=0;this.numProperIntersections=0;this.numTests=0;var n=arguments[0];this._li=n};we.prototype.isTrivialIntersection=function(n,t,i,r){if(n===i&&1===this._li.getIntersectionNum()){if(we.isAdjacentSegments(t,r))return!0;if(n.isClosed()){var u=n.size()-1;if(0===t&&r===u||0===r&&t===u)return!0}}return!1};we.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};we.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};we.prototype.getLineIntersector=function(){return this._li};we.prototype.hasProperIntersection=function(){return this._hasProper};we.prototype.processIntersections=function(n,t,i,r){if(n===i&&t===r)return null;this.numTests++;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(n,t,i,r)||(this._hasIntersection=!0,n.addIntersections(this._li,t,0),i.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};we.prototype.hasIntersection=function(){return this._hasIntersection};we.prototype.isDone=function(){return!1};we.prototype.hasInteriorIntersection=function(){return this._hasInterior};we.prototype.interfaces_=function(){return[bl]};we.prototype.getClass=function(){return we};we.isAdjacentSegments=function(n,t){return 1===Math.abs(n-t)};ys=function(){this.coord=null;this.segmentIndex=null;this.dist=null;var n=arguments[0],t=arguments[1],r=arguments[2];this.coord=new i(n);this.segmentIndex=t;this.dist=r};ys.prototype.getSegmentIndex=function(){return this.segmentIndex};ys.prototype.getCoordinate=function(){return this.coord};ys.prototype.print=function(n){n.print(this.coord);n.print(" seg # = "+this.segmentIndex);n.println(" dist = "+this.dist)};ys.prototype.compareTo=function(n){var t=n;return this.compare(t.segmentIndex,t.dist)};ys.prototype.isEndPoint=function(n){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===n};ys.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};ys.prototype.getDistance=function(){return this.dist};ys.prototype.compare=function(n,t){return this.segmentIndex<n?-1:this.segmentIndex>n?1:this.dist<t?-1:this.dist>t?1:0};ys.prototype.interfaces_=function(){return[ho]};ys.prototype.getClass=function(){return ys};oh=function(){this._nodeMap=new cf;this.edge=null;var n=arguments[0];this.edge=n};oh.prototype.print=function(n){n.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(n)};oh.prototype.iterator=function(){return this._nodeMap.values().iterator()};oh.prototype.addSplitEdges=function(n){var t,i,r,u;for(this.addEndpoints(),t=this.iterator(),i=t.next();t.hasNext();)r=t.next(),u=this.createSplitEdge(i,r),n.add(u),i=r};oh.prototype.addEndpoints=function(){var n=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0);this.add(this.edge.pts[n],n,0)};oh.prototype.createSplitEdge=function(n,t){var e=t.segmentIndex-n.segmentIndex+2,s=this.edge.pts[t.segmentIndex],o=t.dist>0||!t.coord.equals2D(s),r,u,f;for(o||e--,r=new Array(e).fill(null),u=0,r[u++]=new i(n.coord),f=n.segmentIndex+1;f<=t.segmentIndex;f++)r[u++]=this.edge.pts[f];return o&&(r[u]=t.coord),new lk(r,new di(this.edge._label))};oh.prototype.add=function(n,t,i){var r=new ys(n,t,i),u=this._nodeMap.get(r);return null!==u?u:(this._nodeMap.put(r,r),r)};oh.prototype.isIntersection=function(n){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(n))return!0;return!1};oh.prototype.interfaces_=function(){return[]};oh.prototype.getClass=function(){return oh};kl=function(){};kl.prototype.getChainStartIndices=function(n){var t=0,i=new e,r;i.add(new fs(t));do r=this.findChainEnd(n,t),i.add(new fs(r)),t=r;while(t<n.length-1);return kl.toIntArray(i)};kl.prototype.findChainEnd=function(n,t){for(var r=nr.quadrant(n[t],n[t+1]),i=t+1;i<n.length;){if(nr.quadrant(n[i-1],n[i])!==r)break;i++}return i-1};kl.prototype.interfaces_=function(){return[]};kl.prototype.getClass=function(){return kl};kl.toIntArray=function(n){for(var i=new Array(n.size()).fill(null),t=0;t<i.length;t++)i[t]=n.get(t).intValue();return i};nc=function(){var n,t;this.e=null;this.pts=null;this.startIndex=null;this.env1=new l;this.env2=new l;n=arguments[0];this.e=n;this.pts=n.getCoordinates();t=new kl;this.startIndex=t.getChainStartIndices(this.pts)};nc.prototype.getCoordinates=function(){return this.pts};nc.prototype.getMaxX=function(n){var t=this.pts[this.startIndex[n]].x,i=this.pts[this.startIndex[n+1]].x;return t>i?t:i};nc.prototype.getMinX=function(n){var t=this.pts[this.startIndex[n]].x,i=this.pts[this.startIndex[n+1]].x;return t<i?t:i};nc.prototype.computeIntersectsForChain=function(){var f,n;if(4===arguments.length){var h=arguments[0],s=arguments[1],c=arguments[2],l=arguments[3];this.computeIntersectsForChain(this.startIndex[h],this.startIndex[h+1],s,s.startIndex[c],s.startIndex[c+1],l)}else if(6===arguments.length){var i=arguments[0],e=arguments[1],r=arguments[2],t=arguments[3],u=arguments[4],o=arguments[5],a=this.pts[i],v=this.pts[e],y=r.pts[t],p=r.pts[u];if(e-i==1&&u-t==1)return o.addIntersections(this.e,i,r.e,t),null;if(this.env1.init(a,v),this.env2.init(y,p),!this.env1.intersects(this.env2))return null;f=Math.trunc((i+e)/2);n=Math.trunc((t+u)/2);i<f&&(t<n&&this.computeIntersectsForChain(i,f,r,t,n,o),n<u&&this.computeIntersectsForChain(i,f,r,n,u,o));f<e&&(t<n&&this.computeIntersectsForChain(f,e,r,t,n,o),n<u&&this.computeIntersectsForChain(f,e,r,n,u,o))}};nc.prototype.getStartIndexes=function(){return this.startIndex};nc.prototype.computeIntersects=function(n,t){for(var r,i=0;i<this.startIndex.length-1;i++)for(r=0;r<n.startIndex.length-1;r++)this.computeIntersectsForChain(i,n,r,t)};nc.prototype.interfaces_=function(){return[]};nc.prototype.getClass=function(){return nc};pu=function n(){var t,i;for(this._depth=Array(2).fill().map(function(){return Array(3)}),t=0;t<2;t++)for(i=0;i<3;i++)this._depth[t][i]=n.NULL_VALUE};eft={NULL_VALUE:{configurable:!0}};pu.prototype.getDepth=function(n,t){return this._depth[n][t]};pu.prototype.setDepth=function(n,t,i){this._depth[n][t]=i};pu.prototype.isNull=function(){var f=this,n,t,i,r,u;if(0===arguments.length){for(n=0;n<2;n++)for(t=0;t<3;t++)if(f._depth[n][t]!==pu.NULL_VALUE)return!1;return!0}return 1===arguments.length?(i=arguments[0],this._depth[i][1]===pu.NULL_VALUE):2===arguments.length?(r=arguments[0],u=arguments[1],this._depth[r][u]===pu.NULL_VALUE):void 0};pu.prototype.normalize=function(){for(var i,r,u,t=this,n=0;n<2;n++)if(!t.isNull(n))for(i=t._depth[n][1],t._depth[n][2]<i&&(i=t._depth[n][2]),i<0&&(i=0),r=1;r<3;r++)u=0,t._depth[n][r]>i&&(u=1),t._depth[n][r]=u};pu.prototype.getDelta=function(n){return this._depth[n][f.RIGHT]-this._depth[n][f.LEFT]};pu.prototype.getLocation=function(n,t){return this._depth[n][t]<=0?r.EXTERIOR:r.INTERIOR};pu.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};pu.prototype.add=function(){var u=this,f,n,t,i;if(1===arguments.length)for(f=arguments[0],n=0;n<2;n++)for(t=1;t<3;t++)i=f.getLocation(n,t),i!==r.EXTERIOR&&i!==r.INTERIOR||(u.isNull(n,t)?u._depth[n][t]=pu.depthAtLocation(i):u._depth[n][t]+=pu.depthAtLocation(i));else if(3===arguments.length){var e=arguments[0],o=arguments[1],s=arguments[2];s===r.INTERIOR&&this._depth[e][o]++}};pu.prototype.interfaces_=function(){return[]};pu.prototype.getClass=function(){return pu};pu.depthAtLocation=function(n){return n===r.EXTERIOR?0:n===r.INTERIOR?1:pu.NULL_VALUE};eft.NULL_VALUE.get=function(){return-1};Object.defineProperties(pu,eft);lk=function(n){function t(){var i,r,u;(n.call(this),this.pts=null,this._env=null,this.eiList=new oh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new pu,this._depthDelta=0,1===arguments.length)?(i=arguments[0],t.call(this,i,null)):2===arguments.length&&(r=arguments[0],u=arguments[1],this.pts=r,this._label=u)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);return n[0]=this.pts[0],n[1]=this.pts[1],new t(n,di.toLineLabel(this._label))},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(n){this._isIsolated=n},t.prototype.setName=function(n){this._name=n},t.prototype.equals=function(n){var r;if(!(n instanceof t)||(r=n,this.pts.length!==r.pts.length))return!1;for(var u=!0,f=!0,e=this.pts.length,i=0;i<this.pts.length;i++)if(this.pts[i].equals2D(r.pts[i])||(u=!1),this.pts[i].equals2D(r.pts[--e])||(f=!1),!u&&!f)return!1;return!0},t.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var n=arguments[0];return this.pts[n]}},t.prototype.print=function(n){n.print("edge "+this._name+": ");n.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&n.print(","),n.print(this.pts[t].x+" "+this.pts[t].y);n.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(n){t.updateIM(this._label,n)},t.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(n){n.print("edge "+this._name+": ");for(var t=this.pts.length-1;t>=0;t--)n.print(this.pts[t]+" ");n.println("")},t.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new nc(this)),this._mce},t.prototype.getEnvelope=function(){if(null===this._env){this._env=new l;for(var n=0;n<this.pts.length;n++)this._env.expandToInclude(this.pts[n])}return this._env},t.prototype.addIntersection=function(n,t,r,u){var o=new i(n.getIntersection(u)),f=t,s=n.getEdgeDistance(r,u),e=f+1,h;e<this.pts.length&&(h=this.pts[e],o.equals2D(h)&&(f=e,s=0));this.eiList.add(o,f,s)},t.prototype.toString=function(){var n=new us,t;for(n.append("edge "+this._name+": "),n.append("LINESTRING ("),t=0;t<this.pts.length;t++)t>0&&n.append(","),n.append(this.pts[t].x+" "+this.pts[t].y);return n.append(")  "+this._label+" "+this._depthDelta),n.toString()},t.prototype.isPointwiseEqual=function(n){if(this.pts.length!==n.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(n.pts[t]))return!1;return!0},t.prototype.setDepthDelta=function(n){this._depthDelta=n},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(n,t,i){for(var r=0;r<n.getIntersectionNum();r++)this.addIntersection(n,t,i,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(2!==arguments.length)return n.prototype.updateIM.apply(this,arguments);var t=arguments[0],i=arguments[1];i.setAtLeastIfValid(t.getLocation(0,f.ON),t.getLocation(1,f.ON),1);t.isArea()&&(i.setAtLeastIfValid(t.getLocation(0,f.LEFT),t.getLocation(1,f.LEFT),2),i.setAtLeastIfValid(t.getLocation(0,f.RIGHT),t.getLocation(1,f.RIGHT),2))},t}(ro);vf=function(n){this._workingPrecisionModel=null;this._workingNoder=null;this._geomFact=null;this._graph=null;this._edgeList=new ns;this._bufParams=n||null};vf.prototype.setWorkingPrecisionModel=function(n){this._workingPrecisionModel=n};vf.prototype.insertUniqueEdge=function(n){var t=this._edgeList.findEqualEdge(n),r,i,u,f;null!==t?(r=t.getLabel(),i=n.getLabel(),t.isPointwiseEqual(n)||(i=new di(n.getLabel())).flip(),r.merge(i),u=vf.depthDelta(i),f=t.getDepthDelta()+u,t.setDepthDelta(f)):(this._edgeList.add(n),n.setDepthDelta(vf.depthDelta(n.getLabel())))};vf.prototype.buildSubgraphs=function(n,t){for(var r=new e,u=n.iterator();u.hasNext();){var i=u.next(),f=i.getRightmostCoordinate(),o=new da(r).getDepth(f);i.computeDepth(o);i.findResultEdges();r.add(i);t.add(i.getDirectedEdges(),i.getNodes())}};vf.prototype.createSubgraphs=function(n){for(var r,u,t=new e,i=n.getNodes().iterator();i.hasNext();)r=i.next(),r.isVisited()||(u=new lf,u.create(r),t.add(u));return go.sort(t,go.reverseOrder()),t};vf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()};vf.prototype.getNoder=function(n){if(null!==this._workingNoder)return this._workingNoder;var t=new rft,i=new al;return i.setPrecisionModel(n),t.setSegmentIntersector(new we(i)),t};vf.prototype.buffer=function(n,t){var i=this._workingPrecisionModel,e,r,o,u,f;return(null===i&&(i=n.getPrecisionModel()),this._geomFact=n.getFactory(),e=new ne(i,this._bufParams),r=new uo(n,t,e).getCurves(),r.size()<=0)?this.createEmptyResultGeometry():(this.computeNodedEdges(r,i),this._graph=new yr(new kyt),this._graph.addEdges(this._edgeList.getEdges()),o=this.createSubgraphs(this._graph),u=new se(this._geomFact),this.buildSubgraphs(o,u),f=u.getPolygons(),f.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(f))};vf.prototype.computeNodedEdges=function(n,t){var f=this.getNoder(t),u,i,r,e,o;for(f.computeNodes(n),u=f.getNodedSubstrings().iterator();u.hasNext();)i=u.next(),r=i.getCoordinates(),2===r.length&&r[0].equals2D(r[1])||(e=i.getData(),o=new lk(i.getCoordinates(),new di(e)),this.insertUniqueEdge(o))};vf.prototype.setNoder=function(n){this._workingNoder=n};vf.prototype.interfaces_=function(){return[]};vf.prototype.getClass=function(){return vf};vf.depthDelta=function(n){var t=n.getLocation(0,f.LEFT),i=n.getLocation(0,f.RIGHT);return t===r.INTERIOR&&i===r.EXTERIOR?1:t===r.EXTERIOR&&i===r.INTERIOR?-1:0};vf.convertSegStrings=function(n){for(var r,u,t=new rt,i=new e;n.hasNext();)r=n.next(),u=t.createLineString(r.getCoordinates()),i.add(u);return t.buildGeometry(i)};bc=function(){var n,t;if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length)n=arguments[0],t=arguments[1],this._noder=n,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision();else if(4===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3];this._noder=i;this._scaleFactor=r;this._offsetX=u;this._offsetY=f;this._isScaled=!this.isIntegerPrecision()}};bc.prototype.rescale=function(){var i=this,u,r,f,n,t;if(w(arguments[0],uu))for(u=arguments[0],r=u.iterator();r.hasNext();)f=r.next(),i.rescale(f.getCoordinates());else if(arguments[0]instanceof Array){for(n=arguments[0],t=0;t<n.length;t++)n[t].x=n[t].x/i._scaleFactor+i._offsetX,n[t].y=n[t].y/i._scaleFactor+i._offsetY;2===n.length&&n[0].equals2D(n[1])&&rf.out.println(n)}};bc.prototype.scale=function(){var t=this,u;if(w(arguments[0],uu)){for(var h=arguments[0],f=new e,o=h.iterator();o.hasNext();)u=o.next(),f.add(new dr(t.scale(u.getCoordinates()),u.getData()));return f}if(arguments[0]instanceof Array){for(var r=arguments[0],s=new Array(r.length).fill(null),n=0;n<r.length;n++)s[n]=new i(Math.round((r[n].x-t._offsetX)*t._scaleFactor),Math.round((r[n].y-t._offsetY)*t._scaleFactor),r[n].z);return ut.removeRepeatedPoints(s)}};bc.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor};bc.prototype.getNodedSubstrings=function(){var n=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(n),n};bc.prototype.computeNodes=function(n){var t=n;this._isScaled&&(t=this.scale(n));this._noder.computeNodes(t)};bc.prototype.interfaces_=function(){return[yl]};bc.prototype.getClass=function(){return bc};ps=function(){this._li=new al;this._segStrings=null;var n=arguments[0];this._segStrings=n};oft={fact:{configurable:!0}};ps.prototype.checkEndPtVertexIntersections=function(){var n=this,r,u,t;if(0===arguments.length)for(r=this._segStrings.iterator();r.hasNext();)u=r.next(),t=u.getCoordinates(),n.checkEndPtVertexIntersections(t[0],n._segStrings),n.checkEndPtVertexIntersections(t[t.length-1],n._segStrings);else if(2===arguments.length)for(var f=arguments[0],s=arguments[1],e=s.iterator();e.hasNext();)for(var h=e.next(),o=h.getCoordinates(),i=1;i<o.length-1;i++)if(o[i].equals(f))throw new cc("found endpt/interior pt intersection at index "+i+" :pt "+f);};ps.prototype.checkInteriorIntersections=function(){var a=this,t,v,i,y,n;if(0===arguments.length)for(t=this._segStrings.iterator();t.hasNext();)for(v=t.next(),i=this._segStrings.iterator();i.hasNext();)y=i.next(),a.checkInteriorIntersections(v,y);else if(2===arguments.length)for(var p=arguments[0],w=arguments[1],b=p.getCoordinates(),k=w.getCoordinates(),r=0;r<b.length-1;r++)for(n=0;n<k.length-1;n++)a.checkInteriorIntersections(p,r,w,n);else if(4===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3];if(u===e&&f===o)return null;var s=u.getCoordinates()[f],h=u.getCoordinates()[f+1],c=e.getCoordinates()[o],l=e.getCoordinates()[o+1];if(this._li.computeIntersection(s,h,c,l),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,s,h)||this.hasInteriorIntersection(this._li,c,l)))throw new cc("found non-noded intersection at "+s+"-"+h+" and "+c+"-"+l);}};ps.prototype.checkValid=function(){this.checkEndPtVertexIntersections();this.checkInteriorIntersections();this.checkCollapses()};ps.prototype.checkCollapses=function(){var r=this,i,u;if(0===arguments.length)for(i=this._segStrings.iterator();i.hasNext();)u=i.next(),r.checkCollapses(u);else if(1===arguments.length)for(var f=arguments[0],t=f.getCoordinates(),n=0;n<t.length-2;n++)r.checkCollapse(t[n],t[n+1],t[n+2])};ps.prototype.hasInteriorIntersection=function(n,t,i){for(var u,r=0;r<n.getIntersectionNum();r++)if(u=n.getIntersection(r),!u.equals(t)&&!u.equals(i))return!0;return!1};ps.prototype.checkCollapse=function(n,t,i){if(n.equals(i))throw new cc("found non-noded collapse at "+ps.fact.createLineString([n,t,i]));};ps.prototype.interfaces_=function(){return[]};ps.prototype.getClass=function(){return ps};oft.fact.get=function(){return new rt};Object.defineProperties(ps,oft);te=function(){this._li=null;this._pt=null;this._originalPt=null;this._ptScaled=null;this._p0Scaled=null;this._p1Scaled=null;this._scaleFactor=null;this._minx=null;this._maxx=null;this._miny=null;this._maxy=null;this._corner=new Array(4).fill(null);this._safeEnv=null;var n=arguments[0],t=arguments[1],r=arguments[2];if(this._originalPt=n,this._pt=n,this._scaleFactor=t,this._li=r,t<=0)throw new ar("Scale factor must be non-zero");1!==t&&(this._pt=new i(this.scale(n.x),this.scale(n.y)),this._p0Scaled=new i,this._p1Scaled=new i);this.initCorners(this._pt)};sft={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};te.prototype.intersectsScaled=function(n,t){var u=Math.min(n.x,t.x),f=Math.max(n.x,t.x),e=Math.min(n.y,t.y),o=Math.max(n.y,t.y),r=this._maxx<u||this._minx>f||this._maxy<e||this._miny>o,i;return r?!1:(i=this.intersectsToleranceSquare(n,t),it.isTrue(!(r&&i),"Found bad envelope test"),i)};te.prototype.initCorners=function(n){var t=.5;this._minx=n.x-t;this._maxx=n.x+t;this._miny=n.y-t;this._maxy=n.y+t;this._corner[0]=new i(this._maxx,this._maxy);this._corner[1]=new i(this._minx,this._maxy);this._corner[2]=new i(this._minx,this._miny);this._corner[3]=new i(this._maxx,this._miny)};te.prototype.intersects=function(n,t){return 1===this._scaleFactor?this.intersectsScaled(n,t):(this.copyScaled(n,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};te.prototype.scale=function(n){return Math.round(n*this._scaleFactor)};te.prototype.getCoordinate=function(){return this._originalPt};te.prototype.copyScaled=function(n,t){t.x=this.scale(n.x);t.y=this.scale(n.y)};te.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var n=te.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new l(this._originalPt.x-n,this._originalPt.x+n,this._originalPt.y-n,this._originalPt.y+n)}return this._safeEnv};te.prototype.intersectsPixelClosure=function(n,t){return this._li.computeIntersection(n,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(n,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(n,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(n,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))};te.prototype.intersectsToleranceSquare=function(n,t){var i=!1,r=!1;return this._li.computeIntersection(n,t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(n,t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(n,t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(n,t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!i||!r)||!!n.equals(this._pt)||!!t.equals(this._pt))))};te.prototype.addSnappedNode=function(n,t){var i=n.getCoordinate(t),r=n.getCoordinate(t+1);return!!this.intersects(i,r)&&(n.addIntersection(this.getCoordinate(),t),!0)};te.prototype.interfaces_=function(){return[]};te.prototype.getClass=function(){return te};sft.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75};Object.defineProperties(te,sft);ew=function(){this.tempEnv1=new l;this.selectedSegment=new a};ew.prototype.select=function(){if(1!==arguments.length&&2===arguments.length){var n=arguments[0],t=arguments[1];n.getLineSegment(t,this.selectedSegment);this.select(this.selectedSegment)}};ew.prototype.interfaces_=function(){return[]};ew.prototype.getClass=function(){return ew};ey=function(){this._index=null;var n=arguments[0];this._index=n};hft={HotPixelSnapAction:{configurable:!0}};ey.prototype.snap=function(){var n;if(1===arguments.length)return n=arguments[0],this.snap(n,null,-1);if(3===arguments.length){var t=arguments[0],u=arguments[1],f=arguments[2],i=t.getSafeEnvelope(),r=new cft(t,u,f);return this._index.query(i,{interfaces_:function(){return[yc]},visitItem:function(n){n.select(i,r)}}),r.isNodeAdded()}};ey.prototype.interfaces_=function(){return[]};ey.prototype.getClass=function(){return ey};hft.HotPixelSnapAction.get=function(){return cft};Object.defineProperties(ey,hft);cft=function(n){function t(){n.call(this);this._hotPixel=null;this._parentEdge=null;this._hotPixelVertexIndex=null;this._isNodeAdded=!1;var t=arguments[0],i=arguments[1],r=arguments[2];this._hotPixel=t;this._parentEdge=i;this._hotPixelVertexIndex=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(2!==arguments.length)return n.prototype.select.apply(this,arguments);var r=arguments[0],t=arguments[1],i=r.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&t===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,t)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ew);ga=function(){this._li=null;this._interiorIntersections=null;var n=arguments[0];this._li=n;this._interiorIntersections=new e};ga.prototype.processIntersections=function(n,t,i,r){var u;if(n===i&&t===r)return null;var f=n.getCoordinates()[t],e=n.getCoordinates()[t+1],o=i.getCoordinates()[r],s=i.getCoordinates()[r+1];if(this._li.computeIntersection(f,e,o,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));n.addIntersections(this._li,t,0);i.addIntersections(this._li,r,1)}};ga.prototype.isDone=function(){return!1};ga.prototype.getInteriorIntersections=function(){return this._interiorIntersections};ga.prototype.interfaces_=function(){return[bl]};ga.prototype.getClass=function(){return ga};sh=function(){this._pm=null;this._li=null;this._scaleFactor=null;this._noder=null;this._pointSnapper=null;this._nodedSegStrings=null;var n=arguments[0];this._pm=n;this._li=new al;this._li.setPrecisionModel(n);this._scaleFactor=n.getScale()};sh.prototype.checkCorrectness=function(n){var t=dr.getNodedSubstrings(n),i=new ps(t);try{i.checkValid()}catch(n){if(!(n instanceof fyt))throw n;n.printStackTrace()}};sh.prototype.getNodedSubstrings=function(){return dr.getNodedSubstrings(this._nodedSegStrings)};sh.prototype.snapRound=function(n,t){var i=this.findInteriorIntersections(n,t);this.computeIntersectionSnaps(i);this.computeVertexSnaps(n)};sh.prototype.findInteriorIntersections=function(n,t){var i=new ga(t);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(n),i.getInteriorIntersections()};sh.prototype.computeVertexSnaps=function(){var t=this,f,i,e,o,s;if(w(arguments[0],uu))for(f=arguments[0],i=f.iterator();i.hasNext();)e=i.next(),t.computeVertexSnaps(e);else if(arguments[0]instanceof dr)for(var r=arguments[0],u=r.getCoordinates(),n=0;n<u.length;n++)o=new te(u[n],t._scaleFactor,t._li),s=t._pointSnapper.snap(o,r,n),s&&r.addIntersection(u[n],n)};sh.prototype.computeNodes=function(n){this._nodedSegStrings=n;this._noder=new rft;this._pointSnapper=new ey(this._noder.getIndex());this.snapRound(n,this._li)};sh.prototype.computeIntersectionSnaps=function(n){for(var r,u,t=this,i=n.iterator();i.hasNext();)r=i.next(),u=new te(r,t._scaleFactor,t._li),t._pointSnapper.snap(u)};sh.prototype.interfaces_=function(){return[yl]};sh.prototype.getClass=function(){return sh};wu=function(){var n,t,i;(this._argGeom=null,this._distance=null,this._bufParams=new bi,this._resultGeometry=null,this._saveException=null,1===arguments.length)?(n=arguments[0],this._argGeom=n):2===arguments.length&&(t=arguments[0],i=arguments[1],this._argGeom=t,this._bufParams=i)};oy={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};wu.prototype.bufferFixedPrecision=function(n){var i=new bc(new sh(new wi(1)),n.getScale()),t=new vf(this._bufParams);t.setWorkingPrecisionModel(n);t.setNoder(i);this._resultGeometry=t.buffer(this._argGeom,this._distance)};wu.prototype.bufferReducedPrecision=function(){var t=this,n;if(0===arguments.length){for(n=wu.MAX_PRECISION_DIGITS;n>=0;n--){try{t.bufferReducedPrecision(n)}catch(n){if(!(n instanceof dh))throw n;t._saveException=n}if(null!==t._resultGeometry)return null}throw this._saveException;}if(1===arguments.length){var i=arguments[0],r=wu.precisionScaleFactor(this._argGeom,this._distance,i),u=new wi(r);this.bufferFixedPrecision(u)}};wu.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var n=this._argGeom.getFactory().getPrecisionModel();n.getType()===wi.FIXED?this.bufferFixedPrecision(n):this.bufferReducedPrecision()};wu.prototype.setQuadrantSegments=function(n){this._bufParams.setQuadrantSegments(n)};wu.prototype.bufferOriginalPrecision=function(){try{var n=new vf(this._bufParams);this._resultGeometry=n.buffer(this._argGeom,this._distance)}catch(n){if(!(n instanceof cc))throw n;this._saveException=n}};wu.prototype.getResultGeometry=function(n){return this._distance=n,this.computeGeometry(),this._resultGeometry};wu.prototype.setEndCapStyle=function(n){this._bufParams.setEndCapStyle(n)};wu.prototype.interfaces_=function(){return[]};wu.prototype.getClass=function(){return wu};wu.bufferOp=function(){if(2===arguments.length){var i=arguments[0],r=arguments[1],u=new wu(i);return u.getResultGeometry(r)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof p&&"number"==typeof arguments[1]){var f=arguments[0],e=arguments[1],o=arguments[2],t=new wu(f);return t.setQuadrantSegments(o),t.getResultGeometry(e)}if(arguments[2]instanceof bi&&arguments[0]instanceof p&&"number"==typeof arguments[1]){var s=arguments[0],h=arguments[1],c=arguments[2],l=new wu(s,c);return l.getResultGeometry(h)}}else if(4===arguments.length){var a=arguments[0],v=arguments[1],y=arguments[2],w=arguments[3],n=new wu(a);return n.setQuadrantSegments(y),n.setEndCapStyle(w),n.getResultGeometry(v)}};wu.precisionScaleFactor=function(n,t,i){var r=n.getEnvelopeInternal(),u=no.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(t>0?t:0),f=i-Math.trunc(Math.log(u)/Math.log(10)+1);return Math.pow(10,f)};oy.CAP_ROUND.get=function(){return bi.CAP_ROUND};oy.CAP_BUTT.get=function(){return bi.CAP_FLAT};oy.CAP_FLAT.get=function(){return bi.CAP_FLAT};oy.CAP_SQUARE.get=function(){return bi.CAP_SQUARE};oy.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(wu,oy);yf=function(){this._pt=[new i,new i];this._distance=nt.NaN;this._isNull=!0};yf.prototype.getCoordinates=function(){return this._pt};yf.prototype.getCoordinate=function(n){return this._pt[n]};yf.prototype.setMinimum=function(){var i,n,t,r;if(1===arguments.length)i=arguments[0],this.setMinimum(i._pt[0],i._pt[1]);else if(2===arguments.length){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r<this._distance&&this.initialize(n,t,r)}};yf.prototype.initialize=function(){var n,t;if(0===arguments.length)this._isNull=!0;else if(2===arguments.length)n=arguments[0],t=arguments[1],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(t),this._distance=n.distance(t),this._isNull=!1;else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._pt[0].setCoordinate(i);this._pt[1].setCoordinate(r);this._distance=u;this._isNull=!1}};yf.prototype.getDistance=function(){return this._distance};yf.prototype.setMaximum=function(){var i,n,t,r;if(1===arguments.length)i=arguments[0],this.setMaximum(i._pt[0],i._pt[1]);else if(2===arguments.length){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r>this._distance&&this.initialize(n,t,r)}};yf.prototype.interfaces_=function(){return[]};yf.prototype.getClass=function(){return yf};hh=function(){};hh.prototype.interfaces_=function(){return[]};hh.prototype.getClass=function(){return hh};hh.computeDistance=function(){var v,r,h,e,b;if(arguments[2]instanceof yf&&arguments[0]instanceof pr&&arguments[1]instanceof i)for(var d=arguments[0],c=arguments[1],g=arguments[2],o=d.getCoordinates(),l=new a,t=0;t<o.length-1;t++)l.setCoordinates(o[t],o[t+1]),v=l.closestPoint(c),g.setMinimum(v,c);else if(arguments[2]instanceof yf&&arguments[0]instanceof su&&arguments[1]instanceof i){var s=arguments[0],y=arguments[1],w=arguments[2];for(hh.computeDistance(s.getExteriorRing(),y,w),r=0;r<s.getNumInteriorRing();r++)hh.computeDistance(s.getInteriorRingN(r),y,w)}else if(arguments[2]instanceof yf&&arguments[0]instanceof p&&arguments[1]instanceof i){var n=arguments[0],u=arguments[1],f=arguments[2];if(n instanceof pr)hh.computeDistance(n,u,f);else if(n instanceof su)hh.computeDistance(n,u,f);else if(n instanceof gf)for(h=n,e=0;e<h.getNumGeometries();e++)b=h.getGeometryN(e),hh.computeDistance(b,u,f);else f.setMinimum(n.getCoordinate(),u)}else if(arguments[2]instanceof yf&&arguments[0]instanceof a&&arguments[1]instanceof i){var nt=arguments[0],k=arguments[1],tt=arguments[2],it=nt.closestPoint(k);tt.setMinimum(it,k)}};dl=function(n){this._maxPtDist=new yf;this._inputGeom=n||null};nn={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};dl.prototype.computeMaxMidpointDistance=function(n){var t=new kc(this._inputGeom);n.apply(t);this._maxPtDist.setMaximum(t.getMaxPointDistance())};dl.prototype.computeMaxVertexDistance=function(n){var t=new nv(this._inputGeom);n.apply(t);this._maxPtDist.setMaximum(t.getMaxPointDistance())};dl.prototype.findDistance=function(n){return this.computeMaxVertexDistance(n),this.computeMaxMidpointDistance(n),this._maxPtDist.getDistance()};dl.prototype.getDistancePoints=function(){return this._maxPtDist};dl.prototype.interfaces_=function(){return[]};dl.prototype.getClass=function(){return dl};nn.MaxPointDistanceFilter.get=function(){return nv};nn.MaxMidpointDistanceFilter.get=function(){return kc};Object.defineProperties(dl,nn);nv=function(n){this._maxPtDist=new yf;this._minPtDist=new yf;this._geom=n||null};nv.prototype.filter=function(n){this._minPtDist.initialize();hh.computeDistance(this._geom,n,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};nv.prototype.getMaxPointDistance=function(){return this._maxPtDist};nv.prototype.interfaces_=function(){return[nh]};nv.prototype.getClass=function(){return nv};kc=function(n){this._maxPtDist=new yf;this._minPtDist=new yf;this._geom=n||null};kc.prototype.filter=function(n,t){if(0===t)return null;var r=n.getCoordinate(t-1),u=n.getCoordinate(t),f=new i((r.x+u.x)/2,(r.y+u.y)/2);this._minPtDist.initialize();hh.computeDistance(this._geom,f,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};kc.prototype.isDone=function(){return!1};kc.prototype.isGeometryChanged=function(){return!1};kc.prototype.getMaxPointDistance=function(){return this._maxPtDist};kc.prototype.interfaces_=function(){return[po]};kc.prototype.getClass=function(){return kc};tc=function(n){this._comps=n||null};tc.prototype.filter=function(n){n instanceof su&&this._comps.add(n)};tc.prototype.interfaces_=function(){return[hs]};tc.prototype.getClass=function(){return tc};tc.getPolygons=function(){var i,n,t;return 1===arguments.length?(i=arguments[0],tc.getPolygons(i,new e)):2===arguments.length?(n=arguments[0],t=arguments[1],n instanceof su?t.add(n):n instanceof gf&&n.apply(new tc(t)),t):void 0};bu=function(){var n,t,i;(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)?(n=arguments[0],this._lines=n):2===arguments.length&&(t=arguments[0],i=arguments[1],this._lines=t,this._isForcedToLineString=i)};bu.prototype.filter=function(n){if(this._isForcedToLineString&&n instanceof bh){var t=n.getFactory().createLineString(n.getCoordinateSequence());return this._lines.add(t),null}n instanceof pr&&this._lines.add(n)};bu.prototype.setForceToLineString=function(n){this._isForcedToLineString=n};bu.prototype.interfaces_=function(){return[ph]};bu.prototype.getClass=function(){return bu};bu.getGeometry=function(){var n,t,i;return 1===arguments.length?(n=arguments[0],n.getFactory().buildGeometry(bu.getLines(n))):2===arguments.length?(t=arguments[0],i=arguments[1],t.getFactory().buildGeometry(bu.getLines(t,i))):void 0};bu.getLines=function(){var i,f,n,t,c;if(1===arguments.length)return i=arguments[0],bu.getLines(i,!1);if(2===arguments.length){if(w(arguments[0],uu)&&w(arguments[1],uu)){for(var a=arguments[0],r=arguments[1],u=a.iterator();u.hasNext();)f=u.next(),bu.getLines(f,r);return r}if(arguments[0]instanceof p&&"boolean"==typeof arguments[1]){var v=arguments[0],y=arguments[1],o=new e;return v.apply(new bu(o,y)),o}if(arguments[0]instanceof p&&w(arguments[1],uu))return n=arguments[0],t=arguments[1],n instanceof pr?t.add(n):n.apply(new bu(t)),t}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&w(arguments[0],uu)&&w(arguments[1],uu)){for(var b=arguments[0],s=arguments[1],k=arguments[2],h=b.iterator();h.hasNext();)c=h.next(),bu.getLines(c,s,k);return s}if("boolean"==typeof arguments[2]&&arguments[0]instanceof p&&w(arguments[1],uu)){var d=arguments[0],l=arguments[1],g=arguments[2];return d.apply(new bu(l,g)),l}}};ts=function(){if((this._boundaryRule=to.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length)&&1===arguments.length){var n=arguments[0];if(null===n)throw new ar("Rule must be non-null");this._boundaryRule=n}};ts.prototype.locateInternal=function(){var v=this,s,n,l,h,f,a,c,t,e,u;if(arguments[0]instanceof i&&arguments[1]instanceof su){if((s=arguments[0],n=arguments[1],n.isEmpty())||(l=n.getExteriorRing(),h=this.locateInPolygonRing(s,l),h===r.EXTERIOR))return r.EXTERIOR;if(h===r.BOUNDARY)return r.BOUNDARY;for(f=0;f<n.getNumInteriorRing();f++){if(a=n.getInteriorRingN(f),c=v.locateInPolygonRing(s,a),c===r.INTERIOR)return r.EXTERIOR;if(c===r.BOUNDARY)return r.BOUNDARY}return r.INTERIOR}if(arguments[0]instanceof i&&arguments[1]instanceof pr)return(t=arguments[0],e=arguments[1],!e.getEnvelopeInternal().intersects(t))?r.EXTERIOR:(u=e.getCoordinates(),e.isClosed()||!t.equals(u[0])&&!t.equals(u[u.length-1])?o.isOnLine(t,u)?r.INTERIOR:r.EXTERIOR:r.BOUNDARY);if(arguments[0]instanceof i&&arguments[1]instanceof oe){var y=arguments[0],p=arguments[1],w=p.getCoordinate();return w.equals2D(y)?r.INTERIOR:r.EXTERIOR}};ts.prototype.locateInPolygonRing=function(n,t){return t.getEnvelopeInternal().intersects(n)?o.locatePointInRing(n,t.getCoordinates()):r.EXTERIOR};ts.prototype.intersects=function(n,t){return this.locate(n,t)!==r.EXTERIOR};ts.prototype.updateLocationInfo=function(n){n===r.INTERIOR&&(this._isIn=!0);n===r.BOUNDARY&&this._numBoundaries++};ts.prototype.computeLocation=function(n,t){var i=this,f,r,h,e,u,c,o,s;if(t instanceof oe&&this.updateLocationInfo(this.locateInternal(n,t)),t instanceof pr)this.updateLocationInfo(this.locateInternal(n,t));else if(t instanceof su)this.updateLocationInfo(this.locateInternal(n,t));else if(t instanceof pa)for(f=t,r=0;r<f.getNumGeometries();r++)h=f.getGeometryN(r),i.updateLocationInfo(i.locateInternal(n,h));else if(t instanceof kh)for(e=t,u=0;u<e.getNumGeometries();u++)c=e.getGeometryN(u),i.updateLocationInfo(i.locateInternal(n,c));else if(t instanceof gf)for(o=new eh(t);o.hasNext();)s=o.next(),s!==t&&i.computeLocation(n,s)};ts.prototype.locate=function(n,t){return t.isEmpty()?r.EXTERIOR:t instanceof pr||t instanceof su?this.locateInternal(n,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(n,t),this._boundaryRule.isInBoundary(this._numBoundaries)?r.BOUNDARY:this._numBoundaries>0||this._isIn?r.INTERIOR:r.EXTERIOR)};ts.prototype.interfaces_=function(){return[]};ts.prototype.getClass=function(){return ts};pf=function n(){var t,i;if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t=arguments[0],i=arguments[1],n.call(this,t,n.INSIDE_AREA,i);else if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2];this._component=r;this._segIndex=u;this._pt=f}};lft={INSIDE_AREA:{configurable:!0}};pf.prototype.isInsideArea=function(){return this._segIndex===pf.INSIDE_AREA};pf.prototype.getCoordinate=function(){return this._pt};pf.prototype.getGeometryComponent=function(){return this._component};pf.prototype.getSegmentIndex=function(){return this._segIndex};pf.prototype.interfaces_=function(){return[]};pf.prototype.getClass=function(){return pf};lft.INSIDE_AREA.get=function(){return-1};Object.defineProperties(pf,lft);dc=function(n){this._pts=n||null};dc.prototype.filter=function(n){n instanceof oe&&this._pts.add(n)};dc.prototype.interfaces_=function(){return[hs]};dc.prototype.getClass=function(){return dc};dc.getPoints=function(){var t,n,i;return 1===arguments.length?(t=arguments[0],t instanceof oe?go.singletonList(t):dc.getPoints(t,new e)):2===arguments.length?(n=arguments[0],i=arguments[1],n instanceof oe?i.add(n):n instanceof gf&&n.apply(new dc(i)),i):void 0};tv=function(){this._locations=null;var n=arguments[0];this._locations=n};tv.prototype.filter=function(n){(n instanceof oe||n instanceof pr||n instanceof su)&&this._locations.add(new pf(n,0,n.getCoordinate()))};tv.prototype.interfaces_=function(){return[hs]};tv.prototype.getClass=function(){return tv};tv.getLocations=function(n){var t=new e;return n.apply(new tv(t)),t};ku=function(){var n,t;if(this._geom=null,this._terminateDistance=0,this._ptLocator=new ts,this._minDistanceLocation=null,this._minDistance=nt.MAX_VALUE,2===arguments.length)n=arguments[0],t=arguments[1],this._geom=[n,t],this._terminateDistance=0;else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._geom=new Array(2).fill(null);this._geom[0]=i;this._geom[1]=r;this._terminateDistance=u}};ku.prototype.computeContainmentDistance=function(){var t=this,i,h,a,n;if(0===arguments.length){if(i=new Array(2).fill(null),this.computeContainmentDistance(0,i),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,i)}else if(2===arguments.length){var u=arguments[0],f=arguments[1],o=1-u,s=tc.getPolygons(this._geom[u]);if(s.size()>0&&(h=tv.getLocations(this._geom[o]),this.computeContainmentDistance(h,s,f),this._minDistance<=this._terminateDistance))return this._minDistanceLocation[o]=f[0],this._minDistanceLocation[u]=f[1],null}else if(3===arguments.length)if(arguments[2]instanceof Array&&w(arguments[0],vo)&&w(arguments[1],vo)){for(var c=arguments[0],l=arguments[1],k=arguments[2],e=0;e<c.size();e++)for(a=c.get(e),n=0;n<l.size();n++)if(t.computeContainmentDistance(a,l.get(n),k),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof pf&&arguments[1]instanceof su){var v=arguments[0],y=arguments[1],p=arguments[2],b=v.getCoordinate();if(r.EXTERIOR!==this._ptLocator.locate(b,y))return this._minDistance=0,p[0]=v,p[1]=new pf(y,b),null}};ku.prototype.computeMinDistanceLinesPoints=function(n,t,i){for(var e,f,o,r=this,u=0;u<n.size();u++)for(e=n.get(u),f=0;f<t.size();f++)if(o=t.get(f),r.computeMinDistance(e,o,i),r._minDistance<=r._terminateDistance)return null};ku.prototype.computeFacetDistance=function(){var n=new Array(2).fill(null),t=bu.getLines(this._geom[0]),i=bu.getLines(this._geom[1]),r=dc.getPoints(this._geom[0]),u=dc.getPoints(this._geom[1]);return this.computeMinDistanceLines(t,i,n),this.updateMinDistance(n,!1),this._minDistance<=this._terminateDistance?null:(n[0]=null,n[1]=null,this.computeMinDistanceLinesPoints(t,u,n),this.updateMinDistance(n,!1),this._minDistance<=this._terminateDistance?null:(n[0]=null,n[1]=null,this.computeMinDistanceLinesPoints(i,r,n),this.updateMinDistance(n,!0),this._minDistance<=this._terminateDistance?null:(n[0]=null,n[1]=null,this.computeMinDistancePoints(r,u,n),void this.updateMinDistance(n,!1))))};ku.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};ku.prototype.updateMinDistance=function(n,t){if(null===n[0])return null;t?(this._minDistanceLocation[0]=n[1],this._minDistanceLocation[1]=n[0]):(this._minDistanceLocation[0]=n[0],this._minDistanceLocation[1]=n[1])};ku.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]};ku.prototype.computeMinDistance=function(){var n=this,l,b,k,t,p;if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof pr&&arguments[1]instanceof oe){var s=arguments[0],h=arguments[1],w=arguments[2];if(s.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var u=s.getCoordinates(),c=h.getCoordinate(),i=0;i<u.length-1;i++)if(l=o.distancePointLine(c,u[i],u[i+1]),l<n._minDistance&&(n._minDistance=l,b=new a(u[i],u[i+1]),k=b.closestPoint(c),w[0]=new pf(s,i,k),w[1]=new pf(h,0,c)),n._minDistance<=n._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof pr&&arguments[1]instanceof pr){var v=arguments[0],y=arguments[1],d=arguments[2];if(v.getEnvelopeInternal().distance(y.getEnvelopeInternal())>this._minDistance)return null;for(var f=v.getCoordinates(),e=y.getCoordinates(),r=0;r<f.length-1;r++)for(t=0;t<e.length-1;t++){if(p=o.distanceLineLine(f[r],f[r+1],e[t],e[t+1]),p<n._minDistance){n._minDistance=p;var nt=new a(f[r],f[r+1]),tt=new a(e[t],e[t+1]),g=nt.closestPoints(tt);d[0]=new pf(v,r,g[0]);d[1]=new pf(y,t,g[1])}if(n._minDistance<=n._terminateDistance)return null}}};ku.prototype.computeMinDistancePoints=function(n,t,i){for(var f,e,o,s,r=this,u=0;u<n.size();u++)for(f=n.get(u),e=0;e<t.size();e++)if(o=t.get(e),s=f.getCoordinate().distance(o.getCoordinate()),s<r._minDistance&&(r._minDistance=s,i[0]=new pf(f,0,f.getCoordinate()),i[1]=new pf(o,0,o.getCoordinate())),r._minDistance<=r._terminateDistance)return null};ku.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ar("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};ku.prototype.computeMinDistanceLines=function(n,t,i){for(var e,f,o,r=this,u=0;u<n.size();u++)for(e=n.get(u),f=0;f<t.size();f++)if(o=t.get(f),r.computeMinDistance(e,o,i),r._minDistance<=r._terminateDistance)return null};ku.prototype.interfaces_=function(){return[]};ku.prototype.getClass=function(){return ku};ku.distance=function(n,t){return new ku(n,t).distance()};ku.isWithinDistance=function(n,t,i){return new ku(n,t,i).distance()<=i};ku.nearestPoints=function(n,t){return new ku(n,t).nearestPoints()};ef=function(){this._pt=[new i,new i];this._distance=nt.NaN;this._isNull=!0};ef.prototype.getCoordinates=function(){return this._pt};ef.prototype.getCoordinate=function(n){return this._pt[n]};ef.prototype.setMinimum=function(){var i,n,t,r;if(1===arguments.length)i=arguments[0],this.setMinimum(i._pt[0],i._pt[1]);else if(2===arguments.length){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r<this._distance&&this.initialize(n,t,r)}};ef.prototype.initialize=function(){var n,t;if(0===arguments.length)this._isNull=!0;else if(2===arguments.length)n=arguments[0],t=arguments[1],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(t),this._distance=n.distance(t),this._isNull=!1;else if(3===arguments.length){var i=arguments[0],r=arguments[1],u=arguments[2];this._pt[0].setCoordinate(i);this._pt[1].setCoordinate(r);this._distance=u;this._isNull=!1}};ef.prototype.toString=function(){return os.toLineString(this._pt[0],this._pt[1])};ef.prototype.getDistance=function(){return this._distance};ef.prototype.setMaximum=function(){var i,n,t,r;if(1===arguments.length)i=arguments[0],this.setMaximum(i._pt[0],i._pt[1]);else if(2===arguments.length){if(n=arguments[0],t=arguments[1],this._isNull)return this.initialize(n,t),null;r=n.distance(t);r>this._distance&&this.initialize(n,t,r)}};ef.prototype.interfaces_=function(){return[]};ef.prototype.getClass=function(){return ef};ws=function(){};ws.prototype.interfaces_=function(){return[]};ws.prototype.getClass=function(){return ws};ws.computeDistance=function(){var v,r,h,e,b;if(arguments[2]instanceof ef&&arguments[0]instanceof pr&&arguments[1]instanceof i)for(var d=arguments[0],c=arguments[1],g=arguments[2],l=new a,o=d.getCoordinates(),t=0;t<o.length-1;t++)l.setCoordinates(o[t],o[t+1]),v=l.closestPoint(c),g.setMinimum(v,c);else if(arguments[2]instanceof ef&&arguments[0]instanceof su&&arguments[1]instanceof i){var s=arguments[0],y=arguments[1],w=arguments[2];for(ws.computeDistance(s.getExteriorRing(),y,w),r=0;r<s.getNumInteriorRing();r++)ws.computeDistance(s.getInteriorRingN(r),y,w)}else if(arguments[2]instanceof ef&&arguments[0]instanceof p&&arguments[1]instanceof i){var n=arguments[0],u=arguments[1],f=arguments[2];if(n instanceof pr)ws.computeDistance(n,u,f);else if(n instanceof su)ws.computeDistance(n,u,f);else if(n instanceof gf)for(h=n,e=0;e<h.getNumGeometries();e++)b=h.getGeometryN(e),ws.computeDistance(b,u,f);else f.setMinimum(n.getCoordinate(),u)}else if(arguments[2]instanceof ef&&arguments[0]instanceof a&&arguments[1]instanceof i){var nt=arguments[0],k=arguments[1],tt=arguments[2],it=nt.closestPoint(k);tt.setMinimum(it,k)}};fo=function(){this._g0=null;this._g1=null;this._ptDist=new ef;this._densifyFrac=0;var n=arguments[0],t=arguments[1];this._g0=n;this._g1=t};tn={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};fo.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};fo.prototype.setDensifyFraction=function(n){if(n>1||n<=0)throw new ar("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=n};fo.prototype.compute=function(n,t){this.computeOrientedDistance(n,t,this._ptDist);this.computeOrientedDistance(t,n,this._ptDist)};fo.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};fo.prototype.computeOrientedDistance=function(n,t,i){var u=new iv(t),r;(n.apply(u),i.setMaximum(u.getMaxPointDistance()),this._densifyFrac>0)&&(r=new gc(t,this._densifyFrac),n.apply(r),i.setMaximum(r.getMaxPointDistance()))};fo.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};fo.prototype.interfaces_=function(){return[]};fo.prototype.getClass=function(){return fo};fo.distance=function(){if(2===arguments.length){var t=arguments[0],i=arguments[1],r=new fo(t,i);return r.distance()}if(3===arguments.length){var u=arguments[0],f=arguments[1],e=arguments[2],n=new fo(u,f);return n.setDensifyFraction(e),n.distance()}};tn.MaxPointDistanceFilter.get=function(){return iv};tn.MaxDensifiedByFractionDistanceFilter.get=function(){return gc};Object.defineProperties(fo,tn);iv=function(){this._maxPtDist=new ef;this._minPtDist=new ef;this._euclideanDist=new ws;this._geom=null;var n=arguments[0];this._geom=n};iv.prototype.filter=function(n){this._minPtDist.initialize();ws.computeDistance(this._geom,n,this._minPtDist);this._maxPtDist.setMaximum(this._minPtDist)};iv.prototype.getMaxPointDistance=function(){return this._maxPtDist};iv.prototype.interfaces_=function(){return[nh]};iv.prototype.getClass=function(){return iv};gc=function(){this._maxPtDist=new ef;this._minPtDist=new ef;this._geom=null;this._numSubSegs=0;var n=arguments[0],t=arguments[1];this._geom=n;this._numSubSegs=Math.trunc(Math.round(1/t))};gc.prototype.filter=function(n,t){var r=this;if(0===t)return null;for(var u=n.getCoordinate(t-1),e=n.getCoordinate(t),o=(e.x-u.x)/this._numSubSegs,s=(e.y-u.y)/this._numSubSegs,f=0;f<this._numSubSegs;f++){var h=u.x+f*o,c=u.y+f*s,l=new i(h,c);r._minPtDist.initialize();ws.computeDistance(r._geom,l,r._minPtDist);r._maxPtDist.setMaximum(r._minPtDist)}};gc.prototype.isDone=function(){return!1};gc.prototype.isGeometryChanged=function(){return!1};gc.prototype.getMaxPointDistance=function(){return this._maxPtDist};gc.prototype.interfaces_=function(){return[po]};gc.prototype.getClass=function(){return gc};le=function(n,t,i){this._minValidDistance=null;this._maxValidDistance=null;this._minDistanceFound=null;this._maxDistanceFound=null;this._isValid=!0;this._errMsg=null;this._errorLocation=null;this._errorIndicator=null;this._input=n||null;this._bufDistance=t||null;this._result=i||null};rn={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};le.prototype.checkMaximumDistance=function(n,t,i){var u=new fo(t,n),r;(u.setDensifyFraction(.25),this._maxDistanceFound=u.orientedDistance(),this._maxDistanceFound>i)&&(this._isValid=!1,r=u.getCoordinates(),this._errorLocation=r[1],this._errorIndicator=n.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+os.toLineString(r[0],r[1])+")")};le.prototype.isValid=function(){var n=Math.abs(this._bufDistance),t=le.MAX_DISTANCE_DIFF_FRAC*n;return this._minValidDistance=n-t,this._maxValidDistance=n+t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),le.VERBOSE&&rf.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};le.prototype.checkNegativeValid=function(){if(!(this._input instanceof su||this._input instanceof kh||this._input instanceof gf))return null;var n=this.getPolygonLines(this._input);if(this.checkMinimumDistance(n,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(n,this._result,this._maxValidDistance)};le.prototype.getErrorIndicator=function(){return this._errorIndicator};le.prototype.checkMinimumDistance=function(n,t,i){var u=new ku(n,t,i),r;(this._minDistanceFound=u.distance(),this._minDistanceFound<i)&&(this._isValid=!1,r=u.nearestPoints(),this._errorLocation=u.nearestPoints()[1],this._errorIndicator=n.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+os.toLineString(r[0],r[1])+" )")};le.prototype.checkPositiveValid=function(){var n=this._result.getBoundary();if(this.checkMinimumDistance(this._input,n,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,n,this._maxValidDistance)};le.prototype.getErrorLocation=function(){return this._errorLocation};le.prototype.getPolygonLines=function(n){for(var t=new e,r=new bu(t),i=tc.getPolygons(n).iterator();i.hasNext();)i.next().apply(r);return n.getFactory().buildGeometry(t)};le.prototype.getErrorMessage=function(){return this._errMsg};le.prototype.interfaces_=function(){return[]};le.prototype.getClass=function(){return le};rn.VERBOSE.get=function(){return!1};rn.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012};Object.defineProperties(le,rn);du=function(n,t,i){this._isValid=!0;this._errorMsg=null;this._errorLocation=null;this._errorIndicator=null;this._input=n||null;this._distance=t||null;this._result=i||null};un={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};du.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};du.prototype.checkEnvelope=function(){var n,i,t;if(this._distance<0)return null;n=this._distance*du.MAX_ENV_DIFF_FRAC;0===n&&(n=.001);i=new l(this._input.getEnvelopeInternal());i.expandBy(this._distance);t=new l(this._result.getEnvelopeInternal());t.expandBy(n);t.contains(i)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(t));this.report("Envelope")};du.prototype.checkDistance=function(){var n=new le(this._input,this._distance,this._result);n.isValid()||(this._isValid=!1,this._errorMsg=n.getErrorMessage(),this._errorLocation=n.getErrorLocation(),this._errorIndicator=n.getErrorIndicator());this.report("Distance")};du.prototype.checkArea=function(){var n=this._input.getArea(),t=this._result.getArea();this._distance>0&&n>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result);this._distance<0&&n<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result);this.report("Area")};du.prototype.checkPolygonal=function(){this._result instanceof su||this._result instanceof kh||(this._isValid=!1);this._errorMsg="Result is not polygonal";this._errorIndicator=this._result;this.report("Polygonal")};du.prototype.getErrorIndicator=function(){return this._errorIndicator};du.prototype.getErrorLocation=function(){return this._errorLocation};du.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))};du.prototype.report=function(n){if(!du.VERBOSE)return null;rf.out.println("Check "+n+": "+(this._isValid?"passed":"FAILED"))};du.prototype.getErrorMessage=function(){return this._errorMsg};du.prototype.interfaces_=function(){return[]};du.prototype.getClass=function(){return du};du.isValidMsg=function(n,t,i){var r=new du(n,t,i);return r.isValid()?null:r.getErrorMessage()};du.isValid=function(n,t,i){return!!new du(n,t,i).isValid()};un.VERBOSE.get=function(){return!1};un.MAX_ENV_DIFF_FRAC.get=function(){return.012};Object.defineProperties(du,un);bs=function(){this._pts=null;this._data=null;var n=arguments[0],t=arguments[1];this._pts=n;this._data=t};bs.prototype.getCoordinates=function(){return this._pts};bs.prototype.size=function(){return this._pts.length};bs.prototype.getCoordinate=function(n){return this._pts[n]};bs.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};bs.prototype.getSegmentOctant=function(n){return n===this._pts.length-1?-1:ba.octant(this.getCoordinate(n),this.getCoordinate(n+1))};bs.prototype.setData=function(n){this._data=n};bs.prototype.getData=function(){return this._data};bs.prototype.toString=function(){return os.toLineString(new kr(this._pts))};bs.prototype.interfaces_=function(){return[fh]};bs.prototype.getClass=function(){return bs};au=function(){this._findAllIntersections=!1;this._isCheckEndSegmentsOnly=!1;this._li=null;this._interiorIntersection=null;this._intSegments=null;this._intersections=new e;this._intersectionCount=0;this._keepIntersections=!0;var n=arguments[0];this._li=n;this._interiorIntersection=null};au.prototype.getInteriorIntersection=function(){return this._interiorIntersection};au.prototype.setCheckEndSegmentsOnly=function(n){this._isCheckEndSegmentsOnly=n};au.prototype.getIntersectionSegments=function(){return this._intSegments};au.prototype.count=function(){return this._intersectionCount};au.prototype.getIntersections=function(){return this._intersections};au.prototype.setFindAllIntersections=function(n){this._findAllIntersections=n};au.prototype.setKeepIntersections=function(n){this._keepIntersections=n};au.prototype.processIntersections=function(n,t,i,r){if(!this._findAllIntersections&&this.hasIntersection()||n===i&&t===r||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(n,t)||this.isEndSegment(i,r)))return null;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=u,this._intSegments[1]=f,this._intSegments[2]=e,this._intSegments[3]=o,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};au.prototype.isEndSegment=function(n,t){return 0===t||t>=n.size()-2};au.prototype.hasIntersection=function(){return null!==this._interiorIntersection};au.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection};au.prototype.interfaces_=function(){return[bl]};au.prototype.getClass=function(){return au};au.createAllIntersectionsFinder=function(n){var t=new au(n);return t.setFindAllIntersections(!0),t};au.createAnyIntersectionFinder=function(n){return new au(n)};au.createIntersectionCounter=function(n){var t=new au(n);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};is=function(){this._li=new al;this._segStrings=null;this._findAllIntersections=!1;this._segInt=null;this._isValid=!0;var n=arguments[0];this._segStrings=n};is.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()};is.prototype.getIntersections=function(){return this._segInt.getIntersections()};is.prototype.isValid=function(){return this.execute(),this._isValid};is.prototype.setFindAllIntersections=function(n){this._findAllIntersections=n};is.prototype.checkInteriorIntersections=function(){this._isValid=!0;this._segInt=new au(this._li);this._segInt.setFindAllIntersections(this._findAllIntersections);var n=new rft;if(n.setSegmentIntersector(this._segInt),n.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};is.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new dh(this.getErrorMessage(),this._segInt.getInteriorIntersection());};is.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var n=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+os.toLineString(n[0],n[1])+" and "+os.toLineString(n[2],n[3])};is.prototype.interfaces_=function(){return[]};is.prototype.getClass=function(){return is};is.computeIntersections=function(n){var t=new is(n);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};gl=function n(){this._nv=null;var t=arguments[0];this._nv=new is(n.toSegmentStrings(t))};gl.prototype.checkValid=function(){this._nv.checkValid()};gl.prototype.interfaces_=function(){return[]};gl.prototype.getClass=function(){return gl};gl.toSegmentStrings=function(n){for(var r,t=new e,i=n.iterator();i.hasNext();)r=i.next(),t.add(new bs(r.getCoordinates(),r));return t};gl.checkValid=function(n){new gl(n).checkValid()};rv=function(n){this._mapOp=n};rv.prototype.map=function(n){for(var r,i=new e,t=0;t<n.getNumGeometries();t++)r=this._mapOp.map(n.getGeometryN(t)),r.isEmpty()||i.add(r);return n.getFactory().createGeometryCollection(rt.toGeometryArray(i))};rv.prototype.interfaces_=function(){return[]};rv.prototype.getClass=function(){return rv};rv.map=function(n,t){return new rv(t).map(n)};ks=function(){this._op=null;this._geometryFactory=null;this._ptLocator=null;this._lineEdgesList=new e;this._resultLineList=new e;var n=arguments[0],t=arguments[1],i=arguments[2];this._op=n;this._geometryFactory=t;this._ptLocator=i};ks.prototype.collectLines=function(n){for(var r,t=this,i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();)r=i.next(),t.collectLineEdge(r,n,t._lineEdgesList),t.collectBoundaryTouchEdge(r,n,t._lineEdgesList)};ks.prototype.labelIsolatedLine=function(n,t){var i=this._ptLocator.locate(n.getCoordinate(),this._op.getArgGeometry(t));n.getLabel().setLocation(t,i)};ks.prototype.build=function(n){return this.findCoveredLineEdges(),this.collectLines(n),this.buildLines(n),this._resultLineList};ks.prototype.collectLineEdge=function(n,t,i){var u=n.getLabel(),r=n.getEdge();n.isLineEdge()&&(n.isVisited()||!tt.isResultOfOp(u,t)||r.isCovered()||(i.add(r),n.setVisitedEdge(!0)))};ks.prototype.findCoveredLineEdges=function(){for(var i,n,r,u,t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();)n=i.next(),r=n.getEdge(),n.isLineEdge()&&!r.isCoveredSet()&&(u=this._op.isCoveredByA(n.getCoordinate()),r.setCovered(u))};ks.prototype.labelIsolatedLines=function(n){for(var t,r,i=n.iterator();i.hasNext();)t=i.next(),r=t.getLabel(),t.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(t,0):this.labelIsolatedLine(t,1))};ks.prototype.buildLines=function(){for(var t,i,n=this._lineEdgesList.iterator();n.hasNext();)t=n.next(),i=this._geometryFactory.createLineString(t.getCoordinates()),this._resultLineList.add(i),t.setInResult(!0)};ks.prototype.collectBoundaryTouchEdge=function(n,t,i){var r=n.getLabel();return n.isLineEdge()||n.isVisited()||n.isInteriorAreaEdge()||n.getEdge().isInResult()?null:(it.isTrue(!(n.isInResult()||n.getSym().isInResult())||!n.getEdge().isInResult()),void(tt.isResultOfOp(r,t)&&t===tt.INTERSECTION&&(i.add(n.getEdge()),n.setVisitedEdge(!0))))};ks.prototype.interfaces_=function(){return[]};ks.prototype.getClass=function(){return ks};uv=function(){this._op=null;this._geometryFactory=null;this._resultPointList=new e;var n=arguments[0],t=arguments[1];this._op=n;this._geometryFactory=t};uv.prototype.filterCoveredNodeToPoint=function(n){var t=n.getCoordinate(),i;this._op.isCoveredByLA(t)||(i=this._geometryFactory.createPoint(t),this._resultPointList.add(i))};uv.prototype.extractNonCoveredResultNodes=function(n){for(var t,r,i=this._op.getGraph().getNodes().iterator();i.hasNext();)t=i.next(),t.isInResult()||t.isIncidentEdgeInResult()||0!==t.getEdges().getDegree()&&n!==tt.INTERSECTION||(r=t.getLabel(),tt.isResultOfOp(r,n)&&this.filterCoveredNodeToPoint(t))};uv.prototype.build=function(n){return this.extractNonCoveredResultNodes(n),this._resultPointList};uv.prototype.interfaces_=function(){return[]};uv.prototype.getClass=function(){return uv};ie=function(){this._inputGeom=null;this._factory=null;this._pruneEmptyGeometry=!0;this._preserveGeometryCollectionType=!0;this._preserveCollections=!1;this._preserveType=!1};ie.prototype.transformPoint=function(n){return this._factory.createPoint(this.transformCoordinates(n.getCoordinateSequence(),n))};ie.prototype.transformPolygon=function(n){var o=!0,t=this.transformLinearRing(n.getExteriorRing(),n),r,u,i,f;for(null!==t&&t instanceof bh&&!t.isEmpty()||(o=!1),r=new e,u=0;u<n.getNumInteriorRing();u++)i=this.transformLinearRing(n.getInteriorRingN(u),n),null===i||i.isEmpty()||(i instanceof bh||(o=!1),r.add(i));return o?this._factory.createPolygon(t,r.toArray([])):(f=new e,null!==t&&f.add(t),f.addAll(r),this._factory.buildGeometry(f))};ie.prototype.createCoordinateSequence=function(n){return this._factory.getCoordinateSequenceFactory().create(n)};ie.prototype.getInputGeometry=function(){return this._inputGeom};ie.prototype.transformMultiLineString=function(n){for(var i,r=new e,t=0;t<n.getNumGeometries();t++)i=this.transformLineString(n.getGeometryN(t),n),null!==i&&(i.isEmpty()||r.add(i));return this._factory.buildGeometry(r)};ie.prototype.transformCoordinates=function(n){return this.copy(n)};ie.prototype.transformLineString=function(n){return this._factory.createLineString(this.transformCoordinates(n.getCoordinateSequence(),n))};ie.prototype.transformMultiPoint=function(n){for(var i,r=new e,t=0;t<n.getNumGeometries();t++)i=this.transformPoint(n.getGeometryN(t),n),null!==i&&(i.isEmpty()||r.add(i));return this._factory.buildGeometry(r)};ie.prototype.transformMultiPolygon=function(n){for(var i,r=new e,t=0;t<n.getNumGeometries();t++)i=this.transformPolygon(n.getGeometryN(t),n),null!==i&&(i.isEmpty()||r.add(i));return this._factory.buildGeometry(r)};ie.prototype.copy=function(n){return n.copy()};ie.prototype.transformGeometryCollection=function(n){for(var r,t=new e,i=0;i<n.getNumGeometries();i++)r=this.transform(n.getGeometryN(i)),null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||t.add(r));return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(rt.toGeometryArray(t)):this._factory.buildGeometry(t)};ie.prototype.transform=function(n){if(this._inputGeom=n,this._factory=n.getFactory(),n instanceof oe)return this.transformPoint(n,null);if(n instanceof bp)return this.transformMultiPoint(n,null);if(n instanceof bh)return this.transformLinearRing(n,null);if(n instanceof pr)return this.transformLineString(n,null);if(n instanceof pa)return this.transformMultiLineString(n,null);if(n instanceof su)return this.transformPolygon(n,null);if(n instanceof kh)return this.transformMultiPolygon(n,null);if(n instanceof gf)return this.transformGeometryCollection(n,null);throw new ar("Unknown Geometry subtype: "+n.getClass().getName());};ie.prototype.transformLinearRing=function(n){var t=this.transformCoordinates(n.getCoordinateSequence(),n),i;return null===t?this._factory.createLinearRing(null):(i=t.size(),i>0&&i<4&&!this._preserveType?this._factory.createLineString(t):this._factory.createLinearRing(t))};ie.prototype.interfaces_=function(){return[]};ie.prototype.getClass=function(){return ie};ch=function n(){var i,r,t,u;(this._snapTolerance=0,this._srcPts=null,this._seg=new a,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof pr&&"number"==typeof arguments[1])?(i=arguments[0],r=arguments[1],n.call(this,i.getCoordinates(),r)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(t=arguments[0],u=arguments[1],this._srcPts=t,this._isClosed=n.isClosed(t),this._snapTolerance=u)};ch.prototype.snapVertices=function(n,t){for(var e,u,f=this._isClosed?n.size()-1:n.size(),r=0;r<f;r++)e=n.get(r),u=this.findSnapForVertex(e,t),null!==u&&(n.set(r,new i(u)),0===r&&this._isClosed&&n.set(n.size()-1,new i(u)))};ch.prototype.findSnapForVertex=function(n,t){for(var i=0;i<t.length;i++){if(n.equals2D(t[i]))return null;if(n.distance(t[i])<this._snapTolerance)return t[i]}return null};ch.prototype.snapTo=function(n){var t=new ik(this._srcPts);return this.snapVertices(t,n),this.snapSegments(t,n),t.toCoordinateArray()};ch.prototype.snapSegments=function(n,t){var u,r,f,e;if(0===t.length)return null;for(u=t.length,t[0].equals2D(t[t.length-1])&&(u=t.length-1),r=0;r<u;r++)f=t[r],e=this.findSegmentIndexToSnap(f,n),e>=0&&n.add(e+1,new i(f),!1)};ch.prototype.findSegmentIndexToSnap=function(n,t){for(var u,i=this,f=nt.MAX_VALUE,e=-1,r=0;r<t.size()-1;r++){if(i._seg.p0=t.get(r),i._seg.p1=t.get(r+1),i._seg.p0.equals2D(n)||i._seg.p1.equals2D(n)){if(i._allowSnappingToSourceVertices)continue;return-1}u=i._seg.distance(n);u<i._snapTolerance&&u<f&&(f=u,e=r)}return e};ch.prototype.setAllowSnappingToSourceVertices=function(n){this._allowSnappingToSourceVertices=n};ch.prototype.interfaces_=function(){return[]};ch.prototype.getClass=function(){return ch};ch.isClosed=function(n){return!(n.length<=1)&&n[0].equals2D(n[n.length-1])};gr=function(n){this._srcGeom=n||null};aft={SNAP_PRECISION_FACTOR:{configurable:!0}};gr.prototype.snapTo=function(n,t){var i=this.extractTargetCoordinates(n);return new vft(t,i).transform(this._srcGeom)};gr.prototype.snapToSelf=function(n,t){var u=this.extractTargetCoordinates(this._srcGeom),r=new vft(n,u,!0).transform(this._srcGeom),i=r;return t&&w(i,ac)&&(i=r.buffer(0)),i};gr.prototype.computeSnapTolerance=function(n){return this.computeMinimumSegmentLength(n)/10};gr.prototype.extractTargetCoordinates=function(n){for(var i=new th,r=n.getCoordinates(),t=0;t<r.length;t++)i.add(r[t]);return i.toArray(new Array(0).fill(null))};gr.prototype.computeMinimumSegmentLength=function(n){for(var r,i=nt.MAX_VALUE,t=0;t<n.length-1;t++)r=n[t].distance(n[t+1]),r<i&&(i=r);return i};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};gr.snap=function(n,t,i){var r=new Array(2).fill(null),f=new gr(n),u;return r[0]=f.snapTo(t,i),u=new gr(t),r[1]=u.snapTo(r[0],i),r};gr.computeOverlaySnapTolerance=function(){var t,u,f;if(1===arguments.length){var i=arguments[0],n=gr.computeSizeBasedSnapTolerance(i),r=i.getPrecisionModel();return r.getType()===wi.FIXED&&(t=2/r.getScale()/1.415,t>n&&(n=t)),n}if(2===arguments.length)return u=arguments[0],f=arguments[1],Math.min(gr.computeOverlaySnapTolerance(u),gr.computeOverlaySnapTolerance(f))};gr.computeSizeBasedSnapTolerance=function(n){var t=n.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*gr.SNAP_PRECISION_FACTOR};gr.snapToSelf=function(n,t,i){return new gr(n).snapToSelf(t,i)};aft.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(gr,aft);vft=function(n){function t(t,i,r){n.call(this);this._snapTolerance=t||null;this._snapPts=i||null;this._isSelfSnap=void 0!==r&&r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(n,t){var i=new ch(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(t)},t.prototype.transformCoordinates=function(n){var t=n.toCoordinateArray(),i=this.snapLine(t,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ie);wf=function(){this._isFirst=!0;this._commonMantissaBitsCount=53;this._commonBits=0;this._commonSignExp=null};wf.prototype.getCommon=function(){return nt.longBitsToDouble(this._commonBits)};wf.prototype.add=function(n){var t=nt.doubleToLongBits(n);return this._isFirst?(this._commonBits=t,this._commonSignExp=wf.signExpBits(this._commonBits),this._isFirst=!1,null):wf.signExpBits(t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=wf.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=wf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))};wf.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],r=nt.longBitsToDouble(t),u=nt.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+u,n=i.substring(i.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+r+" ]"}};wf.prototype.interfaces_=function(){return[]};wf.prototype.getClass=function(){return wf};wf.getBit=function(n,t){return 0!=(n&1<<t)?1:0};wf.signExpBits=function(n){return n>>52};wf.zeroLowerBits=function(n,t){return n&~((1<<t)-1)};wf.numCommonMostSigMantissaBits=function(n,t){for(var r=0,i=52;i>=0;i--){if(wf.getBit(n,i)!==wf.getBit(t,i))return r;r++}return 52};nl=function(){this._commonCoord=null;this._ccFilter=new fv};fn={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};nl.prototype.addCommonBits=function(n){var t=new tl(this._commonCoord);n.apply(t);n.geometryChanged()};nl.prototype.removeCommonBits=function(n){var t,r;return 0===this._commonCoord.x&&0===this._commonCoord.y?n:(t=new i(this._commonCoord),t.x=-t.x,t.y=-t.y,r=new tl(t),n.apply(r),n.geometryChanged(),n)};nl.prototype.getCommonCoordinate=function(){return this._commonCoord};nl.prototype.add=function(n){n.apply(this._ccFilter);this._commonCoord=this._ccFilter.getCommonCoordinate()};nl.prototype.interfaces_=function(){return[]};nl.prototype.getClass=function(){return nl};fn.CommonCoordinateFilter.get=function(){return fv};fn.Translater.get=function(){return tl};Object.defineProperties(nl,fn);fv=function(){this._commonBitsX=new wf;this._commonBitsY=new wf};fv.prototype.filter=function(n){this._commonBitsX.add(n.x);this._commonBitsY.add(n.y)};fv.prototype.getCommonCoordinate=function(){return new i(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};fv.prototype.interfaces_=function(){return[nh]};fv.prototype.getClass=function(){return fv};tl=function(){this.trans=null;var n=arguments[0];this.trans=n};tl.prototype.filter=function(n,t){var i=n.getOrdinate(t,0)+this.trans.x,r=n.getOrdinate(t,1)+this.trans.y;n.setOrdinate(t,0,i);n.setOrdinate(t,1,r)};tl.prototype.isDone=function(){return!1};tl.prototype.isGeometryChanged=function(){return!0};tl.prototype.interfaces_=function(){return[po]};tl.prototype.getClass=function(){return tl};vu=function(n,t){this._geom=new Array(2).fill(null);this._snapTolerance=null;this._cbr=null;this._geom[0]=n;this._geom[1]=t;this.computeSnapTolerance()};vu.prototype.selfSnap=function(n){return new gr(n).snapTo(n,this._snapTolerance)};vu.prototype.removeCommonBits=function(n){this._cbr=new nl;this._cbr.add(n[0]);this._cbr.add(n[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(n[0].copy()),t[1]=this._cbr.removeCommonBits(n[1].copy()),t};vu.prototype.prepareResult=function(n){return this._cbr.addCommonBits(n),n};vu.prototype.getResultGeometry=function(n){var t=this.snap(this._geom),i=tt.overlayOp(t[0],t[1],n);return this.prepareResult(i)};vu.prototype.checkValid=function(n){n.isValid()||rf.out.println("Snapped geometry is invalid")};vu.prototype.computeSnapTolerance=function(){this._snapTolerance=gr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};vu.prototype.snap=function(n){var t=this.removeCommonBits(n);return gr.snap(t[0],t[1],this._snapTolerance)};vu.prototype.interfaces_=function(){return[]};vu.prototype.getClass=function(){return vu};vu.overlayOp=function(n,t,i){return new vu(n,t).getResultGeometry(i)};vu.union=function(n,t){return vu.overlayOp(n,t,tt.UNION)};vu.intersection=function(n,t){return vu.overlayOp(n,t,tt.INTERSECTION)};vu.symDifference=function(n,t){return vu.overlayOp(n,t,tt.SYMDIFFERENCE)};vu.difference=function(n,t){return vu.overlayOp(n,t,tt.DIFFERENCE)};bf=function(n,t){this._geom=new Array(2).fill(null);this._geom[0]=n;this._geom[1]=t};bf.prototype.getResultGeometry=function(n){var t=null,i=!1,r=null;try{t=tt.overlayOp(this._geom[0],this._geom[1],n);i=!0}catch(n){if(!(n instanceof cc))throw n;r=n}if(!i)try{t=vu.overlayOp(this._geom[0],this._geom[1],n)}catch(n){throw n instanceof cc?r:n;}return t};bf.prototype.interfaces_=function(){return[]};bf.prototype.getClass=function(){return bf};bf.overlayOp=function(n,t,i){return new bf(n,t).getResultGeometry(i)};bf.union=function(n,t){return bf.overlayOp(n,t,tt.UNION)};bf.intersection=function(n,t){return bf.overlayOp(n,t,tt.INTERSECTION)};bf.symDifference=function(n,t){return bf.overlayOp(n,t,tt.SYMDIFFERENCE)};bf.difference=function(n,t){return bf.overlayOp(n,t,tt.DIFFERENCE)};ow=function(){this.mce=null;this.chainIndex=null;var n=arguments[0],t=arguments[1];this.mce=n;this.chainIndex=t};ow.prototype.computeIntersections=function(n,t){this.mce.computeIntersectsForChain(this.chainIndex,n.mce,n.chainIndex,t)};ow.prototype.interfaces_=function(){return[]};ow.prototype.getClass=function(){return ow};ae=function n(){var t,i;if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length)t=arguments[0],i=arguments[1],this._eventType=n.DELETE,this._xValue=t,this._insertEvent=i;else if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2];this._eventType=n.INSERT;this._label=r;this._xValue=u;this._obj=f}};en={INSERT:{configurable:!0},DELETE:{configurable:!0}};ae.prototype.isDelete=function(){return this._eventType===ae.DELETE};ae.prototype.setDeleteEventIndex=function(n){this._deleteEventIndex=n};ae.prototype.getObject=function(){return this._obj};ae.prototype.compareTo=function(n){var t=n;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0};ae.prototype.getInsertEvent=function(){return this._insertEvent};ae.prototype.isInsert=function(){return this._eventType===ae.INSERT};ae.prototype.isSameLabel=function(n){return null!==this._label&&this._label===n._label};ae.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};ae.prototype.interfaces_=function(){return[ho]};ae.prototype.getClass=function(){return ae};en.INSERT.get=function(){return 1};en.DELETE.get=function(){return 2};Object.defineProperties(ae,en);ak=function(){};ak.prototype.interfaces_=function(){return[]};ak.prototype.getClass=function(){return ak};gu=function(){this._hasIntersection=!1;this._hasProper=!1;this._hasProperInterior=!1;this._properIntersectionPoint=null;this._li=null;this._includeProper=null;this._recordIsolated=null;this._isSelfIntersection=null;this._numIntersections=0;this.numTests=0;this._bdyNodes=null;this._isDone=!1;this._isDoneWhenProperInt=!1;var n=arguments[0],t=arguments[1],i=arguments[2];this._li=n;this._includeProper=t;this._recordIsolated=i};gu.prototype.isTrivialIntersection=function(n,t,i,r){if(n===i&&1===this._li.getIntersectionNum()){if(gu.isAdjacentSegments(t,r))return!0;if(n.isClosed()){var u=n.getNumPoints()-1;if(0===t&&r===u||0===r&&t===u)return!0}}return!1};gu.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};gu.prototype.setIsDoneIfProperInt=function(n){this._isDoneWhenProperInt=n};gu.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};gu.prototype.isBoundaryPointInternal=function(n,t){for(var r,i=t.iterator();i.hasNext();)if(r=i.next().getCoordinate(),n.isIntersection(r))return!0;return!1};gu.prototype.hasProperIntersection=function(){return this._hasProper};gu.prototype.hasIntersection=function(){return this._hasIntersection};gu.prototype.isDone=function(){return this._isDone};gu.prototype.isBoundaryPoint=function(n,t){return null!==t&&(!!this.isBoundaryPointInternal(n,t[0])||!!this.isBoundaryPointInternal(n,t[1]))};gu.prototype.setBoundaryNodes=function(n,t){this._bdyNodes=new Array(2).fill(null);this._bdyNodes[0]=n;this._bdyNodes[1]=t};gu.prototype.addIntersections=function(n,t,i,r){if(n===i&&t===r)return null;this.numTests++;var u=n.getCoordinates()[t],f=n.getCoordinates()[t+1],e=i.getCoordinates()[r],o=i.getCoordinates()[r+1];this._li.computeIntersection(u,f,e,o);this._li.hasIntersection()&&(this._recordIsolated&&(n.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(n,t,i,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(n.addIntersections(this._li,t,0),i.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};gu.prototype.interfaces_=function(){return[]};gu.prototype.getClass=function(){return gu};gu.isAdjacentSegments=function(n,t){return 1===Math.abs(n-t)};var kti=function(n){function t(){n.call(this);this.events=new e;this.nOverlaps=null}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var n,t;for(go.sort(this.events),n=0;n<this.events.size();n++)t=this.events.get(n),t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(n)},t.prototype.computeIntersections=function(){var r=this,i,n,t;if(1===arguments.length){for(i=arguments[0],this.nOverlaps=0,this.prepareEvents(),n=0;n<this.events.size();n++)if(t=r.events.get(n),t.isInsert()&&r.processOverlaps(n,t.getDeleteEventIndex(),t,i),i.isDone())break}else if(3===arguments.length)if(arguments[2]instanceof gu&&w(arguments[0],vo)&&w(arguments[1],vo)){var u=arguments[0],f=arguments[1],o=arguments[2];this.addEdges(u,u);this.addEdges(f,f);this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&w(arguments[0],vo)&&arguments[1]instanceof gu){var e=arguments[0],s=arguments[1],h=arguments[2];h?this.addEdges(e,null):this.addEdges(e);this.computeIntersections(s)}},t.prototype.addEdge=function(n,t){for(var f,u,r=n.getMonotoneChainEdge(),e=r.getStartIndexes(),i=0;i<e.length-1;i++)f=new ow(r,i),u=new ae(t,r.getMinX(i),f),this.events.add(u),this.events.add(new ae(r.getMaxX(i),u))},t.prototype.processOverlaps=function(n,t,i,r){for(var f,o,e=i.getObject(),u=n;u<t;u++)f=this.events.get(u),f.isInsert()&&(o=f.getObject(),i.isSameLabel(f)||(e.computeIntersections(o,r),this.nOverlaps++))},t.prototype.addEdges=function(){var i=this,r,n,t,f;if(1===arguments.length)for(r=arguments[0],n=r.iterator();n.hasNext();)t=n.next(),i.addEdge(t,t);else if(2===arguments.length)for(var e=arguments[0],o=arguments[1],u=e.iterator();u.hasNext();)f=u.next(),i.addEdge(f,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ak),ic=function(){this._min=nt.POSITIVE_INFINITY;this._max=nt.NEGATIVE_INFINITY},dyt={NodeComparator:{configurable:!0}};ic.prototype.getMin=function(){return this._min};ic.prototype.intersects=function(n,t){return!(this._min>t||this._max<n)};ic.prototype.getMax=function(){return this._max};ic.prototype.toString=function(){return os.toLineString(new i(this._min,0),new i(this._max,0))};ic.prototype.interfaces_=function(){return[]};ic.prototype.getClass=function(){return ic};dyt.NodeComparator.get=function(){return sw};Object.defineProperties(ic,dyt);sw=function(){};sw.prototype.compare=function(n,t){var i=n,r=t,u=(i._min+i._max)/2,f=(r._min+r._max)/2;return u<f?-1:u>f?1:0};sw.prototype.interfaces_=function(){return[op]};sw.prototype.getClass=function(){return sw};var dti=function(n){function t(){n.call(this);this._item=null;var t=arguments[0],i=arguments[1],r=arguments[2];this._min=t;this._max=i;this._item=r}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.query=function(n,t,i){if(!this.intersects(n,t))return null;i.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ic),gti=function(n){function t(){n.call(this);this._node1=null;this._node2=null;var t=arguments[0],i=arguments[1];this._node1=t;this._node2=i;this.buildExtent(this._node1,this._node2)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(n,t){this._min=Math.min(n._min,t._min);this._max=Math.max(n._max,t._max)},t.prototype.query=function(n,t,i){if(!this.intersects(n,t))return null;null!==this._node1&&this._node1.query(n,t,i);null!==this._node2&&this._node2.query(n,t,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ic),rc=function(){this._leaves=new e;this._root=null;this._level=0};rc.prototype.buildTree=function(){go.sort(this._leaves,new ic.NodeComparator);for(var t=this._leaves,i=null,n=new e;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);i=t;t=n;n=i}};rc.prototype.insert=function(n,t,i){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new dti(n,t,i))};rc.prototype.query=function(n,t,i){this.init();this._root.query(n,t,i)};rc.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()};rc.prototype.printNode=function(n){rf.out.println(os.toLineString(new i(n._min,this._level),new i(n._max,this._level)))};rc.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()};rc.prototype.buildLevel=function(n,t){var i,r,u;for(this._level++,t.clear(),i=0;i<n.size();i+=2)r=n.get(i),null===(i+1<n.size()?n.get(i):null)?t.add(r):(u=new gti(n.get(i),n.get(i+1)),t.add(u))};rc.prototype.interfaces_=function(){return[]};rc.prototype.getClass=function(){return rc};sy=function(){this._items=new e};sy.prototype.visitItem=function(n){this._items.add(n)};sy.prototype.getItems=function(){return this._items};sy.prototype.interfaces_=function(){return[yc]};sy.prototype.getClass=function(){return sy};hy=function(){this._index=null;var n=arguments[0];if(!w(n,ac))throw new ar("Argument must be Polygonal");this._index=new na(n)};on={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};hy.prototype.locate=function(n){var t=new ss(n),i=new cy(t);return this._index.query(n.y,n.y,i),t.getLocation()};hy.prototype.interfaces_=function(){return[fy]};hy.prototype.getClass=function(){return hy};on.SegmentVisitor.get=function(){return cy};on.IntervalIndexedGeometry.get=function(){return na};Object.defineProperties(hy,on);cy=function(){this._counter=null;var n=arguments[0];this._counter=n};cy.prototype.visitItem=function(n){var t=n;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))};cy.prototype.interfaces_=function(){return[yc]};cy.prototype.getClass=function(){return cy};na=function(){this._index=new rc;var n=arguments[0];this.init(n)};na.prototype.init=function(n){for(var i,t=bu.getLines(n).iterator();t.hasNext();)i=t.next().getCoordinates(),this.addLine(i)};na.prototype.addLine=function(n){for(var t=1;t<n.length;t++){var i=new a(n[t-1],n[t]),r=Math.min(i.p0.y,i.p1.y),u=Math.max(i.p0.y,i.p1.y);this._index.insert(r,u,i)}};na.prototype.query=function(){if(2===arguments.length){var t=arguments[0],i=arguments[1],n=new sy;return this._index.query(t,i,n),n.getItems()}if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2];this._index.query(r,u,f)}};na.prototype.interfaces_=function(){return[]};na.prototype.getClass=function(){return na};hw=function(n){function t(){if(n.call(this),this._parentGeom=null,this._lineEdgeMap=new ayt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new ts,2===arguments.length){var r=arguments[0],t=arguments[1],u=to.OGC_SFS_BOUNDARY_RULE;this._argIndex=r;this._parentGeom=t;this._boundaryNodeRule=u;null!==t&&this.add(t)}else if(3===arguments.length){var f=arguments[0],i=arguments[1],e=arguments[2];this._argIndex=f;this._parentGeom=i;this._boundaryNodeRule=e;null!==i&&this.add(i)}}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(n,i){var u=this._nodes.addNode(i).getLabel(),e=1,o;u.getLocation(n,f.ON)===r.BOUNDARY&&e++;o=t.determineBoundary(this._boundaryNodeRule,e);u.setLocation(n,o)},t.prototype.computeSelfNodes=function(){var t,i;if(2===arguments.length)return t=arguments[0],i=arguments[1],this.computeSelfNodes(t,i,!1);if(3===arguments.length){var r=arguments[0],u=arguments[1],f=arguments[2],n=new gu(r,!0,!1);n.setIsDoneIfProperInt(f);var e=this.createEdgeSetIntersector(),o=this._parentGeom instanceof bh||this._parentGeom instanceof su||this._parentGeom instanceof kh,s=u||!o;return e.computeIntersections(this._edges,n,s),this.addSelfIntersectionNodes(this._argIndex),n}},t.prototype.computeSplitEdges=function(n){for(var t=this._edges.iterator();t.hasNext();)t.next().eiList.addSplitEdges(n)},t.prototype.computeEdgeIntersections=function(n,t,i){var r=new gu(t,i,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,n._edges,r),r},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){var n,t,u;arguments[0]instanceof oe?(n=arguments[0],t=n.getCoordinate(),this.insertPoint(this._argIndex,t,r.INTERIOR)):arguments[0]instanceof i&&(u=arguments[0],this.insertPoint(this._argIndex,u,r.INTERIOR))},t.prototype.addPolygon=function(n){var t,i;for(this.addPolygonRing(n.getExteriorRing(),r.EXTERIOR,r.INTERIOR),t=0;t<n.getNumInteriorRing();t++)i=n.getInteriorRingN(t),this.addPolygonRing(i,r.INTERIOR,r.EXTERIOR)},t.prototype.addEdge=function(n){this.insertEdge(n);var t=n.getCoordinates();this.insertPoint(this._argIndex,t[0],r.BOUNDARY);this.insertPoint(this._argIndex,t[t.length-1],r.BOUNDARY)},t.prototype.addLineString=function(n){var t=ut.removeRepeatedPoints(n.getCoordinates()),i;if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;i=new lk(t,new di(this._argIndex,r.INTERIOR));this._lineEdgeMap.put(n,i);this.insertEdge(i);it.isTrue(t.length>=2,"found LineString with single point");this.insertBoundaryPoint(this._argIndex,t[0]);this.insertBoundaryPoint(this._argIndex,t[t.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var r,n=this.getBoundaryNodes(),t=new Array(n.size()).fill(null),u=0,i=n.iterator();i.hasNext();)r=i.next(),t[u++]=r.getCoordinate().copy();return t},t.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(n,t,i){if(this.isBoundaryNode(n,t))return null;i===r.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,t):this.insertPoint(n,t,i)},t.prototype.addPolygonRing=function(n,t,i){var u,f,e,s;if(n.isEmpty())return null;if(u=ut.removeRepeatedPoints(n.getCoordinates()),u.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=u[0],null;f=t;e=i;o.isCCW(u)&&(f=i,e=t);s=new lk(u,new di(this._argIndex,r.BOUNDARY,f,e));this._lineEdgeMap.put(n,s);this.insertEdge(s);this.insertPoint(this._argIndex,u[0],r.BOUNDARY)},t.prototype.insertPoint=function(n,t,i){var r=this._nodes.addNode(t),u=r.getLabel();null===u?r._label=new di(n,i):u.setLocation(n,i)},t.prototype.createEdgeSetIntersector=function(){return new kti},t.prototype.addSelfIntersectionNodes=function(n){for(var u,t=this._edges.iterator();t.hasNext();)for(var i=t.next(),f=i.getLabel().getLocation(n),r=i.eiList.iterator();r.hasNext();)u=r.next(),this.addSelfIntersectionNode(n,u.coord,f)},t.prototype.add=function(){if(1!==arguments.length)return n.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof kh&&(this._useBoundaryDeterminationRule=!1),t instanceof su)this.addPolygon(t);else if(t instanceof pr)this.addLineString(t);else if(t instanceof oe)this.addPoint(t);else if(t instanceof bp)this.addCollection(t);else if(t instanceof pa)this.addCollection(t);else if(t instanceof kh)this.addCollection(t);else{if(!(t instanceof gf))throw new Error(t.getClass().getName());this.addCollection(t)}},t.prototype.addCollection=function(n){for(var i,t=0;t<n.getNumGeometries();t++)i=n.getGeometryN(t),this.add(i)},t.prototype.locate=function(n){return w(this._parentGeom,ac)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new hy(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},t.prototype.findEdge=function(){if(1===arguments.length){var t=arguments[0];return this._lineEdgeMap.get(t)}return n.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(n,t){return n.isInBoundary(t)?r.BOUNDARY:r.INTERIOR},t}(yr);ly=function(){var n;if(this._li=new al,this._resultPrecisionModel=null,this._arg=null,1===arguments.length)n=arguments[0],this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new hw(0,n);else if(2===arguments.length){var t=arguments[0],i=arguments[1],f=to.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new hw(0,t,f);this._arg[1]=new hw(1,i,f)}else if(3===arguments.length){var r=arguments[0],u=arguments[1],e=arguments[2];r.getPrecisionModel().compareTo(u.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(u.getPrecisionModel());this._arg=new Array(2).fill(null);this._arg[0]=new hw(0,r,e);this._arg[1]=new hw(1,u,e)}};ly.prototype.getArgGeometry=function(n){return this._arg[n].getGeometry()};ly.prototype.setComputationPrecision=function(n){this._resultPrecisionModel=n;this._li.setPrecisionModel(this._resultPrecisionModel)};ly.prototype.interfaces_=function(){return[]};ly.prototype.getClass=function(){return ly};ta=function(){};ta.prototype.interfaces_=function(){return[]};ta.prototype.getClass=function(){return ta};ta.map=function(){var i,s,r;if(arguments[0]instanceof p&&w(arguments[1],ta.MapOp)){for(var n=arguments[0],h=arguments[1],u=new e,t=0;t<n.getNumGeometries();t++)i=h.map(n.getGeometryN(t)),null!==i&&u.add(i);return n.getFactory().buildGeometry(u)}if(w(arguments[0],uu)&&w(arguments[1],ta.MapOp)){for(var c=arguments[0],l=arguments[1],f=new e,o=c.iterator();o.hasNext();)s=o.next(),r=l.map(s),null!==r&&f.add(r);return f}};ta.MapOp=function(){};tt=function(n){function t(){var t=arguments[0],i=arguments[1];n.call(this,t,i);this._ptLocator=new ts;this._geomFact=null;this._resultGeom=null;this._graph=null;this._edgeList=new ns;this._resultPolyList=new e;this._resultLineList=new e;this._resultPointList=new e;this._graph=new yr(new kyt);this._geomFact=t.getFactory()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(n){var t=this._edgeList.findEqualEdge(n),u,i,r;null!==t?(u=t.getLabel(),i=n.getLabel(),t.isPointwiseEqual(n)||(i=new di(n.getLabel())).flip(),r=t.getDepth(),r.isNull()&&r.add(u),r.add(i),u.merge(i)):this._edgeList.add(n)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var n,i,t=this._graph.getEdgeEnds().iterator();t.hasNext();)n=t.next(),i=n.getSym(),n.isInResult()&&i.isInResult()&&(n.setInResult(!1),i.setInResult(!1))},t.prototype.isCoveredByLA=function(n){return!!this.isCovered(n,this._resultLineList)||!!this.isCovered(n,this._resultPolyList)},t.prototype.computeGeometry=function(n,i,r,u){var f=new e;return f.addAll(n),f.addAll(i),f.addAll(r),f.isEmpty()?t.createEmptyResult(u,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(f)},t.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().mergeSymLabels()},t.prototype.isCovered=function(n,t){for(var u,i=t.iterator();i.hasNext();)if(u=i.next(),this._ptLocator.locate(n,u)!==r.EXTERIOR)return!0;return!1},t.prototype.replaceCollapsedEdges=function(){for(var i,t=new e,n=this._edgeList.iterator();n.hasNext();)i=n.next(),i.isCollapsed()&&(n.remove(),t.add(i.getCollapsedEdge()));this._edgeList.addAll(t)},t.prototype.updateNodeLabelling=function(){for(var t,i,n=this._graph.getNodes().iterator();n.hasNext();)t=n.next(),i=t.getEdges().getLabel(),t.getLabel().merge(i)},t.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},t.prototype.insertUniqueEdges=function(n){for(var i,t=n.iterator();t.hasNext();)i=t.next(),this.insertUniqueEdge(i)},t.prototype.computeOverlay=function(n){var t,i,r,u;this.copyPoints(0);this.copyPoints(1);this._arg[0].computeSelfNodes(this._li,!1);this._arg[1].computeSelfNodes(this._li,!1);this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);t=new e;this._arg[0].computeSplitEdges(t);this._arg[1].computeSplitEdges(t);this.insertUniqueEdges(t);this.computeLabelsFromDepths();this.replaceCollapsedEdges();gl.checkValid(this._edgeList.getEdges());this._graph.addEdges(this._edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(n);this.cancelDuplicateResultEdges();i=new se(this._geomFact);i.add(this._graph);this._resultPolyList=i.getPolygons();r=new ks(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(n);u=new uv(this,this._geomFact,this._ptLocator);this._resultPointList=u.build(n);this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},t.prototype.labelIncompleteNode=function(n,t){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[t].getGeometry());n.getLabel().setLocation(t,i)},t.prototype.copyPoints=function(n){for(var i,t=this._arg[n].getNodeIterator();t.hasNext();)i=t.next(),this._graph.addNode(i.getCoordinate()).setLabel(n,i.getLabel().getLocation(n))},t.prototype.findResultAreaEdges=function(n){for(var i,r,u=this._graph.getEdgeEnds().iterator();u.hasNext();)i=u.next(),r=i.getLabel(),r.isArea()&&!i.isInteriorAreaEdge()&&t.isResultOfOp(r.getLocation(0,f.RIGHT),r.getLocation(1,f.RIGHT),n)&&i.setInResult(!0)},t.prototype.computeLabelsFromDepths=function(){for(var n,r=this._edgeList.iterator();r.hasNext();){var u=r.next(),i=u.getLabel(),t=u.getDepth();if(!t.isNull())for(t.normalize(),n=0;n<2;n++)i.isNull(n)||!i.isArea()||t.isNull(n)||(0===t.getDelta(n)?i.toLine(n):(it.isTrue(!t.isNull(n,f.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(n,f.LEFT,t.getLocation(n,f.LEFT)),it.isTrue(!t.isNull(n,f.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(n,f.RIGHT,t.getLocation(n,f.RIGHT))))}},t.prototype.computeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels();this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var n,i,t=this._graph.getNodes().iterator();t.hasNext();)n=t.next(),i=n.getLabel(),n.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i)},t.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ly);tt.overlayOp=function(n,t,i){return new tt(n,t).getResultGeometry(i)};tt.intersection=function(n,t){if(n.isEmpty()||t.isEmpty())return tt.createEmptyResult(tt.INTERSECTION,n,t,n.getFactory());if(n.isGeometryCollection()){var i=t;return rv.map(n,{interfaces_:function(){return[ta.MapOp]},map:function(n){return n.intersection(i)}})}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),bf.overlayOp(n,t,tt.INTERSECTION)};tt.symDifference=function(n,t){if(n.isEmpty()||t.isEmpty()){if(n.isEmpty()&&t.isEmpty())return tt.createEmptyResult(tt.SYMDIFFERENCE,n,t,n.getFactory());if(n.isEmpty())return t.copy();if(t.isEmpty())return n.copy()}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),bf.overlayOp(n,t,tt.SYMDIFFERENCE)};tt.resultDimension=function(n,t,i){var u=t.getDimension(),f=i.getDimension(),r=-1;switch(n){case tt.INTERSECTION:r=Math.min(u,f);break;case tt.UNION:r=Math.max(u,f);break;case tt.DIFFERENCE:r=u;break;case tt.SYMDIFFERENCE:r=Math.max(u,f)}return r};tt.createEmptyResult=function(n,t,i,r){var u=null;switch(tt.resultDimension(n,t,i)){case-1:u=r.createGeometryCollection(new Array(0).fill(null));break;case 0:u=r.createPoint();break;case 1:u=r.createLineString();break;case 2:u=r.createPolygon()}return u};tt.difference=function(n,t){return n.isEmpty()?tt.createEmptyResult(tt.DIFFERENCE,n,t,n.getFactory()):t.isEmpty()?n.copy():(n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),bf.overlayOp(n,t,tt.DIFFERENCE))};tt.isResultOfOp=function(){if(2===arguments.length){var i=arguments[0],u=arguments[1],f=i.getLocation(0),e=i.getLocation(1);return tt.isResultOfOp(f,e,u)}if(3===arguments.length){var n=arguments[0],t=arguments[1],o=arguments[2];switch(n===r.BOUNDARY&&(n=r.INTERIOR),t===r.BOUNDARY&&(t=r.INTERIOR),o){case tt.INTERSECTION:return n===r.INTERIOR&&t===r.INTERIOR;case tt.UNION:return n===r.INTERIOR||t===r.INTERIOR;case tt.DIFFERENCE:return n===r.INTERIOR&&t!==r.INTERIOR;case tt.SYMDIFFERENCE:return n===r.INTERIOR&&t!==r.INTERIOR||n!==r.INTERIOR&&t===r.INTERIOR}return!1}};tt.INTERSECTION=1;tt.UNION=2;tt.DIFFERENCE=3;tt.SYMDIFFERENCE=4;il=function(){this._g=null;this._boundaryDistanceTolerance=null;this._linework=null;this._ptLocator=new ts;this._seg=new a;var n=arguments[0],t=arguments[1];this._g=n;this._boundaryDistanceTolerance=t;this._linework=this.extractLinework(n)};il.prototype.isWithinToleranceOfBoundary=function(n){for(var u,i,t=this,r=0;r<this._linework.getNumGeometries();r++)for(u=t._linework.getGeometryN(r).getCoordinateSequence(),i=0;i<u.size()-1;i++)if(u.getCoordinate(i,t._seg.p0),u.getCoordinate(i+1,t._seg.p1),t._seg.distance(n)<=t._boundaryDistanceTolerance)return!0;return!1};il.prototype.getLocation=function(n){return this.isWithinToleranceOfBoundary(n)?r.BOUNDARY:this._ptLocator.locate(n,this._g)};il.prototype.extractLinework=function(n){var t=new ay,i,r;return n.apply(t),i=t.getLinework(),r=rt.toLineStringArray(i),n.getFactory().createMultiLineString(r)};il.prototype.interfaces_=function(){return[]};il.prototype.getClass=function(){return il};ay=function(){this._linework=null;this._linework=new e};ay.prototype.getLinework=function(){return this._linework};ay.prototype.filter=function(n){var t,i;if(n instanceof su)for(t=n,this._linework.add(t.getExteriorRing()),i=0;i<t.getNumInteriorRing();i++)this._linework.add(t.getInteriorRingN(i))};ay.prototype.interfaces_=function(){return[hs]};ay.prototype.getClass=function(){return ay};ia=function(){this._g=null;this._doLeft=!0;this._doRight=!0;var n=arguments[0];this._g=n};ia.prototype.extractPoints=function(n,t,i){for(var u=n.getCoordinates(),r=0;r<u.length-1;r++)this.computeOffsetPoints(u[r],u[r+1],t,i)};ia.prototype.setSidesToGenerate=function(n,t){this._doLeft=n;this._doRight=t};ia.prototype.getPoints=function(n){for(var r,t=new e,i=bu.getLines(this._g).iterator();i.hasNext();)r=i.next(),this.extractPoints(r,n,t);return t};ia.prototype.computeOffsetPoints=function(n,t,r,u){var f=t.x-n.x,e=t.y-n.y,o=Math.sqrt(f*f+e*e),s=r*f/o,h=r*e/o,c=(t.x+n.x)/2,l=(t.y+n.y)/2,a,v;this._doLeft&&(a=new i(c-h,l+s),u.add(a));this._doRight&&(v=new i(c+h,l-s),u.add(v))};ia.prototype.interfaces_=function(){return[]};ia.prototype.getClass=function(){return ia};be=function n(){this._geom=null;this._locFinder=null;this._location=new Array(3).fill(null);this._invalidLocation=null;this._boundaryDistanceTolerance=n.TOLERANCE;this._testCoords=new e;var t=arguments[0],i=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=n.computeBoundaryDistanceTolerance(t,i);this._geom=[t,i,r];this._locFinder=[new il(this._geom[0],this._boundaryDistanceTolerance),new il(this._geom[1],this._boundaryDistanceTolerance),new il(this._geom[2],this._boundaryDistanceTolerance)]};yft={TOLERANCE:{configurable:!0}};be.prototype.reportResult=function(n,t,i){rf.out.println("Overlay result invalid - A:"+r.toLocationSymbol(t[0])+" B:"+r.toLocationSymbol(t[1])+" expected:"+(i?"i":"e")+" actual:"+r.toLocationSymbol(t[2]))};be.prototype.isValid=function(n){this.addTestPts(this._geom[0]);this.addTestPts(this._geom[1]);return this.checkValid(n)};be.prototype.checkValid=function(){var i=this,f,n,u,e,t;if(1===arguments.length){for(f=arguments[0],n=0;n<this._testCoords.size();n++)if(u=i._testCoords.get(n),!i.checkValid(f,u))return i._invalidLocation=u,!1;return!0}if(2===arguments.length)return e=arguments[0],t=arguments[1],this._location[0]=this._locFinder[0].getLocation(t),this._location[1]=this._locFinder[1].getLocation(t),this._location[2]=this._locFinder[2].getLocation(t),!!be.hasLocation(this._location,r.BOUNDARY)||this.isValidResult(e,this._location)};be.prototype.addTestPts=function(n){var t=new ia(n);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))};be.prototype.isValidResult=function(n,t){var i=tt.isResultOfOp(t[0],t[1],n),u=!(i^t[2]===r.INTERIOR);return u||this.reportResult(n,t,i),u};be.prototype.getInvalidLocation=function(){return this._invalidLocation};be.prototype.interfaces_=function(){return[]};be.prototype.getClass=function(){return be};be.hasLocation=function(n,t){for(var i=0;i<3;i++)if(n[i]===t)return!0;return!1};be.computeBoundaryDistanceTolerance=function(n,t){return Math.min(gr.computeSizeBasedSnapTolerance(n),gr.computeSizeBasedSnapTolerance(t))};be.isValid=function(n,t,i,r){return new be(n,t,r).isValid(i)};yft.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(be,yft);ke=function n(t){this._geomFactory=null;this._skipEmpty=!1;this._inputGeoms=null;this._geomFactory=n.extractFactory(t);this._inputGeoms=t};ke.prototype.extractElements=function(n,t){var i,r;if(null===n)return null;for(i=0;i<n.getNumGeometries();i++)r=n.getGeometryN(i),this._skipEmpty&&r.isEmpty()||t.add(r)};ke.prototype.combine=function(){for(var i,n=new e,t=this._inputGeoms.iterator();t.hasNext();)i=t.next(),this.extractElements(i,n);return 0===n.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(n)};ke.prototype.interfaces_=function(){return[]};ke.prototype.getClass=function(){return ke};ke.combine=function(){var n,t;if(1===arguments.length)return n=arguments[0],t=new ke(n),t.combine();if(2===arguments.length){var i=arguments[0],r=arguments[1],u=new ke(ke.createList(i,r));return u.combine()}if(3===arguments.length){var f=arguments[0],e=arguments[1],o=arguments[2],s=new ke(ke.createList(f,e,o));return s.combine()}};ke.extractFactory=function(n){return n.isEmpty()?null:n.iterator().next().getFactory()};ke.createList=function(){if(2===arguments.length){var i=arguments[0],r=arguments[1],t=new e;return t.add(i),t.add(r),t}if(3===arguments.length){var u=arguments[0],f=arguments[1],o=arguments[2],n=new e;return n.add(u),n.add(f),n.add(o),n}};iu=function(){this._inputPolys=null;this._geomFactory=null;var n=arguments[0];this._inputPolys=n;null===this._inputPolys&&(this._inputPolys=new e)};pft={STRTREE_NODE_CAPACITY:{configurable:!0}};iu.prototype.reduceToGeometries=function(n){for(var t,i,r=new e,u=n.iterator();u.hasNext();)t=u.next(),i=null,w(t,vo)?i=this.unionTree(t):t instanceof p&&(i=t),r.add(i);return r};iu.prototype.extractByEnvelope=function(n,t,i){for(var u,f=new e,r=0;r<t.getNumGeometries();r++)u=t.getGeometryN(r),u.getEnvelopeInternal().intersects(n)?f.add(u):i.add(u);return this._geomFactory.buildGeometry(f)};iu.prototype.unionOptimized=function(n,t){var i=n.getEnvelopeInternal(),r=t.getEnvelopeInternal(),u;return i.intersects(r)?n.getNumGeometries()<=1&&t.getNumGeometries()<=1?this.unionActual(n,t):(u=i.intersection(r),this.unionUsingEnvelopeIntersection(n,t,u)):ke.combine(n,t)};iu.prototype.union=function(){var n,t,i,r;if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;for(this._geomFactory=this._inputPolys.iterator().next().getFactory(),n=new pyt(iu.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();)i=t.next(),n.insert(i.getEnvelopeInternal(),i);return this._inputPolys=null,r=n.itemsTree(),this.unionTree(r)};iu.prototype.binaryUnion=function(){var r,u;if(1===arguments.length)return r=arguments[0],this.binaryUnion(r,0,r.size());if(3===arguments.length){var t=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1)return u=iu.getGeometry(t,n),this.unionSafe(u,null);if(i-n==2)return this.unionSafe(iu.getGeometry(t,n),iu.getGeometry(t,n+1));var f=Math.trunc((i+n)/2),e=this.binaryUnion(t,n,f),o=this.binaryUnion(t,f,i);return this.unionSafe(e,o)}};iu.prototype.repeatedUnion=function(n){for(var r,t=null,i=n.iterator();i.hasNext();)r=i.next(),t=null===t?r.copy():t.union(r);return t};iu.prototype.unionSafe=function(n,t){return null===n&&null===t?null:null===n?t.copy():null===t?n.copy():this.unionOptimized(n,t)};iu.prototype.unionActual=function(n,t){return iu.restrictToPolygons(n.union(t))};iu.prototype.unionTree=function(n){var t=this.reduceToGeometries(n);return this.binaryUnion(t)};iu.prototype.unionUsingEnvelopeIntersection=function(n,t,i){var r=new e,u=this.extractByEnvelope(i,n,r),f=this.extractByEnvelope(i,t,r),o=this.unionActual(u,f);return r.add(o),ke.combine(r)};iu.prototype.bufferUnion=function(){if(1===arguments.length){var n=arguments[0],i=n.get(0).getFactory(),r=i.buildGeometry(n);return r.buffer(0)}if(2===arguments.length){var t=arguments[0],u=arguments[1],f=t.getFactory(),e=f.createGeometryCollection([t,u]);return e.buffer(0)}};iu.prototype.interfaces_=function(){return[]};iu.prototype.getClass=function(){return iu};iu.restrictToPolygons=function(n){if(w(n,ac))return n;var t=tc.getPolygons(n);return 1===t.size()?t.get(0):n.getFactory().createMultiPolygon(rt.toPolygonArray(t))};iu.getGeometry=function(n,t){return t>=n.size()?null:n.get(t)};iu.union=function(n){return new iu(n).union()};pft.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(iu,pft);vk=function(){};vk.prototype.interfaces_=function(){return[]};vk.prototype.getClass=function(){return vk};vk.union=function(n,t){if(n.isEmpty()||t.isEmpty()){if(n.isEmpty()&&t.isEmpty())return tt.createEmptyResult(tt.UNION,n,t,n.getFactory());if(n.isEmpty())return t.copy();if(t.isEmpty())return n.copy()}return n.checkNotGeometryCollection(n),n.checkNotGeometryCollection(t),bf.overlayOp(n,t,tt.UNION)};sn.prototype={constructor:sn,reset:function(){this.s=this.t=0},add:function(n){gyt(yk,n,this.t);gyt(this,yk.s,this.s);this.s?this.t+=yk.t:this.s=yk.t},valueOf:function(){return this.s}};yk=new sn;var eu=1e-6,fr=Math.PI,rl=fr/2,npt=fr/4,ul=2*fr,ov=180/fr,lh=fr/180,re=Math.abs,nii=Math.atan,cw=Math.atan2,hu=Math.cos,cu=Math.sin,pk=Math.sqrt;wft={Feature:function(n,t){hn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,u=i.length;++r<u;)hn(i[r].geometry,t)}};bft={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates;t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){kft(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)kft(i[r],t,0)},Polygon:function(n,t){ipt(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,u=i.length;++r<u;)ipt(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,u=i.length;++r<u;)hn(i[r],t)}};ev();ev();ev();tet.invert=tet;1===(iet=lpt).length&&(apt=iet,iet=function(n,t){return lpt(apt(n),t)});vw=1e9;bk=-vw;pn=ev();ev();ev();ev();var yw=1/0,wn=yw,kk=-yw,bn=kk,ppt={point:function(n,t){n<yw&&(yw=n);n>kk&&(kk=n);t<wn&&(wn=t);t>bn&&(bn=t)},lineStart:wk,lineEnd:wk,polygonStart:wk,polygonEnd:wk,result:function(){var n=[[yw,wn],[kk,bn]];return kk=bn=-(wn=yw=1/0),n}};ev();ret=wpt(function(){return!0},function(n){var u,i=NaN,t=NaN,r=NaN;return{lineStart:function(){n.lineStart();u=1},point:function(f,e){var o=f>0?fr:-fr,s=re(f-i);re(s-fr)<eu?(n.point(i,t=(t+e)/2>0?rl:-rl),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(o,t),n.point(f,t),u=0):r!==o&&s>=fr&&(re(i-r)<eu&&(i-=r*eu),re(f-o)<eu&&(f-=o*eu),t=function(n,t,i,r){var u,f,e=cu(n-i);return re(e)>eu?nii((cu(t)*(f=hu(r))*cu(i)-cu(r)*(u=hu(t))*cu(n))/(u*f*e)):(t+r)/2}(i,t,f,e),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(o,t),u=0);n.point(i=f,t=e);r=o},lineEnd:function(){n.lineEnd();i=t=NaN},clean:function(){return 2-u}}},function(n,t,i,r){var u,f;null==n?(u=i*rl,r.point(-fr,u),r.point(0,u),r.point(fr,u),r.point(fr,0),r.point(fr,-u),r.point(0,-u),r.point(-fr,-u),r.point(-fr,0),r.point(-fr,u)):re(n[0]-t[0])>eu?(f=n[0]<t[0]?fr:-fr,u=i*f/2,r.point(-f,u),r.point(0,u),r.point(f,u)):r.point(t[0],t[1])},[-fr,-rl]);uet.prototype={constructor:uet,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};dpt=hu(30*lh);nwt=bpt({point:function(n,t){this.stream.point(n*lh,t*lh)}});fet=function(n){return function(t,i){var f=hu(t),r=hu(i),u=n(f*r);return[u*r*cu(t),u*cu(i)]}}(function(n){return(n=tpt(n))&&n/cu(n)});fet.invert=function(n){return function(t,i){var r=pk(t*t+i*i),u=n(r),f=cu(u),e=hu(u);return[cw(t*f,r*e),lw(r&&i*f/r)]}}(function(n){return n});n.along=function(n,t,i){var e,o;void 0===i&&(i={});for(var r=hr(n).coordinates,f=0,u=0;u<r.length&&!(t>=f&&u===r.length-1);u++){if(f>=t)return(e=t-f,e)?(o=ol(r[u],r[u-1])-180,ec(r[u],e,o,i)):ft(r[u]);f+=ir(r[u],r[u+1],i)}return ft(r[r.length-1])};n.angle=function(n,t,i,r){if(void 0===r&&(r={}),!tr(r))throw new Error("options is invalid");if(!n)throw new Error("startPoint is required");if(!t)throw new Error("midPoint is required");if(!i)throw new Error("endPoint is required");var f=n,u=t,e=i,s=hv(!0!==r.mercator?ol(f,u):pv(f,u)),h=hv(!0!==r.mercator?ol(e,u):pv(e,u)),o=Math.abs(s-h);return!0===r.explementary?360-o:o};n.applyFilter=fg;n.area=pit;n.areaFactors=nd;n.bbox=ou;n.bboxClip=function(n,t){var e=hr(n),f=e.type,u="Feature"===n.type?n.properties:{},i=e.coordinates,r;switch(f){case"LineString":case"MultiLineString":return r=[],"LineString"===f&&(i=[i]),i.forEach(function(n){!function(n,t,i){var r,f,h,s,e,c=n.length,o=np(n[0],t),u=[];for(i||(i=[]),r=1;r<c;r++){for(s=n[r-1],f=h=np(e=n[r],t);;){if(!(o|f)){u.push(s);f!==h?(u.push(e),r<c-1&&(i.push(u),u=[])):r===c-1&&u.push(e);break}if(o&f)break;o?o=np(s=rrt(s,e,o,t),t):f=np(e=rrt(s,e,f,t),t)}o=h}u.length&&i.push(u)}(n,t,r)}),1===r.length?gi(r[0],u):ra(r,u);case"Polygon":return ot(act(i,t),u);case"MultiPolygon":return eo(i.map(function(n){return act(n,t)}),u);default:throw new Error("geometry "+f+" not supported");}};n.bboxPolygon=uit;n.bearing=ol;n.bearingToAngle=hv;n.bearingToAzimuth=hv;n.bezier=yst;n.bezierSpline=yst;n.booleanClockwise=dd;n.booleanContains=function(n,t){var i=hr(n),r=hr(t),f=i.type,u=r.type,e=i.coordinates,o=r.coordinates;switch(f){case"Point":switch(u){case"Point":return wrt(e,o);default:throw new Error("feature2 "+u+" geometry not supported");}case"MultiPoint":switch(u){case"Point":return function(n,t){for(var r=!1,i=0;i<n.coordinates.length;i++)if(wrt(n.coordinates[i],t.coordinates)){r=!0;break}return r}(i,r);case"MultiPoint":return function(n,t){for(var i=0,r=t.coordinates;i<r.length;i++){for(var o=r[i],f=!1,u=0,e=n.coordinates;u<e.length;u++)if(wrt(o,e[u])){f=!0;break}if(!f)return!1}return!0}(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"LineString":switch(u){case"Point":return so(r,i,{ignoreEndVertices:!0});case"LineString":return function(n,t){for(var r,u=!1,i=0,f=t.coordinates;i<f.length;i++)if(r=f[i],so({type:"Point",coordinates:r},n,{ignoreEndVertices:!0})&&(u=!0),!so({type:"Point",coordinates:r},n,{ignoreEndVertices:!1}))return!1;return u}(i,r);case"MultiPoint":return function(n,t){for(var r,u=!1,i=0,f=t.coordinates;i<f.length;i++)if(r=f[i],so(r,n,{ignoreEndVertices:!0})&&(u=!0),!so(r,n))return!1;return u?!0:!1}(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"Polygon":switch(u){case"Point":return cr(r,i,{ignoreBoundary:!0});case"LineString":return function(n,t){var r=!1,i=0,u=ou(n),f=ou(t);if(!llt(u,f))return!1;for(;i<t.coordinates.length-1;i++)if(cr({type:"Point",coordinates:agt(t.coordinates[i],t.coordinates[i+1])},n,{ignoreBoundary:!0})){r=!0;break}return r}(i,r);case"Polygon":return function(n,t){var f,e,i,u;if("Feature"===n.type&&null===n.geometry||"Feature"===t.type&&null===t.geometry||(f=ou(n),e=ou(t),!llt(f,e)))return!1;for(var s=hr(t).coordinates,r=0,o=s;r<o.length;r++)for(i=0,u=o[r];i<u.length;i++)if(!cr(u[i],n))return!1;return!0}(i,r);case"MultiPoint":return function(n,t){for(var i=0,r=t.coordinates;i<r.length;i++)if(!cr(r[i],n,{ignoreBoundary:!0}))return!1;return!0}(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}default:throw new Error("feature1 "+f+" geometry not supported");}};n.booleanCrosses=function(n,t){var i=hr(n),r=hr(t),f=i.type,u=r.type;switch(f){case"MultiPoint":switch(u){case"LineString":return alt(i,r);case"Polygon":return ylt(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"LineString":switch(u){case"MultiPoint":return alt(r,i);case"LineString":return function(n,t){var r,i,u;if(sl(n,t).features.length>0)for(r=0;r<n.coordinates.length-1;r++)for(i=0;i<t.coordinates.length-1;i++)if(u=!0,0!==i&&i!==t.coordinates.length-2||(u=!1),plt(n.coordinates[r],n.coordinates[r+1],t.coordinates[i],u))return!0;return!1}(i,r);case"Polygon":return vlt(i,r);default:throw new Error("feature2 "+u+" geometry not supported");}case"Polygon":switch(u){case"MultiPoint":return ylt(r,i);case"LineString":return vlt(r,i);default:throw new Error("feature2 "+u+" geometry not supported");}default:throw new Error("feature1 "+f+" geometry not supported");}};n.booleanDisjoint=slt;n.booleanEqual=function(n,t){return hr(n).type===hr(t).type&&new brt({precision:6}).compare(av(n),av(t))};n.booleanIntersects=klt;n.booleanOverlap=function(n,t){var o=hr(n),s=hr(t),i=o.type,r=s.type,u,f,e,h,c;if("MultiPoint"===i&&"MultiPoint"!==r||("LineString"===i||"MultiLineString"===i)&&"LineString"!==r&&"MultiLineString"!==r||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==r&&"MultiPolygon"!==r)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new brt({precision:6}).compare(n,t))return!1;u=0;switch(i){case"MultiPoint":for(f=0;f<o.coordinates.length;f++)for(e=0;e<s.coordinates.length;e++)if(h=o.coordinates[f],c=s.coordinates[e],h[0]===c[0]&&h[1]===c[1])return!0;return!1;case"LineString":case"MultiLineString":fl(n,function(n){fl(t,function(t){pct(n,t).features.length&&u++})});break;case"Polygon":case"MultiPolygon":fl(n,function(n){fl(t,function(t){sl(n,t).features.length&&u++})})}return u>0};n.booleanParallel=function(n,t){var f;if(!n)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");if("LineString"!==iat(n,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==iat(t,"line2"))throw new Error("line2 must be a LineString");for(var r=yv(av(n)).features,u=yv(av(t)).features,i=0;i<r.length;i++){if(f=r[i].geometry.coordinates,!u[i])break;if(!int(f,u[i].geometry.coordinates))return!1}return!0};n.booleanPointInPolygon=cr;n.booleanPointOnLine=so;n.booleanWithin=bht;n.buffer=function(n,t,i){var f=(i=i||{}).units||"kilometers",r=i.steps||8,u;if(!n)throw new Error("geojson is required");if("object"!=typeof i)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===t)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");u=[];switch(n.type){case"GeometryCollection":return oo(n,function(n){var i=kn(n,t,f,r);i&&u.push(i)}),b(u);case"FeatureCollection":return ki(n,function(n){var i=kn(n,t,f,r);i&&ki(i,function(n){n&&u.push(n)})}),b(u)}return kn(n,t,f,r)};n.center=cd;n.centerMean=iut;n.centerMedian=function(n,t){var i,u;if(void 0===t&&(t={}),!tr(t=t||{}))throw new Error("options is invalid");if(i=t.counter||10,!tf(i))throw new Error("counter must be a number");var f=t.weight,e=iut(n,{weight:t.weight}),r=b([]);return ki(n,function(n){var t;r.features.push(fa(n,{properties:{weight:null===(t=n.properties)||void 0===t?void 0:t[f]}}))}),u={tolerance:t.tolerance,medianCandidates:[]},vat(e.geometry.coordinates,[0,0],r,u,i)};n.centerOfMass=function n(t,i){var u,l,a;switch(void 0===i&&(i={}),de(t)){case"Point":return ft(er(t),i.properties);case"Polygon":u=[];ru(t,function(n){u.push(n)});for(var v,y,e,o,s,p,h,w=fa(t,{properties:i.properties}),f=w.geometry.coordinates,b=0,k=0,c=0,d=u.map(function(n){return[n[0]-f[0],n[1]-f[1]]}),r=0;r<u.length-1;r++)e=(v=d[r])[0],s=v[1],o=(y=d[r+1])[0],c+=h=e*(p=y[1])-o*s,b+=(e+o)*h,k+=(s+p)*h;return 0===c?w:(l=1/(6*.5*c),ft([f[0]+l*b,f[1]+l*k],i.properties));default:return a=got(t),a?n(a,{properties:i.properties}):fa(t,{properties:i.properties})}};n.centroid=fa;n.circle=fit;n.cleanCoords=av;n.clone=kf;n.clusterEach=rut;n.clusterReduce=cvt;n.clusters=avt;n.clustersDbscan=function(n,t,i){void 0===i&&(i={});!0!==i.mutate&&(n=kf(n));i.minPoints=i.minPoints||3;var r=new bgt.DBSCAN,f=r.run(yy(n),cv(t,i.units),i.minPoints,ir),u=-1;return f.forEach(function(t){u++;t.forEach(function(t){var i=n.features[t];i.properties||(i.properties={});i.properties.cluster=u;i.properties.dbscan="core"})}),r.noise.forEach(function(t){var i=n.features[t];i.properties||(i.properties={});i.properties.dbscan=i.properties.cluster?"edge":"noise"}),n};n.clustersKmeans=function(n,t){var i;void 0===t&&(t={});i=n.features.length;t.numberOfClusters=t.numberOfClusters||Math.round(Math.sqrt(i/2));t.numberOfClusters>i&&(t.numberOfClusters=i);!0!==t.mutate&&(n=kf(n));var r=yy(n),e=r.slice(0,t.numberOfClusters),u=tat(r,t.numberOfClusters,e),f={};return u.centroids.forEach(function(n,t){f[t]=n}),ki(n,function(n,t){var i=u.idxs[t];n.properties.cluster=i;n.properties.centroid=f[i]}),n};n.collect=function(n,t,i,r){var u=ue(6),f=t.features.map(function(n){var t;return{minX:n.geometry.coordinates[0],minY:n.geometry.coordinates[1],maxX:n.geometry.coordinates[0],maxY:n.geometry.coordinates[1],property:null===(t=n.properties)||void 0===t?void 0:t[i]}});return u.load(f),n.features.forEach(function(n){n.properties||(n.properties={});var t=ou(n),f=u.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}),i=[];f.forEach(function(t){cr([t.minX,t.minY],n)&&i.push(t.property)});n.properties[r]=i}),n};n.collectionOf=el;n.combine=function(n){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return ki(n,function(n){var r,u,f,i;switch(null===(i=n.geometry)||void 0===i?void 0:i.type){case"Point":t.MultiPoint.coordinates.push(n.geometry.coordinates);t.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(r=t.MultiPoint.coordinates).push.apply(r,n.geometry.coordinates);t.MultiPoint.properties.push(n.properties);break;case"LineString":t.MultiLineString.coordinates.push(n.geometry.coordinates);t.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(u=t.MultiLineString.coordinates).push.apply(u,n.geometry.coordinates);t.MultiLineString.properties.push(n.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(n.geometry.coordinates);t.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(f=t.MultiPolygon.coordinates).push.apply(f,n.geometry.coordinates);t.MultiPolygon.properties.push(n.properties)}}),b(Object.keys(t).filter(function(n){return t[n].coordinates.length}).sort().map(function(n){return yu({type:n,coordinates:t[n].coordinates},{collectedProperties:t[n].properties})}))};n.concave=function(n,t){var u,r,i;return(void 0===t&&(t={}),u=t.maxEdge||1/0,r=tst(function(n){var t=[],i={};return ki(n,function(n){if(n.geometry){var r=n.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(i,r)||(t.push(n),i[r]=!0)}}),b(t)}(n)),r.features=r.features.filter(function(n){var i=n.geometry.coordinates[0][0],r=n.geometry.coordinates[0][1],f=n.geometry.coordinates[0][2],e=ir(i,r,t),o=ir(r,f,t),s=ir(i,f,t);return e<=u&&o<=u&&s<=u}),r.features.length<1)?null:(i=ikt(r),1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),yu(i))};n.containsNumber=ett;n.convertArea=vet;n.convertDistance=cv;n.convertLength=cv;n.convex=got;n.coordAll=yy;n.coordEach=ru;n.coordReduce=gn;n.createBins=uut;n.degrees2radians=nf;n.degreesToRadians=nf;n.destination=ec;n.difference=function(n,t){var u=hr(n),f=hr(t),r=n.properties||{},i=ll.difference(u.coordinates,f.coordinates);return 0===i.length?null:1===i.length?ot(i[0],r):eo(i,r)};n.dissolve=function(n,t){var r,e,i,f,u,o;if(!tr(t=t||{}))throw new Error("options is invalid");if(r=t.propertyName,el(n,"Polygon","dissolve"),e=[],!t.propertyName)return kit(eo(ll.union.apply(null,n.features.map(function(n){return n.geometry.coordinates}))));for(i={},ki(n,function(n){Object.prototype.hasOwnProperty.call(i,n.properties[r])||(i[n.properties[r]]=[]);i[n.properties[r]].push(n)}),f=Object.keys(i),u=0;u<f.length;u++)o=eo(ll.union.apply(null,i[f[u]].map(function(n){return n.geometry.coordinates}))),o.properties[r]=f[u],e.push(o);return kit(b(e))};n.distance=ir;n.distanceToDegrees=td;n.distanceToRadians=sv;n.distanceWeight=pat;n.earthRadius=uc;n.ellipse=lat;n.envelope=pst;n.explode=ld;n.factors=gk;n.feature=yu;n.featureCollection=b;n.featureEach=ki;n.featureOf=ww;n.featureReduce=ttt;n.filterProperties=lvt;n.findPoint=det;n.findSegment=ket;n.flatten=kit;n.flattenEach=sf;n.flattenReduce=bet;n.flip=function(n,t){if(!tr(t=t||{}))throw new Error("options is invalid");var i=t.mutate;if(!n)throw new Error("geojson is required");return!1!==i&&void 0!==i||(n=kf(n)),ru(n,function(n){var t=n[0],i=n[1];n[0]=i;n[1]=t}),n};n.geojsonType=get;n.geomEach=oo;n.geomReduce=itt;n.geometry=oet;n.geometryCollection=dn;n.getCluster=hvt;n.getCoord=er;n.getCoords=d;n.getGeom=hr;n.getType=de;n.greatCircle=function(n,t,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var r=i.properties,u=i.npoints,f=i.offset;return n=er(n),t=er(t),r=r||{},u=u||100,f=f||10,new kd({x:n[0],y:n[1]},{x:t[0],y:t[1]},r).Arc(u,{offset:f}).json()};n.helpers=swt;n.hexGrid=uwt;n.inside=cr;n.interpolate=function(n,t,i){var f,e,s;if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var o=i.gridType,r=i.property,u=i.weight;if(!n)throw new Error("points is required");if(el(n,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(void 0!==u&&"number"!=typeof u)throw new Error("weight must be a number");r=r||"elevation";o=o||"square";u=u||1;e=ou(n);switch(o){case"point":case"points":f=ght(e,t,i);break;case"square":case"squares":f=ewt(e,t,i);break;case"hex":case"hexes":f=uwt(e,t,i);break;case"triangle":case"triangles":f=owt(e,t,i);break;default:throw new Error("invalid gridType");}return s=[],ki(f,function(t){var f=0,h=0,e;ki(n,function(n){var e,c=ir("point"===o?t:fa(t),n,i),s;if(void 0!==r&&(e=n.properties[r]),void 0===e&&(e=n.geometry.coordinates[2]),void 0===e)throw new Error("zValue is missing");0===c&&(f=e);s=1/Math.pow(c,u);h+=s;f+=s*e});e=kf(t);e.properties[r]=f/h;s.push(e)}),b(s)};n.intersect=dk;n.invariant=cwt;n.isNumber=tf;n.isObject=tr;n.isobands=function(n,t,i){var f,e;if(!tr(i=i||{}))throw new Error("options is invalid");var r=i.zProperty||"elevation",o=i.commonProperties||{},u=i.breaksProperties||[];if(el(n,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!tr(o))throw new Error("commonProperties is not an Object");if(!Array.isArray(u))throw new Error("breaksProperties is not an Array");return f=gdt(n,{zProperty:r,flip:!0}),e=function(n,t,i){for(var u=[],r=1;r<t.length;r++){var f=+t[r-1],o=+t[r],s=fgt(ugt(ngt(n,f,o-f))),e={};e.groupedRings=s;e[i]=f+"-"+o;u.push(e)}return u}(f,t,r),b((e=function(n,t,i){var r=ou(i),u=r[2]-r[0],f=r[3]-r[1],e=r[0],o=r[1],s=t[0].length-1,h=t.length-1,c=u/s,l=f/h,a=function(n){n[0]=n[0]*c+e;n[1]=n[1]*l+o};return n.forEach(function(n){n.groupedRings.forEach(function(n){n.forEach(function(n){n.forEach(a)})})}),n}(e,f,n)).map(function(n,t){if(u[t]&&!tr(u[t]))throw new Error("Each mappedProperty is required to be an Object");var i=ott({},o,u[t]);return i[r]=n[r],eo(n.groupedRings,i)}))};n.isolines=function(n,t,i){var r;if(!tr(i=i||{}))throw new Error("options is invalid");var u=i.zProperty||"elevation",f=i.commonProperties||{},e=i.breaksProperties||[];if(el(n,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!tr(f))throw new Error("commonProperties must be an Object");if(!Array.isArray(e))throw new Error("breaksProperties must be an Array");return r=pwt(n,{zProperty:u,flip:!0}),b(function(n,t,i){var r=ou(i),u=r[2]-r[0],f=r[3]-r[1],e=r[0],o=r[1],s=t[0].length-1,h=t.length-1,c=u/s,l=f/h,a=function(n){n[0]=n[0]*c+e;n[1]=n[1]*l+o};return n.forEach(function(n){ru(n,a)}),n}(function(n,t,i,r,u){for(var o,s,h,e=[],f=1;f<t.length;f++)o=+t[f],s=ott({},r,u[f]),s[i]=o,h=ra(ywt(n,o),s),e.push(h);return e}(r,t,u,f,e),r,n))};n.kinks=function(n){var i,t,r={type:"FeatureCollection",features:[]};if("LineString"===(t="Feature"===n.type?n.geometry:n).type)i=[t.coordinates];else if("MultiLineString"===t.type)i=t.coordinates;else if("MultiPolygon"===t.type)i=[].concat.apply([],t.coordinates);else{if("Polygon"!==t.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");i=t.coordinates}return i.forEach(function(n){i.forEach(function(t){for(var u,f,i=0;i<n.length-1;i++)for(u=i;u<t.length-1;u++){if(n===t){if(1===Math.abs(i-u))continue;if(0===i&&u===n.length-2&&n[i][0]===n[n.length-1][0]&&n[i][1]===n[n.length-1][1])continue}f=adt(n[i][0],n[i][1],n[i+1][0],n[i+1][1],t[u][0],t[u][1],t[u+1][0],t[u+1][1]);f&&r.features.push(ft([f[0],f[1]]))}})}),r};n.length=bit;n.lengthToDegrees=td;n.lengthToRadians=sv;n.lineArc=fct;n.lineChunk=function(n,t,i){var u,f,r;if(!tr(i=i||{}))throw new Error("options is invalid");if(u=i.units,f=i.reverse,!n)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");return r=[],sf(n,function(n){f&&(n.geometry.coordinates=n.geometry.coordinates.reverse()),function(n,t,i,r){var e=bit(n,{units:i}),f,u;if(e<=t)return r(n);for(f=e/t,Number.isInteger(f)||(f=Math.floor(f)+1),u=0;u<f;u++)r(wht(n,t*u,t*(u+1),{units:i}),u)}(n,t,u,function(n){r.push(n)})}),b(r)};n.lineDistance=bit;n.lineEach=utt;n.lineIntersect=sl;n.lineOffset=function(n,t,i){var r,u,e,f;if(!tr(i=i||{}))throw new Error("options is invalid");if(r=i.units,!n)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("distance is required");u=de(n);e=n.properties;switch(u){case"LineString":return ult(n,t,r);case"MultiLineString":return f=[],sf(n,function(n){f.push(ult(n,t,r).geometry.coordinates)}),ra(f,e);default:throw new Error("geometry "+u+" is not supported");}};n.lineOverlap=pct;n.lineReduce=ftt;n.lineSegment=yv;n.lineSlice=function(n,t,i){var s=d(i);if("LineString"!==de(i))throw new Error("line must be a LineString");for(var r,u=hl(i,n),f=hl(i,t),e=[(r=u.properties.index<=f.properties.index?[u,f]:[f,u])[0].geometry.coordinates],o=r[0].properties.index+1;o<r[1].properties.index+1;o++)e.push(s[o]);return e.push(r[1].geometry.coordinates),gi(e,i.properties)};n.lineSliceAlong=wht;n.lineSplit=function(n,t){var u,i,r;if(!n)throw new Error("line is required");if(!t)throw new Error("splitter is required");if(u=de(n),i=de(t),"LineString"!==u)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");r=nct(t,{precision:7});switch(i){case"Point":return trt(n,r);case"MultiPoint":return rct(n,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return rct(n,sl(n,r))}};n.lineString=gi;n.lineStringToPolygon=hct;n.lineStrings=cet;n.lineToPolygon=hct;n.mask=function(n,t){var i,r=hii(t),u=null;return u="FeatureCollection"===n.type?fwt(2===(i=n).features.length?ll.union(i.features[0].geometry.coordinates,i.features[1].geometry.coordinates):ll.union.apply(ll,i.features.map(function(n){return n.geometry.coordinates}))):fwt(ll.union(n.geometry.coordinates)),u.geometry.coordinates.forEach(function(n){r.geometry.coordinates.push(n[0])}),r};n.meta=hwt;n.midpoint=function(n,t){return ec(n,ir(n,t)/2,ol(n,t))};n.moranIndex=function(n,t){var w=t.inputField,b=t.threshold||1e5,k=t.p||2,d=t.binary||!1,f=pat(n,{alpha:t.alpha||-1,binary:d,p:k,standardization:t.standardization||!0,threshold:b}),o=[],h,i;ki(n,function(n){var t=n.properties||{};o.push(t[w])});for(var c=wat(o),g=function(n){for(var u,f=wat(n),i=0,t=0,r=n;t<r.length;t++)u=r[t],i+=Math.pow(u-f,2);return i/n.length}(o),l=0,e=0,a=0,v=0,u=f.length,r=0;r<u;r++){for(h=0,i=0;i<u;i++)l+=f[r][i]*(o[r]-c)*(o[i]-c),e+=f[r][i],a+=Math.pow(f[r][i]+f[i][r],2),h+=f[r][i]+f[i][r];v+=Math.pow(h,2)}var y=l/e/g,s=-1/(u-1),nt=(u*u*(a*=.5)-u*v+e*e*3)/((u-1)*(u+1)*e*e)-s*s,p=Math.sqrt(nt);return{expectedMoranIndex:s,moranIndex:y,stdNorm:p,zNorm:(y-s)/p}};n.multiLineString=ra;n.multiPoint=pw;n.multiPolygon=eo;n.nearest=vd;n.nearestPoint=vd;n.nearestPointOnLine=hl;n.nearestPointToLine=function(n,t,i){var u,r;void 0===i&&(i={});var e=i.units,o=i.properties||{},f=function(n){var t=[];switch(n.geometry?n.geometry.type:n.type){case"GeometryCollection":return oo(n,function(n){"Point"===n.type&&t.push({type:"Feature",properties:{},geometry:n})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return n.features=n.features.filter(function(n){return"Point"===n.geometry.type}),n;default:throw new Error("points must be a Point Collection");}}(n);if(!f.features.length)throw new Error("points must contain features");if(!t)throw new Error("line is required");if("LineString"!==de(t))throw new Error("line must be a LineString");return u=1/0,r=null,ki(f,function(n){var i=cht(n,t,{units:e});i<u&&(u=i,r=n)}),r&&(r.properties=ott({dist:u},r.properties,o)),r};n.planepoint=function(n,t){var a=er(n),u=hr(t).coordinates[0];if(u.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var l=t.properties||{},v=l.a,y=l.b,p=l.c,i=a[0],r=a[1],f=u[0][0],e=u[0][1],w=void 0!==v?v:u[0][2],o=u[1][0],s=u[1][1],b=void 0!==y?y:u[1][2],h=u[2][0],c=u[2][1],k=void 0!==p?p:u[2][2];return(k*(i-f)*(r-s)+w*(i-o)*(r-c)+b*(i-h)*(r-e)-b*(i-f)*(r-c)-k*(i-o)*(r-e)-w*(i-h)*(r-s))/((i-f)*(r-s)+(i-o)*(r-c)+(i-h)*(r-e)-(i-f)*(r-c)-(i-o)*(r-e)-(i-h)*(r-s))};n.point=ft;n.pointGrid=ght;n.pointOnFeature=aht;n.pointOnLine=hl;n.pointOnSurface=aht;n.pointToLineDistance=cht;n.points=set;n.pointsWithinPolygon=ptt;n.polygon=ot;n.polygonSmooth=function(n,t){var i=[],r=t.iterations||1;if(!n)throw new Error("inputPolys is required");return oo(n,function(n,t,u){var f,e,o,s,h;switch(n.type){case"Polygon":for(f=[[]],s=0;s<r;s++)o=[[]],e=n,s>0&&(e=ot(f).geometry),bnt(e,o),f=o.slice(0);i.push(ot(f,u));break;case"MultiPolygon":for(f=[[[]]],h=0;h<r;h++)o=[[[]]],e=n,h>0&&(e=eo(f).geometry),knt(e,o),f=o.slice(0);i.push(eo(f,u));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon");}}),b(i)};n.polygonTangents=function(n,t){var f,u,w,e,r=d(n),i=d(t),o=ou(t),s=0,l=null,a,p,c;switch(r[0]>o[0]&&r[0]<o[2]&&r[1]>o[1]&&r[1]<o[3]&&(s=(l=vd(n,ld(t))).properties.featureIndex),de(t)){case"Polygon":f=i[0][s];u=i[0][0];null!==l&&l.geometry.coordinates[1]<r[1]&&(u=i[0][s]);e=lb(i[0][0],i[0][i[0].length-1],r);a=dct(i[0],r,e,w,f,u);f=a[0];u=a[1];break;case"MultiPolygon":for(var v=0,y=0,k=0,h=0;h<i[0].length;h++){for(v=h,p=!1,c=0;c<i[0][h].length;c++){if(y=c,k===s){p=!0;break}k++}if(p)break}f=i[0][v][y];u=i[0][v][y];e=lb(i[0][0][0],i[0][0][i[0][0].length-1],r);i.forEach(function(n){var t=dct(n[0],r,e,w,f,u);f=t[0];u=t[1]})}return b([ft(f),ft(u)])};n.polygonToLine=cb;n.polygonToLineString=cb;n.polygonize=function(n){var i=cgt.fromGeoJson(n),r,t;return i.deleteDangles(),i.deleteCutEdges(),r=[],t=[],i.getEdgeRings().filter(function(n){return n.isValid()}).forEach(function(n){n.isHole()?r.push(n):t.push(n)}),r.forEach(function(n){olt.findEdgeRingContaining(n,t)&&t.push(n)}),b(t.map(function(n){return n.toPolygon()}))};n.polygons=het;n.projection=tvt;n.propEach=ntt;n.propReduce=wet;n.propertiesContainsFilter=fut;n.radians2degrees=ua;n.radiansToDegrees=ua;n.radiansToDistance=vy;n.radiansToLength=vy;n.random=svt;n.randomLineString=fvt;n.randomPoint=rvt;n.randomPolygon=uvt;n.randomPosition=kb;n.rewind=function(n,t){var i,r,u;if(!tr(t=t||{}))throw new Error("options is invalid");if(i=t.reverse||!1,r=t.mutate||!1,!n)throw new Error("<geojson> is required");if("boolean"!=typeof i)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(n=kf(n));u=[];switch(n.type){case"GeometryCollection":return oo(n,function(n){gd(n,i)}),n;case"FeatureCollection":return ki(n,function(n){ki(gd(n,i),function(n){u.push(n)})}),b(u)}return gd(n,i)};n.rhumbBearing=pv;n.rhumbDestination=ip;n.rhumbDistance=pd;n.round=aet;n.sample=function(n,t){if(!n)throw new Error("featurecollection is required");if(null==t)throw new Error("num is required");if("number"!=typeof t)throw new Error("num must be a number");return b(function(n,t){for(var u,f,i=n.slice(0),r=n.length,e=r-t;r-->e;)u=i[f=Math.floor((r+1)*Math.random())],i[f]=i[r],i[r]=u;return i.slice(e)}(n.features,t))};n.sector=function(n,t,i,r,u){var e;if(!tr(u=u||{}))throw new Error("options is invalid");if(e=u.properties,!n)throw new Error("center is required");if(null==i)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if("object"!=typeof u)throw new Error("options must be an object");if(bct(i)===bct(r))return fit(n,t,u);var o=d(n),s=fct(n,t,i,r,u),f=[[o]];return ru(s,function(n){f[0].push(n)}),f[0].push(o),ot(f,e)};n.segmentEach=fl;n.segmentReduce=rtt;n.shortestPath=function(n,t,i){var h,c,e,r,p,w,rt,ut;if(!tr(i=i||{}))throw new Error("options is invalid");var u=i.resolution,wt=i.minDistance,f=i.obstacles||b([]);if(!n)throw new Error("start is required");if(!t)throw new Error("end is required");if(u&&!tf(u)||u<=0)throw new Error("options.resolution must be a number, greater than 0");if(wt)throw new Error("options.minDistance is not yet implemented");h=er(n);c=er(t);switch(n=ft(h),t=ft(c),de(f)){case"FeatureCollection":if(0===f.features.length)return gi([h,c]);break;case"Polygon":f=b([yu(hr(f))]);break;default:throw new Error("invalid obstacles");}e=f;e.features.push(n);e.features.push(t);r=ou(ilt(uit(ou(e)),1.15));u||(u=ir([r[0],r[1]],[r[2],r[1]],i)/100);e.features.pop();e.features.pop();for(var o=r[0],s=r[1],l=r[2],a=r[3],k=u/ir([o,s],[l,s],i)*(l-o),d=u/ir([o,s],[o,a],i)*(a-s),st=l-o,ht=a-s,bt=Math.floor(st/k),kt=Math.floor(ht/d),dt=(st-bt*k)/2,ct=[],lt=[],g=[],nt=[],at=1/0,vt=1/0,v=a-(ht-kt*d)/2,tt=0;v>=s;){for(var yt=[],pt=[],y=o+dt,it=0;y<=l;)p=ft([y,v]),w=rnt(p,f),yt.push(w?0:1),pt.push(y+"|"+v),rt=ir(p,n),!w&&rt<at&&(at=rt,g={x:it,y:tt}),ut=ir(p,t),!w&&ut<vt&&(vt=ut,nt={x:it,y:tt}),y+=k,it++;lt.push(yt);ct.push(pt);v-=d;tt++}var et=new rp(lt,{diagonal:!0}),gt=et.grid[g.y][g.x],ni=et.grid[nt.y][nt.x],ti=ab.search(et,gt,ni),ot=[h];return ti.forEach(function(n){var t=ct[n.x][n.y].split("|");ot.push([+t[0],+t[1]])}),ot.push(c),av(gi(ot))};n.simplify=function(n,t){if(!tr(t=t||{}))throw new Error("options is invalid");var i=void 0!==t.tolerance?t.tolerance:1,r=t.highQuality||!1,u=t.mutate||!1;if(!n)throw new Error("geojson is required");if(i&&i<0)throw new Error("invalid tolerance");return!0!==u&&(n=kf(n)),oo(n,function(n){!function(n,t,i){var u=n.type,r;if("Point"===u||"MultiPoint"===u)return n;av(n,!0);r=n.coordinates;switch(u){case"LineString":n.coordinates=lst(r,t,i);break;case"MultiLineString":n.coordinates=r.map(function(n){return lst(n,t,i)});break;case"Polygon":n.coordinates=ast(r,t,i);break;case"MultiPolygon":n.coordinates=r.map(function(n){return ast(n,t,i)})}}(n,i,r)}),n};n.square=wst;n.squareGrid=ewt;n.standardDeviationalEllipse=function(n,t){if(!tr(t=t||{}))throw new Error("options is invalid");var s=t.steps||64,u=t.weight,h=t.properties||{};if(!tf(s))throw new Error("steps must be a number");if(!tr(h))throw new Error("properties must be a number");var c=yy(n).length,r=iut(n,{weight:u}),l=0,a=0,f=0;ki(n,function(n){var i=n.properties[u]||1,t=yat(d(n),d(r));l+=Math.pow(t.x,2)*i;a+=Math.pow(t.y,2)*i;f+=t.x*t.y*i});var v=l-a,nt=Math.sqrt(Math.pow(v,2)+4*Math.pow(f,2)),tt=2*f,i=Math.atan((v+nt)/tt),y=180*i/Math.PI,p=0,w=0,e=0;ki(n,function(n){var f=n.properties[u]||1,t=yat(d(n),d(r));p+=Math.pow(t.x*Math.cos(i)-t.y*Math.sin(i),2)*f;w+=Math.pow(t.x*Math.sin(i)+t.y*Math.cos(i),2)*f;e+=f});var k=Math.sqrt(2*p/e),g=Math.sqrt(2*w/e),o=lat(r,k,g,{units:"degrees",angle:y,steps:s,properties:h}),it=ptt(n,b([o])),rt={meanCenterCoordinates:d(r),semiMajorAxis:k,semiMinorAxis:g,numberOfFeatures:c,angle:y,percentageWithinEllipse:100*yy(it).length/c};return o.properties.standardDeviationalEllipse=rt,o};n.tag=function(n,t,i,r){return n=kf(n),t=kf(t),ki(n,function(n){n.properties||(n.properties={});ki(t,function(t){void 0===n.properties[r]&&cr(n,t)&&(n.properties[r]=t.properties[i])})}),n};n.tesselate=function(n){if(!n.geometry||"Polygon"!==n.geometry.type&&"MultiPolygon"!==n.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return"Polygon"===n.geometry.type?t.features=tht(n.geometry.coordinates):n.geometry.coordinates.forEach(function(n){t.features=t.features.concat(tht(n))}),t};n.tin=tst;n.toMercator=bat;n.toWgs84=kat;n.transformRotate=tlt;n.transformScale=ilt;n.transformTranslate=function(n,t,i,r){if(!tr(r=r||{}))throw new Error("options is invalid");var e=r.units,u=r.zTranslation,f=r.mutate;if(!n)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("distance is required");if(u&&"number"!=typeof u&&isNaN(u))throw new Error("zTranslation is not a number");if(u=void 0!==u?u:0,0===t&&0===u)return n;if(null==i||isNaN(i))throw new Error("direction is required");return t<0&&(t=-t,i+=180),!1!==f&&void 0!==f||(n=kf(n)),ru(n,function(n){var r=d(ip(n,t,i,{units:e}));n[0]=r[0];n[1]=r[1];u&&3===n.length&&(n[2]+=u)}),n};n.triangleGrid=owt;n.truncate=nct;n.union=function(n,t,i){void 0===i&&(i={});var u=hr(n),f=hr(t),r=ll.union(u.coordinates,f.coordinates);return 0===r.length?null:1===r.length?ot(r[0],i.properties):eo(r,i.properties)};n.unitsFactors=eet;n.unkinkPolygon=function(n){var t=[];return sf(n,function(n){"Polygon"===n.geometry.type&&ki(wdt(n),function(i){t.push(ot(i.geometry.coordinates,n.properties))})}),b(t)};n.validateBBox=yet;n.validateId=pet;n.voronoi=function(n,t){if(!tr(t=t||{}))throw new Error("options is invalid");var i=t.bbox||[-180,-85,180,85];if(!n)throw new Error("points is required");if(!Array.isArray(i))throw new Error("bbox is invalid");return el(n,"Point","points"),b(function(){function n(n){return new tut(n.map(function(t,u){var f=[Math.round(i(t,u,n)/lr)*lr,Math.round(r(t,u,n)/lr)*lr];return f.index=u,f.data=t,f}),t)}var i=unt,r=fnt,t=null;return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(t){return arguments.length?(i="function"==typeof t?t:fat(+t),n):i},n.y=function(t){return arguments.length?(r="function"==typeof t?t:fat(+t),n):r},n.extent=function(i){return arguments.length?(t=null==i?null:[[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]],n):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},n.size=function(i){return arguments.length?(t=null==i?null:[[0,0],[+i[0],+i[1]]],n):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},n}().x(function(n){return n.geometry.coordinates[0]}).y(function(n){return n.geometry.coordinates[1]}).extent([[i[0],i[1]],[i[2],i[3]]]).polygons(n.features).map(wnt))};n.within=ptt;Object.defineProperty(n,"__esModule",{value:!0})});